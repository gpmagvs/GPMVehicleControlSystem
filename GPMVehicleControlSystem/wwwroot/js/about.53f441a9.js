"use strict";(self["webpackChunkagvs_ui"]=self["webpackChunkagvs_ui"]||[]).push([[443],{9175:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var o=a(3396),l=a(7139);const s={class:"p-5"},n={class:"border rounded p-3 text-start w-100"},i=(0,o._)("h3",null,"FORK 測試",-1),u={class:"d-flex flex-row"},r={class:"my-1"},d={class:"my-1"};function p(e,t,a,p,m,c){const _=(0,o.up)("el-divider"),f=(0,o.up)("el-input-number"),w=(0,o.up)("el-form-item"),k=(0,o.up)("el-switch"),h=(0,o.up)("el-tag"),b=(0,o.up)("b-button"),W=(0,o.up)("el-form"),v=(0,o.up)("ForkAGV3D"),V=(0,o.up)("b-modal");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",n,[i,(0,o.Wm)(_),(0,o._)("div",u,[(0,o.Wm)(W,{"label-width":"160px","label-position":"left"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{label:"測試LOOP"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:m.option.loopNum,"onUpdate:modelValue":t[0]||(t[0]=e=>m.option.loopNum=e),min:"1",max:"1000"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"上點位位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:m.option.up_limit_pose,"onUpdate:modelValue":t[1]||(t[1]=e=>m.option.up_limit_pose=e),min:"0",max:"176.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"下點位位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:m.option.down_limit_pose,"onUpdate:modelValue":t[2]||(t[2]=e=>m.option.down_limit_pose=e),min:"0",max:"170.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"速度"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:m.option.speed,"onUpdate:modelValue":t[3]||(t[3]=e=>m.option.speed=e),min:"0.1",max:"1.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"測試前初始化"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:m.option.initalizeBeforeTest,"onUpdate:modelValue":t[4]||(t[4]=e=>m.option.initalizeBeforeTest=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"使用Random位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:m.option.useRandomPose,"onUpdate:modelValue":t[5]||(t[5]=e=>m.option.useRandomPose=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"次數達四分位數暫停"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:m.option.pauseWhenReachQuarter,"onUpdate:modelValue":t[6]||(t[6]=e=>m.option.pauseWhenReachQuarter=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(w,{label:"Current Position"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(m.current_pose),1)])),_:1})])),_:1}),(0,o.Wm)(w,{label:"測試狀態"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(m.forkTestState.state),1)])),_:1})])),_:1}),(0,o.Wm)(w,{label:"Fork動作"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(m.forkTestState.fork_action),1)])),_:1})])),_:1}),(0,o.Wm)(w,{label:"已完成次數"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(m.forkTestState.complete_loop_num)+"/"+(0,l.zw)(m.option.loopNum),1)])),_:1})])),_:1}),(0,o._)("div",r,[(0,o.Wm)(b,{disabled:c.start_btn_disabled,class:"w-100",variant:"primary",onClick:c.ForkTestStart},{default:(0,o.w5)((()=>[(0,o.Uk)("Start")])),_:1},8,["disabled","onClick"])]),(0,o._)("div",d,[(0,o.Wm)(b,{disabled:c.abort_btn_disabled,class:"w-100",variant:"danger",onClick:c.ForkTestAbort},{default:(0,o.w5)((()=>[(0,o.Uk)("中斷")])),_:1},8,["disabled","onClick"])])])),_:1}),(0,o.Wm)(v,{class:"mx-5"})]),(0,o.Wm)(V,{modelValue:c.show_reject_modal,"onUpdate:modelValue":t[7]||(t[7]=e=>c.show_reject_modal=e),centered:!0,"ok-only":!0},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,l.zw)(m.ack_response.Message),1)])),_:1},8,["modelValue"]),(0,o.Wm)(V,{modelValue:c.show_test_paused_model,"onUpdate:modelValue":t[8]||(t[8]=e=>c.show_test_paused_model=e),centered:!0,title:"測試已達四分位數","cancel-title":"中斷","ok-title":"繼續","no-close-on-backdrop":!0,"no-close-on-esc":!0,"cancel-variant":"danger",onOk:c.ContiunTestWhenPause,onCancel:c.ForkTestAbort},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,l.zw)(`測試暫停中，已達${m.forkTestState.complete_loop_num}`),1)])),_:1},8,["modelValue","onOk","onCancel"])])])}var m=a(7327),c=a(6265),_=a.n(c),f=a(663),w=_().create({baseURL:f.Z.backend_host});class k{constructor(){(0,m.Z)(this,"loopNum",100),(0,m.Z)(this,"up_limit_pose",120),(0,m.Z)(this,"down_limit_pose",0),(0,m.Z)(this,"speed",1),(0,m.Z)(this,"useRandomPose",!0),(0,m.Z)(this,"initalizeBeforeTest",!1),(0,m.Z)(this,"pauseWhenReachQuarter",!0)}}class h{}let b={async Start(e){console.warn(e);var t=await w.post("/api/RDTEST/fork_test/start",e);return t.data},async Abort(){var e=await w.post("/api/RDTEST/fork_test/abort");return e.data},async Continue(){var e=await w.post("/api/RDTEST/fork_test/continue");return e.data}};var W=a(487),v=a(3259),V=a(4425),S={components:{ForkAGV3D:V.Z},data(){return{current_pose:-1,option:new k,forkTestState:new h,ack_response:{Success:!0,Message:""}}},methods:{async ForkTestStart(){this.ack_response=await b.Start(this.option),localStorage.setItem("fork-test-options",JSON.stringify(this.option))},async ForkTestAbort(){this.ack_response=await b.Abort()},async ContiunTestWhenPause(){this.ack_response=await b.Continue()}},computed:{abort_btn_disabled(){return"RUNNING"!=this.forkTestState.state},start_btn_disabled(){return"RUNNING"==this.forkTestState.state},show_reject_modal(){return 0==this.ack_response.Success},show_test_paused_model(){return"PAUSE"==this.forkTestState.state}},mounted(){v.Z.on("/z_axis_position",(e=>{this.current_pose=e}));var e=new W.Z("fork_test_state");e.Connect(),e.wssocket.onmessage=e=>{var t=JSON.parse(e.data);this.forkTestState=t};var t=localStorage.getItem("fork-test-options");t&&(this.option=JSON.parse(t))}},T=a(89);const U=(0,T.Z)(S,[["render",p]]);var y=U}}]);
//# sourceMappingURL=about.53f441a9.js.map