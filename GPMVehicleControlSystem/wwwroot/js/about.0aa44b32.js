"use strict";(self["webpackChunkagvs_ui"]=self["webpackChunkagvs_ui"]||[]).push([[443],{57848:function(e,t,a){a.r(t),a.d(t,{default:function(){return D}});var o=a(73396),l=a(87139);const s={class:"p-1 bg-light text-dark"},n={class:"border rounded p-3 text-start w-100"},r=(0,o._)("h3",null,"FORK 測試",-1),i={class:"d-flex flex-row"},d={class:"my-1"},u={class:"my-1"},m={class:"px-3"},_={class:"text-center px-5"},p={class:"text-center px-5"},c={class:"text-center px-5"},w=(0,o._)("span",{class:"mx-3"},"秒",-1),f={class:"text-start"};function v(e,t,a,v,k,b){const h=(0,o.up)("el-divider"),W=(0,o.up)("el-input-number"),V=(0,o.up)("el-form-item"),T=(0,o.up)("el-switch"),S=(0,o.up)("el-tag"),y=(0,o.up)("b-button"),x=(0,o.up)("el-form"),U=(0,o.up)("ForkAGV3D"),g=(0,o.up)("b-modal"),C=(0,o.up)("el-tab-pane"),R=(0,o.up)("el-button"),N=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(N,{modelValue:k.selected_tab,"onUpdate:modelValue":t[13]||(t[13]=e=>k.selected_tab=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{name:"fork_test",label:"Fork Test"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[r,(0,o.Wm)(h),(0,o._)("div",i,[(0,o.Wm)(x,{"label-width":"160px","label-position":"left"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{label:"測試LOOP"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.option.loopNum,"onUpdate:modelValue":t[0]||(t[0]=e=>k.option.loopNum=e),min:"1",max:"1000"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"上點位位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.option.up_limit_pose,"onUpdate:modelValue":t[1]||(t[1]=e=>k.option.up_limit_pose=e),min:"0",max:"176.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"下點位位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.option.down_limit_pose,"onUpdate:modelValue":t[2]||(t[2]=e=>k.option.down_limit_pose=e),min:"0",max:"170.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"速度"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.option.speed,"onUpdate:modelValue":t[3]||(t[3]=e=>k.option.speed=e),min:"0.1",max:"1.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"測試前初始化"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{modelValue:k.option.initalizeBeforeTest,"onUpdate:modelValue":t[4]||(t[4]=e=>k.option.initalizeBeforeTest=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"使用Random位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{modelValue:k.option.useRandomPose,"onUpdate:modelValue":t[5]||(t[5]=e=>k.option.useRandomPose=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"次數達四分位數暫停"},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{modelValue:k.option.pauseWhenReachQuarter,"onUpdate:modelValue":t[6]||(t[6]=e=>k.option.pauseWhenReachQuarter=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"Current Position"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{style:{width:"100px"},effect:"dark",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(k.current_pose),1)])),_:1})])),_:1}),(0,o.Wm)(V,{label:"測試狀態"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{style:{width:"100px"},effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(k.forkTestState.state),1)])),_:1})])),_:1}),(0,o.Wm)(V,{label:"Fork動作"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{style:{width:"100px"},effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(k.forkTestState.fork_action),1)])),_:1})])),_:1}),(0,o.Wm)(V,{label:"已完成次數"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{style:{width:"100px"},effect:"dark",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(k.forkTestState.complete_loop_num)+"/"+(0,l.zw)(k.option.loopNum),1)])),_:1})])),_:1}),(0,o._)("div",d,[(0,o.Wm)(y,{disabled:b.start_btn_disabled,class:"w-100",variant:"primary",onClick:b.ForkTestStart},{default:(0,o.w5)((()=>[(0,o.Uk)("Start")])),_:1},8,["disabled","onClick"])]),(0,o._)("div",u,[(0,o.Wm)(y,{disabled:b.abort_btn_disabled,class:"w-100",variant:"danger",onClick:b.ForkTestAbort},{default:(0,o.w5)((()=>[(0,o.Uk)("中斷")])),_:1},8,["disabled","onClick"])])])),_:1}),(0,o.Wm)(U,{class:"mx-5"})]),(0,o.Wm)(g,{modelValue:b.show_reject_modal,"onUpdate:modelValue":t[7]||(t[7]=e=>b.show_reject_modal=e),centered:!0,"ok-only":!0},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,l.zw)(k.ack_response.Message),1)])),_:1},8,["modelValue"]),(0,o.Wm)(g,{modelValue:b.show_test_paused_model,"onUpdate:modelValue":t[8]||(t[8]=e=>b.show_test_paused_model=e),centered:!0,title:"測試已達四分位數","cancel-title":"中斷","ok-title":"繼續","no-close-on-backdrop":!0,"no-close-on-esc":!0,"cancel-variant":"danger",onOk:b.ContiunTestWhenPause,onCancel:b.ForkTestAbort},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,l.zw)(`測試暫停中，已達${k.forkTestState.complete_loop_num}`),1)])),_:1},8,["modelValue","onOk","onCancel"])])])),_:1}),(0,o.Wm)(C,{name:"move_test",label:"Move Test"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(x,{"label-width":"110","label-position":"left"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{label:"狀態"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{effect:"dark",class:"text-center px-5",type:1==b.rotation_test_state?"warning":"success"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(1==b.rotation_test_state?"IDLE":"RUNNING"),1)])),_:1},8,["type"])])),_:1}),(0,o.Wm)(V,{label:"角度"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.move_test_options.theta_move,"onUpdate:modelValue":t[9]||(t[9]=e=>k.move_test_options.theta_move=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"當前角度"},{default:(0,o.w5)((()=>[(0,o._)("div",_,(0,l.zw)(b.current_theta),1)])),_:1}),(0,o.Wm)(V,{label:"當前TAG"},{default:(0,o.w5)((()=>[(0,o._)("div",p,(0,l.zw)(b.current_tag),1)])),_:1}),(0,o.Wm)(V,{label:"持續時間(秒)"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.move_test_options.duration,"onUpdate:modelValue":t[10]||(t[10]=e=>k.move_test_options.duration=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"停滯時間(秒)"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{modelValue:k.move_test_options.delay_time,"onUpdate:modelValue":t[11]||(t[11]=e=>k.move_test_options.delay_time=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"旋轉速度"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{step:.1,modelValue:k.move_test_options.rotation_speed,"onUpdate:modelValue":t[12]||(t[12]=e=>k.move_test_options.rotation_speed=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{label:"歷時"},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.Uk)((0,l.zw)(b.rotation_test_period)+" ",1),w])])),_:1})])),_:1}),(0,o._)("div",f,[(0,o.Wm)(R,{onClick:b.HandleMoveTestStart,style:{width:"125px"},type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Start")])),_:1},8,["onClick"]),(0,o.Wm)(R,{onClick:b.HandleMoveTestStop,style:{width:"125px"},type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("Stop")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])])}var k=a(47327),b=a(56265),h=a.n(b),W=a(663),V=h().create({baseURL:W.Z.backend_host});class T{constructor(){(0,k.Z)(this,"loopNum",100),(0,k.Z)(this,"up_limit_pose",120),(0,k.Z)(this,"down_limit_pose",0),(0,k.Z)(this,"speed",1),(0,k.Z)(this,"useRandomPose",!0),(0,k.Z)(this,"initalizeBeforeTest",!1),(0,k.Z)(this,"pauseWhenReachQuarter",!0)}}class S{}let y={async Start(e){console.warn(e);var t=await V.post("/api/RDTEST/fork_test/start",e);return t.data},async Abort(){var e=await V.post("/api/RDTEST/fork_test/abort");return e.data},async Continue(){var e=await V.post("/api/RDTEST/fork_test/continue");return e.data}},x={async Start(e){console.warn(e);var t=await V.post("/api/RDTEST/MoveTest",e);return t.data},async Stop(){var e=await V.post("/api/RDTEST/MoveTest/Stop");return e.data}};var U=a(60487),g=a(53259),C=a(54425),R=a(46750),N={components:{ForkAGV3D:C.Z},data(){return{current_pose:-1,option:new T,forkTestState:new S,ack_response:{Success:!0,Message:""},selected_tab:"move_test",move_test_options:{theta_move:90,duration:60,delay_time:1,rotation_speed:.3},timer:void 0}},methods:{async ForkTestStart(){this.ack_response=await y.Start(this.option),localStorage.setItem("fork-test-options",JSON.stringify(this.option))},async ForkTestAbort(){this.ack_response=await y.Abort()},async ContiunTestWhenPause(){this.ack_response=await y.Continue()},async HandleMoveTestStart(){var e=await x.Start(this.move_test_options);e.result?(this.rotation_test_period=0,this.timer=setInterval((()=>{this.rotation_test_period+=1}),1e3)):this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},HandleMoveTestStop(){x.Stop(),clearInterval(this.timer)}},computed:{abort_btn_disabled(){return"RUNNING"!=this.forkTestState.state},start_btn_disabled(){return"RUNNING"==this.forkTestState.state},show_reject_modal(){return 0==this.ack_response.Success},show_test_paused_model(){return"PAUSE"==this.forkTestState.state},current_theta(){return R.q$.getters.CurrentAngle},current_tag(){return R.q$.getters.CurrentTag},rotation_test_period(){return R.tc.getters.testData.move_test.duration},rotation_test_state(){return R.tc.getters.testData.move_test.state}},mounted(){g.Z.on("/z_axis_position",(e=>{this.current_pose=e}));var e=new U.Z("fork_test_state");e.Connect(),e.wssocket.onmessage=e=>{var t=JSON.parse(e.data);this.forkTestState=t};var t=localStorage.getItem("fork-test-options");t&&(this.option=JSON.parse(t))}},z=a(40089);const Z=(0,z.Z)(N,[["render",v]]);var D=Z}}]);
//# sourceMappingURL=about.0aa44b32.js.map