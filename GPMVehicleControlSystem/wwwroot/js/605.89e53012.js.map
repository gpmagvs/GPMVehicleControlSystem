{"version":3,"file":"js/605.89e53012.js","mappings":"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","sources":["webpack://agvs_ui/./src/components/Controller/ForkController.vue","webpack://agvs_ui/./src/components/Controller/ForkController.vue?ff4a"],"sourcesContent":["<template>\r\n  <div class=\"fork-controller bg-dark\">\r\n    <div class=\"d-flex flex-row\">\r\n      <div>\r\n        <div @mousedown=\"ForkClick\" v-bind:style=\"ForkStyle\" class=\"fork\">\r\n          <span>{{ ForkHeight }} mm</span>\r\n        </div>\r\n        <img src=\"/images/agv_lift.png\" width=\"300\" alt />\r\n      </div>\r\n      <div class=\"flex-fill\"></div>\r\n      <div class=\"control-buttons px-2 border m-1 d-flex flex-column justify-content-start\">\r\n        <span class=\"border-bottom\">升降控制</span>\r\n        <b-button @click=\"ForkAction('up')\" variant=\"primary my-1\">上點位</b-button>\r\n        <b-button @click=\"ForkAction('up')\" variant=\"primary my-1\">Up</b-button>\r\n        <b-button @click=\"ForkAction('home')\" variant=\"success my-1\">Home</b-button>\r\n        <b-button @click=\"ForkAction('stop')\" variant=\"danger my-1\">Stop</b-button>\r\n        <b-button @click=\"ForkAction('down')\" variant=\"primary my-1\">下</b-button>\r\n        <b-button @click=\"ForkAction('down')\" variant=\"primary my-1\">下點位</b-button>\r\n        <b-button @click=\"()=>{teach_data_visible=true}\" variant=\"warning my-1\">教點</b-button>\r\n      </div>\r\n      <div class=\"control-buttons px-2 border m-1 d-flex flex-column justify-content-start\">\r\n        <span class=\"border-bottom\">伸縮控制</span>\r\n        <b-button\r\n          :disabled=\"FORK_ARM_Status.IsArmAtEndPose&&!FORK_ARM_Status.IsArmAtHomePose\"\r\n          @click=\"ForkArmPoseControlHandler(true)\"\r\n          variant=\"primary my-1\"\r\n        >牙叉伸出</b-button>\r\n        <b-button\r\n          :disabled=\"FORK_ARM_Status.IsArmAtHomePose&&!FORK_ARM_Status.IsArmAtEndPose\"\r\n          @click=\"ForkArmPoseControlHandler(false)\"\r\n          variant=\"primary my-1\"\r\n        >牙叉縮回</b-button>\r\n        <b-button @click=\"ForkArmStopHandler\" variant=\"danger my-1\">牙叉停止動作</b-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog v-model=\"teach_data_visible\" draggable width=\"90%\">\r\n      <forkTeachEditor></forkTeachEditor>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ForkAPI } from '@/api/VMSAPI';\r\nimport { AGVStatusStore, ForkTeachStore, DIOStore } from '@/store'\r\nimport forkTeachEditor from '@/components/Operator/WorkStation/ForkTeachEditor.vue'\r\nexport default {\r\n  components: {\r\n    forkTeachEditor,\r\n  },\r\n  data() {\r\n    return {\r\n      isZAxisMoving: false,\r\n      show_teach_page: false,\r\n      hardware_limit_enable: true,\r\n      teach_data_visible: false\r\n    }\r\n  },\r\n  computed: {\r\n    ForkHeight() {\r\n      return AGVStatusStore.getters.ForkHeight\r\n    },\r\n    ForkStyle() {\r\n      return {\r\n        bottom: `${-380 + this.ForkHeight * 10}px`\r\n      }\r\n    }, FORK_ARM_Status() {\r\n      //{\r\n      //   IsArmAtHomePose: IsArmAtHomePose,\r\n      //   IsArmAtEndPose: IsArmAtEndPose\r\n      // }\r\n\r\n      return DIOStore.getters.Fork_ARM_States\r\n    }\r\n  },\r\n  methods: {\r\n    async ForkAction(action, pose = 0, speed = 0) {\r\n      this.isZAxisMoving = true;\r\n      var ret = await ForkAPI.Action(action, pose, speed);\r\n      this.isZAxisMoving = false;\r\n      if (!ret.confirm) {\r\n        this.$swal.fire({\r\n          text: ret.message,\r\n          icon: 'error',\r\n          title: '牙叉禁止操作'\r\n        })\r\n      }\r\n    },\r\n    async ForkArmPoseControlHandler(isExtend) {\r\n      if (isExtend)\r\n        await ForkAPI.ARM_Extend();\r\n      else\r\n        await ForkAPI.ARM_Shorten();\r\n    },\r\n    async ForkArmStopHandler() {\r\n      await ForkAPI.ARM_Stop();\r\n    },\r\n\r\n\r\n    ShowTeachView() {\r\n      if (this.$refs['fork_teach'])\r\n        this.$refs['fork_teach'].reload();\r\n      this.show_teach_page = true;\r\n    },\r\n    TeachDrawerClosingHandle() {\r\n      if (ForkTeachStore.getters.IsAnyChanged) {\r\n        this.$swal.fire({\r\n          icon: 'warning',\r\n          text: '教點資料已修改但尚未儲存，確定要離開?',\r\n          showConfirmButton: true,\r\n          showCancelButton: true\r\n        }).then(user_response => {\r\n          if (!user_response.isConfirmed) {\r\n            this.show_teach_page = true\r\n          }\r\n          else {\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.fork-controller {\r\n  .control-buttons {\r\n    width: 160px;\r\n    button {\r\n      height: 50px;\r\n    }\r\n    span {\r\n      color: grey;\r\n    }\r\n  }\r\n  padding-left: 30px;\r\n  .fork {\r\n    position: relative;\r\n    height: 30px;\r\n    width: 240px;\r\n    left: 60px;\r\n    bottom: -380px;\r\n    background-color: orange;\r\n    border-top-right-radius: 5px;\r\n    border-bottom-right-radius: 5px;\r\n\r\n    cursor: pointer;\r\n    span {\r\n      font-size: 30px;\r\n      position: relative;\r\n      bottom: 50px;\r\n      color: grey;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./ForkController.vue?vue&type=template&id=350425e9&scoped=true\"\nimport script from \"./ForkController.vue?vue&type=script&lang=js\"\nexport * from \"./ForkController.vue?vue&type=script&lang=js\"\n\nimport \"./ForkController.vue?vue&type=style&index=0&id=350425e9&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-350425e9\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","width","alt","_createElementBlock","_hoisted_1","_hoisted_2","onMousedown","_cache","args","_ctx","ForkClick","style","_normalizeStyle","$options","ForkStyle","_toDisplayString","ForkHeight","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createVNode","_component_b_button","onClick","$event","ForkAction","variant","$data","teach_data_visible","_hoisted_7","_hoisted_8","disabled","FORK_ARM_Status","IsArmAtEndPose","IsArmAtHomePose","ForkArmPoseControlHandler","ForkArmStopHandler","_component_el_dialog","draggable","_component_forkTeachEditor","components","forkTeachEditor","data","isZAxisMoving","show_teach_page","hardware_limit_enable","computed","AGVStatusStore","getters","bottom","this","DIOStore","Fork_ARM_States","methods","action","pose","speed","ret","ForkAPI","Action","confirm","$swal","fire","text","message","icon","title","isExtend","ARM_Extend","ARM_Shorten","ARM_Stop","ShowTeachView","$refs","reload","TeachDrawerClosingHandle","ForkTeachStore","IsAnyChanged","showConfirmButton","showCancelButton","then","user_response","isConfirmed","__exports__","render"],"sourceRoot":""}