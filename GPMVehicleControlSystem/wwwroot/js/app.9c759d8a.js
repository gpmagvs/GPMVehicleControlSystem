(function(){var e={46700:function(e,t,a){var s={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":85893,"./ss.js":85893,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id=46700},21495:function(e,t,a){"use strict";var s=a(47327);class n{constructor(e){(0,s.Z)(this,"BatteryLevel",3),(0,s.Z)(this,"IsCharging",!1),(0,s.Z)(this,"ChargeCurrent",0),(0,s.Z)(this,"IsError",!0),(0,s.Z)(this,"CircuitOpened",!1),(0,s.Z)(this,"BatteryID",0),(0,s.Z)(this,"SensorInfo",new i),this.BatteryLevel=e}}class i{constructor(){(0,s.Z)(this,"IsExistSensor1ON",!1),(0,s.Z)(this,"IsExistSensor2ON",!1),(0,s.Z)(this,"IsDockingSensor1ON",!1),(0,s.Z)(this,"IsDockingSensor2ON",!1),(0,s.Z)(this,"IsLockSensorON",!1),(0,s.Z)(this,"IsUnlockSensorON",!1)}}t.Z=n},69626:function(e,t){"use strict";class a{constructor(e,t,a,s){this.currentID=e,this.x=t,this.y=a,this.theata=s}}t.Z=a},81755:function(e,t){"use strict";class a{constructor(){this.X=0,this.Y=0,this.Theta=0,this.DestinPointID=1,this.Direction=0,this.LaserMode=0,this.Speed=1,this.UltrasonicDistance=30}}t.Z=a},47755:function(e,t){"use strict";class a{constructor(){this.LogFolder="GPM_AGV_LOG",this.AgvType=3,this.Version=1,this.SID="001:001:001",this.VehicleName="AGV_001",this.Connections={RosBridge:{IP:"127.0.0.1",Port:9090,Protocol_Interval_ms:5},Wago:{IP:"192.168.1.20",Port:502,Protocol_Interval_ms:50},AGVS:{IP:"1.1.1.222",Port:5500,Protocol_Interval_ms:5}},this.VMSParam={Notes:"",LocalIP:"127.0.0.1",Protocol:0,MapUrl:"http://1.1.1.1:5216/api/Map"},this.ActiveTrafficControl=!1,this.EQHandshakeBypass=!1,this.CST_READER_TRIGGER=!1,this.HasTrayCstReader=!0,this.HasRackCstReader=!1,this.Auto_Cleaer_CST_ID_Data_When_Has_Data_But_NO_Cargo=!1,this.Auto_Read_CST_ID_When_No_Data_But_Has_Cargo=!1,this.FrontLighterFlashWhenNormalMove=!1,this.CheckObstacleWhenForkInit=!0,this.LocalTaskCheckCargoExist=!1,this.SyncEQInfoFromAGVS=!1,this.CargoBiasDetectionWhenNormalMoving=!0,this.LDULD_Task_No_Entry=!1,this.WebKeyboardMoveControl=!1,this.CSTIDReadNotMatchSimulation=!1,this.CIMConn=!1,this.MeasureServiceSimulator=!1,this.ForkNoInitializeWhenPoseIsHome=!0,this.BuzzerOn=!0,this.EQHandshakeSimulationAutoRun=!0,this.LastVisitedTag=77,this.OrderInfoFetchSource=1,this.TagParkingTolerance=5,this.ActionTimeout=5,this.VehielLength=145,this.ModuleInfoTopicRevHandlePeriod=0,this.ModuleInfoTopicRevQueueSize=1,this.AGVsMessageEncoding="UTF-8",this.ForbidToOnlineTags=[],this.CheckEQDOStatusWorkStationTags=[],this.LDULD_Laser_Mode=0,this.Spin_Laser_Mode=5,this.StationNeedQueryVirtualID=[],this.MapParam={LocalMapFileName:"temp/Map_AOI2F.json"},this.EQHandshakeMethod=0,this.HandshakeIOFlickDelayTime=800,this.LOAD_OBS_DETECTION={Enable_Load:!1,Enable_UnLoad:!1,Duration:4,AlarmLevelWhenTrigger:0,Detection_Method:0},this.CST_EXIST_DETECTION={Before_In:!1,After_EQ_Busy_Off:!1},this.SensorBypass={BeltSensorBypass:!0,LeftSideLaserBypass:!1,RightSideLaserBypass:!1,AGVBodyLimitSensorBypass:!0,ForkFrontendObsSensorBypass:!1},this.EQHSTimeouts={TA1_Wait_L_U_REQ_ON:10,TA2_Wait_EQ_READY_ON:15,TA3_Wait_EQ_BUSY_ON:10,TA4_Wait_EQ_BUSY_OFF:90,TA5_Wait_L_U_REQ_OFF:10,TP_3_Wait_AGV_BUSY_OFF:90,TP_5_Wait_AGV_BUSY_OFF:90},this.CstReadFailAction=1,this.Cst_ID_Not_Match_Action=0,this.HandshakeFailWhenLoadFinish=1,this.InspectionAGV={CheckBatteryLockStateWhenInit:!1,ExchangeBatLevelThresholdVal:100,MeasureSimulation:!0,BatteryExhcnageSimulation:!0,BatteryChangeNum:1,BatExchangeTimeout:{TP1:60,TP2:10,TP3:30,TP4:30,TP5:2}},this.ForkAGV={ForkLifer_Enable:!0,VehielLengthWitchForkArmExtend:160,UplimitPose:35,DownlimitPose:0,UplimitPoseSettingMax:35,StandbyPose:10,HomePoseUseStandyPose:!0,IsPinMounted:!0,IsForkIsExtendable:!0,NoWaitForkArmFinishAndMoveOutInWorkStation:!0,NoWaitParkingFinishAndForkGoHomeWhenBackToSecondary:!0,NoWaitParkingFinishAndForkGoHomeWhenBackToSecondaryAtChargeStation:!0,ForkSaftyStratrgy:1,SaftyPositionHeight:20,ManualModeOperationSpeed:{MoveToPoseSpeed:.5},AutoModeOperationSpeed:{MoveToPoseSpeed:.5},ObsSensorPointType:0},this.Emulator={Move_Time_Mode:1,Move_Fixed_Time:.5},this.ModbusIO={IO_VAL_TYPE:0,Input_Read_Start:0,Input_Read_Num:8,Input_Write_Start:1,InputRegister_Read_Start:0,InputRegister_Read_Num:1,InputRegister_Write_Start:0},this.ImpactDetection={Enabled:!1,PitchErrorDetection:!1,ThresHold:2,PitchErrorThresHold:.707,PitchErrorAlarmLevel:0},this.BatteryModule={BatteryLogFolder:"C:\\Users\\jinwei\\Documents\\GPM LOG",Recharge_Circuit_Auto_Control_In_ManualMode:!0,ChargeWhenLevelLowerThanThreshold:!1,ChargeLevelThreshold:100,CutOffChargeRelayVoltageThreshodlval:28800,WaitChargeStartDelayTimeWhenReachChargeTaskFinish:20},this.LDULDParams={LsrObstacleDetectionEnable:!1,LsrObsLaserModeNumber:8,LsrObsDetectedAlarmLevel:0,LeaveWorkStationNeedSendRequestToAGVS:!1,LeaveWorkStationRequestTimeout:3,BypassFrontLaserWhenEntryEQ:!0},this.CargoExistSensorParams={TraySensorMounted:!0,RackSensorMounted:!1,RackSensorNumber:2,TraySensorNumber:4,SensorPointType:1},this.Advance={ShutDownPCWhenLowBatteryLevel:!1},this.ManualCheckCargoStatus={Enabled:!1,CheckPoints:[{Enabled:!0,CheckPointTag:29,Timeout:30,TriggerMoment:1},{Enabled:!0,CheckPointTag:77,Timeout:10,TriggerMoment:0},{Enabled:!0,CheckPointTag:91,Timeout:30,TriggerMoment:0}]},this.SoundsParams={audioPathes:{move:"/home/gpm/param/sounds/move.wav",alarm:"/home/gpm/param/sounds/alarm.wav",action:"/home/gpm/param/sounds/action.wav",batteryExchange:"/home/gpm/param/sounds/batteryExchange.wav",goToCharge:"/home/gpm/param/sounds/goto_charge.wav",measure:"/home/gpm/param/sounds/measure.wav",rotating:"/home/gpm/param/sounds/spining.wav",slowDown:"/home/gpm/param/sounds/slowDown.wav",rotating_voice:"/home/gpm/param/sounds/vehicle_rotating.wav",slowDown_voice:"/home/gpm/param/sounds/slow_down.wav",waitingCargoStatusCheck:"/home/gpm/param/sounds/waiting_cargo_status_check.wav",backward:"/home/gpm/param/sounds/waiting_cargo_status_check.wav"},slowDownAndRotatinSoundPlay:{Enable:!1,SoundPlayType:1}},this.IsUIDefault=!0,this.EditKey="default"}}t.Z=a},82274:function(e,t,a){"use strict";var s=a(47327),n=a(77780),i=a(21495);class o{constructor(){(0,s.Z)(this,"APPVersion","1.0.0"),(0,s.Z)(this,"Agv_Type",0),(0,s.Z)(this,"AutoMode",0),(0,s.Z)(this,"AGVC_ID",-1),(0,s.Z)(this,"AngularSpeed",0),(0,s.Z)(this,"Angle",0),(0,s.Z)(this,"AlarmCodes",[]),(0,s.Z)(this,"AGV_Direct","STOP"),(0,s.Z)(this,"InitializingStatusText",""),(0,s.Z)(this,"BCR_State_MoveBase",{state:0,tagID:0,xValue:0,yValue:0,theta:0}),(0,s.Z)(this,"BatteryStatus",new Array<i.Z>0),(0,s.Z)(this,"CarName","AGV"),(0,s.Z)(this,"CST_Data",""),(0,s.Z)(this,"Current_LASER_MODE","Bypass"),(0,s.Z)(this,"DriversStates",new Array<n.Z>0),(0,s.Z)(this,"IsAGVPoseError",!1),(0,s.Z)(this,"IsInitialized",!1),(0,s.Z)(this,"IsSystemIniting",!1),(0,s.Z)(this,"IsLDULD_No_Entry",!1),(0,s.Z)(this,"IsForkHeightAboveSafty",!1),(0,s.Z)(this,"IsForkExtenable",!1),(0,s.Z)(this,"Laser_Mode",0),(0,s.Z)(this,"Last_Visited_Tag",1),(0,s.Z)(this,"Last_Visit_MapPoint",{Name:"UNKNOWN"}),(0,s.Z)(this,"LocStatus",10),(0,s.Z)(this,"MapComparsionRate",-1),(0,s.Z)(this,"Mileage",0),(0,s.Z)(this,"MainState","DOWN"),(0,s.Z)(this,"NavInfo",{Destination:"",PathPlan:[],DestinationMapPoint:{Name:"UNKNOWN"},IsSegmentTaskExecuting:!1}),(0,s.Z)(this,"NewestAlarm",void 0),(0,s.Z)(this,"OnlineMode",0),(0,s.Z)(this,"Pose",{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0,w:0}}),(0,s.Z)(this,"Simulation",!1),(0,s.Z)(this,"SubState","DOWN"),(0,s.Z)(this,"Tag",-1),(0,s.Z)(this,"ZAxisDriverState",new n.Z),(0,s.Z)(this,"ZAxisActionName",""),(0,s.Z)(this,"ForkHasLoading",!1),(0,s.Z)(this,"CargoExist",!1),(0,s.Z)(this,"HandShakeTimers",{TA1_Wait_L_U_REQ_ON:0,TA2_Wait_EQ_READY_ON:0,TA3_Wait_EQ_BUSY_ON:0,TA4_Wait_EQ_BUSY_OFF:0,TA5_Wait_L_U_REQ_OFF:0}),(0,s.Z)(this,"SysLoading",new l),(0,s.Z)(this,"HandshakeStatus",new d),(0,s.Z)(this,"OrderInfo",new r),(0,s.Z)(this,"IMUMaxMinValRecord",new u),(0,s.Z)(this,"BuzzerState",{isPlaying:!1,player:"ros-sound-play",playingAudio:"alarm"})}}class r{constructor(){(0,s.Z)(this,"DestineName",""),(0,s.Z)(this,"SourceName",""),(0,s.Z)(this,"ActionName",999),(0,s.Z)(this,"DisplayText","")}}class l{constructor(){(0,s.Z)(this,"Memory",0),(0,s.Z)(this,"CPU",0)}}class d{constructor(){(0,s.Z)(this,"ConnectionType",0),(0,s.Z)(this,"Connected",!1)}}class u{constructor(){(0,s.Z)(this,"Time",""),(0,s.Z)(this,"Coordination",{x:0,y:0,z:0}),(0,s.Z)(this,"AccVal",{x:0,y:0,z:0}),(0,s.Z)(this,"MaxMag",0)}}t.ZP=o},33251:function(e,t,a){"use strict";a.d(t,{C8:function(){return n}});var s=a(47327);class n{constructor(e,t){(0,s.Z)(this,"Address",0),(0,s.Z)(this,"address_display",""),(0,s.Z)(this,"Name",""),(0,s.Z)(this,"State",!1),(0,s.Z)(this,"DigitalType",0),this.address_display=e,this.Name=t}}},77780:function(e,t,a){"use strict";var s=a(47327);class n{constructor(){(0,s.Z)(this,"name",""),(0,s.Z)(this,"state",0),(0,s.Z)(this,"errorCode",0),(0,s.Z)(this,"speed",0),(0,s.Z)(this,"position",0),(0,s.Z)(this,"voltage",0),(0,s.Z)(this,"outPercentage",0),(0,s.Z)(this,"outCurrent",0),(0,s.Z)(this,"overload",0)}}t.Z=n},87943:function(e,t){"use strict";class a{constructor(e="unknown",t=0,a=0,s="left-top",n=0){this.name=e,this.status=0,this.active=!0,this.visible=!0,this.always_show_info=!1,this.error_code=0,this.position={x:t,y:a,x_offset:n},this.textPosition=s,this.info_show_style={line1:{x_length:120,rotation:0}},this.module_data=""}}t.Z=a},93867:function(e,t,a){"use strict";var s=a(68210);a(45418),a(79517);let n={Success(e,t="bottom",a=3e3){(0,s.NU)({message:e,position:t,type:"success",duration:a,background:"rgba(7, 193, 96,0.7)",onclick:()=>{(0,s.rz)()}})},Primary(e,t="top",a=3e3){(0,s.NU)({message:e,position:t,type:"primary",duration:a,background:"rgba(7, 193, 96,0.7)",onclick:()=>{(0,s.rz)()}})},Danger(e,t="top",a=3e3){(0,s.NU)({message:e,position:t,type:"danger",duration:a,onclick:()=>{(0,s.rz)()}})},Warning(e,t="top",a=3e3){(0,s.NU)({message:e,position:t,type:"warning",duration:a,onclick:()=>{(0,s.rz)()}})}};t.Z=n},38418:function(e,t,a){"use strict";a.d(t,{$6:function(){return W},Bo:function(){return F},CK:function(){return U},DW:function(){return k},FD:function(){return r},FX:function(){return C},Fz:function(){return v},Hl:function(){return _},IC:function(){return p},Kl:function(){return T},Lv:function(){return D},S1:function(){return V},Ue:function(){return P},WH:function(){return d},Wf:function(){return l},XZ:function(){return c},Xz:function(){return b},_e:function(){return w},ai:function(){return z},au:function(){return H},bI:function(){return M},br:function(){return x},d3:function(){return I},dE:function(){return u},dJ:function(){return S},fj:function(){return y},h0:function(){return R},hf:function(){return G},kK:function(){return N},kg:function(){return O},ks:function(){return E},lQ:function(){return L},tU:function(){return A},vI:function(){return B},wz:function(){return h},xb:function(){return g},y_:function(){return m},yx:function(){return f}});var s=a(56565),n=a(81755),i=a(53259),o=a(69626);console.warn(s.Z);var r={Alarm:async()=>{await s.Z.get("api/Sounds/Alarm")},Action:async()=>{await s.Z.get("api/Sounds/Action")},Move:async()=>{await s.Z.get("api/Sounds/Moving")},PlayAudio:async e=>{await s.Z.post(`api/Sounds/aplaytest?audioPath=${e}`)},SaveAudioPath:async e=>{await s.Z.post("api/Sounds/SaveAudioPath",e)}},l={async GetSettings(){try{var e=await s.Z.get("api/System/Settings");return e.data}catch(t){return}},async SaveSettings(e){var t=await s.Z.post("api/System/SaveParameters",e);return t.data},async RestartSystem(){var e=await s.Z.post("api/System/RestartSystem");return e.data},async CloseSystem(){var e=await s.Z.post("api/System/CloseSystem");return e.data},async ShutdownPC(){var e=await s.Z.post("api/System/ShutDownPC");return e.data},async SaveManualCheckCargoStatus(e){try{return await s.Z.post("api/System/SaveManualCheckCargoConfiguration",e),{confirm:!0,message:"儲存成功"}}catch(t){return{confirm:!1,message:t.message}}},async GetConnectionState(){var e=await s.Z.get("api/System/ConnectionStatus");return e.data}};async function d(){try{var e=await s.Z.post("api/AGV/LocalizationWithCurrentTag");return e.data}catch(t){return{Success:!1,Message:t.message}}}async function u(){var e=await s.Z.post("api/VMS/EMO");return e}async function c(){var e=await s.Z.get("api/VMS/Where_r_u");return e.data}async function m(){var e=await s.Z.post("api/VMS/CargoStatusManualCheckDone?userName=website");return e.data}async function h(){var e=await s.Z.post("api/VMS/Initialize");return e.data}async function g(){var e=await s.Z.get("api/VMS/CancelInitProcess");return e.data}async function p(){var e=await s.Z.post("api/VMS/ResetAlarm");return e}async function _(e){var t=await s.Z.post(`api/VMS/ClearAlarm?alarm_code=${e}`);return t}async function w(){var e=await s.Z.post("api/VMS/BuzzerOff");return e}async function f(){var e=await s.Z.post("api/VMS/RemoveCassette"),t=e.data;return t&&i.Z.emit("remove_cst"),t}async function y(){await s.Z.get("api/VMS/LDULDWithoutEntryControl?actived=false")}async function b(){var e=await s.Z.get("api/VMS/GetWorkstations");return e.data}async function v(){var e=await s.Z.get("api/VMS/DownloadEQHsSettings");return e.data}async function S(e){var t=await s.Z.post("api/VMS/SaveEQHsSettings",e);return t.data}async function C(e){var t=await s.Z.post(`api/VMS/WorkstationModbusIOTest?Tag=${e}`);return t.data}const A={async AGVMove_UP(e=.08){var t=await s.Z.get(`api/ManualOperator/Forward?speed=${e}`);return t},async AGVMove_DOWN(e=.08){var t=await s.Z.get(`api/ManualOperator/Backward?speed=${e}`);return t},async AGVMove_LEFT(e=.1){var t=await s.Z.get(`api/ManualOperator/Left?speed=${e}`);return t},async AGVShift_LEFT(e=.1){var t=await s.Z.get(`api/ManualOperator/ShiftLeft?speed=${e}`);return t},async AGVMove_RIGHT(e=.1){var t=await s.Z.get(`api/ManualOperator/Right?speed=${e}`);return t},async AGVShift_Right(e=.1){var t=await s.Z.get(`api/ManualOperator/ShiftRight?speed=${e}`);return t},async AGVMove_STOP(){var e=await s.Z.get("api/ManualOperator/Stop");return e},async AGVMove_FordwardRight(){var e=await s.Z.get("api/ManualOperator/FordwardRight");return e},async AGVMove_FordwardLeft(){var e=await s.Z.get("api/ManualOperator/FordwardLeft");return e},async AGVMove_BackwardRight(){var e=await s.Z.get("api/ManualOperator/BackwardRight");return e},async AGVMove_BackwardLeft(){var e=await s.Z.get("api/ManualOperator/BackwardLeft");return e}},k={async AutoModeSwitch(e){var t=await s.Z.get(`api/VMS/AutoMode?Mode=${e}`);return t.data},async OnlineModeSwitch(e){var t=await s.Z.get(`api/VMS/OnlineMode?Mode=${e}`);return t.data}};async function V(e=0){var t=await s.Z.get("api/VMS/Reset_Mileage");return t.data}async function D(e=0){var t=await s.Z.get(`api/VMS/LaserMode?mode=${e}`);return t.data}const T={async DO_State_Change(e,t){var a=await s.Z.get(`api/VMS/DIO/DO_State?address=${e}&state=${t}`);return a.data},async DI_State_Change(e,t){var a=await s.Z.get(`api/VMS/DIO/DI_State?address=${e}&state=${t}`);return a.data},async HsSignalChange(e="AGV|EQ",t,a){var n=await s.Z.get(`api/VMS/DIO/Set${e}HsSignalState?signal_name=${t}&state=${a}`);return n.data},async UpdateInputMap(e){var t=await s.Z.post("api/VMS/UpdateINPUTSettings",e);return t.data},async UpdateOutputMap(e){var t=await s.Z.post("api/VMS/UpdateOUTPUTSettings",e);return t.data},async DownloadInOutPutsOptions(){var e=await s.Z.get("api/VMS/DIO/DownloadInOutPutsOptions");return e.data}},x={async Brake(){var e=await s.Z.get("api/VMS/Brake");return e.data},async UnBrake(){var e=await s.Z.get("api/VMS/UnBrake");return e.data}},I={async TotalAlarmCount(e,t,a="All",n=-1){var i=await s.Z.get(`api/AlarmTable/Total?from=${e}&to=${t}&alarm_type=${a}&code=${n}`);return i.data},async QueryByPage(e,t,a=1,n=16,i="All",o=-1){var r=await s.Z.get(`api/AlarmTable/Query?from=${e}&to=${t}&page=${a}&page_size=${n}&alarm_type=${i}&code=${o}`);return r.data},async GetAlarmClassifies(){var e=await s.Z.get("api/AlarmTable/GetAlarmClassifies");return e.data},async ClearAlarms(){await s.Z.get("api/AlarmTable/Clear")}},M={async Action(e,t,a="",n=""){console.info(e,t,a,n);var i=await s.Z.get(`api/LocalNav/Action?action=${e}&from=${t}&to=${a}&cst_id=${n}`);return i.data},async MoveTo(e,t,a,n){await s.Z.get(`api/LocalNav/MoveTo?x=${e}&y=${t}&theta=${a}&point_id=${n}`)},async MoveTest(e=n.Z){try{var t=await s.Z.post("api/LocalNav/MoveTo",e);return t.data}catch(a){return{confirm:!1,message:a.message}}}},W={GetMapFromLocal(){return s.Z.get("api/Map").then((e=>e.data)).catch((e=>{}))},ReloadMapFromAGVS(e){return s.Z.get(`api/Map/ReloadMapFromAGVS?mapName=${e}`).then((e=>e.data)).catch((e=>{}))}};async function U(e){try{var t=await s.Z.get(`api/VMS/TriggerCSTReaderWithCargoType?cargo_type=${e}`);return t.data.barcode}catch(a){return"Network Error"}}async function O(){try{var e=await s.Z.get("api/VMS/StopCSTReader");return e.data}catch(t){return!1}}async function P(e=""){try{var t=await s.Z.post(`api/VMS/BuildCargoID?id=${e}`);return t.data}catch(a){return{confirm:!1,message:a.message}}}async function B(){try{var e=await s.Z.get("api/VMS/FindTagCenter");return e.data}catch(t){return{confirm:!1,message:t}}}async function L(e,t){await s.Z.get(`api/VMS/BatteryLockCtrl?battery_no=${e}&islock=${t}`)}async function G(){var e=await s.Z.get("api/VMS/RechargeCircuit");return e.data}const E={async GetTeachData(){var e=await s.Z.get("api/VMS/Fork/TeachDatas");return e.data},async SaveTeachData(e){var t=await s.Z.post("api/VMS/Fork/SaveTeachDatas",e);return t.data},async WorkstationHandshakeSetting(e,t){var a=await s.Z.get(`api/VMS/Workstation/HandshakeSetting?eq_tag=${e}&need_handshake=${t}`);return a.data},async SaveUnitTeachData(e){var t=await s.Z.post("api/VMS/Fork/SaveUnitTeachData",e);return t.data},async RemoveTagTeachData(e){var t=await s.Z.get(`api/VMS/Fork/RemoveTagTeachData?tag=${e}`);return t.data},async RemoveUnitTeachData(e,t){var a=await s.Z.get(`api/VMS/Fork/RemoveUnitTeachData?tag=${e}&layer=${t}`);return a.data},async ARM_Extend(){var e=await s.Z.get("api/VMS/Fork/Arm/Extend");return e.data},async ARM_Shorten(){var e=await s.Z.get("api/VMS/Fork/Arm/Shorten");return e.data},async ARM_Stop(){var e=await s.Z.get("api/VMS/Fork/Arm/Stop");return e.data},async Action(e="",t=0,a=0){var n=await s.Z.get(`api/VMS/Fork?action=${e}&pose=${t}&speed=${a}`);return n.data},async SetTagHeightLimit(e,t,a,s){return!0},async PIN_LOCK(){var e=await s.Z.get("api/VMS/Fork/Pin/Lock");return e.data},async PIN_RELEASE(){var e=await s.Z.get("api/VMS/Fork/Pin/Release");return e.data}},H={async Query(e){var t=await s.Z.post("api/Log/Query",e);return t.data},async QueryParkingAcq(e){var t=await s.Z.post("api/ParkingAccurcy/Query",e);return t.data},async GetParkedLocs(){var e=await s.Z.get("api/ParkingAccurcy/GetAllParkLoc");return e.data},async GetTransferLogToday(){var e=await s.Z.get("api/Log/GetTransferLogToday");return e.data},async GetTransferLog(e,t){var a=await s.Z.get(`api/Log/GetTransferLog?from=${e}&to=${t}`);return a.data},async QueryVibrationRecordsByTaskName(e){var t=await s.Z.get(`api/Log/QueryVibHistoryByTaskName?taskName=${e}`);return t.data},async QueryVibrationRecordsByTime(e,t){var a=await s.Z.get(`api/Log/QueryVibHistoryByTime?from=${e}&to=${t}`);return a.data}},z={async Query(e){var t=await s.Z.post("api/Battery",e);return t.data},async GetChargeCicuitState(){var e=await s.Z.get("api/Battery/ChargeCicuitState");return e.data},async ChargeCicuitSwitch(e=!1){var t=await s.Z.get(`api/Battery/RechargeSwitch?enabled=${e}`);return t.data}},N={async QueryAvalibility(e,t){var a=await s.Z.get(`api/DataAnalysis/QueryAvalibility?from=${e}&to=${t}`);return a.data}},F={async Localization(e=o.Z){try{var t=await s.Z.post("api/AGV/Localization",e);return t.data}catch(a){return{Success:!1,Message:a.message}}},async EquipmentStateControl(e,t){var a=await s.Z.get(`api/VMS/EquipmentStateControl?equipment=${e}&state=${t}`);return a.data},async SensorStateControl(e,t){var a=await s.Z.get(`api/VMS/SensorStateControl?sensor=${e}&state=${t}`);return a.data}},R={async ResetMAXMINRecord(){await s.Z.get("api/IMU/ResetMAXMINRecord")}}},70886:function(e,t,a){"use strict";a.d(t,{Ag:function(){return S},CB:function(){return W},Fn:function(){return T},K4:function(){return M},W5:function(){return u},Yv:function(){return V},Z8:function(){return D},_B:function(){return v},bC:function(){return A},dV:function(){return f},iu:function(){return k},mR:function(){return x},nJ:function(){return I},qc:function(){return c},sk:function(){return w},yU:function(){return C}});var s=a(663),n=a(58477),i=a.n(n),o=a(46750),r=a(17023),l=new(i().Ros)({url:s.Z.ros_bridge_url});console.log("ros url:"+s.Z.ros_bridge_url);var d=Date.now(),u=0,c=0,m=.05,h=.05,g=.8,p=.5,_=!1;function w(e){o.FN.getters.Settings?.WebKeyboardMoveControl&&(_=e)}function f(){u=0,c=0}function y(){return Date.now()-d>100&&(d=Date.now(),!0)}l.on("connection",(function(){console.log("ros bridge server connected!"),u=0,c=0})),l.on("error",(function(){console.warn("ROS Connection not estimated")}));var b=new(i().Topic)({ros:l,name:"/cmd_vel",messageType:"geometry_msgs/Twist"});function v(){var e=new(i().Topic)({ros:l,name:"/module_information",messageType:"gpm_msgs/ModuleInformation",throttle_rate:300,queue_length:1});e.subscribe((function(e){r.A.commit("update_module_info",e)}))}function S(e){c=0,y()&&(Math.abs(u)>=g||(u+=.05,b.publish(new(i().Message)({linear:{x:u,y:0,z:0},angular:{x:0,y:0,z:0}}))))}function C(e){c=0,y()&&(Math.abs(u)>=g||(u-=.05,b.publish(new(i().Message)({linear:{x:u,y:0,z:0},angular:{x:0,y:0,z:0}}))))}function A(e){u=0,y()&&(Math.abs(c)>=p||(c-=.05,b.publish(new(i().Message)({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:c}}))))}function k(e){u=0,y()&&(Math.abs(c)>=p||(c+=.05,b.publish(new(i().Message)({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:c}}))))}function V(e,t){b.publish(new(i().Message)({linear:{x:e,y:0,z:0},angular:{x:0,y:0,z:-t}}))}function D(e,t){b.publish(new(i().Message)({linear:{x:e,y:0,z:0},angular:{x:0,y:0,z:t}}))}function T(e,t){b.publish(new(i().Message)({linear:{x:-e,y:0,z:0},angular:{x:0,y:0,z:-t}}))}function x(e,t){b.publish(new(i().Message)({linear:{x:-e,y:0,z:0},angular:{x:0,y:0,z:t}}))}function I(e){c=0,y()&&(Math.abs(u)>=g||(u+=.05,b.publish(new(i().Message)({linear:{x:0,y:u,z:0},angular:{x:0,y:0,z:0}}))))}function M(e){c=0,y()&&(Math.abs(u)>=g||(u-=.05,b.publish(new(i().Message)({linear:{x:0,y:u,z:0},angular:{x:0,y:0,z:0}}))))}function W(){u=c=0,b.publish(new(i().Message)({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}}))}document.addEventListener("keydown",(e=>{e.key;var t=e.code;_&&("KeyW"==t&&(u+=m),"KeyX"==t&&(u-=m),"KeyS"!=t&&"Space"!=t||(u=0,c=0),"KeyD"==t&&(c+=h),"KeyA"==t&&(c-=h))}))},56565:function(e,t,a){"use strict";var s=a(9669),n=a.n(s),i=a(663),o=a(81348);const r=n().create({baseURL:i.Z.backend_host});r.interceptors.request.use((e=>e),(e=>(console.log(e+"請求失敗"),o.z8.error({message:"請求失敗"}),Promise.reject(e)))),r.interceptors.response.use((e=>e),(e=>{var t=e.config;return console.log(e),o.z8.error({message:`請求 /${t.url}回應失敗`}),Promise.reject(e)})),t.Z=r},53259:function(e,t,a){"use strict";var s=a(59391);const n=(0,s.Z)();t.Z=n},663:function(e,t){"use strict";var a={get backend_host(){return`${window.location.protocol}//${window.location.host}`},get OTA_Update_URL(){return this.backend_host.replace(/:\d+/,":7026/api/ota")},get ros_bridge_url(){return`ws://${window.location.hostname}:9090`}};t.Z=a},11508:function(e,t,a){"use strict";var s=a(49963),n=a(66252);const i={class:"appcontainer",style:{width:"100vw",height:"100vh"},"element-loading-text":"GPM AGV","element-loading-background":"rgba(0,0,0, 0.8)"},o={key:0,class:"fixed-bottom text-right",id:"vcs-alarms"};function r(e,t,a,r,l,d){const u=(0,n.up)("el-alert"),c=(0,n.up)("SideMenuDrawer"),m=(0,n.up)("router-view"),h=(0,n.up)("SystemSettingsView"),g=(0,n.up)("EQHandshakingNotify"),p=(0,n.up)("WaitAGVsNextMoveActionNotify"),_=(0,n.up)("AGVInitalizingNotify"),w=(0,n.up)("SystemErrorNotify"),f=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",i,[void 0!=d.CurrentAlarms&&d.CurrentAlarms.length>0?((0,n.wg)(),(0,n.iD)("div",o,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.AlarmCodesGroup,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t},[(0,n.Wm)(u,{onClick:e=>d.HandleAlarmSheetClick(t),"show-icon":"",type:0==e.Alarm.ELevel?"warning":"error",title:`Alarm Code=${t} [${d.Timeformat(e.Alarm.Time)}]`,description:`${""==e.Alarm.CN?e.Alarm.Description:e.Alarm.CN}(${e.Alarm.Description})`},null,8,["onClick","type","title","description"])])))),128))])):(0,n.kq)("",!0),(0,n.wy)((0,n._)("i",{onClick:t[0]||(t[0]=(...e)=>d.ToggleMenu&&d.ToggleMenu(...e)),class:"bi text-primary bi-list menu-toggle-icon"},null,512),[[s.F8,!1]]),(0,n.Wm)(c,{ref:"side_menu"},null,512),(0,n.Wm)(m,null,{default:(0,n.w5)((({Component:e})=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:1}),(0,n.Wm)(h),(0,n.Wm)(g),(0,n.Wm)(p),(0,n.Wm)(_),(0,n.Wm)(w)])),[[f,l.loading,void 0,{fullscreen:!0,lock:!0}]])}a(57658);var l=a(53259);const d=e=>((0,n.dD)("data-v-f77d3bda"),e=e(),(0,n.Cn)(),e),u={class:"side-menu"},c=d((()=>(0,n._)("div",{class:"menu-item-container"},"SETTINGS",-1)));function m(e,t,a,s,i,o){const r=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(r,{modelValue:i.show_draw,"onUpdate:modelValue":t[2]||(t[2]=e=>i.show_draw=e),direction:"ltr",title:"GPM VMS",size:"30%"},{default:(0,n.w5)((()=>[(0,n._)("div",{onClick:t[0]||(t[0]=e=>o.PageSwitch("/")),class:"menu-item-container"},"VMS"),(0,n._)("div",{onClick:t[1]||(t[1]=e=>o.PageSwitch("/rd_test")),class:"menu-item-container"},"TEST"),c])),_:1},8,["modelValue"])])}var h={data(){return{show_draw:!1}},methods:{Show(){this.show_draw=!0},PageSwitch(e){var t=this.$router.currentRoute.value.path;e!=t&&this.$router.push(e),this.show_draw=!1}}},g=a(83744);const p=(0,g.Z)(h,[["render",m],["__scopeId","data-v-f77d3bda"]]);var _=p,w=a(46750),f=a(81348),y=a(30381),b=a.n(y),v=a(3577);const S=e=>((0,n.dD)("data-v-397c1898"),e=e(),(0,n.Cn)(),e),C={class:"sys-setting"},A={class:"w-100 border-bottom d-flex justify-content-between"},k=S((()=>(0,n._)("h2",{class:"text-start"},"系統設定",-1))),V={key:0,class:"edit_key"},D={class:"tabpage border p-2"},T={class:"tabpage border p-2"},x={class:"text-start w-100"},I=S((()=>(0,n._)("div",{class:"w-100 border-bottom"},[(0,n._)("b",null,"安全Sensor防護")],-1))),M=S((()=>(0,n._)("div",{class:"w-100 border-bottom"},[(0,n._)("b",null,"IMU 數據")],-1))),W=S((()=>(0,n._)("div",{class:"w-100 border-bottom"},[(0,n._)("b",null,"碰撞偵測功能")],-1))),U=S((()=>(0,n._)("span",{class:"mx-2"},"G",-1))),O=S((()=>(0,n._)("div",{class:"w-100 border-bottom"},[(0,n._)("b",null,"姿態異常偵測(傾倒偵測)")],-1))),P=S((()=>(0,n._)("span",{class:"mx-2"},"G",-1))),B={key:2,class:"w-100 border-bottom"},L=S((()=>(0,n._)("b",null,"禁止上線點位",-1))),G=[L],E={class:"tabpage border p-2"},H={class:"tabpage border p-2"},z=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"初始化")],-1))),N=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"電池交換")],-1))),F={class:"tabpage border p-2"},R=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"交握TIMEOUT")],-1))),Z=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"一般設定")],-1))),$=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"貨物ID讀取")],-1))),q=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"車頭設備內產品預檢知")],-1))),j=S((()=>(0,n._)("div",{class:"text-start w-100 border-bottom"},[(0,n._)("b",null,"雷射偵測設備Port內障礙物")],-1))),Q={class:"tabpage border p-2"},Y={class:"tabpage border p-2"},K={class:"tabpage border p-2 souns-page"},X={class:"tabpage border p-2 cst-reader"},J={class:"tabpage border p-2 io-setting x-2"},ee={class:"tabpage border p-2"},te={class:"tabpage border p-2"},ae={class:"tabpage border p-2"},se={class:"w-100"};function ne(e,t,a,s,i,o){const r=(0,n.up)("el-switch"),l=(0,n.up)("el-form-item"),d=(0,n.up)("el-input"),u=(0,n.up)("el-input-number"),c=(0,n.up)("el-form"),m=(0,n.up)("b-tab"),h=(0,n.up)("el-tag"),g=(0,n.up)("el-button"),p=(0,n.up)("el-option"),_=(0,n.up)("el-select"),w=(0,n.up)("el-col"),f=(0,n.up)("el-row"),y=(0,n.up)("SoundsSetting"),b=(0,n.up)("el-checkbox"),S=(0,n.up)("IOSetting"),L=(0,n.up)("EQHandshakeConfiguration"),ne=(0,n.up)("ManualCheckCargoStatus"),ie=(0,n.up)("b-button"),oe=(0,n.up)("b-tabs"),re=(0,n.up)("el-drawer"),le=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",C,[(0,n.Wm)(re,{modelValue:i.drawer_show,"onUpdate:modelValue":t[67]||(t[67]=e=>i.drawer_show=e),size:"80%",direction:"rtl"},{header:(0,n.w5)((()=>[(0,n._)("div",A,[k,i.settings.EditKey?((0,n.wg)(),(0,n.iD)("span",V,(0,v.zw)(i.settings.EditKey),1)):(0,n.kq)("",!0)])])),default:(0,n.w5)((()=>[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{style:(0,v.j5)([i.loading?{opacity:.5}:{},{position:"absolute",width:"95%",height:"100%",top:"80px"}]),"element-loading-text":"Loading..."},[i.loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(oe,{key:0,modelValue:i.selected_tab,"onUpdate:modelValue":t[66]||(t[66]=e=>i.selected_tab=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{title:"一般"},{default:(0,n.w5)((()=>[(0,n._)("div",D,[(0,n.Wm)(c,{model:i.settings,"label-width":"250","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"蜂鳴器"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.BuzzerOn,"onUpdate:modelValue":t[0]||(t[0]=e=>i.settings.BuzzerOn=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"一般走行開啟車頭燈"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.FrontLighterFlashWhenNormalMove,"onUpdate:modelValue":t[1]||(t[1]=e=>i.settings.FrontLighterFlashWhenNormalMove=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"離線地圖圖資檔案路徑"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.MapParam.LocalMapFileName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.settings.MapParam.LocalMapFileName=e)},null,8,["onChange","modelValue"])])),_:1}),o.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(l,{key:0,label:"初始化時有帳無料自動清帳"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.Auto_Cleaer_CST_ID_Data_When_Has_Data_But_NO_Cargo,"onUpdate:modelValue":t[3]||(t[3]=e=>i.settings.Auto_Cleaer_CST_ID_Data_When_Has_Data_But_NO_Cargo=e)},null,8,["onChange","modelValue"])])),_:1})),o.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(l,{key:1,label:"初始化時有料無帳自動建帳"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.Auto_Read_CST_ID_When_No_Data_But_Has_Cargo,"onUpdate:modelValue":t[4]||(t[4]=e=>i.settings.Auto_Read_CST_ID_When_No_Data_But_Has_Cargo=e)},null,8,["onChange","modelValue"])])),_:1})),(0,n.Wm)(l,{label:"Action任務Timeout(Sec)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.ActionTimeout,"onUpdate:modelValue":t[5]||(t[5]=e=>i.settings.ActionTimeout=e)},null,8,["onChange","modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1}),(0,n.Wm)(m,{title:"安全防護"},{default:(0,n.w5)((()=>[(0,n._)("div",T,[(0,n._)("div",x,[(0,n.Wm)(c,{model:i.settings,"label-width":"210","label-position":"left"},{default:(0,n.w5)((()=>[I,(0,n.Wm)(l,{label:"左方雷射 Bypass"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:i.settings.SensorBypass.LeftSideLaserBypass,"onUpdate:modelValue":t[6]||(t[6]=e=>i.settings.SensorBypass.LeftSideLaserBypass=e),onChange:o.HandleParamChanged},null,8,["modelValue","onChange"])])),_:1}),(0,n.Wm)(l,{label:"右方雷射 Bypass"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:i.settings.SensorBypass.RightSideLaserBypass,"onUpdate:modelValue":t[7]||(t[7]=e=>i.settings.SensorBypass.RightSideLaserBypass=e),onChange:o.HandleParamChanged},null,8,["modelValue","onChange"])])),_:1}),(0,n.Wm)(l,{label:"車體限動Sensor Bypass"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:i.settings.SensorBypass.AGVBodyLimitSensorBypass,"onUpdate:modelValue":t[8]||(t[8]=e=>i.settings.SensorBypass.AGVBodyLimitSensorBypass=e),onChange:o.HandleParamChanged},null,8,["modelValue","onChange"])])),_:1}),o.IsForkAGV?((0,n.wg)(),(0,n.j4)(l,{key:0,label:"牙叉前方障礙物Sensor Bypass"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{modelValue:i.settings.SensorBypass.ForkFrontendObsSensorBypass,"onUpdate:modelValue":t[9]||(t[9]=e=>i.settings.SensorBypass.ForkFrontendObsSensorBypass=e),onChange:o.HandleParamChanged},null,8,["modelValue","onChange"])])),_:1})):(0,n.kq)("",!0),M,(0,n.Wm)(l,{label:"加速度(G)"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{effect:"dark",style:{width:"70px"},for:""},{default:(0,n.w5)((()=>[(0,n.Uk)("數值")])),_:1}),(0,n._)("code",null,(0,v.zw)(o.IMU_ACC_Data),1)])),_:1}),o.IMUMaxMinRecord?((0,n.wg)(),(0,n.j4)(l,{key:1,label:"最大值紀錄(G)"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("div",null,[(0,n.Wm)(h,{effect:"dark",style:{width:"70px"},for:""},{default:(0,n.w5)((()=>[(0,n.Uk)("數值")])),_:1}),(0,n._)("code",null,(0,v.zw)(o.IMUMaxMinRecord.MaxMag),1)]),(0,n._)("div",null,[(0,n.Wm)(h,{effect:"dark",style:{width:"70px"},for:""},{default:(0,n.w5)((()=>[(0,n.Uk)("數值")])),_:1}),(0,n._)("code",null,(0,v.zw)({x:o.IMUMaxMinRecord.AccVal.x.toFixed(2),y:o.IMUMaxMinRecord.AccVal.y.toFixed(2),z:o.IMUMaxMinRecord.AccVal.z.toFixed(2)}),1)]),(0,n._)("div",null,[(0,n.Wm)(h,{effect:"dark",style:{width:"70px"},for:""},{default:(0,n.w5)((()=>[(0,n.Uk)("發生時間")])),_:1}),(0,n._)("code",null,(0,v.zw)(o.TimeFormat(o.IMUMaxMinRecord.Time)),1)]),(0,n._)("div",null,[(0,n.Wm)(h,{effect:"dark",style:{width:"70px"},for:""},{default:(0,n.w5)((()=>[(0,n.Uk)("發生座標")])),_:1}),(0,n._)("code",null,(0,v.zw)({X:o.IMUMaxMinRecord.Coordination.x,Y:o.IMUMaxMinRecord.Coordination.y}),1)]),(0,n._)("div",null,[(0,n.Wm)(g,{onClick:o.HandleIMUDataResetButtonClick,type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("RESET")])),_:1},8,["onClick"])])])])),_:1})):(0,n.kq)("",!0),W,(0,n.Wm)(l,{label:"啟用"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.ImpactDetection.Enabled,"onUpdate:modelValue":t[10]||(t[10]=e=>i.settings.ImpactDetection.Enabled=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"異常檢出警報等級"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{disabled:!i.settings.ImpactDetection.Enabled,modelValue:i.settings.ImpactDetection.ImpactingAlarmLevel,"onUpdate:modelValue":t[11]||(t[11]=e=>i.settings.ImpactDetection.ImpactingAlarmLevel=e),onChange:o.HandleParamChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Warning",value:0}),(0,n.Wm)(p,{label:"Alarm",value:1})])),_:1},8,["disabled","modelValue","onChange"])])),_:1}),(0,n.Wm)(l,{label:"閥值"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.01,precision:2,min:.01,max:4,onChange:o.HandleParamChanged,modelValue:i.settings.ImpactDetection.ThresHold,"onUpdate:modelValue":t[12]||(t[12]=e=>i.settings.ImpactDetection.ThresHold=e)},null,8,["onChange","modelValue"]),U])),_:1}),O,(0,n.Wm)(l,{label:"啟用"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.ImpactDetection.PitchErrorDetection,"onUpdate:modelValue":t[13]||(t[13]=e=>i.settings.ImpactDetection.PitchErrorDetection=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"異常檢出警報等級"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{disabled:!i.settings.ImpactDetection.PitchErrorDetection,modelValue:i.settings.ImpactDetection.PitchErrorAlarmLevel,"onUpdate:modelValue":t[14]||(t[14]=e=>i.settings.ImpactDetection.PitchErrorAlarmLevel=e),onChange:o.HandleParamChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Warning",value:0}),(0,n.Wm)(p,{label:"Alarm",value:1})])),_:1},8,["disabled","modelValue","onChange"])])),_:1}),(0,n.Wm)(l,{label:"閥值"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.01,precision:2,min:.01,max:9.8,onChange:o.HandleParamChanged,modelValue:i.settings.ImpactDetection.PitchErrorThresHold,"onUpdate:modelValue":t[15]||(t[15]=e=>i.settings.ImpactDetection.PitchErrorThresHold=e)},null,8,["onChange","modelValue"]),P])),_:1}),i.settings.ForbidToOnlineTags?((0,n.wg)(),(0,n.iD)("div",B,G)):(0,n.kq)("",!0),(0,n.Wm)(_,{class:"my-2",modelValue:i.settings.ForbidToOnlineTags,"onUpdate:modelValue":t[16]||(t[16]=e=>i.settings.ForbidToOnlineTags=e),multiple:"",placeholder:"Select",onChange:o.HandleParamChanged,style:{width:"300px"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.normal_stations,(e=>((0,n.wg)(),(0,n.j4)(p,{key:e.tag,label:e.name,value:e.tag},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1},8,["model"])])])])),_:1}),o.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:0,title:"電池"},{default:(0,n.w5)((()=>[(0,n._)("div",E,[(0,n.Wm)(c,{model:i.settings,"label-width":"250","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"等待充電開始時間(秒)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.BatteryModule.WaitChargeStartDelayTimeWhenReachChargeTaskFinish,"onUpdate:modelValue":t[17]||(t[17]=e=>i.settings.BatteryModule.WaitChargeStartDelayTimeWhenReachChargeTaskFinish=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"斷開充電回路電壓閥值(mV)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.BatteryModule.CutOffChargeRelayVoltageThreshodlval,"onUpdate:modelValue":t[18]||(t[18]=e=>i.settings.BatteryModule.CutOffChargeRelayVoltageThreshodlval=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"僅電量低於閥值才開啟充電迴路"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.BatteryModule.ChargeWhenLevelLowerThanThreshold,"onUpdate:modelValue":t[19]||(t[19]=e=>i.settings.BatteryModule.ChargeWhenLevelLowerThanThreshold=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"充電迴路開啟閥值"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:1,precision:0,min:1,max:100,disabled:!i.settings.BatteryModule.ChargeWhenLevelLowerThanThreshold,onChange:o.HandleParamChanged,modelValue:i.settings.BatteryModule.ChargeLevelThreshold,"onUpdate:modelValue":t[20]||(t[20]=e=>i.settings.BatteryModule.ChargeLevelThreshold=e)},null,8,["disabled","onChange","modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1})),o.IsInspectionAGV?((0,n.wg)(),(0,n.j4)(m,{key:1,title:"巡檢AGV"},{default:(0,n.w5)((()=>[(0,n._)("div",H,[(0,n.Wm)(c,{"label-width":"250","label-position":"left"},{default:(0,n.w5)((()=>[z,(0,n.Wm)(l,{label:"初始化檢查電池鎖定"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.InspectionAGV.CheckBatteryLockStateWhenInit,"onUpdate:modelValue":t[21]||(t[21]=e=>i.settings.InspectionAGV.CheckBatteryLockStateWhenInit=e)},null,8,["onChange","modelValue"])])),_:1}),N,(0,n.Wm)(l,{label:"需交換電池最小電量"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:0,max:100,modelValue:i.settings.InspectionAGV.ExchangeBatLevelThresholdVal,"onUpdate:modelValue":t[22]||(t[22]=e=>i.settings.InspectionAGV.ExchangeBatLevelThresholdVal=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"交換電池數量"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:1,max:2,modelValue:i.settings.InspectionAGV.BatteryChangeNum,"onUpdate:modelValue":t[23]||(t[23]=e=>i.settings.InspectionAGV.BatteryChangeNum=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"交握-TP1"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:1,max:999,modelValue:i.settings.InspectionAGV.BatExchangeTimeout.TP1,"onUpdate:modelValue":t[24]||(t[24]=e=>i.settings.InspectionAGV.BatExchangeTimeout.TP1=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"交握-TP2"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:1,max:999,modelValue:i.settings.InspectionAGV.BatExchangeTimeout.TP2,"onUpdate:modelValue":t[25]||(t[25]=e=>i.settings.InspectionAGV.BatExchangeTimeout.TP2=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"交握-TP3"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:1,max:999,modelValue:i.settings.InspectionAGV.BatExchangeTimeout.TP3,"onUpdate:modelValue":t[26]||(t[26]=e=>i.settings.InspectionAGV.BatExchangeTimeout.TP3=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"交握-TP4"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:1,max:999,modelValue:i.settings.InspectionAGV.BatExchangeTimeout.TP4,"onUpdate:modelValue":t[27]||(t[27]=e=>i.settings.InspectionAGV.BatExchangeTimeout.TP4=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"交握-TP5"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,type:"number",min:1,max:999,modelValue:i.settings.InspectionAGV.BatExchangeTimeout.TP5,"onUpdate:modelValue":t[28]||(t[28]=e=>i.settings.InspectionAGV.BatExchangeTimeout.TP5=e)},null,8,["onChange","modelValue"])])),_:1})])),_:1})])])),_:1})):(0,n.kq)("",!0),o.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:2,title:"設備取/放貨"},{default:(0,n.w5)((()=>[(0,n._)("div",F,[(0,n.Wm)(c,{model:i.settings,"label-width":"250","label-position":"left"},{default:(0,n.w5)((()=>[R,(0,n.Wm)(l,{label:"TA1_Wait_L_U_REQ_ON"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.EQHSTimeouts.TA1_Wait_L_U_REQ_ON,"onUpdate:modelValue":t[29]||(t[29]=e=>i.settings.EQHSTimeouts.TA1_Wait_L_U_REQ_ON=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"TA2_Wait_EQ_READY_ON"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.EQHSTimeouts.TA2_Wait_EQ_READY_ON,"onUpdate:modelValue":t[30]||(t[30]=e=>i.settings.EQHSTimeouts.TA2_Wait_EQ_READY_ON=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"TA3_Wait_EQ_BUSY_ON"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.EQHSTimeouts.TA3_Wait_EQ_BUSY_ON,"onUpdate:modelValue":t[31]||(t[31]=e=>i.settings.EQHSTimeouts.TA3_Wait_EQ_BUSY_ON=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"TA4_Wait_EQ_BUSY_OFF"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.EQHSTimeouts.TA4_Wait_EQ_BUSY_OFF,"onUpdate:modelValue":t[32]||(t[32]=e=>i.settings.EQHSTimeouts.TA4_Wait_EQ_BUSY_OFF=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"TA5_Wait_L_U_REQ_OFF"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.EQHSTimeouts.TA5_Wait_L_U_REQ_OFF,"onUpdate:modelValue":t[33]||(t[33]=e=>i.settings.EQHSTimeouts.TA5_Wait_L_U_REQ_OFF=e)},null,8,["onChange","modelValue"])])),_:1}),Z,(0,n.Wm)(l,{label:"等待EQ READY播放音樂"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.PlayHandshakingMusic,"onUpdate:modelValue":t[34]||(t[34]=e=>i.settings.PlayHandshakingMusic=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"設備內停車允許誤差(mm)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.TagParkingTolerance,"onUpdate:modelValue":t[35]||(t[35]=e=>i.settings.TagParkingTolerance=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"退出設備須需要詢問派車"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.LDULDParams.LeaveWorkStationNeedSendRequestToAGVS,"onUpdate:modelValue":t[36]||(t[36]=e=>i.settings.LDULDParams.LeaveWorkStationNeedSendRequestToAGVS=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"空取空放"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.LDULD_Task_No_Entry,"onUpdate:modelValue":t[37]||(t[37]=e=>i.settings.LDULD_Task_No_Entry=e)},null,8,["onChange","modelValue"])])),_:1}),$,(0,n.Wm)(l,{label:"CST ID讀取失敗後車載狀態設為"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{onChange:o.HandleParamChanged,modelValue:i.settings.CstReadFailAction,"onUpdate:modelValue":t[38]||(t[38]=e=>i.settings.CstReadFailAction=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Normal Status",value:0}),(0,n.Wm)(p,{label:"Down Status",value:1})])),_:1},8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"CST ID讀取值與任務不符時"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{onChange:o.HandleParamChanged,modelValue:i.settings.Cst_ID_Not_Match_Action,"onUpdate:modelValue":t[39]||(t[39]=e=>i.settings.Cst_ID_Not_Match_Action=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"上報讀取之ID",value:0}),(0,n.Wm)(p,{label:"向派車查詢虛擬ID",value:1})])),_:1},8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"CST 在席檢-進入設備前"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.CST_EXIST_DETECTION.Before_In,"onUpdate:modelValue":t[40]||(t[40]=e=>i.settings.CST_EXIST_DETECTION.Before_In=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"CST 在席檢-設備動作後"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.CST_EXIST_DETECTION.After_EQ_Busy_Off,"onUpdate:modelValue":t[41]||(t[41]=e=>i.settings.CST_EXIST_DETECTION.After_EQ_Busy_Off=e)},null,8,["onChange","modelValue"])])),_:1}),q,(0,n.Wm)(l,{label:"車頭設備內產品預檢知-放貨"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.LOAD_OBS_DETECTION.Enable_Load,"onUpdate:modelValue":t[42]||(t[42]=e=>i.settings.LOAD_OBS_DETECTION.Enable_Load=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"車頭設備內產品預檢知-取貨"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.LOAD_OBS_DETECTION.Enable_UnLoad,"onUpdate:modelValue":t[43]||(t[43]=e=>i.settings.LOAD_OBS_DETECTION.Enable_UnLoad=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"車頭設備內產品預檢知-偵測時間(sec)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.LOAD_OBS_DETECTION.Duration,"onUpdate:modelValue":t[44]||(t[44]=e=>i.settings.LOAD_OBS_DETECTION.Duration=e)},null,8,["onChange","modelValue"])])),_:1}),j,(0,n.Wm)(l,{label:"啟用"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.LDULDParams.LsrObstacleDetectionEnable,"onUpdate:modelValue":t[45]||(t[45]=e=>i.settings.LDULDParams.LsrObstacleDetectionEnable=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"雷射組數"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{disabled:!i.settings.LDULDParams.LsrObstacleDetectionEnable,onChange:o.HandleParamChanged,size:"small",min:0,max:16,modelValue:i.settings.LDULDParams.LsrObsLaserModeNumber,"onUpdate:modelValue":t[46]||(t[46]=e=>i.settings.LDULDParams.LsrObsLaserModeNumber=e)},null,8,["disabled","onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"偵測異常發報等級"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{disabled:!i.settings.LDULDParams.LsrObstacleDetectionEnable,modelValue:i.settings.LDULDParams.LsrObsDetectedAlarmLevel,"onUpdate:modelValue":t[47]||(t[47]=e=>i.settings.LDULDParams.LsrObsDetectedAlarmLevel=e),onChange:o.HandleParamChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"Warning",value:0}),(0,n.Wm)(p,{label:"Alarm",value:1})])),_:1},8,["disabled","modelValue","onChange"])])),_:1})])),_:1},8,["model"])])])),_:1})),o.IsForkAGV&&i.settings.ForkAGV?((0,n.wg)(),(0,n.j4)(m,{key:3,title:"叉車AGV"},{default:(0,n.w5)((()=>[(0,n._)("div",Q,[(0,n.Wm)(c,{"label-position":"left","label-width":"210"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"行程上極限(cm)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.1,precision:1,min:0,max:i.settings.ForkAGV.UplimitPoseSettingMax,onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.UplimitPose,"onUpdate:modelValue":t[48]||(t[48]=e=>i.settings.ForkAGV.UplimitPose=e)},null,8,["max","onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"行程下極限(cm)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.1,precision:1,min:-50,max:100,onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.DownlimitPose,"onUpdate:modelValue":t[49]||(t[49]=e=>i.settings.ForkAGV.DownlimitPose=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"安全高度(cm)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.1,precision:1,min:1,max:100,onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.SaftyPositionHeight,"onUpdate:modelValue":t[50]||(t[50]=e=>i.settings.ForkAGV.SaftyPositionHeight=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"待命點高度(cm)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.1,precision:1,min:-100,max:100,onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.StandbyPose,"onUpdate:modelValue":t[51]||(t[51]=e=>i.settings.ForkAGV.StandbyPose=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"允許走行之牙叉位置限制"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.ForkSaftyStratrgy,"onUpdate:modelValue":t[52]||(t[52]=e=>i.settings.ForkAGV.ForkSaftyStratrgy=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"牙叉位於原點",value:0}),(0,n.Wm)(p,{label:"牙叉低於安全高度",value:1})])),_:1},8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"使用待命點為動作原點"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.HomePoseUseStandyPose,"onUpdate:modelValue":t[53]||(t[53]=e=>i.settings.ForkAGV.HomePoseUseStandyPose=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"Z軸皮帶檢知Bypass"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.SensorBypass.BeltSensorBypass,"onUpdate:modelValue":t[54]||(t[54]=e=>i.settings.SensorBypass.BeltSensorBypass=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"牙叉已在Home位置不必初始化"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.ForkNoInitializeWhenPoseIsHome,"onUpdate:modelValue":t[55]||(t[55]=e=>i.settings.ForkNoInitializeWhenPoseIsHome=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"退出設備時不等待牙叉縮回完成"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.NoWaitForkArmFinishAndMoveOutInWorkStation,"onUpdate:modelValue":t[56]||(t[56]=e=>i.settings.ForkAGV.NoWaitForkArmFinishAndMoveOutInWorkStation=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"退出設備後Z軸同步回Home"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.NoWaitParkingFinishAndForkGoHomeWhenBackToSecondary,"onUpdate:modelValue":t[57]||(t[57]=e=>i.settings.ForkAGV.NoWaitParkingFinishAndForkGoHomeWhenBackToSecondary=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.kq)("",!0),(0,n.Wm)(l,{label:"手動操作移動速度(%)"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{size:"small",step:.01,precision:2,min:.01,max:1,onChange:o.HandleParamChanged,modelValue:i.settings.ForkAGV.ManualModeOperationSpeed.MoveToPoseSpeed,"onUpdate:modelValue":t[59]||(t[59]=e=>i.settings.ForkAGV.ManualModeOperationSpeed.MoveToPoseSpeed=e)},null,8,["onChange","modelValue"])])),_:1})])),_:1})])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(m,{title:"派車系統"},{default:(0,n.w5)((()=>[(0,n._)("div",Y,[(0,n.Wm)(c,{"label-position":"left","label-width":"210"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"Host"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{span:3},{default:(0,n.w5)((()=>[(0,n.Uk)("IP")])),_:1}),(0,n.Wm)(w,{span:10},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.Connections.AGVS.IP,"onUpdate:modelValue":t[60]||(t[60]=e=>i.settings.Connections.AGVS.IP=e)},null,8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(w,{span:3},{default:(0,n.w5)((()=>[(0,n.Uk)("Port")])),_:1}),(0,n.Wm)(w,{span:5},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onChange:o.HandleParamChanged,size:"small",modelValue:i.settings.Connections.AGVS.Port,"onUpdate:modelValue":t[61]||(t[61]=e=>i.settings.Connections.AGVS.Port=e)},null,8,["onChange","modelValue"])])),_:1})])),_:1})])),_:1}),(0,n.Wm)(l,{label:"連線類型"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{modelValue:i.settings.VMSParam.Protocol,"onUpdate:modelValue":t[62]||(t[62]=e=>i.settings.VMSParam.Protocol=e),onChange:o.HandleParamChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"TCP/IP",value:0}),(0,n.Wm)(p,{label:"Web API",value:1})])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])])),_:1}),(0,n.Wm)(m,{title:"音效"},{default:(0,n.w5)((()=>[(0,n._)("div",K,[(0,n.Wm)(y)])])),_:1}),o.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:4,title:"Cst Reader"},{default:(0,n.w5)((()=>[(0,n._)("div",X,[(0,n.Wm)(c,{"label-width":"100px","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"Tray Reader"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{modelValue:i.settings.HasTrayCstReader,"onUpdate:modelValue":t[63]||(t[63]=e=>i.settings.HasTrayCstReader=e),onChange:o.HandleParamChanged},null,8,["modelValue","onChange"])])),_:1}),(0,n.Wm)(l,{label:"Rack Reader"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{modelValue:i.settings.HasRackCstReader,"onUpdate:modelValue":t[64]||(t[64]=e=>i.settings.HasRackCstReader=e),onChange:o.HandleParamChanged},null,8,["modelValue","onChange"])])),_:1})])),_:1})])])),_:1})),(0,n.Wm)(m,{title:"I/O定義"},{default:(0,n.w5)((()=>[(0,n._)("div",J,[(0,n.Wm)(S)])])),_:1}),o.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(m,{key:5,title:"設備交握設定"},{default:(0,n.w5)((()=>[(0,n._)("div",ee,[(0,n.Wm)(L,{SyncFromAGVS:i.settings.LDULDParams.LeaveWorkStationNeedSendRequestToAGVS,onOnSyncAGVSCheckBoxChanged:t[65]||(t[65]=e=>{i.settings.LDULDParams.LeaveWorkStationNeedSendRequestToAGVS=e,o.HandleParamChanged()})},null,8,["SyncFromAGVS"])])])),_:1})),(0,n.Wm)(m,{title:"手動檢查貨況"},{default:(0,n.w5)((()=>[(0,n._)("div",te,[(0,n.Wm)(ne,{checkPointData:i.settings.ManualCheckCargoStatus},null,8,["checkPointData"])])])),_:1}),(0,n.Wm)(m,{title:"進階"},{default:(0,n.w5)((()=>[(0,n._)("div",ae,[(0,n._)("div",se,[(0,n.Wm)(ie,{class:"w-50 my-1 mx-3",variant:"primary",onClick:o.HandleSystemRestartBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("系統重啟")])),_:1},8,["onClick"]),(0,n.Wm)(ie,{class:"w-50 my-1 mx-3",variant:"danger",onClick:o.HandleSystemCloseBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("系統關閉")])),_:1},8,["onClick"]),(0,n.Wm)(ie,{class:"w-50 my-1 mx-3",variant:"info",onClick:o.HandleOTAUpdateBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("系統更新")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"]))],4)),[[le,i.loading]])])),_:1},8,["modelValue"])])}var ie=a(49996),oe=a(38418),re=a(56565);const le={GetMapFromServer(){return re.Z.get("api/map/GetMapFromServer").then((e=>{var t=e.data;return w.dK.commit("SetMapData",t),console.info("download map data from server .."),t})).catch((e=>{}))},GetMapFromLocal(){return re.Z.get("api/Map").then((e=>e.data)).catch((e=>{}))},GetMapTags(){return re.Z.get("api/Map/Tags").then((e=>e.data)).catch((e=>{}))},GetNormalStations(){return re.Z.get("api/Map/GetNormalStations").then((e=>e.data)).catch((e=>{}))},SaveMap(e){return re.Z.post("api/Map/SaveMap",e).then((e=>!0)).catch((e=>!1))},ReloadMap(){return re.Z.get("api/Map/ReloadMap").then((e=>e.data)).catch((e=>{}))},GetAGVList(){return re.Z.get("api/Map/AGVList").then((e=>e.data)).catch((e=>{}))},PathPlanByTag(e,t){return re.Z.get(`api/Map/PathPlan?fromTag=${e}&toTag=${t}`).then((e=>e.data)).catch((e=>{}))},UploadCoordination(e,t,a,s,n){try{return re.Z.get(`api/Map/UploadCoordination?AGVName=${e}&tagNumber=${t}&x=${a}&y=${s}&theta=${n}`).then((e=>e.data))}catch(i){return!1}}};var de=le,ue=a(17023);const ce={class:"d-flex"};function me(e,t,a,s,i,o){const r=(0,n.up)("el-button"),l=(0,n.up)("el-upload");return(0,n.wg)(),(0,n.iD)("div",ce,[(0,n.Wm)(l,{class:"upload-music",ref:"upload",action:o.action_api,"file-list":i.fileList,"auto-upload":!1,"on-success":o.handleUploadSuccess,"on-error":o.handleUploadError},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{ref:"select_file",type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("選擇音檔")])),_:1},512)])),_:1},8,["action","file-list","on-success","on-error"]),(0,n.Wm)(r,{id:"upload-button",onClick:o.submitUpload},{default:(0,n.w5)((()=>[(0,n.Uk)("上傳")])),_:1},8,["onClick"])])}var he=a(663),ge={data(){return{fileList:[],uploaded_cnt:0,percent:0}},props:{music_type:{type:String,default:"Action"}},computed:{action_api(){return`${he.Z.backend_host}/api/Sounds/UploadMusicFile?sound=${this.music_type}`}},methods:{submitUpload(){this.uploaded_cnt=0,this.$refs.upload.submit()},handleUploadSuccess(e,t,a){this.uploaded_cnt+=1,this.percent=this.uploaded_cnt/this.fileList.length&100;var s=e.success,n=e.message;this.$swal.fire({title:`${n}`,icon:s?"success":"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},handleUploadError(e,t,a){this.$swal.fire({text:t.filename,title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}}};const pe=(0,g.Z)(ge,[["render",me]]);var _e=pe,we=a(78500),fe=a(9669),ye=a.n(fe);const be={class:"eq-station-hs-configuration"},ve={class:"d-flex w-100"},Se={class:"w-100 my-2 text-start"};function Ce(e,t,a,s,i,o){const r=(0,n.up)("el-divider"),l=(0,n.up)("el-checkbox"),d=(0,n.up)("el-button"),u=(0,n.up)("el-form-item"),c=(0,n.up)("el-table-column"),m=(0,n.up)("el-input"),h=(0,n.up)("el-select-v2"),g=(0,n.up)("el-table"),p=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",be,[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Uk)("General")])),_:1}),(0,n.Wm)(u,{label:"從派車同步下載"},{default:(0,n.w5)((()=>[(0,n._)("div",ve,[(0,n.Wm)(l,{modelValue:i.SyncFromAGVSBind,"onUpdate:modelValue":t[0]||(t[0]=e=>i.SyncFromAGVSBind=e),class:"flex-fill",onChange:t[1]||(t[1]=t=>{e.$emit("onSyncAGVSCheckBoxChanged",t)})},null,8,["modelValue"]),(0,n.Wm)(d,{type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Sync From AGVS")])),_:1})])])),_:1}),(0,n.Wm)(r,{class:"my-5"},{default:(0,n.w5)((()=>[(0,n.Uk)("Configuration")])),_:1}),(0,n._)("div",Se,[(0,n.Wm)(d,{type:"primary",onClick:o.SaveConfiguration},{default:(0,n.w5)((()=>[(0,n.Uk)("儲存")])),_:1},8,["onClick"]),(0,n.Wm)(d,{type:"info",onClick:o.DownloadConfiguration},{default:(0,n.w5)((()=>[(0,n.Uk)("重新載入")])),_:1},8,["onClick"]),(0,n.Wm)(d,{type:"warning",onClick:o.CreateNew},{default:(0,n.w5)((()=>[(0,n.Uk)("新增")])),_:1},8,["onClick"])]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(g,{data:i.configList,border:"",size:"small",height:"500","row-class-name":o.GetRowClassName,style:{width:"100%"},"row-key":"Index"},{default:(0,n.w5)((()=>[(0,n.kq)("",!0),(0,n.Wm)(c,{label:"Tag",prop:"Tag",width:"80"},{default:(0,n.w5)((e=>[(0,n.Wm)(m,{type:"number",step:1,modelValue:e.row.Tag,"onUpdate:modelValue":t=>e.row.Tag=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(c,{label:"名稱",prop:"Name"},{default:(0,n.w5)((e=>[(0,n.Wm)(m,{modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(c,{label:"是否交握",prop:"HandShakeModeHandShakeMode"},{default:(0,n.w5)((e=>[(0,n.Wm)(h,{modelValue:e.row.HandShakeModeHandShakeMode,"onUpdate:modelValue":t=>e.row.HandShakeModeHandShakeMode=t,options:[{value:0,label:"不需交握"},{value:1,label:"需交握"}]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(c,{label:"轉移模式",prop:"CargoTransferMode"},{default:(0,n.w5)((e=>[(0,n.Wm)(h,{modelValue:e.row.CargoTransferMode,"onUpdate:modelValue":t=>e.row.CargoTransferMode=t,options:[{value:0,label:"設備動作"},{value:1,label:"AGV動作"},{value:2,label:"僅第一層設備動作"}]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(c,{label:"交握通訊方式",prop:"HandShakeConnectionMode"},{default:(0,n.w5)((e=>[(0,n.Wm)(h,{modelValue:e.row.HandShakeConnectionMode,"onUpdate:modelValue":t=>e.row.HandShakeConnectionMode=t,options:[{value:0,label:"光IO"},{value:1,label:"Modbus"},{value:2,label:"模擬"}]},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(c,{label:"Modbus Port",prop:"ModbusTcpPort"},{default:(0,n.w5)((e=>[(0,n.Wm)(m,{disabled:1!=e.row.HandShakeConnectionMode,type:"number",step:1,modelValue:e.row.ModbusTcpPort,"onUpdate:modelValue":t=>e.row.ModbusTcpPort=t},null,8,["disabled","modelValue","onUpdate:modelValue"])])),_:1}),o.IsForkAGV?((0,n.wg)(),(0,n.j4)(c,{key:1,label:"牙叉伸出",prop:"ForkArmExtend"},{default:(0,n.w5)((e=>[(0,n.Wm)(h,{modelValue:e.row.ForkArmExtend,"onUpdate:modelValue":t=>e.row.ForkArmExtend=t,options:[{value:!1,label:"不需"},{value:!0,label:"需要"}]},null,8,["modelValue","onUpdate:modelValue"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(c,null,{default:(0,n.w5)((e=>[(0,n.Wm)(d,{onClick:t=>o.HandleDelete(e.row),type:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("Delete")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","row-class-name"])),[[p,i.loading]])])}var Ae={props:{SyncFromAGVS:{type:Boolean,default:!1}},data(){return{loading:!1,configList:[],SyncFromAGVSBind:!1}},computed:{IsForkAGV(){return w.q$.getters.IsForkAGV}},methods:{async DownloadConfiguration(){this.loading=!0;var e=await(0,oe.Fz)(),t=[],a=0;Object.keys(e).forEach((s=>{var n=e[s];const i=Number.parseInt(s);n.Tag=i,n.Index=a,a+=1,t.push(n)})),console.log(t),this.configList=t,setTimeout((()=>{this.loading=!1}),400)},CreateNew(){var e={Tag:0,Name:"",HandShakeModeHandShakeMode:1,CargoTransferMode:0,HandShakeConnectionMode:0,ForkArmExtend:!1,NewAdd:!0};this.configList=[e,...this.configList]},GetRowClassName(e){function t(e,t){var a=t.filter((t=>t.Tag==e));return a.length>1}var a=e.row;return a.NewAdd?"bg-info":t(a.Tag,this.configList)?"bg-danger":0==a.Tag?"bg-warning text-light":""},async SaveConfiguration(){var e="";if(this.IsAnyTagZero()&&(e="Tag不得為0"),this.IsTagRepeat()&&(e="Tag不得重覆設置"),""!=e)return void this.$swal.fire({title:e,text:"",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"});const t=await(0,oe.dJ)(this.configList);t.confirm?(this.DownloadConfiguration(),this.$swal.fire({title:"儲存成功",text:"",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})):this.$swal.fire({title:"儲存失敗",text:t.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},IsTagRepeat(){const e=this.configList.map((e=>e.Tag)),t=[...new Set(e)];return e.length!=t.length},IsAnyTagZero(){return!this.configList.every((e=>0!=e.Tag))},HandleDelete(e){var t=this.configList.indexOf(e);this.configList.splice(t,1)}},mounted(){console.log("mounted"),this.DownloadConfiguration()},created(){this.SyncFromAGVSBind=this.SyncFromAGVS}};const ke=(0,g.Z)(Ae,[["render",Ce]]);var Ve=ke;const De={class:"w-100 manual-check-cargo-status"},Te={class:"d-flex justify-content-start border-bottom"},xe={class:"w-100 d-flex justify-content-end"};function Ie(e,t,a,s,i,o){const r=(0,n.up)("el-button"),l=(0,n.up)("el-switch"),d=(0,n.up)("el-form-item"),u=(0,n.up)("el-table-column"),c=(0,n.up)("el-option"),m=(0,n.up)("el-select"),h=(0,n.up)("el-input"),g=(0,n.up)("el-table"),p=(0,n.up)("el-form");return(0,n.wg)(),(0,n.iD)("div",De,[(0,n._)("div",Te,[(0,n.Wm)(r,{type:"success",onClick:o.saveChanges,class:"mb-2 mr-2"},{default:(0,n.w5)((()=>[(0,n.Uk)("儲存變更")])),_:1},8,["onClick"]),(0,n.Wm)(r,{type:"info",onClick:o.reloadCheckPoints,class:"mb-2 ml-2"},{default:(0,n.w5)((()=>[(0,n.Uk)("重新載入")])),_:1},8,["onClick"])]),(0,n.Wm)(p,{"label-width":"70px","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"啟用"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.dataForEdit.Enabled,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataForEdit.Enabled=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"檢查點"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{type:"primary",onClick:o.addCheckPoint,class:"mb-2"},{default:(0,n.w5)((()=>[(0,n.Uk)("新增檢查點")])),_:1},8,["onClick"]),(0,n.Wm)(g,{data:i.dataForEdit.CheckPoints,border:"",style:{width:"100%"},"header-cell-class-name":"bg-primary text-light"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{label:"啟用",prop:"Enabled",width:"100"},{default:(0,n.w5)((e=>[(0,n.Wm)(l,{modelValue:e.row.Enabled,"onUpdate:modelValue":t=>e.row.Enabled=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(u,{label:"檢查點",prop:"CheckPointTag","min-width":"200"},{default:(0,n.w5)((e=>[(0,n.Wm)(m,{modelValue:e.row.CheckPointTag,"onUpdate:modelValue":t=>e.row.CheckPointTag=t,placeholder:"請選擇檢查點",filterable:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.checkPointTagsOptions,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(u,{label:"觸發時機",prop:"TriggerMoment","min-width":"150"},{default:(0,n.w5)((e=>[(0,n.Wm)(m,{modelValue:e.row.TriggerMoment,"onUpdate:modelValue":t=>e.row.TriggerMoment=t},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{label:"放貨前",value:0}),(0,n.Wm)(c,{label:"取貨後",value:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(u,{label:"超時時間(秒)",prop:"Timeout",width:"150"},{default:(0,n.w5)((e=>[(0,n.Wm)(h,{modelValue:e.row.Timeout,"onUpdate:modelValue":t=>e.row.Timeout=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,n.Wm)(u,{label:"操作",width:"100"},{default:(0,n.w5)((e=>[(0,n.Wm)(r,{type:"danger",size:"small",onClick:t=>o.deleteCheckPoint(e.$index)},{default:(0,n.w5)((()=>[(0,n.Uk)("刪除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,n._)("div",xe,[(0,n.Wm)(r,{type:"info",onClick:o.scrollToTop,class:"mt-2",style:{"border-radius":"50%",width:"30px",height:"30px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("Top")])),_:1},8,["onClick"])])])),_:1})])),_:1})])}var Me=a(96486),We=a.n(Me),Ue={props:{checkPointData:{type:Object,default:()=>({Enabled:!1,CheckPoints:[{Enabled:!1,CheckPointTag:-1,Timeout:30,TriggerMoment:0}]})}},data(){return{dataForEdit:{Enabled:!1,CheckPoints:[{Enabled:!1,CheckPointTag:-1,Timeout:30,TriggerMoment:0}]}}},computed:{mapData(){return w.dK.state.MapData},checkPointTagsOptions(){let e=Object.values(this.mapData.Points).filter((e=>0==e.StationType&&0==e.IsVirtualPoint));return e.map((e=>({value:e.TagNumber,label:`${e.TagNumber}(${e.Graph.Display})`}))).sort(((e,t)=>e.value-t.value))}},methods:{deleteCheckPoint(e){this.dataForEdit.CheckPoints.splice(e,1)},addCheckPoint(){this.dataForEdit.CheckPoints.unshift({Enabled:!1,CheckPointTag:void 0,Timeout:30,TriggerMoment:0})},reloadCheckPoints(){this.dataForEdit=We().cloneDeep(this.checkPointData),this.dataForEdit.CheckPoints.sort(((e,t)=>e.CheckPointTag-t.CheckPointTag))},async saveChanges(){this.dataForEdit.CheckPoints=this.dataForEdit.CheckPoints.filter((e=>void 0!==e.CheckPointTag));const e=this.dataForEdit.CheckPoints.reduce(((e,t,a,s)=>{const n=s.findIndex((e=>e.CheckPointTag===t.CheckPointTag&&e.TriggerMoment===t.TriggerMoment));return n===a||e.includes(t.CheckPointTag)||e.push(t.CheckPointTag),e}),[]);if(e.length>0)this.$message.error(`已有相同Tag設置: ${e.join(", ")}`);else{var t=await oe.Wf.SaveManualCheckCargoStatus(this.dataForEdit);t.confirm?(this.dataForEdit.CheckPoints.sort(((e,t)=>e.CheckPointTag-t.CheckPointTag)),this.$message.success(t.message),this.$swal.fire({title:"儲存成功",text:"",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert",timer:1500})):this.$message.error(t.message)}},scrollToTop(){const e=this.$el;e.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.reloadCheckPoints()}};const Oe=(0,g.Z)(Ue,[["render",Ie],["__scopeId","data-v-f36eb5f8"]]);var Pe=Oe;const Be=e=>((0,n.dD)("data-v-45d6ad90"),e=e(),(0,n.Cn)(),e),Le={class:"sounds-setting"},Ge={class:"w-100"},Ee={class:"w-100"},He={class:"w-100"},ze={class:"d-flex w-100"},Ne=Be((()=>(0,n._)("i",{class:"bi bi-stop-fill"},null,-1))),Fe=Be((()=>(0,n._)("i",{class:"bi bi-play-fill"},null,-1)));function Re(e,t,a,s,i,o){const r=(0,n.up)("el-tag"),l=(0,n.up)("el-form-item"),d=(0,n.up)("el-form"),u=(0,n.up)("el-collapse-item"),c=(0,n.up)("el-switch"),m=(0,n.up)("el-option"),h=(0,n.up)("el-select"),g=(0,n.up)("el-input"),p=(0,n.up)("el-button"),_=(0,n.up)("AudioSelector"),w=(0,n.up)("el-drawer"),f=(0,n.up)("el-collapse");return(0,n.wg)(),(0,n.iD)("div",Le,[(0,n.Wm)(f,{modelValue:i.activeNames,"onUpdate:modelValue":t[3]||(t[3]=e=>i.activeNames=e),onChange:e.handleChange,accordion:!1},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{title:"Information",name:"info"},{default:(0,n.w5)((()=>[(0,n._)("div",Ge,[(0,n.Wm)(d,{model:i.sounds,"label-position":"left","label-width":"130px"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"播放組件"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{effect:"dark",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.player),1)])),_:1})])),_:1})])),_:1},8,["model"])])])),_:1}),(0,n.Wm)(u,{title:"音效設置",name:"audio-setting"},{default:(0,n.w5)((()=>[(0,n._)("div",Ee,[(0,n.Wm)(d,{model:i.sounds,"label-position":"left","label-width":"130px"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"旋轉/減速音效"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{size:"large","active-text":"開啟","inactive-text":"關閉","inline-prompt":"",modelValue:i.sounds.slowDownAndRotatinSoundPlay.Enable,"onUpdate:modelValue":t[0]||(t[0]=e=>i.sounds.slowDownAndRotatinSoundPlay.Enable=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(l,{label:"旋轉/減速播放模式"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{modelValue:i.sounds.slowDownAndRotatinSoundPlay.SoundPlayType,"onUpdate:modelValue":t[1]||(t[1]=e=>i.sounds.slowDownAndRotatinSoundPlay.SoundPlayType=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{label:"語音",value:0}),(0,n.Wm)(m,{label:"音樂",value:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1}),(0,n.Wm)(u,{title:"音效路徑",name:"audio-path"},{default:(0,n.w5)((()=>[(0,n._)("div",He,[(0,n.Wm)(d,{model:i.sounds,"label-position":"left","label-width":"130px"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.filteredAudioFileNamesByAGVModel,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{key:t,label:i.translateMap[t]||t},{default:(0,n.w5)((()=>[(0,n._)("div",ze,[(0,n.Wm)(g,{class:"flex-fill",modelValue:i.sounds.audioPathes[t],"onUpdate:modelValue":e=>i.sounds.audioPathes[t]=e,disabled:!i.editStateStore[t]},null,8,["modelValue","onUpdate:modelValue","disabled"]),i.editStateStore[t]?((0,n.wg)(),(0,n.j4)(p,{key:0,type:"success",onClick:e=>o.SavePath(t),style:{"margin-left":"10px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("儲存")])),_:2},1032,["onClick"])):(0,n.kq)("",!0),i.editStateStore[t]?((0,n.wg)(),(0,n.j4)(p,{key:1,type:"danger",onClick:()=>{i.editStateStore[t]=!1},style:{"margin-left":"10px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:2},1032,["onClick"])):((0,n.wg)(),(0,n.j4)(p,{key:2,onClick:e=>o.EditPath(t),type:"info",style:{"margin-left":"10px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("編輯")])),_:2},1032,["onClick"])),(0,n.Wm)(p,{type:"success",onClick:e=>o.selectSound(t),style:{"margin-left":"10px"}},{default:(0,n.w5)((()=>[(0,n.Uk)("選取")])),_:2},1032,["onClick"]),i.playingStateStore[t]?((0,n.wg)(),(0,n.j4)(p,{key:3,circle:"",type:"danger",onClick:e=>o.stopPlaySound(t),style:{"margin-left":"10px"}},{default:(0,n.w5)((()=>[Ne])),_:2},1032,["onClick"])):((0,n.wg)(),(0,n.j4)(p,{key:4,circle:"",type:"primary",onClick:e=>o.playSound(t),style:{"margin-left":"10px"}},{default:(0,n.w5)((()=>[Fe])),_:2},1032,["onClick"]))])])),_:2},1032,["label"])))),128)),(0,n.Wm)(w,{modelValue:i.showSelectSoundDrawer,"onUpdate:modelValue":t[2]||(t[2]=e=>i.showSelectSoundDrawer=e),title:`選取音效-${i.translateMap[i.selectSoundKey]}`,"before-close":e.handleClose,size:"80%"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{onAudioSelected:o.handleAudioSelectedFromDrawer},null,8,["onAudioSelected"])])),_:1},8,["modelValue","title","before-close"])])),_:1},8,["model"])])])),_:1})])),_:1},8,["modelValue","onChange"])])}var Ze=a(47755);const $e=e=>((0,n.dD)("data-v-533bac14"),e=e(),(0,n.Cn)(),e),qe={class:"audio-selector"},je={class:"audio-upload mb-4"},Qe=$e((()=>(0,n._)("div",{class:"el-upload__tip"},"只能上傳 mp3/wav 檔案，且不超過 10MB",-1)));function Ye(e,t,a,s,i,o){const r=(0,n.up)("el-button"),l=(0,n.up)("el-upload"),d=(0,n.up)("el-table-column"),u=(0,n.up)("el-table");return(0,n.wg)(),(0,n.iD)("div",qe,[(0,n._)("div",je,[(0,n.Wm)(l,{class:"upload-demo",action:o.audioUploadUrl,"on-success":o.handleUploadSuccess,"on-error":o.handleUploadError,"before-upload":o.beforeUpload,accept:".mp3, .wav"},{tip:(0,n.w5)((()=>[Qe])),default:(0,n.w5)((()=>[(0,n.Wm)(r,{type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("上傳音檔")])),_:1})])),_:1},8,["action","on-success","on-error","before-upload"])]),(0,n.Wm)(u,{data:i.playlist,style:{width:"100%"},height:"60%",size:"large",border:"",stripe:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{prop:"name",label:"Audio Name",width:"180"}),(0,n.Wm)(d,{prop:"path",label:"Path","min-width":"200"}),(0,n.Wm)(d,{label:"",fixed:"right",width:"240"},{default:(0,n.w5)((e=>[(0,n.Wm)(r,{circle:"",type:e.row.isPlaying?"danger":"primary",onClick:t=>e.row.isPlaying?o.stopAudio(e.row):o.playAudio(e.row),style:{"margin-right":"10px"}},{default:(0,n.w5)((()=>[(0,n._)("i",{class:(0,v.C_)(e.row.isPlaying?"bi bi-stop-fill":"bi bi-play-fill")},null,2)])),_:2},1032,["type","onClick"]),(0,n.Wm)(r,{type:"success",onClick:t=>o.selectAudio(e.row)},{default:(0,n.w5)((()=>[(0,n.Uk)("選取")])),_:2},1032,["onClick"]),(0,n.Wm)(r,{type:"danger",onClick:t=>o.deleteAudio(e.row)},{default:(0,n.w5)((()=>[(0,n.Uk)("刪除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])}var Ke={data(){return{playlist:[],audioPlayer:new Audio}},mounted(){this.$nextTick((()=>{this.fetchAudioFiles()}))},computed:{audioUploadUrl(){return`${he.Z.backend_host}/api/Sounds/UploadAudio`}},methods:{async fetchAudioFiles(){try{const e=await fetch(`${he.Z.backend_host}/api/Sounds/GetUsableAudios`),t=await e.json();this.playlist=t.map((e=>({name:e.fileName,path:e.fileFullPath,duration:"00:00",isPlaying:!1}))),this.playlist.sort(((e,t)=>e.name.localeCompare(t.name)))}catch(e){console.error("Error fetching audio files:",e)}},playAudio(e){this.playlist.forEach((e=>{e.isPlaying=!1})),this.audioPlayer.src=`${he.Z.backend_host}/audios/${e.name}`,this.audioPlayer.play().catch((e=>{console.error("Error playing audio:",e)})),e.isPlaying=!0,console.log(`Playing audio: ${e.name}`),this.audioPlayer.onended=()=>{e.isPlaying=!1}},stopAudio(e){this.audioPlayer.pause(),this.audioPlayer.currentTime=0,e.isPlaying=!1,console.log(`Stopping audio: ${e.name}`)},selectAudio(e){console.log(`Selected audio: ${e.path}`),this.$emit("audioSelected",e.path)},async deleteAudio(e){console.log(`Deleting audio: ${e.name}`);try{await fetch(`${he.Z.backend_host}/api/Sounds?audioName=${encodeURIComponent(e.name)}`,{method:"DELETE"}),console.log(`Audio file ${e.name} deleted successfully`),this.$message.success(`音效 ${e.name} 已成功刪除`),this.fetchAudioFiles()}catch(t){console.error("Error deleting audio file:",t),this.$message.error(`刪除音效 ${e.name} 失敗`)}},handleUploadSuccess(e,t,a){console.log("Upload success:",e,t,a),this.fetchAudioFiles(),this.$message.success("上傳成功")},handleUploadError(e,t,a){console.log("Upload error:",e,t,a),this.$message.error("上傳失敗")},beforeUpload(e){return console.log("Before upload:",e),!0}}};const Xe=(0,g.Z)(Ke,[["render",Ye],["__scopeId","data-v-533bac14"]]);var Je=Xe,et={components:{AudioSelector:Je},data(){return{sounds:(new Ze.Z).SoundsParams,activeNames:["info","audio-setting","audio-path"],titleStyle:{fontWeight:"bold",fontSize:"16px"},translateMap:{move:"一般走行",alarm:"Alarm",goToCharge:"移動至充電站",action:"取放貨",rotating:"旋轉中",slowDown:"減速中",batteryExchange:"電池交換中"},playingStateStore:{move:!1,alarm:!1,goToCharge:!1,action:!1,rotating:!1,slowDown:!1,batteryExchange:!1},editStateStore:{move:!1,alarm:!1,goToCharge:!1,action:!1,rotating:!1,slowDown:!1,batteryExchange:!1},showSelectSoundDrawer:!1,selectSoundKey:"",audioPlayer:new Audio}},computed:{player(){return w.q$.state.AGVStatus.BuzzerState?w.q$.state.AGVStatus.BuzzerState.player:{}},agvModel(){return w.FN.state.Settings.AgvType},filteredAudioFileNamesByAGVModel(){let e=this.getAudioFileNames();return e?2===this.agvModel?Object.fromEntries(Object.entries(e).filter((([e])=>"batteryExchange"!==e&&"goToCharge"!==e&&"action"!==e))):Object.fromEntries(Object.entries(e).filter((([e])=>"batteryExchange"!==e))):{}}},mounted(){this.sounds=We().cloneDeep(w.FN.state.Settings.SoundsParams)},methods:{async playSound(e){Object.keys(this.playingStateStore).forEach((e=>{this.playingStateStore[e]=!1})),this.audioPlayer.paused||(this.audioPlayer.pause(),this.audioPlayer.currentTime=0);const t=`${he.Z.backend_host}/audios/${this.getAudioFileNames()[e]}`;this.audioPlayer.src=t,this.audioPlayer.play().catch((t=>{console.error("音效播放失敗:",t),this.$notify({title:"音效播放",message:`[${this.translateMap[e]}] 音效播放失敗`,type:"error"})})),this.audioPlayer.onended=()=>{this.playingStateStore[e]=!1},this.$notify({title:"音效播放",message:`正在播放 [${this.translateMap[e]}] 音效`,type:"info"}),this.playingStateStore[e]=!0},async stopPlaySound(e){this.audioPlayer.pause(),this.audioPlayer.currentTime=0,this.playingStateStore[e]=!1},selectSound(e){this.showSelectSoundDrawer=!0,this.selectSoundKey=e},saveSounds(){w.FN.commit("UpdateSettings",{SoundsParams:this.sounds})},SavePath(e){this.editStateStore[e]=!1,oe.FD.SaveAudioPath(this.sounds.audioPathes),this.$notify({title:"音效設置",message:`[${this.translateMap[e]}] 音效路徑已儲存`,type:"success"})},EditPath(e){this.editStateStore[e]=!0},handleAudioSelectedFromDrawer(e){this.sounds.audioPathes[this.selectSoundKey]=e,this.showSelectSoundDrawer=!1,oe.FD.SaveAudioPath(this.sounds.audioPathes)},getAudioFileNames(){return Object.fromEntries(Object.entries(this.sounds.audioPathes).map((([e,t])=>[e,t.split("/").pop()])))}}};const tt=(0,g.Z)(et,[["render",Re],["__scopeId","data-v-45d6ad90"]]);var at=tt;var st={components:{uploader:_e,IOSetting:we.Z,EQHandshakeConfiguration:Ve,ManualCheckCargoStatus:Pe,SoundsSetting:at},data(){return{loading:!0,drawer_show:!1,selected_tab:0,settings:new Ze.Z,normal_stations:[],saveSettingsTimeout:null}},computed:{IsForkAGV(){return w.q$.getters.IsForkAGV},IsInspectionAGV(){return w.q$.getters.IsInspectionAGV},IMUMaxMinRecord(){return w.q$.getters.IMUMaxMinRecord},IMU_ACC_Data(){var e=ue.A.getters.ImuData_Acc;return{x:(e.x/9.8).toFixed(2),y:(e.y/9.8).toFixed(2),z:(e.z/9.8).toFixed(2)}},BuzzerState(){const e=w.q$.state.AGVStatus.BuzzerState;return e||{isPlaying:!1,player:"ros-sound-play",playingAudio:""}}},mounted(){l.Z.on("show-settings",(async e=>{this.loading=!0,this.drawer_show=!0,setTimeout((async()=>{let t=0;const a=3;while(t<a){if(await w.FN.dispatch("downloadSettings"),w.FN.state.IsSettingsLoaded)return this.settings=w.FN.state.Settings,e&&(this.selected_tab=e),this.loading=!1,void this.$notify({title:"系統設定",message:"參數下載完成",type:"success",position:"bottom-right",duration:2e3});t++,await new Promise((e=>setTimeout(e,1e3)))}this.loading=!1,this.$swal.fire({title:"載入設定失敗",text:"無法下載系統設定，請稍後再試",icon:"error",showCancelButton:!0,confirmButtonText:"重新嘗試",cancelButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed?l.Z.emit("show-settings",this.selected_tab):this.drawer_show=!1}))}),200)}))},methods:{async HandleSystemCloseBtnClick(){this.SystemOptConfirmAndDoAction("確定要關閉車載系統?",(async()=>{var e=await oe.Wf.CloseSystem();e.confirm?(this.drawer_show=!1,this.$swal.fire({title:"系統將於一秒後關閉...",text:"",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})):this.$swal.fire({title:e.message,text:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}))},async HandleSystemRestartBtnClick(){this.SystemOptConfirmAndDoAction("確定要重新啟動車載系統?",(async()=>{var e=await oe.Wf.RestartSystem();e.confirm?(this.drawer_show=!1,this.$swal.fire({text:"",title:"系統將於一秒後重新啟動...",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})):this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}))},async HandleOTAUpdateBtnClick(){this.SystemOptConfirmAndDoAction("確定進行系統更新?",(async()=>{this.$swal.fire({text:"",title:"系統更新中...",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"});await ye().get(he.Z.OTA_Update_URL)}))},SystemOptConfirmAndDoAction(e,t){return this.$swal.fire({title:e,text:"",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&t()}))},async HandleParamChanged(){this.saveSettingsTimeout&&clearTimeout(this.saveSettingsTimeout),this.saveSettingsTimeout=setTimeout((async()=>{const e=await oe.Wf.SaveSettings(this.settings),t=e.confirm,a=e.errorMsg;t?(0,ie.bM)({title:"系統參數設定",message:"系統參數設定成功",type:"success",duration:1e3,position:"bottom-right"}):(setTimeout((async()=>{await w.FN.dispatch("downloadSettings"),w.FN.state.IsSettingsLoaded&&(this.settings=w.FN.state.Settings)}),500),this.$swal.fire({title:"系統參數設定",text:"系統參數設定失敗:"+a,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}))}),500)},TimeFormat(e){return b()(e).format("YYYY/MM/DD HH:mm:ss")},HandleIMUDataResetButtonClick(){this.$swal.fire({text:"",title:"確定要重置IMU紀錄?",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&oe.h0.ResetMAXMINRecord()}))},PlayAlarm(){oe.FD.Alarm()},PlayAction(){oe.FD.Action()},PlayMove(){oe.FD.Move()}}};const nt=(0,g.Z)(st,[["render",ne],["__scopeId","data-v-397c1898"]]);var it=nt;const ot={class:"w-100"},rt={key:0,class:"mx-1"};function lt(e,t,a,i,o,r){const l=(0,n.up)("b-button");return(0,n.wg)(),(0,n.j4)(s.uT,{name:"el-zoom-in-center"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{class:"handshaking-notify bg-primary text-light",style:(0,v.j5)(o.minimize?o.miniSizeStyle:{})},[(0,n._)("div",ot,[(0,n._)("span",{class:(0,v.C_)([r.IsHandshakeFail?"text-danger":"",""])},(0,v.zw)(r.MessageTitle),3),r.IsHandshakeFail?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",rt,(0,v.zw)(o.dot_animation_str),1)),(0,n._)("div",{class:(0,v.C_)(["sub-title mx-1",r.IsHandshakeFail?"bg-danger":""])},(0,v.zw)(r.EQHSStatus.HandshakingInfoText),3)]),(0,n.Wm)(l,{size:"sm",onClick:t[0]||(t[0]=()=>{o.minimize=!o.minimize}),variant:"light",id:"close-btn",class:"my-2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.minimize?"▲":"-"),1)])),_:1})],4),[[s.F8,r.EQHSStatus.IsHandshaking]])])),_:1})}var dt={data(){return{dot_animation_str:".",sub_title_text:"sub",minimize:!1,miniSizeStyle:{width:"450px",height:"120px",fontSize:"28px",position:"absolute",left:"auto",top:"auto",right:"3px",bottom:"3px"}}},computed:{MessageTitle(){return this.IsHandshakeFail?this.IsExchangeBatteryTask?"電池交換作業失敗":"取放貨作業失敗":this.IsExchangeBatteryTask?"電池交換作業中":"取放貨作業中"},EQHSStatus(){return w.q$.getters.AGVStatus.HandshakeStatus},IsHandshakeFail(){return this.EQHSStatus.HandshakingInfoText&&this.EQHSStatus.HandshakingInfoText.includes("Handshake_Fail")},IsExchangeBatteryTask(){return 14==w.q$.getters.AGVStatus.OrderInfo.ActionName}},methods:{animation(){var e=0;setInterval((()=>{this.dot_animation_str+=".",e+=1,e>2&&(e=0,this.dot_animation_str=".")}),1e3)}},mounted(){this.animation()}};const ut=(0,g.Z)(dt,[["render",lt],["__scopeId","data-v-0bf5e1e5"]]);var ct=ut;const mt=e=>((0,n.dD)("data-v-46bf9cc0"),e=e(),(0,n.Cn)(),e),ht={class:"w-100"},gt=mt((()=>(0,n._)("i",{class:"bi bi-stoplights"},null,-1))),pt=mt((()=>(0,n._)("span",{class:""},"交管停等中",-1))),_t={class:"mx-1"},wt={class:"sub-title mx-1"};function ft(e,t,a,i,o,r){const l=(0,n.up)("b-button");return(0,n.wg)(),(0,n.j4)(s.uT,{name:"el-zoom-in-center"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{class:"wait-next-task-move-notify bg-primary text-light",style:(0,v.j5)(o.minimize?o.miniSizeStyle:{})},[(0,n._)("div",ht,[gt,pt,(0,n._)("span",_t,(0,v.zw)(o.dot_animation_str),1),(0,n._)("div",wt,(0,v.zw)(r.WaitinInfo),1)]),(0,n.Wm)(l,{onClick:t[0]||(t[0]=()=>{o.minimize=!o.minimize}),variant:"light",id:"close-btn",class:"my-2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.minimize?"▲":"-"),1)])),_:1})],4),[[s.F8,r.IsSegmentTaskAndIDLE]])])),_:1})}var yt={data(){return{dot_animation_str:".",sub_title_text:"sub",minimize:!1,miniSizeStyle:{width:"330px",height:"120px",fontSize:"30px",position:"absolute",left:"auto",top:"auto",right:"3px",bottom:"3px"}}},computed:{IsSegmentTaskAndIDLE(){return w.q$.getters.AGVStatus.NavInfo.IsSegmentTaskExecuting},WaitinInfo(){return`等待前往目的地-${w.q$.getters.AGVStatus.NavInfo.Destination}`}},methods:{animation(){var e=0;setInterval((()=>{this.dot_animation_str+=".",e+=1,e>2&&(e=0,this.dot_animation_str=".")}),1e3)}},mounted(){this.animation()}};const bt=(0,g.Z)(yt,[["render",ft],["__scopeId","data-v-46bf9cc0"]]);var vt=bt;const St=e=>((0,n.dD)("data-v-472c36f2"),e=e(),(0,n.Cn)(),e),Ct={class:"w-100"},At=St((()=>(0,n._)("i",{class:"bi bi-stoplights"},null,-1))),kt=St((()=>(0,n._)("span",{class:""},"AGV 初始化..",-1))),Vt={class:"mx-1"};function Dt(e,t,a,i,o,r){const l=(0,n.up)("b-button");return(0,n.wg)(),(0,n.j4)(s.uT,{name:"el-zoom-in-center"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{class:"wait-next-task-move-notify bg-primary text-light",style:(0,v.j5)(o.minimize?o.miniSizeStyle:{})},[(0,n._)("div",Ct,[At,kt,(0,n._)("span",Vt,(0,v.zw)(o.dot_animation_str),1),(0,n._)("div",{class:(0,v.C_)(["sub-title mx-1 text-primary",o.minimize?"sub-title-mini":""])},(0,v.zw)(r.InitializingStatusText),3)]),(0,n.Wm)(l,{onClick:t[0]||(t[0]=()=>{o.minimize=!o.minimize}),variant:"light",id:"close-btn",class:"my-2"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.minimize?"▲":"-"),1)])),_:1})],4),[[s.F8,r.IsAGVInitializing]])])),_:1})}var Tt={data(){return{dot_animation_str:".",sub_title_text:"sub",minimize:!1,miniSizeStyle:{width:"450px",height:"120px",fontSize:"28px",position:"absolute",left:"auto",top:"auto",right:"3px",bottom:"3px"}}},computed:{IsAGVInitializing(){return w.q$.getters.IsAGVInitializing},InitializingStatusText(){return w.q$.getters.InitializingStatusText}},methods:{animation(){var e=0;setInterval((()=>{this.dot_animation_str+=".",e+=1,e>2&&(e=0,this.dot_animation_str=".")}),1e3)}},mounted(){this.animation()}};const xt=(0,g.Z)(Tt,[["render",Dt],["__scopeId","data-v-472c36f2"]]);var It=xt,Mt=a(2262);const Wt=e=>((0,n.dD)("data-v-10dbd6f7"),e=e(),(0,n.Cn)(),e),Ut={key:0,class:"system-error-notify"},Ot=Wt((()=>(0,n._)("span",{class:"bi bi-exclamation-triangle mx-2"},null,-1))),Pt={key:0},Bt={key:1},Lt={class:"message"};var Gt={__name:"SystemErrorNotify",setup(e){const t=(0,Mt.iH)(!1),a=(0,Mt.iH)(""),s=(0,Mt.iH)(!1),i=()=>{t.value=!1};return(0,n.bv)((()=>{l.Z.on("VehicleError",(e=>{t.value=!0,a.value=e})),l.Z.on("DiskUsageError",(e=>{t.value=!0,a.value=e,s.value=!0}))})),(e,o)=>{const r=(0,n.up)("b-button");return t.value?((0,n.wg)(),(0,n.iD)("div",Ut,[(0,n._)("div",{class:"close-btn-container"},[(0,n._)("span",{class:"bi bi-x-lg",onClick:i})]),(0,n._)("div",null,[Ot,s.value?((0,n.wg)(),(0,n.iD)("span",Pt,"磁碟空間不足")):((0,n.wg)(),(0,n.iD)("span",Bt,"系統異常"))]),(0,n._)("div",Lt,(0,v.zw)(a.value),1),s.value?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"w-100 clear-disk-btn",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("清理磁碟空間")])),_:1})):(0,n.kq)("",!0)])):(0,n.kq)("",!0)}}};const Et=(0,g.Z)(Gt,[["__scopeId","data-v-10dbd6f7"]]);var Ht=Et,zt=a(70886),Nt=a(56512);console.log("Fetch Worker Start");const Ft=new BroadcastChannel("vcs_data"),Rt=new BroadcastChannel("ros_data");let Zt=!0,$t=!1;var qt=null;function jt(e,t){let a;return function(){const s=this,n=arguments;a||(e.apply(s,n),a=!0,setTimeout((()=>a=!1),t))}}function Qt(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=a.length,n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*s));return t}he.Z.backend_host.replace("http","ws"),Qt(8);var Yt=!1;function Kt(e){try{var t=e.ConnectionStatesVM,a=e.VMSStatesVM,s=e.DIOTableVM,n=e.RDTestData;a&&w.q$.commit("updateStatus",a),t&&w.g4.commit("StoreConnectionState",t),s&&w.zb.commit("updateStatus",s),n&&w.tc.commit("SetData",n)}catch(i){}}jt((function(e){if("error"!=e.data&&"closed"!=e.data){Yt&&location.reload();let a=e.data;Kt(a);var t={type:"data",payload:a};Ft.postMessage(t)}else Yt=!0,l.Z.emit("ws_disconnect")}),50);function Xt(){qt=(new Nt.s).withUrl(`${he.Z.backend_host}/FrontendHub`).withAutomaticReconnect([0,1e3,2e3,3e3]).build(),qt.on("ReceiveData",((e,t)=>{Kt(t);var a={type:"data",payload:t};Ft.postMessage(a)})),qt.on("VehicleError",(e=>{l.Z.emit("VehicleError",e)})),qt.on("DiskUsageError",(e=>{l.Z.emit("DiskUsageError",e)})),qt.on("AGV-Notify-Message",(e=>{l.Z.emit("AGV-Notify-Message-Recieved",e)})),qt.on("DebugMessage",(e=>{l.Z.emit("DebugMessage",e)})),qt.on("ManualCheckCargoStatus",(e=>{l.Z.emit("ManualCheckCargoStatus",e)})),qt.on("ParameterChanged",(e=>{w.FN.commit("setSettings",e),l.Z.emit("ParameterChanged",e)})),qt.on("ReChargeCircuitChanged",(e=>{l.Z.emit("ReChargeCircuitChanged",e)})),qt.on("CargoStatus",(e=>{l.Z.emit("CargoStatusChanged",e)})),qt.onreconnecting((()=>{console.warn("reconnecting"),l.Z.emit("hub-reconnecting")})),qt.onclose((()=>{console.log("SignalR  Disconnect"),l.Z.emit("ws_disconnect",void 0),setTimeout((()=>{Xt()}),1e3)}));try{qt.start().then((()=>{console.info("SignalR Connected!"),l.Z.emit("hub-connected")})).catch((e=>{console.log("SignalR Connection Error"),setTimeout((()=>{Xt()}),1e4)}))}catch{}}function Jt(){if(!$t){var e={type:"data",payload:{}};Ft.postMessage(e),Ft.postMessage({type:"heartbeat"}),$t=!0,(0,zt._B)(),Xt(),console.log("As data brocaster"),setInterval((()=>{Ft.postMessage({type:"heartbeat"})}),50),setInterval((()=>{var e=ue.A.getters.Module_Information;Rt.postMessage({type:"data",payload:JSON.stringify(e)})}),100),ie.bM.info({message:"Start ROS and Backend Data Fetch",duration:1e3})}}let ea=Date.now();function ta(){ea=Date.now(),setInterval((()=>{var e=Date.now()-ea;e>700&&(Zt=!1,setTimeout((()=>{Zt||Jt()}),700))}),300)}function aa(){setTimeout((()=>{Rt.onmessage=e=>{if(!$t&&"data"==e.data.type){var t=JSON.parse(e.data.payload);ue.A.commit("update_module_info",t)}},ea=Date.now(),Ft.onmessage=e=>{if(!$t)if("data"==e.data.type){ea=Date.now(),Zt=!0;var t=e.data.payload;Kt(t)}else"heartbeat"==e.data.type&&(Zt=!0,ea=Date.now())},ta()}),800),de.GetMapFromServer()}var sa=a(33866),na={components:{SystemErrorNotify:Ht,SideMenuDrawer:_,SystemSettingsView:it,EQHandshakingNotify:ct,WaitAGVsNextMoveActionNotify:vt,AGVInitalizingNotify:It,SystemErrorNotify:Ht},data(){return{showMenuToggleIcon:!1,loading:!0,isMobile:!1}},methods:{ToggleMenu(){this.$refs.side_menu.Show()},Timeformat(e,t="yyyy-MM-DD HH:mm:ss"){return b()(e).format(t)},async HandleAlarmSheetClick(e){await w.q$.dispatch("clear_alarm_with_code",e)},checkConnectionStatus(){let e=w.g4.state.ConnectionStateData.RosbridgeServer;const t=2==e||1==e;let a=w.g4.state.ConnectionStateData.WAGO;const s=2==a||1==a;let n=w.g4.state.ConnectionStateData.VMS;const i=2==n||1==n;if(t||s||i){const e=w.FN.state.Settings.Connections.RosBridge.IP,a=w.FN.state.Settings.Connections.RosBridge.Port,n=w.FN.state.Settings.Connections.Wago.IP,o=w.FN.state.Settings.Connections.Wago.Port,r=w.FN.state.Settings.Connections.AGVS.IP,l=w.FN.state.Settings.Connections.AGVS.Port;let d="";t&&(d+=`[ROS服務器]連接失敗..請確認連線 (${e}:${a})\n`),s&&(d+=`[IO模組]   連接失敗..請確認連線 (${n}:${o})\n`),i&&(d+=`[派車系統]   連接失敗..請確認連線 (${r}:${l})`),this.$swal.fire({title:"通訊連線異常",html:`<ul class="border rounded-3 border-light py-3" style="font-size: 22px; color:white; list-style-type: disc; text-align: left; margin: 0; padding-left: 50px;">${d.split("\n").map((e=>`<li style="margin-bottom: 10px;">${e}</li>`)).join("")}</ul>`,icon:"error",showCancelButton:!0,cancelButtonText:"Reload",confirmButtonText:"OK",customClass:{popup:"bg-danger bg-opacity-6",confirmButton:"btn btn-danger",cancelButton:"btn btn-outline-danger",title:"text-light"}}).then((e=>{"cancel"===e.dismiss&&window.location.reload()}))}}},computed:{CurrentSystemMsg(){return w.I7.getters.SysMessages},CurrentAlarms(){return w.q$.getters.AlarmCodes},AlarmCodesGroup(){return w.q$.getters.AlarmGroup},VehicleName(){return w.q$.getters.AGVName},AppBorderStyle(){if(this.AlarmCodesGroup){var e=Object.values(this.AlarmCodesGroup),t=0!=e.filter((e=>0!=e.Alarm.ELevel)).length;return{border:0==e.length?"":t?"5px solid red":"5px solid gold"}}},IsVisitorUsing(){return w.U6.getters.IsVisitor}},watch:{VehicleName(e,t){document.title="GPM-"+e}},created(){const e=(0,sa.Z)();this.isMobile=e.isMobile,console.info(this.isMobile),console.info(e.device.model)},mounted(){aa(),document.title="GPM AGV",l.Z.on("/god_mode_changed",(e=>{this.showMenuToggleIcon=e})),l.Z.on("idle",(e=>{this.$router.push("/idle")})),l.Z.on("ManualCheckCargoStatus",(e=>{let t;this.$swal.fire({title:"貨物狀態確認(Cargo Status Confirm)",icon:"warning",html:"<br/>倒數計時結束後將自動完成確認<br/>Confirmation will be automatically completed after the countdown ends.<br/> <b></b> ",timer:1e3*e.Timeout,timerProgressBar:!0,showCancelButton:!0,cancelButtonText:"完成確認",cancelButtonClass:"bg-primary text-light",allowOutsideClick:!1,didOpen:()=>{this.$swal.showLoading();const e=this.$swal.getPopup().querySelector("b");t=setInterval((()=>{e.textContent=`${(this.$swal.getTimerLeft()/1e3).toFixed(1)}`}),1e3)},willClose:()=>{clearInterval(t)}}).then((e=>{e.isConfirmed?console.log("確認按鈕被點擊"):e.dismiss===this.$swal.DismissReason.cancel&&((0,oe.y_)(),clearInterval(t))}))})),l.Z.on("DebugMessage",(e=>{f.z8.info(e)})),l.Z.on("AGV-Notify-Message-Recieved",(e=>{const t=e.title,a=e.message,s=e.alarmCode;if(10052!=s)if(3383!=s)this.$swal.fire({title:t,text:`[${s}]${a}`,icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"});else{let e;this.$swal.fire({title:t,icon:"warning",html:`${a} <b></b> `,timer:1e4,timerProgressBar:!0,didOpen:()=>{this.$swal.showLoading();const t=this.$swal.getPopup().querySelector("b");e=setInterval((()=>{t.textContent=`${(this.$swal.getTimerLeft()/1e3).toFixed(1)}`}),1e3)},willClose:()=>{clearInterval(e),location.reload()}}).then((e=>{e.dismiss===this.$swal.DismissReason.timer&&console.log("I was closed by the timer")}))}else this.$swal.fire({title:t,text:`[${s}]${a}`,icon:"error",showCancelButton:!this.IsVisitorUsing,confirmButtonText:"OK",cancelButtonText:"前往設置",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed||(l.Z.emit("on-fork-height-click"),l.Z.emit("open-fork-teach-table"))}))})),l.Z.on("CargoStatusChanged",(e=>{console.warn(e)})),setTimeout((()=>{this.loading=!1}),2e3),w.FN.getters.IsSettingsLoaded?setTimeout((()=>{this.checkConnectionStatus()}),3e3):this.$swal.fire({title:"Warning!",text:"系統參數未從服務器下載完成",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}};const ia=(0,g.Z)(na,[["render",r]]);var oa=ia,ra=a(22201);const la={class:"home h-100"},da={key:0},ua={class:"d-flex my-2"},ca={class:"d-flex"},ma={class:"main-content"},ha={key:0,class:"server-error py-1 border fixed-bottom"},ga={class:"agv-name-in-alarm px-2"},pa=(0,n._)("i",{class:"bi bi-exclamation-diamond"},null,-1),_a={class:"d-flex flex-row h-100"},wa={class:"side h-100"},fa={class:"opt-buttons px-1 py-1 d-flex flex-column"},ya={key:0},ba={key:1},va={key:0,class:"bi bi-volume-mute-fill"},Sa={key:1,class:"bi bi-volume-up-fill"},Ca={key:0,class:"bi bi-box-arrow-in-right mx-1"},Aa={key:1,class:"bi bi-box-arrow-left mx-1"},ka={class:"modes border rounded m-1 p-3 py-1 px-3 text-start"},Va={class:"d-flex flex-row"},Da=(0,n._)("div",{class:"mode-item-label py-2"},"Online Mode",-1),Ta={class:"d-flex flex-row"},xa=(0,n._)("div",{class:"mode-item-label py-2"},"Auto Mode",-1),Ia={key:0,class:"connection-status border rounded m-1 p-3 py-1"},Ma={class:"state-title"},Wa=(0,n._)("i",{class:"bi bi-ethernet mx-1"},null,-1),Ua={class:"coordination border rounded m-1 p-3 py-1"},Oa={key:0,class:"w-100 d-flex"},Pa=(0,n._)("div",{class:"state-title",style:{"text-align":"center"}},"Tag",-1),Ba={class:"mx-2 w-100"},La=(0,n._)("div",{class:"state-title",style:{"text-align":"center"}},"偏移量",-1),Ga={key:1,class:"py-1 d-flex justify-content-center"},Ea={key:0,class:"m-1"},Ha=(0,n._)("div",{class:"state-title"},"Tag",-1),za={key:1,class:"m-1"},Na=(0,n._)("div",{class:"state-title"},"Location",-1),Fa={class:"m-1"},Ra={class:"state-title"},Za={class:"mileage border rounded m-1 p-1 py-1"},$a={class:"w-100 d-flex"},qa={key:0,class:"w-100"},ja=(0,n._)("i",{class:"bi bi-arrow-down-up"},null,-1),Qa={class:"w-100"},Ya={class:"state-title"},Ka=(0,n._)("i",{class:"bi bi-mastodon mx-1"},null,-1),Xa={class:"m-2 p-3 py-1"},Ja={class:"w-100 d-flex flex-column"},es={class:"border rounded bg-light py-1 px-2 fixed-bottom",style:{height:"35px"}},ts={class:"modals"},as={class:"py-3"},ss={key:1,class:"w-100 bg-warning fixed-bottom p-2"},ns=(0,n._)("span",{class:"text-danger",style:{"font-weight":"bold"}},"空取空放模式運行中",-1);function is(e,t,a,i,o,r){const l=(0,n.up)("el-input"),d=(0,n.up)("el-button"),u=(0,n.up)("SimpleKeyboard"),c=(0,n.up)("el-dialog"),m=(0,n.up)("AGVHeader"),h=(0,n.up)("AGVLocalization"),g=(0,n.up)("BatteryGroup"),p=(0,n.up)("b-button"),_=(0,n.up)("el-badge"),w=(0,n.up)("login"),f=(0,n.up)("el-divider"),y=(0,n.up)("el-switch"),b=(0,n.up)("connection_state"),S=(0,n.up)("el-tag"),C=(0,n.up)("b-form-input"),A=(0,n.up)("el-form-item"),k=(0,n.up)("fork_height"),V=(0,n.up)("mileage"),D=(0,n.up)("emo"),T=(0,n.up)("MainContent"),x=(0,n.up)("QuickActions"),I=(0,n.up)("el-alert"),M=(0,n.up)("b-modal"),W=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",la,[o.buildCstDataDialog.show?((0,n.wg)(),(0,n.iD)("div",da,[(0,n.wy)(((0,n.wg)(),(0,n.j4)(c,{modelValue:o.buildCstDataDialog.show,"onUpdate:modelValue":t[4]||(t[4]=e=>o.buildCstDataDialog.show=e),modal:!1,draggable:"",title:"貨物帳籍建立"},{default:(0,n.w5)((()=>[(0,n._)("div",ua,[(0,n.Wm)(l,{disabled:o.buildCstDataDialog.loading,ref:"cargo_id_input",placeholder:"在此輸入貨物ID",modelValue:o.buildCstDataDialog.cargo_id,"onUpdate:modelValue":t[0]||(t[0]=e=>o.buildCstDataDialog.cargo_id=e),clearable:"",size:"large",onInput:r.HandleCargoIDInputChanged},null,8,["disabled","modelValue","onInput"]),(0,n.Wm)(d,{disabled:o.buildCstDataDialog.loading,class:"mx-1",size:"large",type:"primary",onClick:r.HandleCstIDBuildConfirm},{default:(0,n.w5)((()=>[(0,n.Uk)("確認")])),_:1},8,["disabled","onClick"]),(0,n.Wm)(d,{disabled:o.buildCstDataDialog.loading,size:"large",type:"danger",onClick:t[1]||(t[1]=()=>{o.buildCstDataDialog.show=!1,o.buildCstDataDialog.cargo_id="",r.HandleCargoIDInputChanged("")})},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1},8,["disabled"])]),(0,n._)("div",ca,[(0,n.Wm)(d,{class:"mx-1",size:"large",type:"",onClick:t[2]||(t[2]=e=>r.HandleUseReaderButClick(200))},{default:(0,n.w5)((()=>[(0,n.Uk)("使用 Tray READER")])),_:1}),(0,n.Wm)(d,{class:"mx-1",size:"large",type:"",onClick:t[3]||(t[3]=e=>r.HandleUseReaderButClick(201))},{default:(0,n.w5)((()=>[(0,n.Uk)("使用 Rack READER")])),_:1})]),(0,n.Wm)(u,{ref:"cargoIdEditKeyboard",onOnChange:r.HandleCargoIDKeyboardInput},null,8,["onOnChange"])])),_:1},8,["modelValue"])),[[W,o.buildCstDataDialog.loading]])])):(0,n.kq)("",!0),(0,n.Wm)(m,{IsBackendDisconnected:o.back_end_server_err},null,8,["IsBackendDisconnected"]),(0,n.Wm)(h,{ref:"localization_dialog"},null,512),(0,n._)("div",ma,[o.back_end_server_err?((0,n.wg)(),(0,n.iD)("div",ha,[(0,n._)("div",ga,(0,v.zw)(r.VMSData.CarName),1),pa,(0,n.Uk)(" "+(0,v.zw)(e.$t("backend_server_error")),1)])):(0,n.kq)("",!0),(0,n.Wm)(g,{IsBackendDisconnected:o.back_end_server_err,battery_states:r.VMSData.BatteryStatus},null,8,["IsBackendDisconnected","battery_states"]),(0,n._)("div",_a,[(0,n.Wm)(s.uT,{name:"el-zoom-in-top"},{default:(0,n.w5)((()=>[(0,n._)("div",wa,[(0,n._)("div",fa,[(0,n.Wm)(p,{disabled:o.back_end_server_err||r.VMSData.IsSystemIniting,onClick:t[5]||(t[5]=e=>r.AGVInitialize()),class:(0,v.C_)(["mb-1 p-2",""==r.VMSData.SubState||!r.VMSData.IsInitialized&&"Initializing"!=r.VMSData.SubState?"down":r.VMSData.SubState.toLowerCase()]),block:""},{default:(0,n.w5)((()=>["Initializing"!=r.VMSData.SubState?((0,n.wg)(),(0,n.iD)("b",ya,(0,v.zw)(e.$t("initialize")),1)):((0,n.wg)(),(0,n.iD)("b",ba,(0,v.zw)(e.$t("initializing")),1))])),_:1},8,["disabled","class"]),(0,n.Wm)(p,{disabled:o.back_end_server_err,onClick:t[6]||(t[6]=e=>r.AGVResetAlarm()),class:"mb-1 p-2 border",block:"",variant:r.alarmResetBtnVariant},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,v.zw)(e.$t("reset_alarm")),1)])),_:1},8,["disabled","variant"]),(0,n.Wm)(p,{disabled:o.back_end_server_err,onClick:t[7]||(t[7]=e=>r.AGVBuzzerOff()),variant:"light",class:"mb-1 p-2 border",block:""},{default:(0,n.w5)((()=>[(0,n._)("b",null,[r.IsBuzzerMute?((0,n.wg)(),(0,n.iD)("i",va)):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,v.zw)(e.$t("buzzer_off"))+" ",1),!r.IsBuzzerMute&&r.BuzzerState.isPlaying?((0,n.wg)(),(0,n.iD)("i",Sa)):(0,n.kq)("",!0)])])),_:1},8,["disabled"]),2!=r.VMSData.Agv_Type?((0,n.wg)(),(0,n.j4)(p,{key:0,disabled:o.back_end_server_err,onClick:t[8]||(t[8]=e=>r.ShowRemoveCstDialog()),variant:"light",class:(0,v.C_)(["w-100 mb-1 p-2 border",r.rm_cst_btn_class_bind]),block:""},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,v.zw)(e.$t("cst-remove")),1)])),_:1},8,["disabled","class"])):(0,n.kq)("",!0),2!=r.VMSData.Agv_Type?((0,n.wg)(),(0,n.j4)(_,{key:1,onClick:t[10]||(t[10]=e=>r.ShowRemoveCstDialog()),style:{cursor:"pointer",position:"relative",bottom:"25px",left:"182px"},value:r.cargo_status_text},{default:(0,n.w5)((()=>[2!=r.VMSData.Agv_Type?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:t[9]||(t[9]=e=>r.ShowRemoveCstDialog())})):(0,n.kq)("",!0)])),_:1},8,["value"])):(0,n.kq)("",!0),(0,n.Wm)(p,{disabled:o.back_end_server_err,variant:r.IsLogin?"danger":"light",class:"mb-1 p-2 border",block:"",onClick:t[11]||(t[11]=e=>r.ShowLogin())},{default:(0,n.w5)((()=>[r.IsLogin?((0,n.wg)(),(0,n.iD)("i",Aa)):((0,n.wg)(),(0,n.iD)("i",Ca)),(0,n._)("b",null,(0,v.zw)(r.LoginBtnText),1)])),_:1},8,["disabled","variant"]),(0,n.Wm)(w,{ref:"login"},null,512)]),(0,n.Wm)(f,{style:{margin:"auto"}}),(0,n._)("div",ka,[(0,n._)("div",Va,[Da,(0,n.Wm)(y,{modelValue:r.IsOnlineMode,"onUpdate:modelValue":t[12]||(t[12]=e=>r.IsOnlineMode=e),onClick:t[13]||(t[13]=(0,s.iM)((e=>r.OnlineModeSwitchHandle()),["prevent"])),disabled:o.back_end_server_err||r.VMSData.IsSystemIniting,width:"75",size:"large","inline-prompt":"","inactive-text":"Offline","active-text":"Online","active-color":"rgb(13, 110, 253)","inactive-color":"rgb(220, 53, 69)"},null,8,["modelValue","disabled"])]),(0,n._)("div",Ta,[xa,(0,n.Wm)(y,{modelValue:r.IsAutoMode,"onUpdate:modelValue":t[14]||(t[14]=e=>r.IsAutoMode=e),onClick:t[15]||(t[15]=(0,s.iM)((e=>r.AutoModeSwitchHandle()),["stop","prevent"])),disabled:o.back_end_server_err||r.VMSData.IsSystemIniting,width:"75",size:"large","inline-prompt":"","inactive-text":"Manual","active-text":"Auto","active-color":"rgb(13, 110, 253)","inactive-color":"rgb(220, 53, 69)"},null,8,["modelValue","disabled"])])]),(0,n.Wm)(f,{style:{margin:"auto"}}),r.IOConnected&&!r.Is_TSMC_MiniAGV&&r.isBrakeSwitchRelease?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Ia,[(0,n._)("div",Ma,[Wa,(0,n.Uk)(" "+(0,v.zw)(e.$t("connection-states")),1)]),(0,n.Wm)(b)])),(0,n.Wm)(f,{style:{margin:"auto"}}),(0,n._)("div",Ua,[r.IOConnected&&r.isBrakeSwitchRelease&&!r.Is_TSMC_MiniAGV?((0,n.wg)(),(0,n.iD)("div",Oa,[(0,n._)("div",null,[Pa,(0,n.Wm)(S,{style:{width:"100px",height:"85px","font-size":"58px"},class:"",type:0==r.VMSData.BCR_State_MoveBase.tagID?"danger":"success"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(r.VMSData.BCR_State_MoveBase.tagID),1)])),_:1},8,["type"])]),(0,n._)("div",Ba,[La,(0,n.Wm)(A,{class:"",label:"X"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{size:"sm",disabled:"",modelValue:r.VMSData.BCR_State_MoveBase.xValue,"onUpdate:modelValue":t[16]||(t[16]=e=>r.VMSData.BCR_State_MoveBase.xValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(A,{class:"",label:"Y"},{default:(0,n.w5)((()=>[(0,n.Wm)(C,{size:"sm",disabled:"",modelValue:r.VMSData.BCR_State_MoveBase.yValue,"onUpdate:modelValue":t[17]||(t[17]=e=>r.VMSData.BCR_State_MoveBase.yValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})])])):((0,n.wg)(),(0,n.iD)("div",Ga,[r.Is_TSMC_MiniAGV?((0,n.wg)(),(0,n.iD)("div",za,[Na,(0,n.Wm)(C,{size:"sm",style:{width:"70px"},disabled:"",modelValue:r.VMSData.Last_Visited_Tag,"onUpdate:modelValue":t[19]||(t[19]=e=>r.VMSData.Last_Visited_Tag=e)},null,8,["modelValue"])])):((0,n.wg)(),(0,n.iD)("div",Ea,[Ha,(0,n.Wm)(C,{size:"sm",style:{width:"70px"},disabled:"",modelValue:r.VMSData.BCR_State_MoveBase.tagID,"onUpdate:modelValue":t[18]||(t[18]=e=>r.VMSData.BCR_State_MoveBase.tagID=e),state:r.VMSData.BCR_State_MoveBase.tagID>0},null,8,["modelValue","state"])])),(0,n._)("div",Fa,[(0,n._)("div",Ra,(0,v.zw)(e.$t("coordination")),1),(0,n.Wm)(C,{size:"sm",style:{width:"120px"},disabled:"",state:10==r.VMSData.LocStatus,modelValue:r.Coordination,"onUpdate:modelValue":t[20]||(t[20]=e=>r.Coordination=e)},null,8,["state","modelValue"])])])),r.Is_TSMC_MiniAGV?((0,n.wg)(),(0,n.j4)(d,{key:2,effect:"dark",size:"small",onClick:r.HandleLocalizationClick},{default:(0,n.w5)((()=>[(0,n.Uk)("定位")])),_:1},8,["onClick"])):(0,n.kq)("",!0)]),(0,n.Wm)(f,{style:{margin:"auto"}}),(0,n._)("div",Za,[(0,n._)("div",$a,[r.Is_Fork_AGV?((0,n.wg)(),(0,n.iD)("div",qa,[(0,n._)("div",{onClick:t[21]||(t[21]=(...e)=>r.HandleForkHeightTitleClick&&r.HandleForkHeightTitleClick(...e)),class:"state-title"},[ja,(0,n.Uk)("牙叉高度 ")]),(0,n.Wm)(k)])):(0,n.kq)("",!0),(0,n._)("div",Qa,[(0,n._)("div",Ya,[Ka,(0,n.Uk)(" "+(0,v.zw)(e.$t("mileage")),1)]),(0,n.Wm)(V)])])]),(0,n._)("div",Xa,[(0,n.Wm)(D,{disabled:o.back_end_server_err},null,8,["disabled"])])])])),_:1}),(0,n._)("div",Ja,[(0,n.Wm)(T,{class:"flex-fill",VMSData:r.VMSData},null,8,["VMSData"]),(0,n._)("div",es,[(0,n.Wm)(x)])]),o.showOrderInfo&&r.IsShowOrderStatus&&!r.IsHandshaking?((0,n.wg)(),(0,n.iD)("div",{key:0,style:(0,v.j5)([{"z-index":"9999"},r.orderInfoContinerStyle])},[(0,n.Wm)(I,{id:"order-go-alert",class:(0,v.C_)(r.order_info_title_class),"show-icon":"",type:"DOWN"==r.VMSData.MainState?"error":"success",title:`派車系統任務-[${r.GetActionName}]`,description:r.GetOrderDescription,closable:!1},null,8,["class","type","title","description"])],4)):(0,n.kq)("",!0)]),(0,n._)("div",ts,[(0,n.Wm)(M,{modelValue:o.wait_online_request_dialog_show,"onUpdate:modelValue":t[22]||(t[22]=e=>o.wait_online_request_dialog_show=e),title:"AGV Online Requesting",centered:!0,hideFooter:!0,noCloseOnBackdrop:!0,noCloseOnEsc:!0,hideHeaderClose:!0,"header-bg-variant":"primary","header-text-variant":"light"},{default:(0,n.w5)((()=>[(0,n._)("p",as,(0,v.zw)(e.$t("wait_online_text")),1)])),_:1},8,["modelValue"])])]),r.IsLDULD_NO_Entry_Actived?((0,n.wg)(),(0,n.iD)("div",ss,[ns,(0,n.Wm)(p,{variant:"danger",size:"sm",onClick:r.HandleCloseLDULD_No_Entry_BtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("關閉")])),_:1},8,["onClick"])])):(0,n.kq)("",!0)])}const os=e=>((0,n.dD)("data-v-3c3b4dba"),e=e(),(0,n.Cn)(),e),rs={class:"fixed-top"},ls={class:"status d-flex flex-row bg-light"},ds={class:"px-2",style:{width:"50px",position:"absolute",cursor:"pointer"}},us=os((()=>(0,n._)("i",{class:"bi bi-truck-front mx-1"},null,-1))),cs=os((()=>(0,n._)("i",{class:"bi bi-people mx-1"},null,-1))),ms={class:"lang-switch"},hs={class:"system-control"},gs=os((()=>(0,n._)("i",{class:"bi bi-three-dots-vertical me-1"},null,-1))),ps=os((()=>(0,n._)("i",{class:"bi bi-fullscreen me-2"},null,-1))),_s=os((()=>(0,n._)("i",{class:"bi bi-pin-map me-2"},null,-1))),ws=os((()=>(0,n._)("i",{class:"bi bi-pin-map me-2"},null,-1))),fs=os((()=>(0,n._)("i",{class:"bi bi-file-arrow-up-fill me-2"},null,-1))),ys=os((()=>(0,n._)("i",{class:"bi bi-power me-2"},null,-1)));function bs(e,t,a,s,i,o){const r=(0,n.up)("jw_switch"),l=(0,n.up)("b-dropdown-item"),d=(0,n.up)("el-button"),u=(0,n.up)("b-dropdown"),c=(0,n.up)("uploader"),m=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",rs,[(0,n._)("div",ls,[(0,n._)("div",{class:(0,v.C_)(["sys-name flex-fill",a.IsBackendDisconnected?"backend-disconnected":""])},[(0,n._)("div",ds,[o.IsGodUser?((0,n.wg)(),(0,n.iD)("i",{key:0,onClick:t[0]||(t[0]=(...e)=>o.HandleSettingIconClick&&o.HandleSettingIconClick(...e)),class:"bi bi-sliders"})):(0,n.kq)("",!0)]),(0,n._)("div",{onClick:t[1]||(t[1]=()=>{i.VersionShowUI=!i.VersionShowUI})},(0,v.zw)(o.AGVBrandName),1)],2),(0,n._)("div",{class:(0,v.C_)([""==o.SubStatus?"down":o.SubStatus.toLowerCase(),"agvc-name flex-fill"]),onDblclick:t[2]||(t[2]=e=>o.where_r_u())},[us,(0,n.Uk)(" "+(0,v.zw)(""==o.AGVName?"AGV":o.AGVName),1)],34),(0,n._)("div",{class:(0,v.C_)(["account-name flex-fill",a.IsBackendDisconnected?"backend-disconnected":""])},[cs,(0,n.Uk)(" "+(0,v.zw)(o.UserName),1)],2),(0,n._)("div",{onDblclick:t[3]||(t[3]=e=>o.VersionTextClickHandle()),class:(0,v.C_)(["version-name flex-fill",a.IsBackendDisconnected?"bg-danger":""])},(0,v.zw)(i.VersionShowUI?o.UIVersion+"(UI)":o.APPVersion),35),(0,n._)("div",ms,[(0,n.Wm)(r,{onSwitch:o.LangChangeHandle,default:i.IsUseChinese,active_text:"EN",active_color:"rgb(0, 204, 0)",inactive_text:"中文",inactive_color:"rgb(9, 76, 176)"},null,8,["onSwitch","default"])]),(0,n._)("div",hs,[(0,n.Wm)(u,{variant:"danger",right:""},{"button-content":(0,n.w5)((()=>[gs,(0,n.Uk)(" SYSTEM ")])),default:(0,n.w5)((()=>[(0,n.Wm)(l,{onClick:o.toggleFullScreen},{default:(0,n.w5)((()=>[ps,(0,n.Uk)(" 全螢幕切換 ")])),_:1},8,["onClick"]),o.IsGodUser?((0,n.wg)(),(0,n.j4)(l,{key:0},{default:(0,n.w5)((()=>[_s,(0,n.Wm)(d,{onClick:o.HandleAGVLocating,disabled:o.IsAGVRunning,class:"system-control-button",text:""},{default:(0,n.w5)((()=>[(0,n.Uk)("車輛定位")])),_:1},8,["onClick","disabled"])])),_:1})):(0,n.kq)("",!0),o.IsGodUser?((0,n.wg)(),(0,n.j4)(l,{key:1,onClick:o.HandleSickLidarLocBtnClick},{default:(0,n.w5)((()=>[ws,(0,n.Uk)(" Sick::LidarLoc Website ")])),_:1},8,["onClick"])):(0,n.kq)("",!0),o.IsGodUser?((0,n.wg)(),(0,n.j4)(l,{key:2},{default:(0,n.w5)((()=>[fs,(0,n.Wm)(d,{onClick:t[4]||(t[4]=()=>{i.uploadVisible=!0}),disabled:o.IsAGVRunning,class:"system-control-button",text:""},{default:(0,n.w5)((()=>[(0,n.Uk)("車載更新")])),_:1},8,["disabled"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(l,{onClick:o.shutdown},{default:(0,n.w5)((()=>[ys,(0,n.Uk)(" 關機 ")])),_:1},8,["onClick"]),(0,n.kq)("",!0)])),_:1})]),(0,n.Wm)(m,{draggable:"",title:"更新檔上傳",modelValue:i.uploadVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>i.uploadVisible=e),onClosed:t[6]||(t[6]=()=>{e.$refs.uploader.handleRemove()})},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{ref:"uploader"},null,512)])),_:1},8,["modelValue"])])])}function vs(e,t,a,s,i,o){const r=(0,n.up)("el-button"),l=(0,n.up)("el-upload");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(l,{class:"upload-demo",ref:"upload",action:o.action_api,accept:".zip","file-list":i.fileList,"on-change":o.handleChanged,"on-remove":o.handleRemove,"auto-upload":!1,"on-success":o.handleUploadSuccess,"on-error":o.handleUploadError,"on-exceed":o.handleExceed,limit:1},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{ref:"select_file",type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("選擇更新檔")])),_:1},512)])),_:1},8,["action","file-list","on-change","on-remove","on-success","on-error","on-exceed"]),(0,n.Wm)(r,{disabled:!i.selectedFile,id:"upload-button",onClick:o.submitUpload},{default:(0,n.w5)((()=>[(0,n.Uk)("上傳")])),_:1},8,["disabled","onClick"]),(0,n._)("div",null,"共 "+(0,v.zw)(i.selectedFile?"1":"0")+"個檔案，已完成上傳 "+(0,v.zw)(i.uploaded_cnt),1)])}var Ss={data(){return{fileList:[],uploaded_cnt:0,selectedFile:void 0,isUploadedSuccess:!1}},computed:{action_api(){return`${he.Z.backend_host}/api/Upload/UploadSystemUpdateZipFile`}},methods:{submitUpload(){this.uploaded_cnt=0,this.isUploadedSuccess=!1;var e=!this.selectedFile;e?this.$swal.fire({title:"請選擇更新檔!",text:"",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):(this.SubscribeConnectionStatus(),this.$refs.upload.submit())},handleRemove(e,t){console.log(e,t),this.selectedFile=void 0,this.uploaded_cnt=0,this.isUploadedSuccess=!1,this.$refs.upload.clearFiles()},handleChanged(e){this.selectedFile=e},handleUploadSuccess(e,t,a){this.uploaded_cnt+=1,this.isUploadedSuccess=!0},handleUploadError(e,t,a){this.$swal.fire({text:t.filename,title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},handleExceed(e){this.fileList=e},UnSubscribeConnectionStatus(){l.Z.off("hub-reconnecting",this.ShowUpdatingSwal()),l.Z.off("hub-connected",this.ShowUpdateSuccessSwal())},ShowUpdatingSwal(){this.$swal.fire({title:"車載系統更新中..請稍後",text:"",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},ShowUpdateSuccessSwal(){this.UnSubscribeConnectionStatus(),this.$swal.fire({title:"車載系統已完成更新!",text:"",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},SubscribeConnectionStatus(){l.Z.on("hub-connected",(()=>this.ShowUpdateSuccessSwal()))}},mounted(){}};const Cs=(0,g.Z)(Ss,[["render",vs],["__scopeId","data-v-e95138b8"]]);var As=Cs;const ks=e=>((0,n.dD)("data-v-90d4d5b2"),e=e(),(0,n.Cn)(),e),Vs={class:"switch-container"},Ds=ks((()=>(0,n._)("div",{class:"switch-inner"},null,-1))),Ts=[Ds];function xs(e,t,a,i,o,r){return(0,n.wg)(),(0,n.iD)("div",Vs,[(0,n.wy)((0,n._)("input",{type:"checkbox",id:"switch",class:"switch","onUpdate:modelValue":t[0]||(t[0]=e=>o.isChecked=e),onChange:t[1]||(t[1]=(...e)=>r.toggleSwitch&&r.toggleSwitch(...e))},null,544),[[s.e8,o.isChecked]]),(0,n._)("label",{for:"switch",class:"switch-label",style:(0,v.j5)([r.custom_style,r.active_style])},Ts,4),(0,n.wy)((0,n._)("span",{onClick:t[2]||(t[2]=(...e)=>r.toggleSwitch&&r.toggleSwitch(...e)),class:"switch-text"},(0,v.zw)(a.inactive_text),513),[[s.F8,!o.isChecked]]),(0,n.wy)((0,n._)("span",{onClick:t[3]||(t[3]=(...e)=>r.toggleSwitch&&r.toggleSwitch(...e)),class:"switch-text switch-text-on",style:(0,v.j5)(r.active_style)},(0,v.zw)(a.active_text),5),[[s.F8,o.isChecked]])])}var Is={props:{default:{type:Boolean,default:!1},active_text:{type:String,default:"ON"},active_color:{type:String,default:"rgb(40, 167, 69)"},inactive_text:{type:String,default:"OFF"},inactive_color:{type:String,default:"rgb(108, 117, 125)"},width:{type:String,default:"68px"}},computed:{active_style(){return{backgroundColor:this.isChecked?this.active_color:this.inactive_color}},custom_style(){return{width:this.width}}},data(){return{isChecked:this.value}},methods:{toggleSwitch(){this.isChecked=!this.isChecked,this.$emit("switch",this.isChecked)}},mounted(){this.isChecked=this.default}};const Ms=(0,g.Z)(Is,[["render",xs],["__scopeId","data-v-90d4d5b2"]]);var Ws=Ms,Us=a(93867),Os={components:{uploader:As,jw_switch:Ws},data(){return{uploadVisible:!1,IsUseChinese:!0,APPVersionDisplay:"",VersionShowUI:!1,isFullScreenNow:!1}},computed:{SubStatus(){return w.q$.getters.AGVStatus.SubState},AGVBrandName(){var e=w.q$.getters.AGVStatus.Agv_Type;return 0==e?"GPM FORK AGV":1==e?"GPM YTFORK":2==e?"GPM Inspection AGV":3==e?"GPM Submarine AGV":4==e?"GPM Parts AGV":"GPM AGV"},AGVName(){return w.q$.getters.AGVStatus.CarName},APPVersion(){return w.q$.getters.AGVStatus.APPVersion},UIVersion(){return"1.33.59"},UserName(){return w.U6.getters.CurrentUserName},IsGodUser(){return w.U6.getters.IsGodUser},IsAGVRunning(){return"RUN"==w.q$.state.AGVStatus.SubState}},methods:{async where_r_u(){await(0,oe.XZ)()},VersionTextClickHandle(){this.ConfirmGODTriggering()},ConfirmGODTriggering(){this.$swal.fire({title:"Warning",text:"Do you known what are you doing now?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",allowOutsideClick:!1}).then((e=>{this.AdminSwitchDialogResultHandle(e.isConfirmed)}))},AdminSwitchDialogResultHandle(e=!1){this.version_text_click_count=0,e&&w.U6.commit("setUser",{UserName:"GOD",Role:3})},async HandleSettingIconClick(){l.Z.emit("show-settings")},LangChangeHandle(e){this.IsUseChinese=e,this.$i18n.locale=this.IsUseChinese?"zh-TW":"en-US",l.Z.emit("/lang_changed",this.$i18n.locale),this.IsUseChinese?Us.Z.Success("語言變更:中文","bottom",800):Us.Z.Primary("Language:English","bottom",800)},toggleFullScreen(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),this.isFullScreenNow=!1):document.documentElement.requestFullscreen&&(document.documentElement.requestFullscreen(),this.isFullScreenNow=!0)},shutdown(){this.$swal.fire({title:"確定要關閉車載電腦?",text:"",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(!e.isConfirmed)return;let t;await oe.Wf.ShutdownPC(),this.$swal.fire({title:"PC Close!",icon:"warning",html:"PC will close in <b></b> seconds...",timer:5e3,timerProgressBar:!0,didOpen:()=>{this.$swal.showLoading();const e=this.$swal.getPopup().querySelector("b");t=setInterval((()=>{e.textContent=`${(this.$swal.getTimerLeft()/1e3).toFixed(1)}`}),1e3)},willClose:()=>{clearInterval(t)}}).then((e=>{e.dismiss===this.$swal.DismissReason.timer&&console.log("I was closed by the timer")}))}))},restart(){this.$swal.fire({title:"確定要重新啟動車載電腦?",text:"",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed}))},async HandleAGVLocating(){var e=await(0,oe.WH)();e.Success?this.$swal.fire({title:"定位完成",text:"",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({title:"定位失敗",text:e.Message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},HandleSickLidarLocBtnClick(){window.open("http://192.168.1.1")}},mounted(){document.addEventListener("fullscreenchange",this.handleFullscreenChange)},beforeUnmount(){},props:{IsBackendDisconnected:{type:Boolean,default:!0}}};const Ps=(0,g.Z)(Os,[["render",bs],["__scopeId","data-v-3c3b4dba"]]);var Bs=Ps;const Ls={key:1,class:"charge-current px-3"};function Gs(e,t,a,s,i,o){const r=(0,n.up)("b-progress-bar"),l=(0,n.up)("b-progress");return(0,n.wg)(),(0,n.iD)("div",{class:"battery d-flex flex-row",style:(0,v.j5)("height:"+a.bHeight)},[(0,n._)("div",null,[a.battery_status.IsCharging?((0,n.wg)(),(0,n.iD)("i",{key:0,onClick:t[0]||(t[0]=(...e)=>o.RechargeCircuitControl&&o.RechargeCircuitControl(...e)),style:{color:"limegreen"},class:"bi bi-battery-charging"})):((0,n.wg)(),(0,n.iD)("i",{key:1,onClick:t[1]||(t[1]=(...e)=>o.RechargeCircuitControl&&o.RechargeCircuitControl(...e)),class:(0,v.C_)("bi bi-battery-full"),style:(0,v.j5)({color:o.IsLowBatteryLevel?"red":"black"})},null,4))]),(0,n.Wm)(l,{class:"flex-fill h-100",max:i.max,animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{animated:"",class:(0,v.C_)(o.battery_state_bg),value:o.battery_level,label:o.battery_level<=10?"":`${o.battery_level}%${a.battery_status.IsCharging?"(充電中)":""}`,style:(0,v.j5)({fontSize:"1rem"==a.bHeight?"12px":"16px"})},null,8,["class","value","label","style"])])),_:1},8,["max"]),o.battery_level<=10?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"bat_level_show_when_low",style:(0,v.j5)({fontSize:"1rem"==a.bHeight?"12px":"16px"})},(0,v.zw)(o.battery_level)+"%"+(0,v.zw)(a.battery_status.IsCharging?"(充電中)":""),5)):(0,n.kq)("",!0),a.battery_status.IsCharging?((0,n.wg)(),(0,n.iD)("div",Ls,[(0,n._)("div",null,(0,v.zw)(e.$t("charging_current"))+": "+(0,v.zw)(a.battery_status.ChargeCurrent)+" mA",1)])):(0,n.kq)("",!0)],4)}var Es=a(21495),Hs={data(){return{max:100}},props:{Warning_Up_limit:{type:Number,default:45},Warning_DOwn_limit:{type:Number,default:20},bHeight:{type:String,default(){return"1rem"}},showIcon:{type:Boolean,default:!0},battery_status:{type:Object,default(){return new Es.Z}}},computed:{battery_level(){return this.battery_status.BatteryLevel},battery_state_bg(){return this.battery_status.IsCharging?"charging":this.battery_level>this.Warning_Up_limit?"full-state":this.battery_level<=this.Warning_Up_limit&&this.battery_level>=this.Warning_DOwn_limit?"bg-warning":"bg-danger"},IsLowBatteryLevel(){return this.battery_level<this.Warning_DOwn_limit},batHeight(){return this.bHeight},IsHasRechareCircuit(){return!w.q$.getters.IsInspectionAGV}},mounted(){},methods:{async RechargeCircuitControl(){this.IsHasRechareCircuit&&await(0,oe.hf)()}}};const zs=(0,g.Z)(Hs,[["render",Gs],["__scopeId","data-v-21cd5dba"]]);var Ns=zs;const Fs=e=>((0,n.dD)("data-v-8a81091c"),e=e(),(0,n.Cn)(),e),Rs={class:"battrey-group d-flex flex-row"},Zs={key:0,style:{color:"limegreen"},class:"bi bi-battery-charging"},$s={key:1,class:(0,v.C_)("bi bi-battery-full")},qs={class:"d-flex px-2",style:{color:"grey"}},js=Fs((()=>(0,n._)("span",{class:"px-1",style:{"font-size":"smaller"}},"V",-1))),Qs={key:2,class:"d-flex px-2"},Ys=Fs((()=>(0,n._)("label",{for:""},"充電電流:",-1))),Ks=Fs((()=>(0,n._)("span",{class:"px-1",style:{"font-size":"smaller"}},"A",-1))),Xs=Fs((()=>(0,n._)("div",{class:"w-100 text-start"},[(0,n._)("h3",null,"電池資訊")],-1)));function Js(e,t,a,s,i,o){const r=(0,n.up)("b-progress-bar"),l=(0,n.up)("b-progress"),d=(0,n.up)("el-button"),u=(0,n.up)("MiniAGVBatteryViewer"),c=(0,n.up)("el-drawer"),m=(0,n.up)("Battery_Detail");return(0,n.wg)(),(0,n.iD)("div",Rs,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.IsMiniAGV?[2,1]:[0],(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,v.C_)(["bat d-flex flex-row",o.IsMiniAGV?"w-50":"w-100"]),key:e},[o.GetBatteryStatus(e).IsCharging?((0,n.wg)(),(0,n.iD)("i",Zs)):((0,n.wg)(),(0,n.iD)("i",$s)),(0,n.Wm)(l,{class:"flex-fill h-100",max:100,animated:!a.IsBackendDisconnected,onClick:o.HandleBatteryClick},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{animated:!a.IsBackendDisconnected,value:a.IsBackendDisconnected?100:o.GetBatteryStatus(e).BatteryLevel,label:o.GetLabel(o.GetBatteryStatus(e)),class:(0,v.C_)(o.GetClass(o.GetBatteryStatus(e))),style:{"font-size":"16px"}},null,8,["animated","value","label","class"])])),_:2},1032,["animated","onClick"]),(0,n._)("div",qs,[(0,n.Uk)(" ["+(0,v.zw)(e)+"] "+(0,v.zw)((o.GetBatteryStatus(e).Voltage/1e3).toFixed(2))+" ",1),js]),o.GetBatteryStatus(e).IsCharging?((0,n.wg)(),(0,n.iD)("div",Qs,[Ys,(0,n.Uk)(" "+(0,v.zw)((o.GetBatteryStatus(e).ChargeCurrent/1e3).toFixed(2))+" ",1),Ks])):(0,n.kq)("",!0)],2)))),128)),(0,n.Wm)(c,{modelValue:i.show_inspection_agv_battery_viewer,"onUpdate:modelValue":t[0]||(t[0]=e=>i.show_inspection_agv_battery_viewer=e),direction:"btt",size:"600px","show-close":!1},{header:(0,n.w5)((({close:e})=>[(0,n.Wm)(d,{class:"border-bottom",style:{"z-index":"9999"},type:"danger",size:"large",onClick:e},{default:(0,n.w5)((()=>[(0,n.Uk)("Close")])),_:2},1032,["onClick"])])),default:(0,n.w5)((()=>[(0,n.Wm)(u,{style:{position:"absolute",top:"-50px","z-index":"1"}})])),_:1},8,["modelValue"]),(0,n.Wm)(c,{modelValue:i.show_battery_info,"onUpdate:modelValue":t[1]||(t[1]=e=>i.show_battery_info=e),direction:"rtl",size:"660px"},{header:(0,n.w5)((()=>[Xs])),default:(0,n.w5)((()=>[(0,n.Wm)(m,{ref:"battery_detail",style:{position:"absolute",width:"100%",top:"80px"}},null,512)])),_:1},8,["modelValue"])])}const en=e=>((0,n.dD)("data-v-8a4b4b9c"),e=e(),(0,n.Cn)(),e),tn={class:"mini-agv-battery-view w-100 h-100"},an={class:"battery-container d-flex flex-row"},sn={class:"bat-ctl bat_tex justify-content-center d-flex flex-row",style:{position:"absolute",width:"100%",top:"75%","font-size":"30px"}},nn={class:"rounded border p-2 text-start",style:{position:"relative",left:"-74px"}},on=en((()=>(0,n._)("span",{class:"p-2"},"Battery-2",-1))),rn={class:"rounded border p-2 text-start",style:{position:"relative",left:"-69px"}},ln=en((()=>(0,n._)("span",{class:"p-2"},"Battery-1",-1)));function dn(e,t,a,s,i,o){const r=(0,n.up)("b-button");return(0,n.wg)(),(0,n.iD)("div",tn,[(0,n._)("div",an,[(0,n._)("div",{class:"battery-img bat2",style:(0,v.j5)(o.Bat1Style)},null,4),(0,n._)("div",{class:"battery-img bat1",style:(0,v.j5)(o.Bat2Style)},null,4),(0,n._)("div",sn,[(0,n._)("div",nn,[on,(0,n._)("div",null,[(0,n.Wm)(r,{onClick:t[0]||(t[0]=e=>o.BatteryLockHandler(2,!0)),disabled:!o.Bat2Lockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1},8,["disabled"]),(0,n.Wm)(r,{onClick:t[1]||(t[1]=e=>o.BatteryLockHandler(2,!1)),disabled:!o.Bat2UnLockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1},8,["disabled"])])]),(0,n._)("div",rn,[ln,(0,n._)("div",null,[(0,n.Wm)(r,{onClick:t[2]||(t[2]=e=>o.BatteryLockHandler(1,!0)),disabled:!o.Bat1Lockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1},8,["disabled"]),(0,n.Wm)(r,{onClick:t[3]||(t[3]=e=>o.BatteryLockHandler(1,!1)),disabled:!o.Bat1UnLockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1},8,["disabled"])])])])])])}var un={data(){return{bat1_style:{installed:{top:"3px",right:"125px"},leveing:{top:"35px",left:"-158px"},no_exist:{visibility:"hidden"}},bat2_style:{installed:{top:"3px",right:"-122px"},leveing:{top:"35px",left:"91px"},no_exist:{visibility:"hidden"}}}},computed:{AGVVersion(){return w.FN.getters.Settings.Version},Battery1Status(){return w.q$.getters.Battery1Status},Battery2Status(){return w.q$.getters.Battery2Status},Bat1Lockable(){return w.q$.getters.Bat1Lockable},Bat1UnLockable(){return w.q$.getters.Bat1UnLockable},Bat2Lockable(){return w.q$.getters.Bat2Lockable},Bat2UnLockable(){return w.q$.getters.Bat2UnLockable},Bat1Style_DemoAGV(){var e=w.zb.getters.DemoMiniAGVBatteryStatus.battery1;return"installed"==e?this.bat1_style.installed:"installing"==e?this.bat1_style.leveing:"removed"==e?this.bat1_style.no_exist:void 0},Bat2Style_DemoAGV(){var e=w.zb.getters.DemoMiniAGVBatteryStatus.battery2;return"installed"==e?this.bat2_style.installed:"installing"==e?this.bat2_style.leveing:"removed"==e?this.bat2_style.no_exist:void 0},Bat1Style(){return this.Battery1Status?2==this.AGVVersion?this.Bat1Style_DemoAGV:this.Battery1Status.SensorInfo.IsExistSensor1ON&&this.Battery1Status.SensorInfo.IsDockingSensor1ON?this.bat1_style.installed:this.Battery1Status.SensorInfo.IsExistSensor1ON&&!this.Battery1Status.SensorInfo.IsDockingSensor1ON?this.bat1_style.leveing:this.bat1_style.no_exist:this.bat1_style.no_exist},Bat2Style(){return this.Battery2Status?2==this.AGVVersion?this.Bat2Style_DemoAGV:this.Battery2Status.SensorInfo.IsExistSensor1ON&&this.Battery2Status.SensorInfo.IsDockingSensor1ON?this.bat2_style.installed:this.Battery2Status.SensorInfo.IsExistSensor1ON&&!this.Battery2Status.SensorInfo.IsDockingSensor1ON?this.bat2_style.leveing:this.bat2_style.no_exist:this.bat2_style.no_exist}},methods:{async BatteryLockHandler(e,t){await(0,oe.lQ)(e,t)}}};const cn=(0,g.Z)(un,[["render",dn],["__scopeId","data-v-8a4b4b9c"]]);var mn=cn;const hn={class:"border p-3"},gn={class:"text-start border-bottom my-2"},pn=(0,n._)("span",{class:"mx-2"},"充電迴路",-1),_n={class:"d-flex flex-row"},wn={class:"border p-3",style:{width:"200px"}},fn={class:"border-bottom text-start"},yn={class:"border p-3"},bn={class:"text-start"},vn={class:"m-1 border-top",id:"chart"};function Sn(e,t,a,s,i,o){const r=(0,n.up)("el-switch"),l=(0,n.up)("el-form-item"),d=(0,n.up)("el-form"),u=(0,n.up)("b-tab"),c=(0,n.up)("el-option"),m=(0,n.up)("el-select"),h=(0,n.up)("el-date-picker"),g=(0,n.up)("b-button"),p=(0,n.up)("apexchart"),_=(0,n.up)("b-tabs");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{title:"電池狀態"},{default:(0,n.w5)((()=>[(0,n._)("div",hn,[(0,n._)("div",gn,[pn,(0,n.Wm)(r,{size:"large","inline-prompt":"","active-text":"開啟","inactive-text":"關閉","inactive-color":"red",modelValue:i.charge_circuit_state,"onUpdate:modelValue":t[0]||(t[0]=e=>i.charge_circuit_state=e),onChange:o.HandleChargeCircuitSwitch},null,8,["modelValue","onChange"])]),(0,n._)("div",_n,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.batteries,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t},[(0,n._)("div",wn,[(0,n._)("div",fn,[(0,n._)("h3",null,"電池-"+(0,v.zw)(t),1)]),(0,n.Wm)(d,{"label-position":"left","label-width":"80px"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"ID"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.batteryID),1)])),_:2},1024),(0,n.Wm)(l,{label:"狀態"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.state),1)])),_:2},1024),(0,n.Wm)(l,{label:"異常碼"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.errorCode),1)])),_:2},1024),(0,n.Wm)(l,{label:"電量"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.batteryLevel)+" %",1)])),_:2},1024),(0,n.Wm)(l,{label:"電壓"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.Voltage/1e3)+"V",1)])),_:2},1024),(0,n.Wm)(l,{label:"放電電流"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.dischargeCurrent/1e3)+"A",1)])),_:2},1024),(0,n.Wm)(l,{label:"充電電流"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.chargeCurrent/1e3)+"A",1)])),_:2},1024),(0,n.Wm)(l,{label:"最高溫度"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.maxCellTemperature),1)])),_:2},1024),(0,n.Wm)(l,{label:"最低溫度"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.minCellTemperature),1)])),_:2},1024),(0,n.Wm)(l,{label:"循環次數"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.cycle),1)])),_:2},1024)])),_:2},1024)])])))),128))])])])),_:1}),(0,n.Wm)(u,{title:"歷史查詢"},{default:(0,n.w5)((()=>[(0,n._)("div",yn,[(0,n.Wm)(d,{"label-position":"left","label-width":"80px"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"選擇電池"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{modelValue:i.query_options.id,"onUpdate:modelValue":t[1]||(t[1]=e=>i.query_options.id=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.batteryIDList,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e,label:`電池-${e+1}`,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(l,{label:"查詢項目"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{onChange:o.HandleQueryItemChanged,modelValue:i.query_options.item,"onUpdate:modelValue":t[2]||(t[2]=e=>i.query_options.item=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{label:"電量",value:"Level"}),(0,n.Wm)(c,{label:"電壓",value:"Voltage"}),(0,n.Wm)(c,{label:"充電電流",value:"Charge_current"}),(0,n.Wm)(c,{label:"放電電流",value:"Discharge_current"})])),_:1},8,["onChange","modelValue"])])),_:1}),(0,n.Wm)(l,{label:"時間區間"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{modelValue:i.query_options.time_range,"onUpdate:modelValue":t[3]||(t[3]=e=>i.query_options.time_range=e),type:"datetimerange","range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date"},null,8,["modelValue"])])),_:1})])),_:1}),(0,n._)("div",bn,[(0,n.Wm)(g,{onClick:o.HandleQueryButtonClick,style:{width:"120px"},variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"])]),(0,n._)("div",vn,[(0,n.Wm)(p,{type:"bar",height:o.chartHeight,ref:"bat_chart",options:i.chart_datas.chartOptions,series:i.chart_datas.series},null,8,["height","options","series"])])])])),_:1})])),_:1})])}var Cn={data(){return{charge_circuit_state:!1,batteries:{},query_options:{id:0,item:"Level",time_range:["",""]},chart_datas:{series:[{name:"Desktops",data:[10,41]}],chartOptions:{chart:{type:"bar",zoom:{enabled:!0},animations:{enabled:!1}},dataLabels:{enabled:!1},legend:{show:!1},title:{text:"電量",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{type:"datetime",labels:{datetimeUTC:!1,tickAmount:10},min:new Date("01 Mar 2012").getTime(),title:{text:"時間"}},yaxis:{max:100},tooltip:{enabled:!1},plotOptions:{bar:{columnWidth:"95%",distributed:!0}}}}}},computed:{battery_info(){return ue.A.getters.BatteryInfo},batteryIDList(){var e=[];for(let t=0;t<this.batteryCount;t++)e.push(t);return e},batteryCount(){return w.q$.getters.BatteryCount},chartHeight(){return window.innerHeight/1.7+"px"}},methods:{HandleQueryItemChanged(e){try{this.chart_datas.chartOptions.title.text=e,this.$refs["bat_chart"].updateOptions(this.chart_datas.chartOptions)}catch(t){console.error(t)}},async HandleChargeCircuitSwitch(e){await oe.ai.ChargeCicuitSwitch(e)},async HandleQueryButtonClick(){this.chart_datas.series[0].data=[];var e=b()(this.query_options.time_range[0]).format("yyyy/MM/DD"),t=b()(this.query_options.time_range[1]).format("yyyy/MM/DD");this.query_options.time_range[0]=e,this.query_options.time_range[1]=t;var a=await oe.ai.Query(this.query_options);this.chart_datas.series[0].name=this.query_options.item,this.chart_datas.series[0].data=Object.keys(a).map((e=>({x:b()(e).valueOf(),y:a[e].value,fillColor:this.GetBarColorWithAGVStatus(a[e].status)})));var s=Object.keys(a).map((e=>b()(e).valueOf())),n=new Date(s[0]);this.chart_datas.chartOptions.xaxis.min=n.getTime(),"Level"==this.query_options.item?this.chart_datas.chartOptions.yaxis={max:100,title:{text:"電量(%)"}}:this.chart_datas.chartOptions.yaxis={title:{text:this.query_options.item}},this.$refs["bat_chart"].updateOptions(this.chart_datas.chartOptions)},GetBarColorWithAGVStatus(e){return 1==e?"#ffc600":2==e?"#0d6efd":3==e?"#ff4a4a":4==e?"#1fff74":"#5e6a75"},async UpdateChargeCircuitState(){this.charge_circuit_state=await oe.ai.GetChargeCicuitState()}},mounted(){l.Z.on("ReChargeCircuitChanged",(e=>{this.charge_circuit_state=e}));var e=Date.now(),t=b()(e).add(-1,"day");this.query_options.time_range=[t,e],setInterval((()=>{var e=this.battery_info;try{this.batteries[e.batteryID]=e}catch(t){}}),1e3)}};const An=(0,g.Z)(Cn,[["render",Sn]]);var kn=An,Vn={components:{MiniAGVBatteryViewer:mn,Battery_Detail:kn},props:{direction:{type:String,default:"horizon"},IsBackendDisconnected:{type:Boolean,default:!0}},computed:{IsMiniAGV(){return w.q$.getters.IsInspectionAGV},battery_states(){return w.q$.getters.BatteryStatus}},data(){return{show_inspection_agv_battery_viewer:!1,show_battery_info:!1}},methods:{GetBatteryStatus(e){try{var t=this.battery_states.find((t=>t.BatteryID==e));return t||new Es.Z(100)}catch(a){return new Es.Z(100)}},GetLabel(e=new Es.Z){return this.IsBackendDisconnected?"電池狀態未知":e.IsCharging?e.BatteryLevel+"%(充電中)":e.BatteryLevel+"%"},GetClass(e=new Es.Z){if(this.IsBackendDisconnected)return"bg-danger";var t=e.BatteryLevel;return e.IsCharging?"charging":t<20?"bg-danger":t>=20&&t<40?"bg-warning":"bg-primary"},OnClick(e){alert("wtf"+e)},async HandleBatteryClick(){this.IsMiniAGV?this.show_inspection_agv_battery_viewer=!0:this.show_battery_info=!0,setTimeout((()=>{this.$refs["battery_detail"]&&this.$refs["battery_detail"].UpdateChargeCircuitState()}),500)}}};const Dn=(0,g.Z)(Vn,[["render",Js],["__scopeId","data-v-8a81091c"]]);var Tn=Dn;const xn={class:"mileage"},In=(0,n._)("span",null,"km",-1);function Mn(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",xn,[(0,n._)("div",null,[(0,n.Uk)((0,v.zw)(o.mileage)+" ",1),In])])}var Wn={data(){return{val:1.23,time:"2022/12/12 19:00:09"}},computed:{mileage(){return this.val.toFixed(3)}},mounted(){l.Z.on("/mileage",(e=>{this.val=e})),setInterval((()=>{this.time=b()(Date.now()).format("yyyy/MM/DD HH:mm:ss")}),1e3)}};const Un=(0,g.Z)(Wn,[["render",Mn]]);var On=Un;const Pn=(0,n._)("span",null,"cm",-1);function Bn(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",{onClick:t[0]||(t[0]=(...e)=>o.HandleClicked&&o.HandleClicked(...e)),class:"fork-height"},[(0,n._)("div",{class:(0,v.C_)(o.IsForkHeightAboveSafty?"bg-warning text-light border":"")},[(0,n.Uk)((0,v.zw)(o.height)+" ",1),Pn],2)])}var Ln={data(){return{}},computed:{height(){return w.q$.getters.AGVStatus.ZAxisDriverState.position.toFixed(3)},IsForkHeightAboveSafty(){return w.q$.getters.AGVStatus.IsForkHeightAboveSafty}},methods:{HandleClicked(){l.Z.emit("on-fork-height-click")}},mounted(){}};const Gn=(0,g.Z)(Ln,[["render",Bn]]);var En=Gn,Hn=a.p+"img/emo.b3b39af7.png";const zn=(0,n._)("img",{src:Hn,width:"80"},null,-1),Nn=[zn];function Fn(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",{class:"emo-button",onClick:t[0]||(t[0]=e=>o.EMO())},Nn)}var Rn={props:{disabled:{type:Boolean,default:!1}},methods:{async EMO(){this.disabled||await(0,oe.dE)()}}};const Zn=(0,g.Z)(Rn,[["render",Fn]]);var $n=Zn;const qn={class:"login-header border-bottom my-2"},jn=["id"],Qn={class:"login-content py-2",style:{"z-index":"99999"}},Yn={class:"login-message"},Kn={class:"button-group py-1 my-1"},Xn={class:"keyboard"};function Jn(e,t,a,s,i,o){const r=(0,n.up)("el-input"),l=(0,n.up)("el-form-item"),d=(0,n.up)("el-form"),u=(0,n.up)("el-button"),c=(0,n.up)("KeyBoard"),m=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.j4)(m,{modelValue:i.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>i.dialogVisible=e),"show-close":!1,width:"600"},{header:(0,n.w5)((({titleId:e,login_title:t})=>[(0,n._)("div",qn,[(0,n._)("h3",{id:e,class:(0,v.C_)(t)},"Login",10,jn)])])),default:(0,n.w5)((()=>[(0,n._)("div",Qn,[(0,n.Wm)(d,{"label-position":"top"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"Account",required:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"account",class:"input",onClick:t[0]||(t[0]=e=>o.OnInputFocus("account")),onChange:t[1]||(t[1]=e=>i.message=""),onClear:t[2]||(t[2]=e=>i.keyboard_input=""),placeholder:"Account",modelValue:i.UserName,"onUpdate:modelValue":t[3]||(t[3]=e=>i.UserName=e),autocomplete:"new-password",clearable:"",disabled:o.IsLogin},null,8,["modelValue","disabled"])])),_:1}),(0,n.Wm)(l,{label:"Password",required:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{name:"pw",class:"input",ref:"pw_input",onClick:t[4]||(t[4]=e=>o.OnInputFocus("pw")),onClear:t[5]||(t[5]=e=>i.keyboard_input=""),onChange:t[6]||(t[6]=e=>i.message=""),clearable:"","show-password":"",placeholder:"Password",modelValue:i.Password,"onUpdate:modelValue":t[7]||(t[7]=e=>i.Password=e),type:"password",autocomplete:"new-password",disabled:o.IsLogin},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,n._)("div",Yn,(0,v.zw)(i.message),1),(0,n._)("div",Kn,[(0,n.Wm)(u,{loading:i.logining,type:o.IsLogin?"danger":"primary",onClick:t[8]||(t[8]=e=>o.LoginHandle())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.IsLogin?"Logout":"Login"),1)])),_:1},8,["loading","type"]),(0,n.Wm)(u,{type:"info",onClick:t[9]||(t[9]=e=>i.dialogVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("Cancel")])),_:1})]),(0,n._)("div",Xn,[(0,n.Wm)(c,{onOnChange:o.onChange,onOnKeyPress:o.HandleKeyboardPress,input:i.keyboard_input},null,8,["onOnChange","onOnKeyPress","input"])])])])),_:1},8,["modelValue"])}var ei=a(34951),ti={components:{KeyBoard:ei.Z},data(){return{dialogVisible:!1,UserName:"",Password:"",focus_input:"account",keyboard_input:"",message:"",logining:!1}},computed:{IsLogin(){return 0!=w.U6.getters.CurrentUserRole}},methods:{Show(){this.IsLogin?(this.message="",this.Password="********",this.UserName=w.U6.getters.CurrentUserName):this.message=this.UserName=this.Password="",this.dialogVisible=!0},async LoginHandle(){if(this.IsLogin)w.U6.dispatch("Logout");else if(""!=this.UserName)if(""!=this.Password){this.logining=!0;var e=await w.U6.dispatch("Login",{UserName:this.UserName,Password:this.Password});e.Success?this.dialogVisible=!1:this.message=e.Message,this.logining=!1}else this.message="請輸入 Passowrd";else this.message="請輸入 Account"},OnInputFocus(e){this.focus_input=e,"account"==this.focus_input?this.keyboard_input=this.UserName+"":this.keyboard_input=this.Password+""},onChange(e){this.message="",console.log(e),this.keyboard_input=e,"account"==this.focus_input?this.UserName=e:(this.$refs.pw_input.focus(),this.Password=e,this.$refs.pw_input.focus())},HandleKeyboardPress(e){"{enter}"==e&&("account"==this.focus_input?(this.keyboard_input="",this.focus_input="pw"):this.LoginHandle())}}};const ai=(0,g.Z)(ti,[["render",Jn],["__scopeId","data-v-71dba8f6"]]);var si=ai;const ni={class:"connection-states w-100 px-1"},ii={class:"w-100"};function oi(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)("div",ni,[(0,n._)("table",ii,[(0,n._)("tbody",null,[(0,n._)("tr",null,[(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,v.C_)([o.vms_state,"bi bi-circle-fill"])},null,2),(0,n.Uk)(" "+(0,v.zw)(e.$t("ConnectionStates.AGVS")),1)])]),(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,v.C_)([o.rosbridge_state,"bi bi-circle-fill"])},null,2),(0,n.Uk)(" "+(0,v.zw)(e.$t("ConnectionStates.AGVControlSys")),1)])])]),(0,n._)("tr",null,[(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,v.C_)([o.wago_state,"bi bi-circle-fill"])},null,2),(0,n.Uk)(" "+(0,v.zw)(e.$t("ConnectionStates.IOModule")),1)])])])])])])}var ri={data(){return{}},computed:{connections(){return w.g4.getters.ConnectionState},rosbridge_state(){return void 0!=this.connections.RosbridgeServer&&0==this.connections.RosbridgeServer?"connected":"disconnect"},agvc_state(){return void 0!=this.connections.AGVC&&0==this.connections.AGVC?"connected":"disconnect"},vms_state(){return void 0!=this.connections.VMS&&0==this.connections.VMS?"connected":"disconnect"},wago_state(){return void 0!=this.connections.WAGO&&0==this.connections.WAGO?"connected":"disconnect"}},methods:{},mounted(){}};const li=(0,g.Z)(ri,[["render",oi]]);var di=li,ui=a(82274);const ci={class:"flex-fill border mt-1 p-1"},mi={class:"table-container-div p-1"};function hi(e,t,a,s,i,o){const r=(0,n.up)("status_card"),l=(0,n.up)("b-tab"),d=(0,n.up)("alarm_warn_table"),u=(0,n.up)("agv_operator"),c=((0,n.up)("BatteryView"),(0,n.up)("EQHandshakeView")),m=(0,n.up)("CSTReader"),h=(0,n.up)("AgvOverview"),g=(0,n.up)("LogQuery"),p=(0,n.up)("TaskDeliveryVue"),_=((0,n.up)("ForkAGV3D"),(0,n.up)("AGVSMsgDisplay"),(0,n.up)("b-tabs"));return(0,n.wg)(),(0,n.iD)("div",ci,[(0,n.Wm)(_,{"model-value":i.current_tab,onActivateTab:o.HandleTabpageChanged,pills:"",style:{height:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{title:e.$t("status"),active:"",style:{height:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(r)])),_:1},8,["title"]),(0,n.Wm)(l,{title:e.$t("abnormal-record")},{default:(0,n.w5)((()=>[(0,n._)("div",mi,[(0,n.Wm)(d)])])),_:1},8,["title"]),(0,n.Wm)(l,{title:e.$t("operation")},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{agv_type:a.VMSData.Agv_Type},null,8,["agv_type"])])),_:1},8,["title"]),(0,n.kq)("",!0),(0,n.Wm)(l,{title:e.$t("eq-handshake-e84")},{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1},8,["title"]),o.IsVisitor?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(l,{key:1,title:"CST Reader"},{default:(0,n.w5)((()=>[(0,n.Wm)(m)])),_:1})),(0,n.Uk)("IsGodUser "),o.IsVisitor?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(l,{key:2,title:"Overview"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{AsMainPageMode:!1})])),_:1})),o.IsGodMod?((0,n.wg)(),(0,n.j4)(l,{key:3,title:"Log"},{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(l,{title:"地圖顯示"},{default:(0,n.w5)((()=>[(0,n.Wm)(p)])),_:1}),(0,n.kq)("",!0),(0,n.kq)("",!0)])),_:1},8,["model-value","onActivateTab"])])}const gi={class:"status-card"},pi={class:"w-100 p-3"},_i={class:"d-flex w-100",style:{"font-size":"28px",color:"#e1e1e1"}},wi=(0,n._)("div",{style:{width:"80px"},class:""},"RAM",-1),fi=(0,n._)("span",{class:"py-3 px-2",style:{"font-size":"small"}},"Mb",-1),yi={class:"d-flex",style:{"font-size":"28px",color:"#e1e1e1"}},bi=(0,n._)("div",{style:{width:"80px"},class:""},"CPU",-1),vi=(0,n._)("span",{class:"py-3 px-2",style:{"font-size":"small"}},"%",-1),Si={class:"w-100 border rounded bg-light text-start"};function Ci(e,t,a,i,o,r){const l=(0,n.up)("el-col"),d=(0,n.up)("b-button"),u=(0,n.up)("el-tag"),c=(0,n.up)("el-row"),m=((0,n.up)("b-form-input"),(0,n.up)("el-drawer"));return(0,n.wg)(),(0,n.j4)(s.uT,{name:"el-zoom-in-center"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",gi,[(0,n._)("div",pi,[(0,n.Wm)(c,{class:"w-100 row"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("status")),1)])),_:1}),(0,n.Wm)(l,{span:7,class:"val-column status"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:(0,v.C_)(["w-100 border",""==o.vms_data.SubState?"down":o.vms_data.SubState.toLowerCase()])},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,v.zw)(""==o.vms_data.SubState?"ERROR":o.vms_data.SubState),1)])),_:1},8,["class"])])),_:1}),(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)("Laser Mode")])),_:1}),(0,n.Wm)(l,{span:7},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onClick:r.HandleLsrModeTagClick,class:"w-100",type:"info",size:"large",modelValue:o.vms_data.Current_LASER_MODE,"onUpdate:modelValue":t[0]||(t[0]=e=>o.vms_data.Current_LASER_MODE=e)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.vms_data.Current_LASER_MODE),1)])),_:1},8,["onClick","modelValue"])])),_:1})])),_:1}),(0,n.Wm)(c,{class:"w-100 row"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("current_position")),1)])),_:1}),(0,n.Wm)(l,{span:7,class:"val-column"},{default:(0,n.w5)((()=>[o.vms_data.Last_Visit_MapPoint.Graph?((0,n.wg)(),(0,n.j4)(u,{key:0,type:"info",class:"w-100",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.vms_data.Last_Visit_MapPoint.Graph.Display),1)])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("target_position")),1)])),_:1}),(0,n.Wm)(l,{span:7,class:"val-column"},{default:(0,n.w5)((()=>[o.vms_data.NavInfo.DestinationMapPoint.Graph?((0,n.wg)(),(0,n.j4)(u,{key:0,type:"info",class:"w-100",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.vms_data.NavInfo.DestinationMapPoint.Graph.Display),1)])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n.Wm)(c,{class:"w-100 row"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("tag_read_status")),1)])),_:1}),(0,n.Wm)(l,{span:7,class:"val-column"},{default:(0,n.w5)((()=>[r.IsInspectionAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(u,{key:0,class:"w-100",type:o.vms_data.BCR_State_MoveBase.tagID>0?"success":"danger",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.vms_data.BCR_State_MoveBase.tagID),1)])),_:1},8,["type"]))])),_:1}),2!=o.vms_data.Agv_Type?((0,n.wg)(),(0,n.j4)(l,{key:0,span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("carrier_id")),1)])),_:1})):(0,n.kq)("",!0),2!=o.vms_data.Agv_Type?((0,n.wg)(),(0,n.j4)(l,{key:1,span:7,class:"val-column"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"w-100",type:""!=o.vms_data.CST_Data?"success":"danger",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.vms_data.CST_Data),1)])),_:1},8,["type"])])),_:1})):(0,n.kq)("",!0)])),_:1}),((0,n.wg)(),(0,n.j4)(c,{key:0,class:"w-100 row"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("localization-state")),1)])),_:1}),(0,n.Wm)(l,{span:7,class:"val-column"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"w-100",type:"OK"==r.LocStatusDisplay?"success":"danger",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(r.LocStatusDisplay),1)])),_:1},8,["type"])])),_:1}),(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("map-matching-rate")),1)])),_:1}),(0,n.Wm)(l,{span:7,class:"val-column"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"w-100",type:0!=o.vms_data.MapComparsionRate?"success":"danger",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.vms_data.MapComparsionRate),1)])),_:1},8,["type"])])),_:1})])),_:1})),0==o.vms_data.Agv_Type?((0,n.wg)(),(0,n.j4)(c,{key:1,class:"w-100 row"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)("牙叉高度")])),_:1}),(0,n.Wm)(l,{span:19},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"w-100",type:o.vms_data.IsForkHeightAboveSafty?"danger":"success",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(r.for_position_safe_state),1)])),_:1},8,["type"])])),_:1})])),_:1})):(0,n.kq)("",!0),r.IsGodUser?((0,n.wg)(),(0,n.j4)(c,{key:2,class:"w-100 row border-top py-1"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:5},{default:(0,n.w5)((()=>[(0,n.Uk)("ROS")])),_:1}),(0,n.Wm)(l,{span:19},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"border",variant:"light",onClick:t[1]||(t[1]=()=>{o.show_module_info_drawer=!0})},{default:(0,n.w5)((()=>[(0,n.Uk)("顯示Module Information")])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.kq)("",!0),(0,n.Wm)(c,{style:{position:"absolute",bottom:"0"},class:"row"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{span:12,class:""},{default:(0,n.w5)((()=>[(0,n._)("div",_i,[wi,(0,n._)("div",null,(0,v.zw)(r.Memory),1),fi]),(0,n._)("div",yi,[bi,(0,n._)("div",null,(0,v.zw)(r.CPU),1),vi])])),_:1}),(0,n.Wm)(l,{span:12})])),_:1})]),(0,n.Wm)(m,{title:"Module Information",size:"50%",modelValue:o.show_module_info_drawer,"onUpdate:modelValue":t[3]||(t[3]=e=>o.show_module_info_drawer=e)},{default:(0,n.w5)((()=>[(0,n._)("pre",Si,"        "+(0,v.zw)(r.module_information)+"\n        ",1)])),_:1},8,["modelValue"])],512),[[s.F8,o.show]])])),_:1})}var Ai={props:{},data(){return{currentPosition:"123",vms_data:new ui.ZP,show:!1,show_module_info_drawer:!1}},computed:{IsGodUser(){return w.U6.getters.IsGodUser},for_position_safe_state(){var e=this.vms_data.ZAxisDriverState.position.toFixed(2);return`${e} cm (${this.vms_data.IsForkHeightAboveSafty?"高於安全位置":"安全"})`},state_btn_variant(){var e=this.vms_data.SubState.toUpperCase();return"DOWN"==e|"ALARM"==e|"STOP"==e|"SYSTEM_INIT"==e?"danger":"INITIALIZE"==e|"CHARGING"==e?"primary":"RUN"==e|"WORKING"==e?"success":"IDLE"==e|"WARNING"==e?"warning":""},CurrentPosition(){return void 0==this.ModuleInformation.nav_state?"-1":this.ModuleInformation.nav_state.lastVisitedNode},CarrierID(){return void 0==this.ModuleInformation.CSTReader?"-1":this.ModuleInformation.CSTReader.data},NewestAlarm(){return void 0==this.vms_data.NewestAlarm?"":"zh-TW"==this.$i18n.locale?this.vms_data.NewestAlarm.CN:this.vms_data.NewestAlarm.Description},LocStatusDisplay(){var e=this.vms_data.LocStatus;return 10==e?"OK":20==e?"Warning":30==e?"Not Localized":40==e?"System Error":"Unknown"},IsInspectionAGV(){return 2==this.vms_data.Agv_Type},Memory(){return this.vms_data.SysLoading?this.vms_data.SysLoading.Memory:-1},CPU(){return this.vms_data.SysLoading?this.vms_data.SysLoading.CPU:-1},module_information(){return ue.A.getters.Module_Information}},methods:{HandleLsrModeTagClick(){this.IsGodUser&&l.Z.emit("on-manual-lsr-setting-show-invoke")}},mounted(){l.Z.on("/vms_data",(e=>{this.vms_data=e})),setTimeout((()=>{this.show=!0}),500)}};const ki=(0,g.Z)(Ai,[["render",Ci]]);var Vi=ki,Di=a(45354);const Ti={class:"agv-operator py-2"},xi={class:"mt-1 p-1"},Ii={class:"mt-1 p-1"},Mi={class:"table-container-div mt-1 p-1"},Wi={class:"table-container-div mt-1 p-1"},Ui={class:"mt-1 p-1"},Oi={class:"mt-1 p-1"};function Pi(e,t,a,i,o,r){const l=(0,n.up)("AgvControl"),d=(0,n.up)("b-tab"),u=(0,n.up)("ZAxisControl"),c=(0,n.up)("IOTable"),m=(0,n.up)("ManualSettings"),h=(0,n.up)("SensorAndEquipmentControl"),g=(0,n.up)("b-tabs");return(0,n.wg)(),(0,n.iD)("div",Ti,[(0,n.Wm)(g,{lazy:!1,"model-value":o.current_tab,pills:"",small:"",onActivateTab:r.HandleTabpageChanged},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{title:e.$t("agv_control"),active:""},{default:(0,n.w5)((()=>[(0,n._)("div",xi,[(0,n.Wm)(l)])])),_:1},8,["title"]),(0,n.wy)((0,n.Wm)(d,{title:0==a.agv_type?e.$t("zaxis_up_down"):""},{default:(0,n.w5)((()=>[(0,n._)("div",Ii,[(0,n.Wm)(u,{enabled:r.operation_enabled_return},null,8,["enabled"])])])),_:1},8,["title"]),[[s.F8,0==a.agv_type]]),(0,n.Wm)(d,{title:"Input"},{default:(0,n.w5)((()=>[(0,n._)("div",Mi,[(0,n.Wm)(c,{digital_type:"input",table_data:r.DIOTableData.Inputs},null,8,["table_data"])])])),_:1}),(0,n.Wm)(d,{title:"Output"},{default:(0,n.w5)((()=>[(0,n._)("div",Wi,[(0,n.Wm)(c,{readonly:!1,digital_type:"output",enabled:r.operation_enabled_return,super_user:r.isGodMode,table_data:r.DIOTableData.Outputs,isOutput:!0},null,8,["enabled","super_user","table_data"])])])),_:1}),(0,n.wy)((0,n.Wm)(d,{title:r.operation_enabled_return?e.$t("manual-operation"):""},{default:(0,n.w5)((()=>[(0,n._)("div",Ui,[(0,n.Wm)(m,{enabled:r.operation_enabled_return},null,8,["enabled"])])])),_:1},8,["title"]),[[s.F8,r.operation_enabled_return]]),r.operation_enabled_return&&r.isAMCAGV?((0,n.wg)(),(0,n.j4)(d,{key:0,title:r.operation_enabled_return?"Sensor/儀器控制":""},{default:(0,n.w5)((()=>[(0,n._)("div",Oi,[(0,n.Wm)(h)])])),_:1},8,["title"])):(0,n.kq)("",!0)])),_:1},8,["model-value","onActivateTab"])])}const Bi=e=>((0,n.dD)("data-v-1721479b"),e=e(),(0,n.Cn)(),e),Li={class:"agv-control"},Gi={class:"d-flex flex-row justify-content-center"},Ei={class:"information",style:{width:"260px"}},Hi={class:"row div-container mx-1 my-2"},zi=Bi((()=>(0,n._)("label",{class:"text-start border-bottom"},"Tag ID",-1))),Ni={class:"row div-container mx-1 my-2"},Fi={class:"text-start border-bottom"},Ri={class:"row div-container mx-1 my-2"},Zi={class:"text-start border-bottom"},$i={key:0,class:"row div-container mx-1 my-2"},qi=Bi((()=>(0,n._)("label",{class:"text-start border-bottom"},"位置上報",-1))),ji={class:"mx-2"};function Qi(e,t,a,s,i,o){const r=(0,n.up)("b-form-input"),l=(0,n.up)("el-form-item"),d=(0,n.up)("b-button"),u=(0,n.up)("el-form"),c=(0,n.up)("agvc_control_panel");return(0,n.wg)(),(0,n.iD)("div",Li,[(0,n._)("div",Gi,[(0,n._)("div",Ei,[(0,n.Wm)(u,{"label-position":"top"},{default:(0,n.w5)((()=>[(0,n._)("div",Hi,[zi,(0,n.Wm)(l,{class:"my-2"},{default:(0,n.w5)((()=>[o.IsInspectionAGV?((0,n.wg)(),(0,n.j4)(r,{key:1,size:"sm",disabled:"",modelValue:i.vms_data.Last_Visited_Tag,"onUpdate:modelValue":t[1]||(t[1]=e=>i.vms_data.Last_Visited_Tag=e),state:i.vms_data.Last_Visited_Tag>0},null,8,["modelValue","state"])):((0,n.wg)(),(0,n.j4)(r,{key:0,size:"sm",disabled:"",modelValue:i.vms_data.BCR_State_MoveBase.tagID,"onUpdate:modelValue":t[0]||(t[0]=e=>i.vms_data.BCR_State_MoveBase.tagID=e),state:i.vms_data.BCR_State_MoveBase.tagID>0},null,8,["modelValue","state"]))])),_:1})]),(0,n._)("div",Ni,[(0,n._)("label",Fi,(0,v.zw)(e.$t("offset")),1),(0,n.Wm)(l,{class:"col-6",label:"X"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{size:"sm",disabled:"",modelValue:i.vms_data.BCR_State_MoveBase.xValue,"onUpdate:modelValue":t[2]||(t[2]=e=>i.vms_data.BCR_State_MoveBase.xValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(l,{class:"col-6",label:"Y"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{size:"sm",disabled:"",modelValue:i.vms_data.BCR_State_MoveBase.yValue,"onUpdate:modelValue":t[3]||(t[3]=e=>i.vms_data.BCR_State_MoveBase.yValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})]),(0,n._)("div",Ri,[(0,n._)("label",Zi,(0,v.zw)(e.$t("angle")),1),(0,n.Wm)(l,{class:"my-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{size:"sm",disabled:"",modelValue:i.vms_data.BCR_State_MoveBase.theta,"onUpdate:modelValue":t[4]||(t[4]=e=>i.vms_data.BCR_State_MoveBase.theta=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})]),a.enabled?((0,n.wg)(),(0,n.iD)("div",$i,[qi,(0,n.Wm)(d,{onClick:o.HandleUpload},{default:(0,n.w5)((()=>[(0,n.Uk)("Upload")])),_:1},8,["onClick"])])):(0,n.kq)("",!0)])),_:1})]),(0,n._)("div",ji,[(0,n.Wm)(c)])])])}var Yi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAdgAAAHYAfpcpnIAAAM3SURBVHhe7drLy01RGMfx45LcJTEwlFxTBiKhhFxGiqQMMCKJgcKfgAlJBpRLZiiMlLGMDNyJpEjul5Lccvv+Xnuf9tk9+9jntN+9Ts/ev/q0T97XPu9a71rrffZap1GnTp0iMxwH8Aovo9eDUYnMwD38SdkP99mEz0g3Xl7DbTTkT8FqeEzTwWWyhnyayynQbsgnncAguMkInIHV2CR1zka4yiw8gNXgpNuYBlfZgi+wGpx0GMPgJvWQh9XgpHrIw02G4CSsxiZpyG9GHL3+hA94glu4itPYi9WYgoHo6RyC1eAkFT8qghStEWqk9X2WdziPbVCH9Fz0A1o/eExlrxqtzESeSrAd/f89mIggCT0kNZL0yPwMl7ESQXMQ1m8qKT0F/vcw1Knr0JoxAKWn20Uw77NBJ25gEYIkb4OSa4Km01hMwmyswC4cxzV8g3WPdn5D7zEepSfv425ySrSL9g6WQ3O+08XzPTag9PRnKbwQx/AR1j0tKryGovR0MiX0m+4kqiR3QH8JrHum3USQGqLoKZGOFuCt0Baadd8kTYn5KD39OSXijIPeQwugde+YSu+lCJJOtsS6PReYi0ew7hv7jvUIkrxTQqt+txmNs7DuG/uBVQiSPNviRZwLaJH8Cev+otE4D8HSbkoUdS6wBu2KqbeYimDJmhL7UFSWQItf+j1idxB0g0ZTQgchOhh9DjW+6HOBxfgKqwNEpbf7rMMvWB0g+rr77ITVeNHW3AS4zzlYHSDaqnOfMXgMqwNUSS6A+6hizKoR9ODU8zvRReQorA6QtXAfPUBl7Whrj7ES0WmW1QGinSj30X5C1qbKFVQiWbWBFslghy9lRqW4HoqsTtiNSkQbp1YH6Bi/EpkDqwPE3ecYsnIfVgdsR0u8VkmXoms6epSuRJbBGgFaIIMcupYd/TXQjrHVCdPRjNcpoM83ZZXALQuh5yelu9E1ncp0wMPomk7LuaLnDtCpkpXJ0bUvnjvgaXRNRx/iaMZzB+j8wMqo6NoXzx2gkyorI6Or+2h/wKoDVB8043kE6NT4xb+XLdGHK5rx3AHKxeiazIXoWomoJD6CNxG91r/VqVNHaTT+AiXQTrI+7u96AAAAAElFTkSuQmCC",Ki="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHNAAABzQGe8tNOAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAMNQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2DG76QAAAEB0Uk5TAAQFDxEUFRYYHCEkJSYnKCssNDY3ODk6OzxBRE9QXV5ri5ydwcTGx8jKy83O0Nfb4+Tl5ufo7u/w8fLz9vn6/uQ5oWoAAAExSURBVFjD7dVHW8JAEIfxv6KIBVCwYAVs2EsExQbz/T+VB5Mns32yXjzsnDabeX+XHAL4ZulsMjmtIXpWH4mIHhp/6+OFoo8Vyj5O4H2MoPbVBb2vKph9NcHWVxHsvVxw9VLB3csEXy8R/H1YCPUhIdz7BbX/LI9PMkHr98vz+rNE0PoeygdIBLX/6IEDAsHsFQAbmV/Q+j3oQECw9RrgFRbvlX4XNgBNRbhZYECfv3nPewNA84XvnTBgaOtNQBWGDBiwfgduAC0mDBhQyyy9DWBCpvwzu295vw0/gNb492raVb9j55WIaMp7O4D22NwEgPYl0WgTYQBr50TXWzCnXtcuHACwvALROAHpJCABCUhAAhLwv4BZ0X9HAncFcBUJHOf9/DASwNHtjOjr4sC38wMeQSB1Q5k8jAAAAABJRU5ErkJggg==",Xi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB2AAAAdgB+lymcgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM1SURBVHic7drPi5VVHMfxl+MQOloiYguXIuNkBC7CEA2kQm0lKBG4qFkVErkIyj8hZ6OIuEioGdxZoG5diysXlb8iEUGJmnI0ECkNc1ycuSRPz7nPM3fmec4zz9w3fGG4873P+Xy/93zP/Z5zLn369GkwgxjDb5ic+XsoqaKaOYzpjF3DppSi6uR3/0/ANB7iw4S6amNSfgI6Nq7lJZFXAouqJJbia8VJaH1JfCAEWZSIU1iRSGPljOCy4iT8hNcSaayc5TimOAl/4aNEGmuhXxL6JYGWlsQAhrEHhzCBC/gRt3AfDzD63HtGlSuJb/BC5RH0wDAO4DtMKQ6kYxP+q/FNQlNU9J6jNcRTinX4QjnRRZ3gqzPPXCG0x938p54XMVhRcN3YjYPYKXR6i4IlQk1fMrdPO2vjZl8CR6oMNI838X0JYbOxbO8/qoGL4FrhE3paQljWHuEiTuIz7MJmrMdq4ZuCcjWfl7DK2Y97JYRlF7MxYW0os8cvO+Vr3S4vU64x6dif+ArbZzlOI1vhYfxQQtQ07uBToZObDUMaOuW3KjflJ/Gx3haiRk55eFtoTbuJeipMxzU9jtHIKQ/v43GBqBvY0uPzBzX4SOxd/FMg7DRemsMYYwXPTzLl4Q3dp+QTYZGbK7F7gY6NS3AsvhF3u4h6hL3zNFbsXiDZKfByXImImhYWw7fmcbwvc8ZIeg9wMkdQx/7Gjnkeb6mQhF+EC9LDEt4EvSce/L8z/28tLwtHUbEEHEwnrR4mxIP/Np2setgmvqW9iVXppFXPgPgG54neO7wFwz7xqX8ioa7aiJ3hTel9Y7Ng2Cn+6S+YW5a5cF5+8Hc09HZlPlknLHKL8jsfPpcf/F0t/1FSh9i187GUoupiRHzxez2hrtr4RH7w11OKqoqBnNd2RHzPVaijMSwRP+15J6Gu2nhFfvCPtXT1z5bASMTvkvA7m9ZRNgFXqxaSimwChiN+P1ctJBXZBGyI+N2oWkgqsglYHfG7XbWQVGQT8GLE70HVQlKRTcDKiN/DqoU0hdhNb2v3/9kZcC/H51fhFriVZBNwJsfnbB1CmsIQjuOPGTuupS1wnz59wDP7Mk0gvr2CKgAAAABJRU5ErkJggg==",Ji="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAc0AAAHNAZ7y004AAAGiSURBVHhe7du5SgNhFIbhcatFcCtsBDdQrMS9CdhrK3hrdl6CN2DhgoLYCdoIrpVrIaZQ3xNnQtBhTE4I+p//vPAY2++gokxMPM/zYq4jfW1lXdhIjeEMb4iiIZzgo8Y1ZmE+GX+O2vGZB8zAbEXjM/eYgLnqGZ/Zg6kaGZ/pg4k044WJA2jH7yP4tOMfMYmg045/whyCzscjb2ARGT+PoPPxyBtYRMYvIOi045/h40OumfGLCDofj7yBRWT8EoJOO/4FPj7kmhm/jKDTjg9NGcdYQ7VYxn+3Ks8FerCLEcSWPKdINpF3nRiU2/hwhwFEWXv6Gm1ygO2vT6PsVb4FunEAk09pfkl++FcaxCnyflBY9Y4SqsVyBHk0L1/xK/iR9giXMPN7hPYIV/AjwI+AUZhIewR5G4wfAX4EVP7ispAfgbRHuIEfAeMwkR+B/AikPcItzPz53cwRhmEi7RF2YCbtEXphJs0R+mGqRo5wCJPVcwR5p+gUzFZ0BBkf/Jsl60mOcITa8f/qX2bkuUCr68Q6pnGBLcj7Bj3P87y/LUk+AUXsT2gjALNcAAAAAElFTkSuQmCC",eo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAc0AAAHNAZ7y004AAAGvSURBVHhe7ds7LwRhFMbxQdQiQUgUJG4Jpbg3Ej2VSulzaX0BX0AiCCGioFC6ReNaCBH8T+zImj3zMslKds57nuQ3O8Vs8TzZbLEzm3g8Hk/Maam8NkrasIpl9OAE74giE7jER5Uj9MJ8xnGH6vKpM5geYQS30MqnTI+wDa10lskROqGVzWNuhKIDCHMj7EArGmJqhFHcQysaYmqESTxAKxriI8DUCFPwERD9CNPwEfAIrWiIjwBTI8zAR0D0I8zCR8ATtKIhPgJMjTCHuo6whEO8QnujJTUjLEK70LIfIxxAu8g6GaG9iYN87FsRY9ZkAFkj1tw0V06ijQzw/HUaZTbksIXsF0QMTiE3Y5N5yB1Y7SKrpHw3vrOAXbxAe4MlNeXLmAGcQysYYqb8BbSCIV4epc4goi6ffXzmL7w8Sp0hePmCzJS/glYwxET5YXj5grw8Sh15WPIaWsEQE+X7EW15ySa0giFmyndAKxhiprykC1rJPKbKp9mDVjbLZHnJGH57UtRs+TTykGTeCObLp9H+MrOPfy0vt8YaKfI7/Qr6cIx1vMHj8Xg89U+SfALSU4yXrLbReAAAAABJRU5ErkJggg==",to="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAdgAAAHYAfpcpnIAAAM6SURBVHhe7ZrLy01RGIePS3KLJAYGlIG7MhAJJeQ2IZIywIgMGCj5EzAhYUC5ZIa5mCkZGbjlkmQg92sht9ye32ntr2317s/Zxz77fOc9+6mndTrfaZ+93vOutdd611erqKjwzFA8jK+Ceq33uoYj+DtS73UNTzEOwDPsCgZh3Hn5DXvoH1qPDA9tzKfQ1qkCEFqPjAhtzMfQ1vEcgAmhjXkf2jqeAzAptDEPQ1vHcwAmhzbmQWjreA7AjNDG3A+ta7Tc1fPeWgdMRfcsRavzr7Ef9uB1CCwObcxlVCB68BqANaGNUQDcMxvj1E+cgu45hFbnb6F7NPtrorMCsBvdsxOtzv/Acega7f8foxWAS+ierWh1Xi5D14zGN2h1/hq65yhanZfr0DVzUJOc1fkb6HnDVxuJ2t9bnf+F89E159DqvDyNrsl65st3OBbdsh5/otV5qb+3BS1F9+FzfIJ7cQAWySL8glbH5XFsC9PwDsY3pCAUhfb5HzD+jsTbOARLZzPqwMG6qRdYBGvxK1rfIbUJyiqEtgyl/Cm0bijxJf4vOzDrWS8V/LlYKlkpH7sfm0WnO2fRum7id1yJpdJbyqc9gQOxGbTCUw3fum6iKr8bsDSG4Rm0biatgrMJm0EbG32HVnLWtRM1GS7B0mg05fUZfTYv2s9vQ02a1nXTvsV5WBqNprwmxLz/g6PHlia5rGJGrDY4Wed+hdPKlF+Ax1CntdY1LVXwHIylUHTKKzNUmdFToZHrplXKb8TSyJPyyhKhffconIizcDnuQi1Nr2Jvi5gsNRHqO8ZgKWgiOonWzaRVcLZgQqMBy+N1XIilcgCtm0mbTnn9+v9aCeZVNbzV+NchZllkFRYT0yk/HfOO5Sy1zL2AK7BU2l0vu4t7cDyuwovYVg6i9QuljYeASk/W5yyVYedxO5b2LM9Ds5OgXmtpqlLUI7yJV1DB0S+sMa0Od0yFVqcsn9HqfFotTNpSgCiDmXgPrY6n1bGz23P3Vi6FO4pqSEA1JKAaEoE8JbGizwX6DI1ul3VQ4pZGyuJFnQv0aXobEkWcC3QEWUPC9RCI0ZBQyUtprwNSvW72XKCioqLV1Gp/AEsEUwZ8KP9cAAAAAElFTkSuQmCC",ao="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAc0AAAHNAZ7y004AAAJQSURBVHhe7ZlPSxVRGMYnqa0SZCi0UNASbBn+KTdCe/0C9QX6SvVBWoUgKoXizoVLy1rln0CwRfac2/vCMD0zc86ZufPvnB/8eL3jmZd5nnvRxU1aYAsewt/wTryBu3ATDpptqKGZf+BrOFiOIAue9gAOlvTHPs9b2Bj3ZDaFCWhDY881ITNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEybZgWu84j+Pjfj/WwBPegfnm5D5ehD7qjTB/m4Q7UHZ/hc1iJF/AnTD+c8RKuQleye/J0xbxJ32F2j+9zjliBFzC7VL2CrsvZHqYLzyALr5oSTBYnpuA3yBamNSWsQVvYDqYtJvw5ZDvSmiwmkzXvIFvEdCmB3c+0wTa8ajL9R95/gTmZNkzCj3B99KoZnsJPcHb0yg6XTMlbyFos0nwSykpg9zGLMOFd3nn1DbTmATyGbFGR17CoBHYPMw8T3uZvU9Yv8D504gk8hWxhkaaEl5DBzjMZi9An/AmcgV7UXQI7y8zSSnilSgmvYBp2jpmm1fBKXSWwM0xlAX6F7EyRtYZXfEv4BbUE9numoVPhlSolbGSuFdnJ8EqVEth15hm5VmYj4RXfEsZlo+GVrpTQSnil7RJaDa+0VUInwitNl9Cp8EpTJXQyvDLuEjodXhlXCb0Ir9RdQq/CK3WV0MvwStUSeh1e8S1hEOEV1xIGFV6xLWGQ4ZWyEgYdXskrIYjwykP4Af4Q30On7+7qIUn+AnOWS9eIOc2QAAAAAElFTkSuQmCC",so="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAdgAAAHYAfpcpnIAAAMsSURBVHhe7drLy01RGMfx45LcIomBAWXgrgxEQgm5TYikDDAiAwZK/gRMSBhQLplhLmZKRgZuuSQZyP1ayC237y9rabc8++2c877n7N2z968+rdP71jl7P2etddZZ6zTq1KmTzVAcxqtAj/W3yuQIfif0t8rkGdICPEVl8g1pAWQQXKZ/aGM+hTbN8NC6S12A0MZ8DG2aEaF1l7QA70ObZkJo3SUtwMPQppkUWndJC/AgtGkmh9Zd0gLcD22aGaF1n6mw1gFaH1RiSdwPr2EVYSncJR0CutHLfx/+l8WhdZW0AEpeAdaE1n2mIO3+0WxUIrdgFeAQKpHdsAqgCbISnwbj8ANWEXaiErkEqwCP4XZ/IJtlsAogW1GJXINVgDcYDfdZB6sAchTuo4XSDVgF0CQ5B+4zH79gFUH7ByPhPqdhFUDOwX3G4h2sAkgl1gbrYd28/IT+7z7HYRVAvmAR+jIDsBdP8Bz7UOhSfAhuwyqAfEBf7hvo5tPXuINpKCzaIM3bNZKvWIu+yAtYr6EDnM0oLHOhi7AuTrRG2IHe5iWs549OobAhsRLfYV1YdBa9OVXaD+t5swodEhuQd6Ic6ayh3RXjQJyA9bxZhQ6JJdDkZ11YpJXkGbT7BWoTehpykV5jGLqeeXgL66KyNKltQzv7Cerm6u7W82YVNiR0fpj3xSmlTRVNkvpYbSWa8DTxWc+ZVdiQGAxtnFoXZdFp9DEsQCsp/ZDYiGaGRJa6rmZ97UQ189FW+iExBuqueV+le6LF1FVo6b0LyzELEzEK8UBH726ph4SyENdhXVi70hvagmaGxEkUsqGrQ9fVyNtjbJfe/TjGmx0SB1BoVuAC8s4dWqWbng6lmSGhDd1/sQ5HO52LWIXx2IO7qHy0htiO89A7ZL1zFm3VtToEDqLUUa9UQTRnqIfoJq/gJh5BW3Naemviiyn9JNipaCXZzMLrM9ydZul3DHnH+Fn3MBOuUvqlcKdSd3lYN5xVd3m4ic4FSr8l1snoIMS64azCvu52I3nnApHW/a5/tJV3LuC2y6exhoDrLp9G5wLaJtPBqIaDHrvu8nXqdDWNxh9JTlMGqOKxtAAAAABJRU5ErkJggg==";const no=e=>((0,n.dD)("data-v-bd73ecba"),e=e(),(0,n.Cn)(),e),io={class:"agv-control-panel-container w-100"},oo=["element-loading-background"],ro={key:0,class:"w-100 bg-light text-start px-2 py-3"},lo={class:"speed-item-container d-flex flex-row"},uo=no((()=>(0,n._)("div",null,"Linear Speed",-1))),co={class:"speed-item-container d-flex flex-row"},mo=no((()=>(0,n._)("div",null,"Rotation Speed",-1))),ho={class:"w-100"},go={align:"center"},po=no((()=>(0,n._)("img",{src:Yi,alt:""},null,-1))),_o=[po],wo=no((()=>(0,n._)("img",{src:Ki,alt:""},null,-1))),fo=[wo],yo=no((()=>(0,n._)("img",{src:Xi,alt:""},null,-1))),bo=[yo],vo={align:"justify"},So=no((()=>(0,n._)("img",{src:Ji,alt:""},null,-1))),Co=[So],Ao=no((()=>(0,n._)("i",{class:"bi bi-sign-stop"},null,-1))),ko=[Ao],Vo=no((()=>(0,n._)("img",{src:eo,alt:""},null,-1))),Do=[Vo],To={align:"justify"},xo={key:0,src:to,alt:""},Io=no((()=>(0,n._)("img",{src:ao,alt:""},null,-1))),Mo=[Io],Wo={key:0,src:so,alt:""};function Uo(e,t,a,i,o,r){const l=(0,n.up)("el-input-number"),d=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",io,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{"element-loading-spinner":!1,"element-loading-background":r.enabled?"rgba(0,0,0,0)":"rgba(202,202,202,0.4)",ref:"agvc_ctrl_pnl",class:"agvc-control-panel keys",style:{width:"400px"}},[(0,n.wy)((0,n._)("div",{class:"disable-notify text-start my-2"},(0,v.zw)(e.$t("agv_control_notify_text")),513),[[s.F8,!r.enabled]]),o.speed_modifyable?((0,n.wg)(),(0,n.iD)("div",ro,[(0,n._)("div",lo,[uo,(0,n.Wm)(l,{size:"large",modelValue:o.linear_speed,"onUpdate:modelValue":t[0]||(t[0]=e=>o.linear_speed=e),step:.001,max:1,min:.001},null,8,["modelValue"])]),(0,n._)("div",co,[mo,(0,n.Wm)(l,{size:"large",modelValue:o.rotation_speed,"onUpdate:modelValue":t[1]||(t[1]=e=>o.rotation_speed=e),step:.01,max:.3,min:.01},null,8,["modelValue"])])])):(0,n.kq)("",!0),(0,n._)("table",ho,[(0,n._)("tbody",null,[(0,n._)("tr",go,[(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[2]||(t[2]=e=>r.MOVE_FL())},_o,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[3]||(t[3]=e=>r.MOVE_UP())},fo,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[4]||(t[4]=e=>r.MOVE_FR())},bo,2)])]),(0,n._)("tr",vo,[(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[5]||(t[5]=e=>r.MOVE_LEFT())},Co,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[6]||(t[6]=e=>r.MOVE_STOP())},ko,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[7]||(t[7]=e=>r.MOVE_RIGHT())},Do,2)])]),(0,n._)("tr",To,[(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[8]||(t[8]=e=>r.MOVE_BL())},[r.IsMiniAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("img",xo))],2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[9]||(t[9]=e=>r.MOVE_DOWN())},Mo,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,v.C_)(r.active_state),onClick:t[10]||(t[10]=e=>r.MOVE_BR())},[r.IsMiniAGV?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("img",Wo))],2)])])])]),(0,n._)("div",{onClick:t[11]||(t[11]=e=>o.speed_modifyable=!o.speed_modifyable),style:{height:"20px",width:"100px"},class:"bg-light"})],8,oo)),[[d,!r.enabled]])])}function Oo(e,t,a,s,i,o){const r=(0,n.up)("el-input"),l=(0,n.up)("SimpleKeyboardVue"),d=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",{key:a.key},[(0,n.Wm)(r,{modelValue:i.number,"onUpdate:modelValue":t[0]||(t[0]=e=>i.number=e),step:a.step,onChange:o.InputChangedHandle,onClick:o.InputClickHandler},null,8,["modelValue","step","onChange","onClick"]),(0,n.Wm)(d,{modelValue:i.show_keyboard,"onUpdate:modelValue":t[1]||(t[1]=e=>i.show_keyboard=e),direction:"btt",size:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{onOnKeyPress:o.keyboardInputHandler,keyboard_type:"number"},null,8,["onOnKeyPress"])])),_:1},8,["modelValue"])])}var Po={components:{SimpleKeyboardVue:ei.Z},props:{default:{type:Number,default:0},step:{type:Number,default:.1},key:{type:Object,default:Date.now()}},data(){return{number:this.value,show_keyboard:!1,input_str:""}},methods:{InputChangedHandle(e){this.number=e},InputClickHandler(){this.show_keyboard=!0},keyboardInputHandler(e){if(""!=e){if("enter"==e)return"."==this.input_str[this.input_str.length-1]&&(this.input_str=this.input_str.slice(0,-1)),this.InputChangedHandle(this.GetInputNumber),void(this.show_keyboard=!1);if("back"==e)return""!=this.input_str&&(this.input_str=this.input_str.slice(0,-1)),void this.InputChangedHandle(this.GetInputNumber);this.input_str+=e,this.InputChangedHandle(this.GetInputNumber)}}},computed:{GetInputNumber(){return parseFloat(""==this.input_str?0:this.input_str)}},mounted(){this.number=this.default}};const Bo=(0,g.Z)(Po,[["render",Oo]]);var Lo=Bo,Go={components:{KeyboardInput:Lo},props:{},data(){return{linear_speed:.05,backward_speed:.1,rotation_speed:.05,speed_modifyable:!1,linear_action:"stop",rotation_action:"stop"}},methods:{async MOVE_UP(){this.linear_action="up",this.linear_speed+=.05,this.linear_speed>=1&&(this.linear_speed=1),(0,zt.Ag)(this.linear_speed)},async MOVE_DOWN(){this.linear_action="down",(0,zt.yU)(this.backward_speed)},async MOVE_LEFT(){this.IsMiniAGV?(0,zt.nJ)(this.linear_speed):(this.rotation_action="left",this.rotation_speed+=.05,this.rotation_speed>=.3&&(this.rotation_speed=.3),(0,zt.iu)(this.rotation_speed))},async MOVE_RIGHT(){this.IsMiniAGV?(0,zt.K4)(this.linear_speed):(this.rotation_action="right",this.rotation_speed+=.05,this.rotation_speed>=.3&&(this.rotation_speed=.3),(0,zt.bC)(this.rotation_speed))},async MOVE_STOP(){(0,zt.CB)(),this.linear_speed=this.rotation_speed=.05},async MOVE_FR(){this.IsMiniAGV?(0,zt.bC)(this.rotation_speed):(0,zt.Yv)(.2,.15)},async MOVE_FL(){this.IsMiniAGV?(0,zt.iu)(this.rotation_speed):(0,zt.Z8)(.2,.15)},async MOVE_BR(){this.IsMiniAGV||(0,zt.mR)(.2,.15)},async MOVE_BL(){this.IsMiniAGV||(0,zt.Fn)(.2,.15)}},computed:{active_state(){return this.enabled?"active":"inactive"},IsMiniAGV(){return w.q$.getters.IsInspectionAGV},IsUserLogin(){return 0!=w.U6.getters.CurrentUserRole},IsGodUser(){return w.U6.getters.IsGodUser},IsAuto(){return w.q$.getters.IsAuto},IsOnline(){return w.q$.getters.IsOnline},enabled(){return!!this.IsGodUser||this.IsUserLogin&&!this.IsAuto&&!this.IsOnline}}};const Eo=(0,g.Z)(Go,[["render",Uo],["__scopeId","data-v-bd73ecba"]]);var Ho=Eo,zo={components:{agvc_control_panel:Ho},props:{ModuleInformation:{type:Object,default(){return{}}},enabled:{type:Boolean,default:!1},super_user:{type:Boolean,default:!1}},data(){return{vms_data:new ui.ZP}},computed:{TagID(){return void 0==this.ModuleInformation.reader?-1:this.ModuleInformation.reader.tagID},IsInspectionAGV(){return 2==this.vms_data.Agv_Type}},methods:{async FindTagBtnHandler(){await(0,oe.vI)()},async HandleUpload(){var e=this.vms_data.CarName,t=this.vms_data.Tag,a=this.vms_data.Pose.position.x,s=this.vms_data.Pose.position.y,n=this.vms_data.Angle,i=await de.UploadCoordination(e,t,a,s,n);i?this.$swal.fire({text:"位置上報成功",title:"位置上報",icon:"information",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:"位置上報失敗",title:"位置上報",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}},mounted(){l.Z.on("/vms_data",(e=>{this.vms_data=e}))}};const No=(0,g.Z)(zo,[["render",Qi],["__scopeId","data-v-1721479b"]]);var Fo=No;const Ro=e=>((0,n.dD)("data-v-3ef9456e"),e=e(),(0,n.Cn)(),e),Zo={class:"z-axis-control border p-1"},$o=["element-loading-background"],qo={class:"d-flex flex-column w-50"},jo={class:"d-flex flex-row"},Qo=Ro((()=>(0,n._)("div",{class:"label-item"},"極限SENSOR狀態",-1))),Yo={class:"d-flex flex-row my-2"},Ko=Ro((()=>(0,n._)("div",{class:"label-item"},"Current Position",-1))),Xo={key:0,class:"p-2 my-2 border rounded"},Jo={class:"control-buttons mx-2"},er=Ro((()=>(0,n._)("i",{class:"bi bi-chevron-bar-up"},null,-1))),tr=Ro((()=>(0,n._)("i",{class:"bi bi-chevron-up"},null,-1))),ar=Ro((()=>(0,n._)("i",{style:{color:"rgb(0, 123, 255)"},class:"bi bi-house-fill"},null,-1))),sr=Ro((()=>(0,n._)("i",{style:{color:"rgb(255, 61, 80)"},class:"bi bi-stop-circle-fill"},null,-1))),nr=Ro((()=>(0,n._)("i",{class:"bi bi-chevron-down"},null,-1))),ir=Ro((()=>(0,n._)("i",{class:"bi bi-chevron-bar-down"},null,-1)));function or(e,t,a,i,o,r){const l=(0,n.up)("el-tag"),d=(0,n.up)("el-input"),u=(0,n.up)("b-button"),c=(0,n.up)("forkTeachEditor"),m=(0,n.up)("el-drawer"),h=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",Zo,[(0,n.wy)((0,n._)("div",{class:"disable-notify text-start my-2"},(0,v.zw)(e.$t("zaxis_control_notify_text")),513),[[s.F8,!r.enabled]]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:"d-flex","element-loading-spinner":!1,"element-loading-background":r.enabled?"rgba(0,0,0,0)":"rgba(202,202,202,0.4)"},[(0,n._)("div",qo,[(0,n._)("div",jo,[Qo,r.Vertical_Hardware_limit_bypass?((0,n.wg)(),(0,n.j4)(l,{key:0,type:"danger",size:"large",effect:"dark",onClick:t[0]||(t[0]=e=>r.ControlHardwareLimitSensor(!0))},{default:(0,n.w5)((()=>[(0,n.Uk)("Bypass")])),_:1})):((0,n.wg)(),(0,n.j4)(l,{key:1,type:"success",effect:"dark",size:"large",onClick:t[1]||(t[1]=e=>r.ControlHardwareLimitSensor(!1))},{default:(0,n.w5)((()=>[(0,n.Uk)("已開啟")])),_:1}))]),(0,n._)("div",Yo,[Ko,(0,n.Wm)(d,{size:"small",style:{width:"72px"},class:"py-1",center:"",modelValue:r.ForkHeight,"onUpdate:modelValue":t[2]||(t[2]=e=>r.ForkHeight=e),disabled:""},null,8,["modelValue"])]),r.enabled?((0,n.wg)(),(0,n.iD)("div",Xo,[(0,n.Wm)(u,{onClick:r.ShowTeachView},{default:(0,n.w5)((()=>[(0,n.Uk)("牙叉位置校點")])),_:1},8,["onClick"])])):(0,n.kq)("",!0)]),(0,n._)("div",Jo,[(0,n.Wm)(u,{disabled:!r.enabled||o.isZAxisMoving,size:"lg",class:"w-100 border mb-3",variant:"light",onClick:t[3]||(t[3]=e=>r.ForkAction("up_limit")),block:""},{default:(0,n.w5)((()=>[er,(0,n.Uk)(" "+(0,v.zw)(e.$t("up_limit_pose")),1)])),_:1},8,["disabled"]),(0,n.Wm)(u,{disabled:!r.enabled||o.isZAxisMoving,onClick:t[4]||(t[4]=e=>r.ForkAction("up")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[tr,(0,n.Uk)(" "+(0,v.zw)(e.$t("up")),1)])),_:1},8,["disabled"]),(0,n.Wm)(u,{disabled:!r.enabled||o.isZAxisMoving,onClick:t[5]||(t[5]=e=>r.ForkAction("home")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[ar,(0,n.Uk)(" "+(0,v.zw)(e.$t("original")),1)])),_:1},8,["disabled"]),(0,n.Wm)(u,{onClick:t[6]||(t[6]=e=>r.ForkAction("stop")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[sr,(0,n.Uk)(" "+(0,v.zw)(e.$t("stop")),1)])),_:1}),(0,n.Wm)(u,{disabled:!r.enabled||o.isZAxisMoving,onClick:t[7]||(t[7]=e=>r.ForkAction("down")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[nr,(0,n.Uk)(" "+(0,v.zw)(e.$t("down")),1)])),_:1},8,["disabled"]),(0,n.Wm)(u,{disabled:!r.enabled||o.isZAxisMoving,size:"lg",class:"w-100 border mb-3",variant:"light",onClick:t[8]||(t[8]=e=>r.ForkAction("down_limit")),block:""},{default:(0,n.w5)((()=>[ir,(0,n.Uk)(" "+(0,v.zw)(e.$t("down_limit_pose")),1)])),_:1},8,["disabled"])]),(0,n.Wm)(m,{modelValue:o.show_teach_page,"onUpdate:modelValue":t[9]||(t[9]=e=>o.show_teach_page=e),direction:"btt",size:"90%",onClose:r.TeachDrawerClosingHandle,title:"FORK TEACH"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{ref:"fork_teach"},null,512)])),_:1},8,["modelValue","onClose"])],8,$o)),[[h,!r.enabled]])])}var rr=a(57544),lr=a(841),dr={components:{AdminFork:rr.Z,forkTeachEditor:lr.Z},props:{},data(){return{isZAxisMoving:!1,show_teach_page:!1,hardware_limit_enable:!0}},watch:{Vertical_Hardware_limit_bypass(e){this.$notify({message:"牙叉極限Sensor "+(e?"已經Bypass":"作用中"),type:e?"error":"success",duration:1e3})}},computed:{ForkHeight(){return w.q$.getters.ForkHeight},IsUserLogin(){return 0!=w.U6.getters.CurrentUserRole},IsGodUser(){return w.U6.getters.IsGodUser},IsAuto(){return w.q$.getters.IsAuto},IsOnline(){return w.q$.getters.IsOnline},enabled(){return!!this.IsGodUser||this.IsUserLogin&&!this.IsAuto&&!this.IsOnline},Vertical_Hardware_limit_bypass(){return w.zb.getters.Vertical_Hardware_limit_bypass}},methods:{async ForkAction(e,t=0,a=0){var s=!1;if("home"!=e&&"stop"!=e&&this.Vertical_Hardware_limit_bypass&&await this.$swal.fire({title:`極限Sensor目前為Bypass狀態，確定要進行[${e}]動作?`,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{s=!e.isConfirmed})),!s){this.isZAxisMoving=!0;var n=await oe.ks.Action(e,t,a);this.isZAxisMoving=!1,n.confirm||this.$swal.fire({text:n.message,icon:"error",title:"牙叉禁止操作"})}},ControlHardwareLimitSensor(e){e?w.zb.dispatch("ControlHardwareLimiSensor",!e):this.$swal.fire({title:"確定要將Z軸極限Sensor Bypass?",text:"",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",cancelButtonText:"取消",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&w.zb.dispatch("ControlHardwareLimiSensor",!0)}))},ShowTeachView(){this.$refs["fork_teach"]&&this.$refs["fork_teach"].reload(),this.show_teach_page=!0},TeachDrawerClosingHandle(){w.k0.getters.IsAnyChanged&&this.$swal.fire({icon:"warning",text:"教點資料已修改但尚未儲存，確定要離開?",showConfirmButton:!0,showCancelButton:!0}).then((e=>{e.isConfirmed||(this.show_teach_page=!0)}))}},created(){l.Z.on("open-fork-teach-table",(()=>{this.ShowTeachView()}))}};const ur=(0,g.Z)(dr,[["render",or],["__scopeId","data-v-3ef9456e"]]);var cr=ur,mr=a(22038);a(33251);const hr=e=>((0,n.dD)("data-v-04a62d21"),e=e(),(0,n.Cn)(),e),gr={class:"manual_settings border px-3 mx-3"},pr={class:"d-flex flex-row py-3"},_r=hr((()=>(0,n._)("div",{class:"item-label"},"Laser Mode",-1))),wr={class:"d-flex flex-row py-3"},fr=hr((()=>(0,n._)("div",{class:"item-label"},"Current Laser Mode",-1))),yr={key:0,class:"d-flex flex-row py-3"},br=hr((()=>(0,n._)("div",{class:"item-label"},"電池鎖定",-1))),vr={class:"battery py-1"},Sr={class:"d-flex flex-row py-2 my-2 border-bottom"},Cr=hr((()=>(0,n._)("label",null,"電池 1(近PC側)",-1))),Ar={class:"d-flex flex-row"},kr=hr((()=>(0,n._)("label",null,"電池 2(近天線側)",-1))),Vr={key:1,class:"d-flex flex-row py-3"},Dr=hr((()=>(0,n._)("div",{class:"item-label"},"牙叉伸縮",-1))),Tr={class:"battery py-1"},xr={class:"d-flex flex-row mb-1"},Ir={key:2,class:"d-flex flex-row py-3"},Mr=hr((()=>(0,n._)("div",{class:"item-label"},"浮動牙叉",-1))),Wr={class:"battery py-1"},Ur={class:"d-flex flex-row mb-1"},Or={style:{"font-size":"smaller"}},Pr=hr((()=>(0,n._)("p",null,"Are you sure?",-1)));function Br(e,t,a,s,i,o){const r=(0,n.up)("LaserModeSwitcher"),l=(0,n.up)("b-form-input"),d=(0,n.up)("SimpleKeyboard"),u=(0,n.up)("el-drawer"),c=(0,n.up)("b-button"),m=(0,n.up)("b-modal");return(0,n.wg)(),(0,n.iD)("div",gr,[(0,n._)("div",pr,[_r,(0,n.Wm)(r)]),(0,n._)("div",wr,[fr,(0,n._)("div",null,[(0,n.Wm)(l,{size:"lg",class:"centered-text",disabled:"",modelValue:o.CurrentLaserMode,"onUpdate:modelValue":t[0]||(t[0]=e=>o.CurrentLaserMode=e),min:"0",max:"16","text-align":"center"},null,8,["modelValue"])])]),(0,n.Wm)(u,{modelValue:i.show_keyboard,"onUpdate:modelValue":t[1]||(t[1]=e=>i.show_keyboard=e),direction:"btt",size:"50%"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{keyboard_type:"number",onOnChange:o.onChange},null,8,["onOnChange"])])),_:1},8,["modelValue"]),o.IsBatteryLockControlable?((0,n.wg)(),(0,n.iD)("div",yr,[br,(0,n._)("div",vr,[(0,n._)("div",Sr,[Cr,(0,n.Wm)(c,{disabled:!o.Bat1Lockable,onClick:t[2]||(t[2]=e=>o.BatteryLockHandler(1,!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:o.Bat1Lockable,onClick:t[3]||(t[3]=e=>o.BatteryLockHandler(1,!1)),squared:"",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1},8,["disabled"])]),(0,n._)("div",Ar,[kr,(0,n.Wm)(c,{disabled:!o.Bat2Lockable,onClick:t[4]||(t[4]=e=>o.BatteryLockHandler(2,!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:o.Bat2Lockable,onClick:t[5]||(t[5]=e=>o.BatteryLockHandler(2,!1)),squared:"",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1},8,["disabled"])])])])):(0,n.kq)("",!0),o.IsForkARMControlable?((0,n.wg)(),(0,n.iD)("div",Vr,[Dr,(0,n._)("div",Tr,[(0,n._)("div",xr,[(0,n.Wm)(c,{disabled:!o.enabled||o.FORK_ARM_Status.IsArmAtHomePose&&!o.FORK_ARM_Status.IsArmAtEndPose,onClick:t[6]||(t[6]=e=>o.ForkArmPoseControlHandler(!1)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("縮回")])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:!o.enabled||o.FORK_ARM_Status.IsArmAtEndPose&&!o.FORK_ARM_Status.IsArmAtHomePose,onClick:t[7]||(t[7]=e=>o.ForkArmPoseControlHandler(!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("伸出")])),_:1},8,["disabled"]),(0,n.Wm)(c,{onClick:t[8]||(t[8]=e=>o.ForkArmStopHandler()),squared:"",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("停止")])),_:1})])])])):(0,n.kq)("",!0),o.IsPinMounted?((0,n.wg)(),(0,n.iD)("div",Ir,[Mr,(0,n._)("div",Wr,[(0,n._)("div",Ur,[(0,n.Wm)(c,{disabled:"lock"==o.PinState.pose||i.pin_action_running,onClick:t[9]||(t[9]=e=>o.ForkFloatPinDriverControlHandler(!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("LOCK")])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:"release"==o.PinState.pose||i.pin_action_running,onClick:t[10]||(t[10]=e=>o.ForkFloatPinDriverControlHandler(!1)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("RELEASE")])),_:1},8,["disabled"]),(0,n._)("div",Or,"目前狀態:"+(0,v.zw)(o.PinState.pose.toUpperCase()),1)])])])):(0,n.kq)("",!0),(0,n.kq)("",!0),(0,n.kq)("",!0),(0,n.Wm)(m,{modelValue:i.modifyLaserModeDialogShow,"onUpdate:modelValue":t[14]||(t[14]=e=>i.modifyLaserModeDialogShow=e),centered:!0,title:"Laser Mode Change",onOk:o.ModifyLaserMode},{default:(0,n.w5)((()=>[(0,n._)("p",null,"Change Laser Mode to : "+(0,v.zw)(i.laser_mode),1),Pr])),_:1},8,["modelValue","onOk"])])}const Lr={class:"laser-mode-switcher w-100 border rounded"},Gr={class:"w-100 text-start"},Er={class:"w-100 text-start"};function Hr(e,t,a,s,i,o){const r=(0,n.up)("b-button");return(0,n.wg)(),(0,n.iD)("div",Lr,[(0,n._)("div",Gr,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([0,1,2,3,4,5,6,7],(e=>(0,n.Wm)(r,{disabled:!o.enabled,squared:"",class:"border",onClick:t=>o.ButtonClicked(e),key:e,variant:o.IsModeBeSetting(e)?"primary":"light"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e),1)])),_:2},1032,["disabled","onClick","variant"]))),64))]),(0,n._)("div",Er,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)([8,9,10,11,12,13,14,15],(e=>(0,n.Wm)(r,{disabled:!o.enabled,squared:"",class:"border",onClick:t=>o.ButtonClicked(e),key:e,variant:o.IsModeBeSetting(e)?"primary":"light"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e),1)])),_:2},1032,["disabled","onClick","variant"]))),64))])])}var zr={data(){return{LserMap:{0:"0-Bypass",1:"1-Normal",2:"2-二次定位",3:"3-Normal(Short)",4:"4",5:"5-Turning",6:"6",7:"7-Loading",8:"8",9:"9",10:"10-Special",11:"11",12:"12-Narrow",13:"13-Narrow(Long)",14:"14",15:"15",16:"16-Bypass"},LserMap_AMC:{0:"0-Bypass",1:"1-Normal",2:"2-Normal",3:"3-Unknown",4:"4-Bay",5:"5-Turning",6:"6-Turning",7:"7-Unknown",8:"8-Unknown",9:"9-Bay",10:"10-Unknown",11:"11-Charge",12:"12-Left Move",13:"13-Right Move",14:"14-Obstacle Go Back",15:"15-Bypass",16:"16-Bypass"}}},computed:{CurrentLaserMode(){var e=w.q$.getters.CurrentLaserMode.match(/\((\d+)\)/);if(e){var t=e[1];return t}return 0},IsUserLogin(){return 0!=w.U6.getters.CurrentUserRole},IsGodUser(){return w.U6.getters.IsGodUser},IsAuto(){return w.q$.getters.IsAuto},IsOnline(){return w.q$.getters.IsOnline},enabled(){return w.U6.getters.Operationable}},methods:{ButtonClicked(e){var t=w.q$.getters.IsInspectionAGV?this.LserMap_AMC:this.LserMap;this.$swal.fire({text:"",title:`Change Laser Mode to : ${t[e]}?`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((t=>{t.isConfirmed&&this.ModifyLaserMode(e)}))},IsModeBeSetting(e){return this.CurrentLaserMode==e},async ModifyLaserMode(e){await(0,oe.Lv)(e)}}};const Nr=(0,g.Z)(zr,[["render",Hr],["__scopeId","data-v-3c645f47"]]);var Fr=Nr,Rr={components:{SimpleKeyboard:ei.Z,LaserModeSwitcher:Fr},props:{},data(){return{laser_mode:0,modifyLaserModeDialogShow:!1,show_keyboard:!1,pin_action_running:!1}},computed:{IsBatteryLockControlable(){return w.q$.getters.IsInspectionAGV},IsForkARMControlable(){return w.q$.getters.IsForkExtenable},IsForkAGV(){return w.q$.getters.IsForkAGV},FORK_ARM_Status(){return w.zb.getters.Fork_ARM_States},CurrentLaserMode(){return w.q$.getters.CurrentLaserMode},enabled(){return w.U6.getters.Operationable},IsPinMounted(){return!(!this.IsForkAGV||!w.FN.getters.Settings)&&w.FN.getters.Settings.ForkAGV?.IsPinMounted},PinState(){return ue.A.getters.Pin_State?ue.A.getters.Pin_State:{pose:""}},Bat1Lockable(){return w.q$.getters.Bat1Lockable},Bat2Lockable(){return w.q$.getters.Bat2Lockable}},methods:{LaserMode_Increase(){this.laser_mode++},LaserMode_decrease(){0!=this.laser_mode&&this.laser_mode--},async ModifyLaserMode(){await(0,oe.Lv)(this.laser_mode),Us.Z.Success(`Lasr mode changed:${this.laser_mode}`)},async Brake(){await oe.br.Brake()},async UnBrake(){await oe.br.UnBrake()},async ResetMile(){await(0,oe.S1)()},async BatteryLockHandler(e,t){await(0,oe.lQ)(e,t)},async ForkArmPoseControlHandler(e){this.pin_action_running=!0;var t={confirm:!1,message:""};t=e?await oe.ks.ARM_Extend():await oe.ks.ARM_Shorten(),this.pin_action_running=!1,t.confirm||this.$swal.fire({text:"",title:t.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},async ForkFloatPinDriverControlHandler(e){var t={confirm:!1,message:""};t=e?await oe.ks.PIN_LOCK():await oe.ks.PIN_RELEASE(),t.confirm||this.$swal.fire({text:"",title:t.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},async ForkArmStopHandler(){await oe.ks.ARM_Stop()},onChange(e){e+""==""?this.laser_mode=0:(e>16&&(e=16),this.laser_mode=e)}}};const Zr=(0,g.Z)(Rr,[["render",Br],["__scopeId","data-v-04a62d21"]]);var $r=Zr;const qr=e=>((0,n.dD)("data-v-738515e7"),e=e(),(0,n.Cn)(),e),jr={class:"border d-flex justify-content-center px-5 py-2"},Qr={class:"item-block mx-1 border rounded p-4"},Yr=qr((()=>(0,n._)("h2",{class:"text-start"},"儀器",-1))),Kr={class:"item-block mx-5 border rounded p-4"},Xr=qr((()=>(0,n._)("h2",{class:"text-start"},"感測器",-1)));function Jr(e,t,a,s,i,o){const r=(0,n.up)("el-switch"),l=(0,n.up)("el-form-item"),d=(0,n.up)("el-form");return(0,n.wg)(),(0,n.iD)("div",jr,[(0,n._)("div",Qr,[Yr,(0,n.Wm)(d,{size:"large","label-width":"40","label-position":"left",class:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.equipmentsMap,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id,label:e.name},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{width:"70","inline-prompt":"","active-text":"啟用","inactive-text":"關閉","inactive-color":"rgb(220, 53, 69)","before-change":()=>!1,size:"large",disabled:""!=i.setting_eq_id,loading:i.setting_eq_id==e.id,onClick:t=>o.ControlEquipmentState(e.id),modelValue:e.state,"onUpdate:modelValue":t=>e.state=t},null,8,["disabled","loading","onClick","modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1})]),(0,n._)("div",Kr,[Xr,(0,n.Wm)(d,{size:"large","label-width":"80","label-position":"left"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.sensorsMap,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id,label:e.name},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{width:"70","inline-prompt":"","active-text":"啟用","inactive-text":"關閉","inactive-color":"rgb(220, 53, 69)",size:"large",disabled:""!=i.setting_sensor_id,loading:i.setting_sensor_id==e.id,onClick:t=>o.ControlSensorState(e.id),modelValue:e.state,"onUpdate:modelValue":t=>e.state=t},null,8,["disabled","loading","onClick","modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:1})])])}var el={data(){return{setting_eq_id:"",setting_sensor_id:""}},methods:{ControlEquipmentState(e){this.setting_eq_id=e,setTimeout((async()=>{var t=!this.AMCAGVSensorState[e],a=await oe.Bo.EquipmentStateControl(e,t);a||this.ShowSettingFailMessage(e),this.setting_eq_id=""}),200)},ControlSensorState(e){this.setting_sensor_id=e,setTimeout((async()=>{var t=!this.AMCAGVSensorState[e],a=await oe.Bo.SensorStateControl(e,t);a||this.ShowSettingFailMessage(e),this.setting_sensor_id=""}),200)},ShowSettingFailMessage(e){this.$swal.fire({title:"修改失敗",text:e,icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}},computed:{AMCAGVSensorState(){var e=w.q$.getters.AMCAGVSensorState;return e||{Ultrasonic:!0,GroundHoleCamera:!0,temperature:!0,humidity:!0,decibel:!0,PID:!0,illuminance:!0,instrument:!0}},sensorsMap(){return[{name:"超音波",id:"Ultrasonic",state:this.AMCAGVSensorState["Ultrasonic"]},{name:"地洞CCD",id:"GroundHoleCamera",state:this.AMCAGVSensorState["GroundHoleCamera"]}]},equipmentsMap(){return[{name:"儀器",id:"instrument",state:this.AMCAGVSensorState["instrument"]},{name:"溫度",id:"temperature",state:this.AMCAGVSensorState["temperature"]},{name:"濕度",id:"humidity",state:this.AMCAGVSensorState["humidity"]},{name:"分貝",id:"decibel",state:this.AMCAGVSensorState["decibel"]},{name:"PID",id:"PID",state:this.AMCAGVSensorState["PID"]},{name:"照度",id:"illuminance",state:this.AMCAGVSensorState["illuminance"]}]}}};const tl=(0,g.Z)(el,[["render",Jr],["__scopeId","data-v-738515e7"]]);var al=tl,sl={components:{AgvControl:Fo,ZAxisControl:cr,IOTable:mr.Z,ManualSettings:$r,SensorAndEquipmentControl:al},data(){return{type:"",trigger_admin_dialog_count:5,version_text_click_count:0,modal_key:"",current_tab:0}},mounted(){l.Z.on("on-fork-height-click",(()=>{this.current_tab=1})),l.Z.on("on-manual-lsr-setting-show-invoke",(()=>{this.current_tab=4}))},methods:{VersionTextClickHandle(){this.version_text_click_count+=1,this.version_text_click_count>this.trigger_admin_dialog_count&&this.ConfirmGODTriggering()},ConfirmGODTriggering(){this.$swal.fire({title:"Warning",text:"Do you known what are you doing now?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",allowOutsideClick:!1}).then((e=>{this.AdminSwitchDialogResultHandle(e.isConfirmed)}))},AdminSwitchDialogResultHandle(e=!1){this.version_text_click_count=0,e&&w.U6.commit("setUser",{UserName:"GOD",Role:3})},HandleTabpageChanged(e,t){this.current_tab=e,e!=t&&(ue.A.dispatch("keyboard_move_enable",0==e),0!=e&&ue.A.dispatch("force_stop"),this.$emit("OnTabChanged",this.currentTabs))}},props:{ModuleInformation:{type:Object,default(){return{}}},operation_enabled:{type:Boolean,default:!1},agv_type:{type:Number,default(){return 0}}},computed:{isGodMode(){return w.U6.getters.IsGodUser},operation_enabled_return(){return!!this.isGodMode||this.operation_enabled},isAMCAGV(){return w.q$.getters.IsInspectionAGV},DIOTableData(){return w.zb.getters.DIOStates}}};const nl=(0,g.Z)(sl,[["render",Pi],["__scopeId","data-v-7b7b1d17"]]);var il=nl,ol=a(10318);const rl={class:"d-flex flex-row my-1"},ll=(0,n._)("span",{class:"mx-1 py-1"},"Only Task Message",-1),dl=(0,n._)("span",{class:"flex-fill"},null,-1);function ul(e,t,a,s,i,o){const r=(0,n.up)("el-switch"),l=(0,n.up)("b-button"),d=(0,n.up)("el-table-column"),u=(0,n.up)("el-tag"),c=(0,n.up)("el-table");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",rl,[ll,(0,n.Wm)(r,{modelValue:i.only_task_msg,"onUpdate:modelValue":t[0]||(t[0]=e=>i.only_task_msg=e)},null,8,["modelValue"]),dl,(0,n.Wm)(l,{class:"",size:"sm",variant:"danger",onClick:o.ClearHandler},{default:(0,n.w5)((()=>[(0,n.Uk)("Clear")])),_:1},8,["onClick"])]),(0,n.Wm)(c,{height:"580",data:i.MsgDataList,border:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"時間",prop:"TimeFormated"}),(0,n.Wm)(d,{label:"方向",prop:"Direction_str"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{effect:"dark",type:o.GetTagType(e.row.Direction_str),"disable-transitions":""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.row.Direction_str),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(d,{label:"Message",prop:"Msg_Display"})])),_:1},8,["data"])],64)}var cl={data(){return{MsgDataList:[],only_task_msg:!0}},methods:{ClearHandler(){this.MsgDataList=[]},AddNewMsgData(e){if(this.only_task_msg){if(!e.Message.includes("0301")&&!e.Message.includes("0305"))return;JSON.parse(e.Message.replaceAll("*\r",""))}this.MsgDataList.length>=20&&this.MsgDataList.pop(),e.TimeFormated=b()(e.Time).format("yyyy-MM-DD HH:mm:ss"),e.Direction_str=0==e.Direction?"AGVS->AGV":"AGV->AGVS",e.Msg_Display=e.Message,this.MsgDataList.unshift(e)},GetTagType(e){return"AGVS->AGV"==e?"danger":"primary"}}};const ml=(0,g.Z)(cl,[["render",ul]]);var hl=ml;const gl=e=>((0,n.dD)("data-v-5a6a5e3a"),e=e(),(0,n.Cn)(),e),pl={class:"task-delivery"},_l={class:"text-start"},wl={key:0,class:"text-danger"},fl={class:"px-1 d-flex flex-row justify-content-around"},yl=gl((()=>(0,n._)("i",{class:"bi bi-arrows-move"},null,-1))),bl=gl((()=>(0,n._)("i",{class:"bi bi-box-arrow-up-right"},null,-1))),vl=gl((()=>(0,n._)("i",{class:"bi bi-box-arrow-in-down-left"},null,-1))),Sl=gl((()=>(0,n._)("i",{class:"bi bi-battery-charging"},null,-1))),Cl=gl((()=>(0,n._)("i",{class:"bi bi-battery-charging"},null,-1))),Al={key:0,class:"px-1 d-flex flex-row justify-content-around"},kl=gl((()=>(0,n._)("i",{class:"bi bi-crosshair"},null,-1)));function Vl(e,t,a,s,i,o){const r=(0,n.up)("MapShowVue"),l=(0,n.up)("b-button"),d=(0,n.up)("el-drawer"),u=(0,n.up)("MoveTestDrawer"),c=(0,n.up)("b-modal");return(0,n.wg)(),(0,n.iD)("div",pl,[(0,n.Wm)(r,{task_allocatable:!0,onOnFeatureClicked:o.MapFeatureClickedHandle,class:"flex-fill h-100",ref:"map"},null,8,["onOnFeatureClicked"]),(0,n.Wm)(d,{modelValue:i.ShowTaskAllocateDrawer,"onUpdate:modelValue":t[5]||(t[5]=e=>i.ShowTaskAllocateDrawer=e),direction:"btt",size:o.IsInspectAGV?"50%":""},{header:(0,n.w5)((()=>[(0,n._)("h2",_l,[(0,n.Uk)((0,v.zw)(o.GetTitleText(i.SelectedFeature))+" ",1),o.SelectedFeatureIsVirtualPt?((0,n.wg)(),(0,n.iD)("div",wl,"虛擬點不可為終點站")):(0,n.kq)("",!0)]),(0,n._)("h6",null,(0,v.zw)(o.SelectedFeatureCoordination),1)])),default:(0,n.w5)((()=>[(0,n._)("div",fl,[(0,n.Wm)(l,{class:"my-1 action-button",variant:"primary",onClick:t[0]||(t[0]=e=>o.handleTaskAllocatModeMenuClick("None")),disabled:!o.SelectedFeatureMovable||o.SelectedFeatureIsVirtualPt},{default:(0,n.w5)((()=>[yl,(0,n.Uk)("移動 ")])),_:1},8,["disabled"]),(0,n.Wm)(l,{class:"my-1 action-button",variant:"primary",onClick:t[1]||(t[1]=e=>o.handleTaskAllocatModeMenuClick("Load")),disabled:!o.SelectedFeatureLDULDable},{default:(0,n.w5)((()=>[bl,(0,n.Uk)("放貨 ")])),_:1},8,["disabled"]),(0,n.Wm)(l,{class:"my-1 action-button",variant:"primary",onClick:t[2]||(t[2]=e=>o.handleTaskAllocatModeMenuClick("Unload")),disabled:!o.SelectedFeatureLDULDable},{default:(0,n.w5)((()=>[vl,(0,n.Uk)("取貨 ")])),_:1},8,["disabled"]),o.SelectedFeatureBatExchangable?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(l,{key:0,class:"my-1 action-button",variant:"warning",onClick:t[3]||(t[3]=e=>o.handleTaskAllocatModeMenuClick("Charge")),disabled:!o.SelectedFeatureChargable},{default:(0,n.w5)((()=>[Sl,(0,n.Uk)("充電 ")])),_:1},8,["disabled"])),o.SelectedFeatureBatExchangable?((0,n.wg)(),(0,n.j4)(l,{key:1,class:"my-1 action-button",variant:"warning",onClick:t[4]||(t[4]=e=>o.handleTaskAllocatModeMenuClick("ExchangeBattery")),disabled:!o.SelectedFeatureBatExchangable},{default:(0,n.w5)((()=>[Cl,(0,n.Uk)("交換電池 ")])),_:1},8,["disabled"])):(0,n.kq)("",!0)]),o.IsInspectAGV?((0,n.wg)(),(0,n.iD)("div",Al,[(0,n.Wm)(l,{class:"my-1 action-button",variant:"info",onClick:o.HandleLocatingBtnClick},{default:(0,n.w5)((()=>[kl,(0,n.Uk)("定位 ")])),_:1},8,["onClick"])])):(0,n.kq)("",!0)])),_:1},8,["modelValue","size"]),(0,n.Wm)(u,{ref:"move_test"},null,512),(0,n.Wm)(c,{onOk:o.TaskDeliveryHandle,modelValue:i.confirm_dialog_show,"onUpdate:modelValue":t[6]||(t[6]=e=>i.confirm_dialog_show=e),centered:!0,title:"Task Delivery","header-bg-variant":"primary","header-text-variant":"light"},{default:(0,n.w5)((()=>[(0,n._)("p",null,[(0,n._)("span",null,"Action:"+(0,v.zw)(i.selectedAction),1)]),(0,n._)("p",null,(0,v.zw)(e.$t("VMSTask.TaskDelivery.DDD"))+"?",1)])),_:1},8,["onOk","modelValue"]),(0,n.Wm)(c,{modelValue:i.notify_dialog_show,"onUpdate:modelValue":t[7]||(t[7]=e=>i.notify_dialog_show=e),centered:!0,title:"Warning","ok-only":!0,"header-bg-variant":"warning","header-text-variant":"light"},{default:(0,n.w5)((()=>[(0,n._)("p",null,[(0,n._)("span",null,(0,v.zw)(i.notify_text),1)])])),_:1},8,["modelValue"])])}const Dl={class:"map-show border py-2 px-2 d-flex flex-row bg-light"},Tl={class:"w-100"},xl={class:"my-1 d-flex flex-row justify-content-between"},Il=(0,n._)("i",{class:"bi bi-house-door-fill"},null,-1),Ml=(0,n._)("i",{class:"bi bi-geo-alt-fill"},null,-1),Wl={class:"w-100 d-flex flex-row justify-content-end"},Ul=(0,n._)("span",{class:"p-1"},"MAP",-1),Ol={class:"p-2 text-start"},Pl={class:"px-1",style:{position:"absolute",left:"6px"}},Bl={class:"px-1",style:{position:"absolute",left:"6px"}},Ll={class:"p-2 text-start"},Gl={class:"px-1",style:{position:"absolute",left:"6px"}},El={class:"p-2 text-start border-bottom"},Hl=(0,n._)("span",null,"AGV :",-1),zl={class:"px-1",style:{position:"absolute",left:"6px"}};function Nl(e,t,a,i,o,r){const l=(0,n.up)("el-button"),d=(0,n.up)("b-form-input"),u=(0,n.up)("b-button"),c=(0,n.up)("el-color-picker"),m=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",Dl,[(0,n._)("div",Tl,[(0,n._)("div",xl,[(0,n.Wm)(l,{onClick:t[0]||(t[0]=e=>r.OriginalZomm())},{default:(0,n.w5)((()=>[Il])),_:1}),(0,n.Wm)(l,{onClick:t[1]||(t[1]=e=>r.GoToAGVLoc())},{default:(0,n.w5)((()=>[Ml])),_:1}),(0,n.Wm)(l,{type:"primary",loading:o.reloadMapRequesting,onClick:t[2]||(t[2]=e=>r.ReloadMapFromAGVS())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.$t("VMSTask.MapShow.ReLoadMapFromAGVS")),1)])),_:1},8,["loading"]),(0,n._)("div",Wl,[Ul,(0,n._)("div",null,[(0,n.Wm)(d,{modelValue:o.map_name,"onUpdate:modelValue":t[3]||(t[3]=e=>o.map_name=e),disabled:"",size:"sm",state:void 0!=o.map_data.Name},null,8,["modelValue","state"])])])]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{ref:"map",key:o.reload_key,class:"map border",onContextmenu:t[11]||(t[11]=(0,s.iM)(((...e)=>r.showContextMenu&&r.showContextMenu(...e)),["prevent"])),onClick:t[12]||(t[12]=(...e)=>r.HideAllMenus&&r.HideAllMenus(...e))},[o.showStationMenu?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,v.j5)(o.map_contextmenu_style)},[(0,n._)("div",Ol,[(0,n.Uk)(" Tag: "),(0,n._)("b",null,(0,v.zw)(r.current_select_featureID),1)]),(0,n._)("div",Pl,[(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"danger",onClick:t[4]||(t[4]=e=>r.handleEditModeMenuClick("remove"))},{default:(0,n.w5)((()=>[(0,n.Uk)("移除")])),_:1}),(0,n.Wm)(u,{variant:"primary",class:"w-100 my-1",size:"sm",onClick:t[5]||(t[5]=e=>r.handleEditModeMenuClick("point_setting"))},{default:(0,n.w5)((()=>[(0,n.Uk)("點位設定")])),_:1})])],4)):(0,n.kq)("",!0),o.showNoPointSelectedMenu?((0,n.wg)(),(0,n.iD)("div",{key:1,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,v.j5)(o.map_contextmenu_style)},[(0,n._)("div",Bl,[(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"danger",onClick:t[6]||(t[6]=e=>r.handleNoPointSelectedMenuClick("add_point"))},{default:(0,n.w5)((()=>[(0,n.Uk)("新增站點")])),_:1})])],4)):(0,n.kq)("",!0),o.showTaskAllocationMenu?((0,n.wg)(),(0,n.iD)("div",{key:2,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,v.j5)(o.map_contextmenu_style)},[(0,n._)("div",Ll,[(0,n.wy)((0,n._)("span",null,"Tag:",512),[[s.F8,!r.is_agv_feature_selected]]),(0,n.wy)((0,n._)("span",null,"AGV:",512),[[s.F8,r.is_agv_feature_selected]]),(0,n._)("b",null,(0,v.zw)(r.is_agv_feature_selected?r.current_select_agv_name:r.current_select_featureID),1)]),(0,n._)("div",Gl,[(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"primary",onClick:t[7]||(t[7]=e=>r.handleTaskAllocatModeMenuClick("move"))},{default:(0,n.w5)((()=>[(0,n.Uk)("移動")])),_:1}),(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"primary",onClick:t[8]||(t[8]=e=>r.handleTaskAllocatModeMenuClick("load"))},{default:(0,n.w5)((()=>[(0,n.Uk)("放貨")])),_:1}),(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"primary",onClick:t[9]||(t[9]=e=>r.handleTaskAllocatModeMenuClick("unload"))},{default:(0,n.w5)((()=>[(0,n.Uk)("取貨")])),_:1})])],4)):(0,n.kq)("",!0),o.showAGVMenu?((0,n.wg)(),(0,n.iD)("div",{key:3,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,v.j5)(o.map_contextmenu_style)},[(0,n._)("div",El,[Hl,(0,n._)("b",null,(0,v.zw)(r.current_select_agv_name),1)]),(0,n._)("div",zl,[(0,n.Wm)(c,{modelValue:e.color,"onUpdate:modelValue":t[10]||(t[10]=t=>e.color=t),"show-alpha":""},null,8,["modelValue"])])],4)):(0,n.kq)("",!0)],32)),[[m,o.loading||o.reloadMapRequesting]])])])}a(71827),a(23778);var Fl=a(65746),Rl=a(81090),Zl=a(12327),$l=a(40720),ql=a(18167),jl=a(60188),Ql=a(47539),Yl=a(58958),Kl=a(64821),Xl=a(21280),Jl=a(51345),ed=a(35393),td=a(30283),ad=a(14515),sd=a(3904),nd={name:"MapComponent",components:{},props:{edit_mode:{type:Boolean,default:!1},task_allocatable:{type:Boolean,default:!1},show_agv:{type:Boolean,default:!0}},data(){return{reload_key:1,loading:!1,selected_feature:void 0,mouse_click_coordinate:void 0,map_name:"Unknown",display_selected:"Name",agv_display_mode_selected:"show",map:new Fl.Z,original_zoom:1,showStationMenu:!1,showTaskAllocationMenu:!1,showNoPointSelectedMenu:!1,showAGVMenu:!1,reloadMapRequesting:!1,path_plan_tags:[],contextMenu:{},agv_color_set:["red","rgb(51, 194, 255)","yellow","rgb(64, 158, 255)","pink","gold","red","grey"],map_contextmenu_style:{position:"absolute",top:"112px",left:"400px",visibility:"visible",zIndex:200,width:"170px",height:"157px"},layer_index:{station:1,station_line:2,eq_station:3,agv:4,move_path:5,path_plan:6,mesh:7},map_data:{},stations:[],agvList:[],doubleArrowStyle:new Ql.ZP({stroke:new Yl.Z({color:"grey",width:3,lineDash:null})}),NavPathLineStyle:new Ql.ZP({stroke:new Yl.Z({color:"red",width:8,lineDash:null})}),PathPlanLineStyle:new Ql.ZP({stroke:new Yl.Z({color:"blue",width:8,lineDash:null})})}},mounted(){this.loading=!0,console.info("MapShow mounted"),setTimeout((()=>{this.FetchMap()}),5e3)},computed:{isViewing(){return 7==w.g4.getters.CurrentTabSelected},current_select_featureID(){return this.selected_feature?this.selected_feature.getId():""},current_select_agv_name(){return(this.current_select_featureID+"").replace("AGV_","")},station_features(){let e=[];return this.stations.forEach((t=>{void 0!=t.feature&&e.push(t.feature)})),e},is_agv_feature_selected(){if(!this.selected_feature)return!1;var e=this.selected_feature.getId();return console.info(e),(e+"").includes("AGV")},Station_Layer(){return this.map.getLayers().item(this.layer_index.station)},Line_Layer(){return this.map.getLayers().item(this.layer_index.station_line)},AGV_Layer(){return this.map.getLayers().item(this.layer_index.agv)},Nav_Path_Layer(){return this.map.getLayers().item(this.layer_index.move_path)},PathPlan_Layer(){return this.map.getLayers().item(this.layer_index.path_plan)},Mesh_Layer(){return this.map.getLayers().item(this.layer_index.mesh)}},methods:{Reload(){},FetchMap(){var e=w.dK.state.MapData;this.loading=!1,void 0==e||void 0==e.Points?Us.Z.Danger("圖資取得失敗(後端伺服器異常)","bottom",3e3):(Us.Z.Success("Success Fetch Map Data From Server.","bottom",2e3),this.map_data=e,this.map_name=e.Name,this.stations=[],Object.keys(e.Points).forEach((t=>{e.Points[t].Graph;var a=e.Points[t].TagNumber,s=e.Points[t].X,n=e.Points[t].Y,i=e.Points[t].IsVirtualPoint,o=e.Points[t].Graph.Display;""==o|void 0==o&&(o=e.Points[t].Name);e.Points[t].StationType;var r=e.Points[t].IsEquipment,l=e.Points[t].IsCharge,d=new Rl.Z({geometry:new jl.Z([s,n]),name:t});d.setId(a),d.set("data",e.Points[t]),d.set("name",o),d.set("station_type",r?"eq":l?"charge":"normal"),d.set("isVirtual",i),this.stations.push({index:parseInt(t),tag:a,feature:d})})),this.MapInitializeRender(),this.CreateAGVFeature(),setInterval((()=>{this.isViewing&&this.UpdateAGVState()}),100))},CreateAGVFeature(){var e=w.q$.getters.MapUseState;console.log(e.Coordination);new sd.Z(e.Coordination);console.info(`agv state updated${JSON.stringify(e)}`);var t=new Rl.Z({geometry:new jl.Z(e.Coordination),name:e.AGV_Name}),a=new Rl.Z({geometry:new jl.Z(e.Coordination)});t.setId(e.AGV_Name),t.setStyle(new Ql.ZP({image:new Kl.Z({src:"/agv.png",scale:.8,anchor:[.5,.5],size:[70,70],opacity:1}),text:new Xl.Z({text:e.AGV_Name,offsetX:4,offsetY:46,font:"bold 18px Arial",fill:new Jl.Z({color:"DOWN"==e.State?"red":"RUN"==e.State?"rgb(0, 139, 0)":"orange"}),backgroundFill:new Jl.Z({color:"rgb(186, 219, 255,0.7)"})})})),a.setStyle(new Ql.ZP({image:new Kl.Z({src:"/images/tray.png",scale:1,anchor:[-0,.7],size:[70,70],opacity:0}),text:new Xl.Z({text:"",offsetX:55,offsetY:-52,font:"bold 12px Arial",fill:new Jl.Z({color:"blue"})})})),t.set("cargo_feature",a);var s=this.AGV_Layer.getSource();console.info("AGV Feature created."),s.addFeature(t),s.addFeature(a)},GoToAGVLoc(){var e=w.q$.getters.MapUseState;this.map.getView().setCenter(e.Coordination)},async ReloadMapFromAGVS(){this.reloadMapRequesting=!0;var e=await w.dK.dispatch("ReloadMapFromAGVS","abc");console.log(e),this.reloadMapRequesting=!1,e&&e.confirm?(this.map.setTarget(null),this.FetchMap(),this.$swal.fire({title:"地圖重新下載成功!",text:"",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})):this.$swal.fire({title:"地圖下載失敗",text:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},UpdateAGVState(){var e=w.q$.getters.MapUseState,t=this.AGV_Layer.getSource(),a=t.getFeatures().find((t=>t.getId()==e.AGV_Name));if(a){var s=a.getStyle(),n=s.getText();if(n){var i=n.getFill();i.setColor("DOWN"==e.State?"red":"RUN"==e.State?"rgb(0, 139, 0)":"Orange"),n.setFill(i),n.setText(`${e.AGV_Name}\r\n(${e.State})`)}var o=s.getImage();o&&(o.setRotation(-1*(e.Rotation-90)*Math.PI/180),s.setImage(o)),a.setStyle(s),a.setGeometry(new jl.Z(e.Coordination));var r=(e,t)=>{var a=e.getGeometry().getCoordinates(),s=e.get("cargo_feature");if(s){var n=s.getStyle().clone(),i=n.getImage();i.setOpacity(t.CargoExist?1:0),s.setGeometry(new jl.Z(a)),n.setImage(i);var o=n.getText();o&&(o.setText(t.CargoID),n.setText(o)),s.setStyle(n)}};r(a,e),this.UpdateNavPathRender(e.AGV_Name,w.q$.getters.AGV_Naving_Tags)}},OriginalZomm(){this.GoToAGVLoc(),this.map.getView().setZoom(this.original_zoom)},GetNormalStations(){if(!this.map_data)return[];var e=Object.values(this.map_data.Points);return e.filter((e=>0==e.StationType))},GetSTKStations(){if(!this.map_data)return[];var e=Object.values(this.map_data.Points);return e.filter((e=>e.IsEquipment))},GetChargeStations(){if(!this.map_data)return[];const e=[3,5,6];var t=Object.values(this.map_data.Points);return t.filter((t=>e.includes(t.StationType)))},GetBatExchangerStations(){if(!this.map_data)return[];const e=[7];var t=Object.values(this.map_data.Points);return t.filter((t=>e.includes(t.StationType)))},MapInitializeRender(){const e=this.CreateLineFeaturesOfEachStaion();this.map=new Fl.Z({target:this.$refs.map,layers:[new $l.Z({source:new ql.Z,name:"1"}),new $l.Z({source:new ql.Z({features:this.station_features}),zIndex:2}),new $l.Z({source:new ql.Z({features:e}),style:this.doubleArrowStyle,zIndex:1}),new $l.Z({source:new ql.Z}),new $l.Z({source:new ql.Z({features:[]}),zIndex:11111}),new $l.Z({source:new ql.Z({features:[]}),zIndex:122}),new $l.Z({source:new ql.Z({features:[]}),style:this.PathPlanLineStyle})],view:new Zl.ZP({center:[57e3,52e3],zoom:9})}),this.CreateMapEvent(),this.CreateMeshLayer(),this.StationStyleRender();var t=localStorage.getItem("map_view");if(t){var a=JSON.parse(t);this.map.getView().setCenter(a.center),this.map.getView().setZoom(a.zoom),this.original_zoom=a.zoom}},CreateMapEvent(){this.map.on("click",(e=>{this.showTaskAllocationMenu=this.showStationMenu=this.showNoPointSelectedMenu=!1})),this.map.on("moveend",(e=>{var t=this.map.getView().getZoom(),a=this.map.getView().getCenter();localStorage.setItem("map_view",JSON.stringify({zoom:t,center:a}))})),this.map.on("pointerdown",(e=>{2===e.originalEvent.button|0===e.originalEvent.button&&(this.selected_feature=this.map.forEachFeatureAtPixel(e.pixel,(e=>(setTimeout((()=>{this.$emit("OnFeatureClicked",e)}),100),e))))}));var e=this,t=new ad.Z({handleDownEvent:function(t){var a=t.map,s=a.forEachFeatureAtPixel(t.pixel,(function(e){return e}));if(e.mouse_click_coordinate=t.coordinate,e.selected_feature=s,!e.edit_mode)return!1;if(!s)return!1;var n=s.getId();return!!n&&(this.feature_=s,this.coordinate_=t.coordinate,!0)},handleDragEvent:function(t){var a=t.coordinate[0]-this.coordinate_[0],s=t.coordinate[1]-this.coordinate_[1],n=this.feature_.getGeometry();n.translate(a,s),this.coordinate_=t.coordinate;var i=e.CreateLineFeaturesOfEachStaion(),o=e.Line_Layer.getSource();o.clear(),o.addFeatures(i);var r=e.selected_feature.getId(),l=e.selected_feature.getGeometry().getCoordinates();for(let d in e.map_data.Points)if(e.map_data.Points[d].TagNumber===r){e.map_data.Points[d].Graph.X=Math.round(l[0]/1e3,0),e.map_data.Points[d].Graph.Y=Math.round(l[1]/-1e3,0);break}e.UpdatePathPlanRender(e.path_plan_tags)},handleUpEvent:function(){return this.feature_=null,this.coordinate_=null,!1},handleMoveEvent:function(e){var t=e.map,a=t.forEachFeatureAtPixel(e.pixel,(function(e,t){return e}));t.getTargetElement().style.cursor=a?"pointer":""}});this.map.addInteraction(t)},CreateMeshLayer(){for(var e=new ql.Z,t=new $l.Z({source:e,zIndex:-1}),a=new Ql.ZP({stroke:new Yl.Z({color:"rgba(0, 0, 0, 0.1)",width:1})}),s=this.map.getView().getProjection().getExtent(),n=8e4,i=s[0];i<s[2];i+=n){var o=new sd.Z([[i,s[1]],[i,s[3]]]),r=new Rl.Z({geometry:o});r.setStyle(a),e.addFeature(r)}for(var l=s[1];l<s[3];l+=n){o=new sd.Z([[s[0],l],[s[2],l]]),r=new Rl.Z({geometry:o});r.setStyle(a),e.addFeature(r)}this.map.addLayer(t)},GetAgvProp(e){return this.agvList.find((t=>t.name==e))},HightlightAGV(e){this.agvList.forEach((e=>{e.heighlight=!1,e.isOnline=!1})),this.GetAgvProp(e).heighlight=!0},handleEditModeMenuClick(e){if(console.log(e),this.showStationMenu=!1,"point_setting"===e){var t=this.GetPointDataByFeature(this.selected_feature);t&&this.$refs["point-setting-drawer"].Show(t)}},handleNoPointSelectedMenuClick(e){if(console.log(e),this.showNoPointSelectedMenu=!1,"add_point"===e){var t=this.GetNewPointIndex(),a=this.Station_Layer.getSource(),s=new Rl.Z({geometry:new jl.Z(this.mouse_click_coordinate),name:t});s.setId(t),this.stations.push({index:t,tag:t,feature:s}),a.addFeature(s);var n=this.CloneAPointData();n.Graph.Display=n.Name=t+"",n.TagNumber=t,this.map_data.Points[t]=n,this.StationStyleRender()}},handleAGVMenuItemClick(e){console.log(e),this.showAGVMenu=!1},handleTaskAllocatModeMenuClick(e){console.log(e),this.showTaskAllocationMenu=!1},GetNewPointIndex(){const e=Object.keys(this.map_data.Points).map(Number).sort(((e,t)=>e-t)),t=e[e.length-1];return t+1},CloneAPointData(){var e=Object.values(this.map_data.Points);return e[e.length-1]},HideAllMenus(){this.showAGVMenu=this.showNoPointSelectedMenu=this.showStationMenu=this.showTaskAllocationMenu=!1},showContextMenu(e){e.preventDefault(),this.showStationMenu=!1,this.map_contextmenu_style.top=e.clientY+"px",this.map_contextmenu_style.left=e.clientX+"px",this.selected_feature?(this.map_contextmenu_style.height="157px",this.edit_mode&&(this.is_agv_feature_selected?this.showAGVMenu=!0:this.showStationMenu=!0),this.task_allocatable&&(this.showTaskAllocationMenu=!0)):this.edit_mode&&(this.map_contextmenu_style.height="100px",this.showNoPointSelectedMenu=!0)},GetPointDataByFeature(e){var t=e.getId();if(t){var a=Object.values(this.map_data.Points).find((e=>e.TagNumber==t)),s=Object.keys(this.map_data.Points).find((e=>this.map_data.Points[e]==a));return{index:s,point:a}}},StationStyleRender(){this.map.getLayers().item(this.layer_index.station).getSource().getFeatures().forEach((e=>{var t=this.stations.find((t=>t.feature==e)),a="Tag"==this.display_selected,s="Name"==this.display_selected,n=t.feature.get("data"),i=t.feature.get("name"),o=t.feature.get("station_type");const r=(a?t.tag:s?i:t.index)+"";parseInt(r);var l="charge"==o,d=33==n.StationType,u="normal"!=o||l||d,c=new ed.Z({radius:11,fill:new Jl.Z({color:l?"pink":"grey"}),stroke:new Yl.Z({color:"black",width:3}),angle:0,points:3}),m=new td.Z({radius:9,fill:new Jl.Z({color:"gold"}),stroke:new Yl.Z({color:"black",width:3})});e.setStyle(new Ql.ZP({image:u?c:m,text:new Xl.Z({text:r,offsetX:-18,offsetY:-18,font:"bold 18px sans-serif",fill:new Jl.Z({color:u?l?"pink":"lime":"gold"}),stroke:new Yl.Z({color:"black",width:3})})}))})),this.Station_Layer.getSource().changed()},NameDisplayChangeHandle(){this.StationStyleRender()},AGVDisplayChangeHandle(){this.AGVDisplayControl("show"==this.agv_display_mode_selected)},UpdateNavPathRender(e,t){var a=`agv_path_layer_${e}`,s=this.map.getLayers().getArray().find((e=>e.get("id")==a));s&&this.map.removeLayer(s);var n=new ql.Z,i=new $l.Z({source:n,zIndex:666,id:a});this.map.addLayer(i);let o=i.getSource();var r=this.CreateLineFeaturesOfPath(t,"red");o.addFeatures(r),o.changed()},UpdatePathPlanRender(e=[]){this.path_plan_tags=e;let t=this.PathPlan_Layer.getSource();if(t.clear(),0!=e.length){var a=this.CreateLineFeaturesOfPath(e);t.addFeatures(a),t.changed()}},CreateLineFeaturesOfEachStaion(){var e=[];return Object.keys(this.map_data.Points).forEach((t=>{var a=parseInt(t),s=this.stations.find((e=>e.index==a)),n=this.map_data.Points[t].Target;Object.keys(n).forEach((t=>{var a=parseInt(t),n=this.stations.find((e=>e.index==a));if(void 0!=n){let t=new Rl.Z({geometry:new sd.Z([s.feature.getGeometry().getCoordinates(),n.feature.getGeometry().getCoordinates()])});e.push(t)}}))})),e},CreateLineFeaturesOfPath(e=[],t){var a=[];for(let i=0;i<e.length;i++){const o=e[i],r=e[i+1];if(void 0!=r){var s=this.stations.find((e=>e.tag==o)),n=this.stations.find((e=>e.tag==r));let e=new Rl.Z({geometry:new sd.Z([s.feature.getGeometry().getCoordinates(),n.feature.getGeometry().getCoordinates()])});e.setStyle(new Ql.ZP({stroke:new Yl.Z({color:t,width:6})})),a.push(e)}}return a},AGVDisplayControl(e){this.AGV_Layer.setVisible(e)}}};const id=(0,g.Z)(nd,[["render",Nl]]);var od=id;const rd=e=>((0,n.dD)("data-v-01901778"),e=e(),(0,n.Cn)(),e),ld={class:"drawer-content"},dd={class:"text-start my-2"},ud={class:"move w-100 bg-light item d-flex"},cd=rd((()=>(0,n._)("h5",{class:"border-bottom"},"Direction",-1))),md=rd((()=>(0,n._)("ol",null,[(0,n._)("li",null,"0: 可旋轉(方向依照當下角度)"),(0,n._)("li",null,"1: 不可旋轉"),(0,n._)("li",null,"2: 向左旋轉"),(0,n._)("li",null,"3: 向右旋轉")],-1))),hd=rd((()=>(0,n._)("h5",{class:"border-bottom"},[(0,n.Uk)(" Laser Mode "),(0,n._)("span",{style:{"font-size":"smaller"}},"(巡檢AGV USE)")],-1))),gd=rd((()=>(0,n._)("ol",null,[(0,n._)("li",null,"0: 主走道不避障"),(0,n._)("li",null,"1: 主走道避障"),(0,n._)("li",null,"2: 進Bay不避障"),(0,n._)("li",null,"3: 進窄門不避障"),(0,n._)("li",null,"4: 一般橫移不避障")],-1)));function pd(e,t,a,s,i,o){const r=(0,n.up)("b-button"),l=(0,n.up)("el-input-number"),d=(0,n.up)("el-form-item"),u=(0,n.up)("el-form"),c=(0,n.up)("b-card"),m=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(m,{onClosed:t[7]||(t[7]=()=>{i.move_test_drawer=!1}),modelValue:i.move_test_drawer,"onUpdate:modelValue":t[8]||(t[8]=e=>i.move_test_drawer=e),direction:"btt",size:"60%",title:"移動測試"},{default:(0,n.w5)((()=>[(0,n._)("div",ld,[(0,n._)("div",dd,[(0,n.Wm)(r,{loading:i.waiting_sever_response,disabled:i.waiting_sever_response,onClick:o.MoveToBtnHandler,style:{width:"103px"},variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("移動")])),_:1},8,["loading","disabled","onClick"])]),(0,n._)("div",ud,[(0,n.Wm)(c,{"body-class":"w-100"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{model:i.moveTestDto,"label-width":"100px","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"Point ID",prop:"DestinPointID"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.DestinPointID,"onUpdate:modelValue":t[0]||(t[0]=e=>i.moveTestDto.DestinPointID=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"X",prop:"X"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{step:"0.01",precision:"2",modelValue:i.moveTestDto.X,"onUpdate:modelValue":t[1]||(t[1]=e=>i.moveTestDto.X=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Y",prop:"Y"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{step:"0.01",precision:"2",modelValue:i.moveTestDto.Y,"onUpdate:modelValue":t[2]||(t[2]=e=>i.moveTestDto.Y=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Theta",prop:"Theta"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{step:"0.01",precision:"2",modelValue:i.moveTestDto.Theta,"onUpdate:modelValue":t[3]||(t[3]=e=>i.moveTestDto.Theta=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(r,{class:"w-100",variant:"info",onClick:o.SetCurrentPose},{default:(0,n.w5)((()=>[(0,n.Uk)("使用當前位置")])),_:1},8,["onClick"])])),_:1},8,["model"])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{model:i.moveTestDto,"label-width":"100px","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"Direction"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.Direction,"onUpdate:modelValue":t[4]||(t[4]=e=>i.moveTestDto.Direction=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Laser Mode"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.LaserMode,"onUpdate:modelValue":t[5]||(t[5]=e=>i.moveTestDto.LaserMode=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Speed Limit"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.Speed,"onUpdate:modelValue":t[6]||(t[6]=e=>i.moveTestDto.Speed=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,n.Wm)(c,{class:"text-start"},{default:(0,n.w5)((()=>[cd,md,hd,gd])),_:1})])])])),_:1},8,["modelValue"])}var _d=a(81755),wd={data(){return{move_test_drawer:!1,waiting_sever_response:!1,moveTestDto:new _d.Z}},methods:{Show(){this.move_test_drawer=!0},MoveToBtnHandler(){this.$swal.fire({title:"AGV Move",text:`確定要將AGV移動至(${this.moveTestDto.X},${this.moveTestDto.Y}),Theta:${this.moveTestDto.Theta} ?`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){this.waiting_sever_response=!0;var t=await oe.bI.MoveTest(this.moveTestDto);this.waiting_sever_response=!1,this.$swal.fire({title:"移動測試",text:t.confirm?"移動測試請求發送成功":t.message,icon:t.confirm?"success":"error",showCancelButton:!1})}}))},SetCurrentPose(){var e=w.q$.getters.CurrentPose,t=w.q$.getters.CurrentAngle;this.moveTestDto.X=e.position.x,this.moveTestDto.Y=e.position.y,this.moveTestDto.Theta=t}}};const fd=(0,g.Z)(wd,[["render",pd],["__scopeId","data-v-01901778"]]);var yd=fd,bd=a(69626),vd={components:{MapShowVue:od,MoveTestDrawer:yd},data(){return{confirm_dialog_show:!1,notify_dialog_show:!1,ShowTaskAllocateDrawer:!1,SelectedFeature:new Rl.Z,notify_text:"",selectedAction:"None",selectedTag:"",selectedCst:"",selectedToTag:"",moveable_tags:[{id:1,name:"標籤1"},{id:2,name:"標籤2"},{id:3,name:"標籤3"},{id:4,name:"標籤4"},{id:5,name:"標籤5"}],parkable_tags:[{id:1,name:"標籤1"},{id:2,name:"標籤2"},{id:3,name:"標籤3"},{id:4,name:"標籤4"},{id:5,name:"標籤5"}],chargable_tags:[{id:50,name:"充電站(TAG-50)"},{id:70,name:"充電站(TAG-70)"}],batExchangable_tags:[{id:50,name:"充電站(TAG-50)"},{id:70,name:"充電站(TAG-70)"}],lduldable_tags:[{id:50,name:"充電站(TAG-50)"},{id:70,name:"充電站(TAG-70)"}],csts:[{id:1,name:"客戶1"},{id:2,name:"客戶2"},{id:3,name:"客戶3"},{id:4,name:"客戶4"},{id:5,name:"客戶5"}]}},computed:{IsGodUse(){return w.U6.getters.IsGodUser},IsInspectAGV(){return w.q$.getters.IsInspectionAGV},From_Lable_display(){return"None"===this.selectedAction|"Park"===this.selectedAction?"目的地":"From"},tags(){return"None"==this.selectedAction?this.moveable_tags:"Charge"==this.selectedAction?this.chargable_tags:this.parkable_tags},SelectedFeatureMovable(){if(!this.SelectedFeature)return!1;this.GetNormalStationTagsFromMap();var e=this.moveable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},SelectedFeatureCoordination(){if(!this.SelectedFeature)return"";var e=this.SelectedFeature.getGeometry();return e?e.getCoordinates():""},SelectedFeatureIsVirtualPt(){return!!this.SelectedFeature&&this.SelectedFeature.get("isVirtual")},SelectedFeatureLDULDable(){if(!this.SelectedFeature)return!1;this.GetLDULDStationTagsFromMap();var e=this.lduldable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},SelectedFeatureChargable(){if(!this.SelectedFeature)return!1;this.GetChargeStationTagsFromMap();var e=this.chargable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},SelectedFeatureBatExchangable(){if(!this.SelectedFeature)return!1;this.GetBatExchangerStationTagsFromMap();var e=this.batExchangable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},ActionText(){return"None"==this.selectedAction?"移動":"Charge"==this.selectedAction?"充電":"Load"==this.selectedAction?"放貨":"Unload"==this.selectedAction?"取貨":"ExchangeBattery"==this.selectedAction?"電池交換":void 0},MoveTestPanel(){return this.$refs["move_test"]}},methods:{async HandleLocatingBtnClick(){var e=this.SelectedFeature.getId(),t=this.SelectedFeatureCoordination,a=t[0],s=t[1];await oe.Bo.Localization(new bd.Z(e,a,s,-1))},GetTitleText(e){if(!e)return"";var t=e.get("name"),a=e.getId();return`${t} (Tag-${a})`},TaskDeliveryBtnClickHandle(){return"Carry"==this.selectedAction&&""==this.selectedToTag|void 0==this.selectedToTag?(this.notify_text="尚未選擇目的地",void(this.notify_dialog_show=!0)):"Carry"==this.selectedAction|"Load"==this.selectedAction|"Unload"==this.selectedAction&&""==this.selectedCst|void 0==this.selectedCst?(this.notify_text="尚未選擇CST ID",void(this.notify_dialog_show=!0)):void(this.confirm_dialog_show=!0)},async TaskDeliveryHandle(){var e=await oe.bI.Action(this.selectedAction,this.selectedTag,this.selectedToTag,this.selectedCst);if(console.info(e),e.accpet){Us.Z.Success("任務已派送");var t=e.path.map((e=>e.Point_ID));console.info(t),this.$refs.map.UpdateNavPathRender(e.agv_name,t)}else this.$swal.fire({title:"任務派送失敗",text:`${e.error_message}`,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},GetNormalStationTagsFromMap(){var e=this.$refs["map"].GetNormalStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}e.sort(t),this.moveable_tags=[],e.forEach((e=>{this.moveable_tags.push({id:e.TagNumber,name:"(Normal)"+e.TagNumber})}))},GetChargeStationTagsFromMap(){var e=this.$refs["map"].GetChargeStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}console.info(e),e.sort(t),this.chargable_tags=[],e.forEach((e=>{this.chargable_tags.push({id:e.TagNumber,name:"(Charge)"+e.TagNumber})}))},GetBatExchangerStationTagsFromMap(){var e=this.$refs["map"].GetBatExchangerStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}console.info(e),e.sort(t),this.batExchangable_tags=[],e.forEach((e=>{this.batExchangable_tags.push({id:e.TagNumber,name:"(Bat_Exchange)"+e.TagNumber})}))},GetLDULDStationTagsFromMap(){var e=this.$refs["map"].GetSTKStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}e.sort(t),this.lduldable_tags=[],e.forEach((e=>{this.lduldable_tags.push({id:e.TagNumber,name:"(LDULD)"+e.TagNumber})}))},handleTaskAllocatModeMenuClick(e){this.selectedAction=e,this.selectedToTag=this.SelectedFeature.getId(),this.ShowTaskAllocateDrawer=!1,this.$swal.fire({title:`${this.$t("VMSTask.TaskDelivery.TaskDispatchConfirm")}`,text:`確定要執行${this.ActionText} 任務?(Tag ${this.selectedToTag})`,icon:"question",showCancelButton:!0,confirmButtonText:"確認",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.TaskDeliveryHandle()}))},MapFeatureClickedHandle(e){e.get("station_type")&&(this.SelectedFeature=e,this.SelectedFeature&&(this.ShowTaskAllocateDrawer=!0))}},mounted(){this.moveable_tags=[],this.parkable_tags=[];for(let e=43;e<=71;e+=2)this.moveable_tags.push({id:e,name:e});for(let e=42;e<=80;e+=2)this.parkable_tags.push({id:e,name:e})}};const Sd=(0,g.Z)(vd,[["render",Vl],["__scopeId","data-v-5a6a5e3a"]]);var Cd=Sd;const Ad={class:"cst-reader-view"},kd={class:"opt border-bottom py-3"},Vd=(0,n._)("span",null,"Read Tray",-1),Dd=(0,n._)("span",null,"Read Rack",-1),Td={class:"p-3"},xd={ref:"image",src:"/tray.jpg",height:"400",alt:"QR Code"},Id={class:"image-show"},Md=["src"];function Wd(e,t,a,s,i,o){const r=(0,n.up)("b-button"),l=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",Ad,[(0,n._)("div",kd,[(0,n.Wm)(r,{disabled:i.triggering,class:"mx-1",variant:"primary",onClick:t[0]||(t[0]=e=>o.TriggerHandle(200))},{default:(0,n.w5)((()=>[Vd])),_:1},8,["disabled"]),o.hasCstReader?((0,n.wg)(),(0,n.j4)(r,{key:0,disabled:i.triggering,class:"mx-1",variant:"primary",onClick:t[1]||(t[1]=e=>o.TriggerHandle(201))},{default:(0,n.w5)((()=>[Dd])),_:1},8,["disabled"])):(0,n.kq)("",!0),(0,n.Wm)(r,{disabled:!i.triggering,variant:"danger",onClick:o.StopHandle},{default:(0,n.w5)((()=>[(0,n.Uk)("STOP")])),_:1},8,["disabled","onClick"])]),(0,n._)("div",Td,[(0,n._)("img",xd,null,512),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:(0,v.C_)([i.qrCodeValue,"barcode-tooltip"])},[(0,n.Uk)((0,v.zw)(i.triggering?"Triggering...":o.cstData),1)],2)),[[l,i.triggering]])]),(0,n._)("div",Id,[(0,n._)("img",{src:i.imageSrc},null,8,Md)])])}a(46229),a(17330),a(62062);var Ud={data(){return{imageSrc:"",triggering:!1,qrCodeValue:""}},mounted(){l.Z.on("remove_cst",(()=>{this.qrCodeValue=""}))},computed:{agvSettings(){return w.FN.getters.Settings},hasCstReader(){return this.agvSettings.HasRackCstReader},cstData(){return w.q$.state.AGVStatus.CST_Data}},methods:{async fetchImage(){try{var e=await fetch("http://192.168.0.103:1180/liveimage.jpg",{cache:"no-store"});if(!e.ok)throw new Error("network error");const t=await e.blob();this.imageSrc=URL.createObjectURL(t)}catch(t){}},async TriggerHandle(e=200){this.qrCodeValue="Triggering",this.triggering=!0;var t=await(0,oe.CK)(e);this.triggering&&(this.qrCodeValue=t,this.triggering=!1)},async StopHandle(){this.qrCodeValue="",await(0,oe.kg)(),this.triggering=!1}}};const Od=(0,g.Z)(Ud,[["render",Wd]]);var Pd=Od;const Bd={class:"w-100"},Ld={key:0,class:"p-1 text-danger"},Gd={key:1,class:"p-1 text-danger"},Ed={key:2,class:"workstation-select d-flex justify-content-center bg-light"},Hd=(0,n._)("label",{class:"mx-1",style:{"font-size":"20px"}},"設備選擇",-1),zd={key:3,class:"d-flex flex-column px-1",style:{float:"left"}},Nd={class:"d-flex justify-content-center"},Fd={class:"w-100 d-flex"};function Rd(e,t,a,s,i,o){const r=(0,n.up)("el-option"),l=(0,n.up)("el-select"),d=(0,n.up)("el-button"),u=(0,n.up)("el-tag"),c=(0,n.up)("b-button"),m=(0,n.up)("DJM_PIO"),h=(0,n.up)("b-card"),g=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",Bd,[o.IsE84UseEmu?((0,n.wg)(),(0,n.iD)("div",Ld,"模擬模式!")):(0,n.kq)("",!0),o.IsUserLogin?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Gd,(0,v.zw)(e.$t("only-gpm-user-can-modify-hs-signal")),1)),1==o.EQHSStatus.ConnectionType?((0,n.wg)(),(0,n.iD)("div",Ed,[Hd,(0,n.Wm)(l,{modelValue:i.workstation_name_slected,"onUpdate:modelValue":t[0]||(t[0]=e=>i.workstation_name_slected=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.WorkStations,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e.Tag,label:e.Name,value:e.Name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),(0,n.Wm)(d,{loading:i.connecting,type:"primary",disabled:void 0==i.workstation_name_slected,onClick:o.HandleIOTestBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("IO測試")])),_:1},8,["loading","disabled","onClick"]),(0,n.Wm)(u,{class:"mx-2",size:"large",effect:"dark",type:o.EQHSStatus.Connected?"primary":"error"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(o.EQHSStatus.Connected?"已連線":"斷線"),1)])),_:1},8,["type"])])):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,v.zw)(o.ConnectionTypeName)+" ",1),o.IsGodUse?((0,n.wg)(),(0,n.iD)("div",zd,[(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n._)("div",Nd,[(0,n.Wm)(m)]),(0,n.Wm)(g,{direction:"btt",modelValue:i.show_hs_test_drawer,"onUpdate:modelValue":t[2]||(t[2]=e=>i.show_hs_test_drawer=e)},{default:(0,n.w5)((()=>[(0,n._)("div",Fd,[(0,n.Wm)(h,{title:"設備異常模擬"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"my-1",variant:"danger",onClick:o.EQAbnormalWhenEQBusy},{default:(0,n.w5)((()=>[(0,n.Uk)("EQ異常模擬(EQ動作中)")])),_:1},8,["onClick"]),(0,n.Wm)(c,{class:"my-1",variant:"success",onClick:o.EQInitialzeHandler},{default:(0,n.w5)((()=>[(0,n.Uk)("EQ復歸")])),_:1},8,["onClick"])])),_:1}),(0,n.Wm)(c,{class:"my-1",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("正常流程測試")])),_:1})])])),_:1},8,["modelValue"])])}const Zd={class:"djm-pio border rounded mx-1 py-3 px-5"},$d={class:"d-flex"},qd={class:"signal-name"},jd=["onClick"],Qd={class:"mx-5"},Yd={class:"signal-name"},Kd=["onClick"],Xd={class:"my-1 timer"};function Jd(e,t,a,s,i,o){const r=(0,n.up)("el-table-column"),l=(0,n.up)("el-table");return(0,n.wg)(),(0,n.iD)("div",Zd,[(0,n._)("div",$d,[(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.HandshakeSignals.AGV,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"d-flex"},[(0,n._)("div",qd,(0,v.zw)(t),1),(0,n._)("div",{onClick:e=>o.SignalWriteChangeHandler("AGV",t),class:"border signal-div rounded",style:(0,v.j5)({backgroundColor:e?"rgb(0, 204, 0)":"grey"})},(0,v.zw)(e?"ON":"OFF"),13,jd)])))),128))]),(0,n._)("div",Qd,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.HandshakeSignals.EQ,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"d-flex"},[(0,n._)("div",Yd,(0,v.zw)(t),1),(0,n._)("div",{onClick:e=>o.SignalWriteChangeHandler("EQ",t),class:"border signal-div rounded",style:(0,v.j5)({backgroundColor:e?"rgb(0, 204, 0)":"grey"})},(0,v.zw)(e?"ON":"OFF"),13,Kd)])))),128))])]),(0,n._)("div",Xd,[(0,n.Wm)(l,{style:{width:"100%",height:"auto"},size:"small","header-row-style":{backgroundColor:"black"},border:"",data:o.HsTimerData,onClick:o.HandleTimerTBClick},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{label:"Timer",prop:"name"}),(0,n.Wm)(r,{label:"設定值",prop:"sv"}),(0,n.Wm)(r,{label:"當前值",prop:"pv"})])),_:1},8,["data","onClick"])])])}var eu={props:{Owner:{type:String,default:"AGV"}},data(){return{}},computed:{Editable(){return 0!=w.U6.getters.CurrentUserRole},IsGodUse(){return w.U6.getters.IsGodUser},HandshakeSignals(){return w.q$.getters.Handshake_Signals},HSTimers(){return w.q$.getters.HSTimers},HsTimerData(){if(!this.HSTimerSettings||!this.HSTimers)return[];var e=[{name:"T1",sv:this.HSTimerSettings.TA1_Wait_L_U_REQ_ON,pv:this.HSTimers.TA1_Wait_L_U_REQ_ON},{name:"T2",sv:this.HSTimerSettings.TA2_Wait_EQ_READY_ON,pv:this.HSTimers.TA2_Wait_EQ_READY_ON},{name:"T3",sv:this.HSTimerSettings.TA3_Wait_EQ_BUSY_ON,pv:this.HSTimers.TA3_Wait_EQ_BUSY_ON},{name:"T4",sv:this.HSTimerSettings.TA4_Wait_EQ_BUSY_OFF,pv:this.HSTimers.TA4_Wait_EQ_BUSY_OFF},{name:"T5",sv:this.HSTimerSettings.TA5_Wait_L_U_REQ_OFF,pv:this.HSTimers.TA5_Wait_L_U_REQ_OFF}];return e},HSTimerSettings(){return w.FN.getters.Settings?.EQHSTimeouts}},methods:{HandleTimerTBClick(){this.IsGodUse&&l.Z.emit("show-settings",3)},async SignalWriteChangeHandler(e,t){if(this.IsGodUse){var a=!this.HandshakeSignals[e][t];await oe.Kl.HsSignalChange(e,t,a)}}}};const tu=(0,g.Z)(eu,[["render",Jd],["__scopeId","data-v-07fa2cea"]]);var au=tu;async function su(){var e=await _axios.get("api/EQHandshakeEmu/EQAlarmWhenEQBusySimulation");return e.data}async function nu(){var e=await _axios.get("api/EQHandshakeEmu/EQInitialze");return e.data}var iu={components:{DJM_PIO:au},data(){return{show_hs_test_drawer:!1,workstation_name_slected:void 0,connecting:!1}},computed:{IsGodUse(){return w.U6.getters.IsGodUser},IsUserLogin(){return 0!=w.U6.getters.CurrentUserRole},IsE84UseEmu(){return w.zb.getters.IsE84UseEmu},WorkStations(){return w.fH.getters.Workstations},SelectedWorkStationInfo(){if(this.WorkStations)return this.WorkStations.find((e=>e.Name==this.workstation_name_slected))},EQHSStatus(){return w.q$.getters.AGVStatus.HandshakeStatus},ConnectionTypeName(){return 0==this.EQHSStatus.ConnectionType?"PIO":1==this.EQHSStatus.ConnectionType?"ModbusTcp":"Emulation"}},methods:{async EQAbnormalWhenEQBusy(){await su()},async EQInitialzeHandler(){await nu()},async HandleIOTestBtnClick(){if(void 0!=this.workstation_name_slected){this.connecting=!0;var e=await w.fH.dispatch("ModbusIOTestStart",this.SelectedWorkStationInfo.Tag);this.connecting=!1,e.confirm?this.$swal.fire({text:"",title:"已連線!",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}}},mounted(){w.fH.dispatch("GetWorkStationData")}};const ou=(0,g.Z)(iu,[["render",Rd]]);var ru=ou;const lu=e=>((0,n.dD)("data-v-1499c3ac"),e=e(),(0,n.Cn)(),e),du={class:"status-overview h-100 bg-dark text-light d-flex p-3"},uu={key:0,class:"text-start py-3 px-1"},cu={class:"status-card sub_status"},mu=lu((()=>(0,n._)("div",{class:"my-divider"},null,-1))),hu={class:"status-card-info"},gu={class:""},pu=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 目前位置 "),(0,n._)("span",null,"System Error")],-1))),_u={class:"item-val"},wu={class:"status-card-info"},fu={class:""},yu=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 定位狀態 "),(0,n._)("span",null,"Localization")],-1))),bu={class:"status-card-info"},vu={class:""},Su=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 載物ID "),(0,n._)("span",null,"Cargo ID")],-1))),Cu={class:"item-val"},Au={class:"status-card-info"},ku={class:""},Vu=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 電量 "),(0,n._)("span",null,"Battery")],-1))),Du={class:"d-flex"},Tu=lu((()=>(0,n._)("span",{class:"mx-1"},null,-1))),xu={class:"status-card-info"},Iu={class:""},Mu=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 里程數 "),(0,n._)("span",null,"Mileage")],-1))),Wu={class:"item-val"},Uu=lu((()=>(0,n._)("span",null,"km",-1))),Ou={key:1,class:"text-start",style:{"padding-top":"62px"}},Pu={class:"status-card-info"},Bu={class:""},Lu=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 座標資訊 "),(0,n._)("span",null,"Location")],-1))),Gu={class:"item-val"},Eu={class:"status-card-info"},Hu={class:""},zu=lu((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 雷射模式 "),(0,n._)("span",null,"Laser Mode")],-1))),Nu={class:"item-val"};function Fu(e,t,a,s,i,o){const r=(0,n.up)("AGVStatusView");return(0,n.wg)(),(0,n.iD)("div",du,[a.AsMainPageMode?((0,n.wg)(),(0,n.iD)("div",uu,[(0,n._)("div",cu,[(0,n._)("div",{class:(0,v.C_)(["vertical_bar","bar-"+o.AGVStatesData.SubState.toLowerCase()])},null,2),(0,n._)("div",{class:(0,v.C_)(["status-text",o.AGVStatesData.SubState.toLowerCase()])},(0,v.zw)(o.AGVStatesData.SubState),3)]),mu,(0,n._)("div",hu,[(0,n._)("div",gu,[pu,(0,n._)("div",_u,(0,v.zw)(o.AGVStatesData.Last_Visit_MapPoint.Graph.Display+"("+o.AGVStatesData.Last_Visited_Tag+")"),1)])]),(0,n._)("div",wu,[(0,n._)("div",fu,[yu,(0,n._)("div",{class:"item-val",style:(0,v.j5)({color:"System-Error"==o.LocStatusDisplay()?"red":"white"})},(0,v.zw)(o.LocStatusDisplay()),5)])]),(0,n._)("div",bu,[(0,n._)("div",vu,[Su,(0,n._)("div",Cu,(0,v.zw)(o.AGVStatesData.CST_Data),1)])]),(0,n._)("div",Au,[(0,n._)("div",ku,[Vu,(0,n._)("div",Du,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.AGVStatesData.BatteryStatus,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"item-val d-flex battery",key:e.BatteryID},[(0,n._)("span",null,"NO."+(0,v.zw)(e.BatteryID),1),(0,n.Uk)(" "+(0,v.zw)(e.BatteryLevel)+"% ",1),Tu])))),128))])])]),(0,n._)("div",xu,[(0,n._)("div",Iu,[Mu,(0,n._)("div",Wu,[(0,n.Uk)((0,v.zw)(o.AGVStatesData.Mileage.toFixed(2))+" ",1),Uu])])])])):(0,n.kq)("",!0),(0,n.Wm)(r,{class:"flex-fill",status:"safe",sensor_data:o.SensorStatus},null,8,["sensor_data"]),a.AsMainPageMode?((0,n.wg)(),(0,n.iD)("div",Ou,[(0,n._)("div",Pu,[(0,n._)("div",Bu,[Lu,(0,n._)("div",Gu,"( "+(0,v.zw)(o.AGVStatesData.Pose.position.x.toFixed(2))+", "+(0,v.zw)(o.AGVStatesData.Pose.position.y.toFixed(2))+")",1)])]),(0,n._)("div",Eu,[(0,n._)("div",Hu,[zu,(0,n._)("div",Nu,(0,v.zw)(o.AGVStatesData.Current_LASER_MODE),1)])])])):(0,n.kq)("",!0)])}var Ru=a.p+"img/fork_sketch_topview.3b988835.png";const Zu={class:"d-flex justify-content-center"},$u=["width","height","viewBox"],qu=["r"],ju=["y","fill","transform"],Qu=["points","fill"],Yu=["y1","y2","transform"],Ku=["x","y","width","height"],Xu=["x","y","onClick","onMouseover"],Ju=["fill","stroke"],ec=["stroke"];function tc(e,t,a,i,o,r){const l=(0,n.up)("SensorStatusTooltipVue");return(0,n.wg)(),(0,n.iD)("div",Zu,[((0,n.wg)(),(0,n.iD)("svg",{width:a.diameter,height:a.diameter,viewBox:`${-o.center} ${-o.center} ${a.diameter} ${a.diameter}`},[(0,n._)("circle",{cx:"0",cy:"0",r:o.radius,fill:"transparent",stroke:"grey","stroke-width":"1"},null,8,qu),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.degrees,(e=>((0,n.wg)(),(0,n.iD)("text",{key:e,x:0,y:a.diameter/2,"text-anchor":"middle",fill:r.primary_color,"font-size":"14",transform:`rotate(${e-r.agv_angle} 0 0)`},(0,v.zw)(e-180),9,ju)))),128)),(0,n._)("polygon",{points:`0,${-o.radius} -15,${15-o.radius} 15,${15-o.radius}`,fill:r.primary_color,stroke:"black","stroke-width":"0"},null,8,Qu),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.degrees,(e=>((0,n.wg)(),(0,n.iD)("line",{key:e,class:"line2",x1:0,y1:o.agv_radius,x2:0,y2:o.agv_radius-5,stroke:"grey","stroke-width":"1",transform:`rotate(${e-r.agv_angle} 0 0)`},null,8,Yu)))),128)),(0,n.kq)("",!0),(0,n._)("image",{"xlink:href":Ru,x:1.2*-a.agv_car_size.width/2,y:1.2*-a.agv_car_size.length/2,width:1.2*a.agv_car_size.width,height:1.2*a.agv_car_size.length},null,8,Ku),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.sensor_data,((e,a)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",{key:a,width:440,height:180,viewBox:"-190 -50 380 100",x:e.position.x-222+e.position.x_offset,y:-e.position.y-90,onClick:e=>r.SensorDotClickHandler(a),onMousemove:t[0]||(t[0]=(...e)=>r.SensorDotMouseHover&&r.SensorDotMouseHover(...e)),onMouseover:t=>r.SensorDotMouseHoverDataTransfer(e),onMouseleave:t[1]||(t[1]=()=>{o.sensorTooltipStyle.visibility="hidden"})},[(0,n._)("circle",{cx:0,cy:0,r:"5",fill:r.GetSensorColorByStatus(e.status),stroke:r.GetSensorColorByStatus(e.status)},null,8,Ju),(0,n._)("circle",{cx:0,cy:0,r:"9",fill:"transparent",stroke:r.GetSensorColorByStatus(e.status)},null,8,ec),!o.only_show_abnormal_sensors||0!=e.status||e.always_show_info?((0,n.wg)(),(0,n.j4)(l,{key:0,sensorData:e,position:e.textPosition,xOffset:-e.position.x},null,8,["sensorData","position","xOffset"])):(0,n.kq)("",!0)],40,Xu)),[[s.F8,e.visible]]))),128))],8,$u)),(0,n._)("div",{style:(0,v.j5)(o.sensorTooltipStyle),class:"sensor-tooltip"},(0,v.zw)(o.sensorTooltipStyle.name),5)])}const ac=["x2","stroke"],sc=["x1","x2","y2","stroke"],nc=["x1","y1","x2","y2","stroke"],ic=["x1","y1","x2","y2","stroke"],oc=["x","y"],rc=["x","y","fill"],lc=["x","y"],dc=["x","y"];function uc(e,t,a,s,i,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("line",{x1:"0",y1:"0",x2:o._line1_length,y2:"0","stroke-dasharray":"5 5",stroke:o.statusColor},null,8,ac),o.show_step?((0,n.wg)(),(0,n.iD)("line",{key:0,x1:o._line1_length,y1:"0",x2:o._line1_length,y2:-o.step_height,stroke:o.statusColor,"stroke-dasharray":"5 5"},null,8,sc)):(0,n.kq)("",!0),(0,n._)("line",{x1:o._line1_length,y1:-o.step_height,x2:o._line1_length+(o.isShowRight?20:-20),y2:-o.step_height,stroke:o.statusColor,"stroke-dasharray":"5 5"},null,8,nc),(0,n._)("line",{x1:o._line1_length+(o.isShowRight?20:-20),y1:o.show_step?this.show_bottom?10:-30:-15,x2:o._line1_length+(o.isShowRight?20:-20),y2:o.show_step?this.show_bottom?50:10:25,stroke:o.statusColor,"stroke-width":"2"},null,8,ic),(0,n._)("text",{x:o._line1_length+(o.isShowRight?66:-60),y:o.show_step?this.show_bottom?20:-20:-5,"text-anchor":"middle",fill:"white","font-size":"14"},(0,v.zw)(a.sensorData.name),9,oc),(0,n._)("rect",{x:o._line1_length+(o.isShowRight?25:-90),y:o.show_step?this.show_bottom?25:-15:3,width:60,height:20,fill:o.statusColor,text:"123"},null,8,rc),(0,n._)("text",{x:o._line1_length+(o.isShowRight?50:-65),y:o.show_step?this.show_bottom?38:0:18,"text-anchor":"middle",fill:"white","font-size":"14"},(0,v.zw)(o.SensorStatusText),9,lc),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.module_data_itmes,(e=>((0,n.wg)(),(0,n.iD)("text",{key:e.index+e.item,x:o._line1_length+(o.isShowRight?25:-90),y:o.show_step?this.show_bottom?28:20+12*e.index:38+12*e.index,"text-anchor":"left",fill:"gold","font-size":"10"},(0,v.zw)(e.item),9,dc)))),128))],64)}var cc=a(87943),mc={props:{line1_length:{type:Number,default:60},position:{type:String,default:"right-top"},xOffset:{type:Number,default:0},sensorData:{type:Object,default(){return new cc.Z("sensor")}}},computed:{isShowRight(){return this.position.includes("right")},_line1_length(){return this.line1_length*(this.isShowRight?1:-1)},show_step(){return this.position.includes("-")},show_bottom(){return this.position.includes("bottom")},step_height(){return(this.show_bottom?-1:1)*(this.show_step?20:0)},SensorStatusText(){return 0==this.sensorData.status?"Normal":1==this.sensorData.status?"Warning":2==this.sensorData.status?"Alarm":void 0},statusColor(){return 0==this.sensorData.status?"limegreen":1==this.sensorData.status?"orange":2==this.sensorData.status?"red":void 0},module_data_itmes(){var e=this.sensorData.module_data.split(","),t=[],a=0;return e.forEach((e=>{t.push({index:a,item:e}),a+=1})),t}},data(){return{}}};const hc=(0,g.Z)(mc,[["render",uc]]);var gc=hc,pc={name:"AngleMarks",props:{diameter:{type:Number,default:550},agv_car_size:{type:Object,default(){return{length:300,width:150}}},agv_laser_options:{type:Object,default(){return{}}},status:{type:String,default:"safe"},sensor_data:{type:Object,default(){return{}}}},components:{SensorStatusTooltipVue:gc},data(){return{only_show_abnormal_sensors:!0,center:this.diameter/2,radius:this.diameter/2-10,agv_radius:Math.sqrt(Math.pow(this.agv_car_size.length/2,2)+Math.pow(this.agv_car_size.width/2,2)),degrees:[],sensorTooltipStyle:{top:"0",left:"0",name:""}}},computed:{primary_color(){return"safe"==this.status?"limegreen":"warning"==this.status?"yellow":"red"},agv_angle(){return w.q$.getters.CurrentAngle},module_information(){return ue.A.getters.Module_Information}},methods:{SensorDotClickHandler(e){alert(e+" clcickedddddd!!!")},CalulateVerticalLineX(e){return e.line1.x_length*Math.cos(e.line1.rotation)},GetSensorColorByStatus(e){return 2==e?"red":1==e?"orange":"limegreen"},GetTextPosition(e){return"top"==e||"top-start"==e||"top-end"==e?{x:"110",y:"-20"}:"bottom"==e?{x:"0",y:"18"}:"bottom-start"==e?{x:"-15",y:"18"}:"bottom-end"==e?{x:"15",y:"18"}:{x:"0",y:"-18"}},SensorDotMouseHover(e){this.sensorTooltipStyle.top=e.pageY-20+"px",this.sensorTooltipStyle.left=`${e.pageX+20}px`,this.sensorTooltipStyle.visibility="visible"},SensorDotMouseHoverDataTransfer(e){console.info(e),this.sensorTooltipStyle.name=e.name}},mounted(){this.degrees=Array.from({length:37},((e,t)=>10*t))}};const _c=(0,g.Z)(pc,[["render",tc],["__scopeId","data-v-642291f6"]]);var wc=_c,fc={components:{AGVStatusView:wc},props:{AsMainPageMode:{type:Boolean,default:!0}},data(){return{}},computed:{SensorStatus(){return w.q$.getters.AGV_Sensors_States},AGVStatesData(){return w.q$.getters.AGVStatus}},methods:{LocStatusDisplay(){var e=this.AGVStatesData.LocStatus;return 10==e?"OK":20==e?"Warning":30==e?"Not-Localized":40==e?"System-Error":"Unknown"}}};const yc=(0,g.Z)(fc,[["render",Fu],["__scopeId","data-v-1499c3ac"]]);var bc=yc;function vc(e,t,a,s,i,o){const r=(0,n.up)("BatteryDetail");return(0,n.wg)(),(0,n.j4)(r)}var Sc={components:{BatteryDetail:kn}};const Cc=(0,g.Z)(Sc,[["render",vc]]);var Ac=Cc;const kc=e=>((0,n.dD)("data-v-1a6269e9"),e=e(),(0,n.Cn)(),e),Vc={class:"log-query-container"},Dc={class:"time-selector d-flex border"},Tc=kc((()=>(0,n._)("span",{class:""},"開始時間",-1))),xc=kc((()=>(0,n._)("span",{class:""},"結束時間",-1))),Ic={class:"table border"},Mc={class:"parking-acq border text-start p-2"},Wc={class:"border-bottom py-1 mb-1"},Uc={class:"d-flex flex-row"},Oc={class:"options"},Pc=kc((()=>(0,n._)("div",{class:"title"},"開始時間",-1))),Bc={class:"options"},Lc=kc((()=>(0,n._)("div",{class:"title"},"結束時間",-1))),Gc={class:"options"},Ec=kc((()=>(0,n._)("span",null,"Tag",-1))),Hc={class:"px-5",id:"park_acq_chart",style:{width:"100%"}};function zc(e,t,a,s,i,o){const r=(0,n.up)("el-date-picker"),l=(0,n.up)("el-button"),d=(0,n.up)("el-table-column"),u=(0,n.up)("el-tag"),c=(0,n.up)("el-table"),m=(0,n.up)("el-pagination"),h=(0,n.up)("b-tab"),g=(0,n.up)("el-option"),p=(0,n.up)("el-select"),_=(0,n.up)("el-radio"),w=(0,n.up)("el-input"),f=(0,n.up)("el-radio-group"),y=(0,n.up)("apexchart"),b=(0,n.up)("b-tabs"),S=(0,n.up)("TranferLogView"),C=(0,n.up)("Utilization"),A=(0,n.up)("VibrationHistoryQuery"),k=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",Vc,[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{title:"LOG"},{default:(0,n.w5)((()=>[(0,n._)("div",Dc,[Tc,(0,n.Wm)(r,{modelValue:i.QueryOptions.FromTimeStr,"onUpdate:modelValue":t[0]||(t[0]=e=>i.QueryOptions.FromTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"]),xc,(0,n.Wm)(r,{modelValue:i.QueryOptions.ToTimeStr,"onUpdate:modelValue":t[1]||(t[1]=e=>i.QueryOptions.ToTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"]),(0,n.Wm)(l,{onClick:o.HandleQueryBtnClick,type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"])]),(0,n._)("div",Ic,[(0,n.Wm)(c,{size:"small",data:i.Results.Messages,border:"",style:{width:"800px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"",prop:"Time",label:"Time",width:"190"}),(0,n.Wm)(d,{class:"",prop:"Level",label:"Level",width:"120"},{default:(0,n.w5)((e=>[(0,n.Wm)(u,{effect:"dark",type:o.GetTagType(e.row.Level),style:{width:"90px"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,v.zw)(e.row.Level),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(d,{class:"",prop:"Message",label:"訊息","min-width":"520"})])),_:1},8,["data"])]),(0,n._)("div",null,[(0,n.Wm)(m,{background:"",layout:"prev, pager, next","page-size":i.QueryOptions.NumberPerPage,total:i.Results.TotalCount,onCurrentChange:o.PageChangeHandler},null,8,["page-size","total","onCurrentChange"])])])),_:1}),(0,n.Wm)(h,{title:"停車精度"},{default:(0,n.w5)((()=>[(0,n._)("div",Mc,[(0,n._)("div",Wc,[(0,n._)("div",Uc,[(0,n._)("div",Oc,[Pc,(0,n.Wm)(r,{modelValue:i.ParkingAcqQueryOptions.StartTimeStr,"onUpdate:modelValue":t[2]||(t[2]=e=>i.ParkingAcqQueryOptions.StartTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"])]),(0,n._)("div",Bc,[Lc,(0,n.Wm)(r,{modelValue:i.ParkingAcqQueryOptions.EndTimeStr,"onUpdate:modelValue":t[3]||(t[3]=e=>i.ParkingAcqQueryOptions.EndTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"])])]),(0,n._)("div",Gc,[(0,n.Wm)(f,{modelValue:i.ParkingAcqQueryOptions.QueryBy,"onUpdate:modelValue":t[6]||(t[6]=e=>i.ParkingAcqQueryOptions.QueryBy=e),class:"ml-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{label:"Location",size:"large"},{default:(0,n.w5)((()=>[Ec,(0,n._)("span",null,[(0,n.Wm)(p,{disabled:"Location"!=i.ParkingAcqQueryOptions.QueryBy,onClick:o.HandleParkLocSelectorClcik,modelValue:i.ParkingAcqQueryOptions.TagSelect,"onUpdate:modelValue":t[4]||(t[4]=e=>i.ParkingAcqQueryOptions.TagSelect=e)},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.ParkedLocList,(e=>((0,n.wg)(),(0,n.j4)(g,{key:e.tag,value:e.tag,label:`[${e.tag}] ${e.name}`},null,8,["value","label"])))),128))])),_:1},8,["disabled","onClick","modelValue"])])])),_:1}),(0,n.Wm)(_,{label:"Task_Name",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)("Task Name "),(0,n.Wm)(w,{disabled:"Location"==i.ParkingAcqQueryOptions.QueryBy,modelValue:i.ParkingAcqQueryOptions.TaskNameInput,"onUpdate:modelValue":t[5]||(t[5]=e=>i.ParkingAcqQueryOptions.TaskNameInput=e)},null,8,["disabled","modelValue"])])),_:1})])),_:1},8,["modelValue"])]),(0,n._)("div",null,[(0,n.Wm)(l,{class:"mx-1",onClick:o.HandleParkingACQQueryBtnClick,type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"]),this.ParkingAqcQuResults.length>0?((0,n.wg)(),(0,n.j4)(l,{key:0,type:"primary",onClick:o.HandleDownloadCSVBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("Download CSV")])),_:1},8,["onClick"])):(0,n.kq)("",!0)])]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(b,{pills:""},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{title:"散佈圖"},{default:(0,n.w5)((()=>[(0,n._)("div",Hc,[(0,n.Wm)(y,{ref:"park_acq_chart",type:"scatter",height:"350",options:i.chart_datas.chartOptions,series:i.chart_datas.series},null,8,["options","series"])])])),_:1}),(0,n.Wm)(h,{title:"表格"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(c,{"row-key":"Time",size:"small",data:o.ParkingAqcQuResultsForPage,border:"",style:{width:"850px",height:"362px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"",prop:"Time",label:"Time",width:"190"},{default:(0,n.w5)((e=>[(0,n.Uk)((0,v.zw)(o.TimeFormat(e.row.Time)),1)])),_:1}),(0,n.Wm)(d,{prop:"TaskName",label:"任務名稱",width:"200"}),(0,n.Wm)(d,{class:"",prop:"ParkingTag",label:"Tag",width:"50"}),(0,n.Wm)(d,{class:"",prop:"ParkingLocation",label:"Location",width:"110"}),(0,n.Wm)(d,{class:"",prop:"X",label:"X",width:"50"}),(0,n.Wm)(d,{class:"",prop:"Y",label:"Y",width:"50"}),(0,n.Wm)(d,{class:"",prop:"DistanceToTagCenter",label:"Distance",width:"80"})])),_:1},8,["data"]),(0,n.Wm)(m,{background:"",layout:"prev, pager, next","current-page":i.ParkingAcqQueryOptions.Page,"page-size":i.ParkingAcqQueryOptions.NumberPerPage,total:i.ParkingAqcQuResults.length,onCurrentChange:o.HandleParkingAcqTbPaginationChanged},null,8,["current-page","page-size","total","onCurrentChange"])])])),_:1})])),_:1})),[[k,i.Loading]])])])),_:1}),(0,n.Wm)(h,{title:"搬運紀錄"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(S)])])),_:1}),(0,n.Wm)(h,{title:"稼動率"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(C)])])),_:1}),(0,n.Wm)(h,{title:"振動紀錄"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Wm)(A)])])),_:1})])),_:1})])}const Nc=(0,n._)("canvas",{id:"myChart",width:"400",height:"400"},null,-1);function Fc(e,t,a,s,i,o){const r=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(r,{onClick:o.UpdateTest},{default:(0,n.w5)((()=>[(0,n.Uk)("UpdateTest")])),_:1},8,["onClick"]),Nc])}var Rc=a(6300);Rc.kL.register(Rc.qi,Rc.jn,Rc.ZL,Rc.od,Rc.vn,Rc.N0,Rc.jI,Rc.ST,Rc.tt,Rc.CV,Rc.Xi,Rc.ho,Rc.uw,Rc.f$,Rc.WV,Rc.l7,Rc.FB,Rc.RM,Rc.WY,Rc.Gu,Rc.De,Rc.Dx,Rc.u,Rc.DK);var Zc={data(){return{myChart:new Rc.kL,data:{labels:["Red","Blue","Yellow","Green","Purple","Orange"],datasets:[{label:"# of Votes",data:[12,19,3,5,2,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{animation:!1,scales:{y:{beginAtZero:!0}}}}},methods:{UpdateTest(){this.data.labels=[],this.data.datasets[0].data=[];for(var e=0;e<1300;e++)this.data.labels.push(e),this.data.datasets[0].data.push(e);this.myChart.destroy();const t=document.getElementById("myChart").getContext("2d");this.myChart=new Rc.kL(t,{type:"bar",data:this.data,options:this.options})}},mounted(){const e=document.getElementById("myChart").getContext("2d");this.myChart=new Rc.kL(e,{type:"bar",data:this.data,options:this.options})}};const $c=(0,g.Z)(Zc,[["render",Fc]]);var qc=$c;const jc={class:"border px-2 text-start"},Qc=(0,n._)("span",null,"時間區間",-1),Yc={class:"d-flex flex-row w-100 px-4 bg-light"},Kc=(0,n._)("span",{style:{"font-size":"15px"}},"開始時間",-1),Xc=(0,n._)("span",{style:{"font-size":"15px"}},"結束時間",-1),Jc={class:"border-top my-1 py-2"},em={class:"border my-2 d-flex flex-row"};function tm(e,t,a,s,i,o){const r=(0,n.up)("el-radio"),l=(0,n.up)("el-input"),d=(0,n.up)("el-date-picker"),u=(0,n.up)("el-radio-group"),c=(0,n.up)("el-button"),m=(0,n.up)("el-table-column"),h=(0,n.up)("el-table"),g=(0,n.up)("apexchart");return(0,n.wg)(),(0,n.iD)("div",jc,[(0,n.Wm)(u,{modelValue:i.ParkingAcqQueryOptions.QueryBy,"onUpdate:modelValue":t[3]||(t[3]=e=>i.ParkingAcqQueryOptions.QueryBy=e),class:"d-flex flex-column text-start"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{style:{"margin-right":"auto"},label:"taskName",size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)("Task Name ")])),_:1}),(0,n.Wm)(l,{class:"px-4",disabled:"time"==i.ParkingAcqQueryOptions.QueryBy,modelValue:i.ParkingAcqQueryOptions.TaskNameInput,"onUpdate:modelValue":t[0]||(t[0]=e=>i.ParkingAcqQueryOptions.TaskNameInput=e)},null,8,["disabled","modelValue"]),(0,n.Wm)(r,{style:{"margin-right":"auto"},label:"time",size:"large"},{default:(0,n.w5)((()=>[Qc])),_:1}),(0,n._)("div",Yc,[Kc,(0,n.Wm)(d,{class:"mx-2",modelValue:i.ParkingAcqQueryOptions.StartTimeStr,"onUpdate:modelValue":t[1]||(t[1]=e=>i.ParkingAcqQueryOptions.StartTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss",disabled:"taskName"==i.ParkingAcqQueryOptions.QueryBy},null,8,["modelValue","disabled"]),Xc,(0,n.Wm)(d,{class:"mx-2",modelValue:i.ParkingAcqQueryOptions.EndTimeStr,"onUpdate:modelValue":t[2]||(t[2]=e=>i.ParkingAcqQueryOptions.EndTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss",disabled:"taskName"==i.ParkingAcqQueryOptions.QueryBy},null,8,["modelValue","disabled"])])])),_:1},8,["modelValue"]),(0,n._)("div",Jc,[(0,n.Wm)(c,{class:"mx-1",onClick:o.HandleQueryBtnClick,type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"]),this.ParkingAqcQuResults.length>0?((0,n.wg)(),(0,n.j4)(c,{key:0,type:"primary",onClick:e.HandleDownloadCSVBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("Download CSV")])),_:1},8,["onClick"])):(0,n.kq)("",!0)]),(0,n._)("div",em,[(0,n.Wm)(h,{data:i.stasData,border:"",class:"m-2 h-100",style:{width:"300px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{label:"方向",prop:"Name"}),(0,n.Wm)(m,{label:"最大振幅",prop:"Max"}),(0,n.Wm)(m,{label:"平均振幅值",prop:"Avg"})])),_:1},8,["data"]),(0,n.Wm)(g,{class:"flex-fill border m-2",ref:"park_acq_chart",type:"area",height:"400",options:i.chart_datas.chartOptions,series:i.chart_datas.series},null,8,["options","series"])])])}var am={data(){return{ParkingAcqQueryOptions:{StartTimeStr:"2023/09/08 10:00:00",EndTimeStr:"2023/09/08 11:00:00",Tag:7,TagSelect:7,TaskName:"",TaskNameInput:"",Page:1,NumberPerPage:10,QueryBy:"taskName"},ParkingAqcQuResults:[],chart_datas:{series:[{name:"X",data:[]},{name:"Y",data:[]},{name:"Z",data:[]}],chartOptions:{chart:{height:360,type:"area",zoom:{enabled:!0},animations:{enabled:!1}},theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#255aee",shadeTo:"light",shadeIntensity:.65}},dataLabels:{enabled:!1,formatter:function(e,t){return e}},stroke:{curve:"straight"},title:{text:"",align:"left"},grid:{row:{colors:["transparent","transparent"],opacity:.5}},xaxis:{type:"datetime",tickAmount:10,title:{text:"Time"},min:new Date("01 Mar 2012").getTime()},yaxis:{title:{text:"Vibration(m/s^2)"},labels:{formatter:function(e){return e.toFixed(2)}}},tooltip:{enabled:!1}}},stasData:[{Name:"X",Max:0,Avg:0},{Name:"Y",Max:0,Avg:0},{Name:"Z",Max:0,Avg:0}]}},methods:{async HandleQueryBtnClick(){var e=[],t=[];e="taskName"==this.ParkingAcqQueryOptions.QueryBy?await oe.au.QueryVibrationRecordsByTaskName(this.ParkingAcqQueryOptions.TaskNameInput):await oe.au.QueryVibrationRecordsByTime(this.ParkingAcqQueryOptions.StartTimeStr,this.ParkingAcqQueryOptions.EndTimeStr),t=e.data;var a=t.filter((e=>"0001/01/01 00:00:00.0000"!=e.Time_str));if(0!=a.length){var s=t.map((e=>[b()(e.Time_str).add(8,"hour").valueOf(),e.AccelermetorValue.x])),n=t.map((e=>[b()(e.Time_str).add(8,"hour").valueOf(),e.AccelermetorValue.y])),i=t.map((e=>[b()(e.Time_str).add(8,"hour").valueOf(),e.AccelermetorValue.z]));this.stasData[0].Max=e.max_x,this.stasData[1].Max=e.max_y,this.stasData[2].Max=e.max_z,this.stasData[0].Avg=e.avg_x,this.stasData[1].Avg=e.avg_y,this.stasData[2].Avg=e.avg_z,this.chart_datas.series[0].data=s,this.chart_datas.series[1].data=n,this.chart_datas.series[2].data=i;var o=new Date(s[0][0]);console.log(o),this.chart_datas.chartOptions.xaxis.min=o.getTime(),this.$refs["park_acq_chart"].updateOptions(this.chart_datas.chartOptions)}else this.chart_datas.series[0].data=[]}},mounted(){this.ParkingAcqQueryOptions.EndTimeStr=b()(Date.now()).format("YYYY/MM/DD HH:mm:ss")}};const sm=(0,g.Z)(am,[["render",tm]]);var nm=sm;const im={class:"border px-2 text-start"},om={class:"d-flex flex-row w-100 px-4 bg-light"},rm=(0,n._)("span",{style:{"font-size":"15px"}},"開始時間",-1),lm=(0,n._)("span",{style:{"font-size":"15px"}},"結束時間",-1),dm={class:"border-top my-1 py-2"},um={class:"m-1 border-top",id:"chart"};function cm(e,t,a,s,i,o){const r=(0,n.up)("el-date-picker"),l=(0,n.up)("el-radio-group"),d=(0,n.up)("el-button"),u=(0,n.up)("apexchart");return(0,n.wg)(),(0,n.iD)("div",im,[(0,n.Wm)(l,{modelValue:i.ParkingAcqQueryOptions.QueryBy,"onUpdate:modelValue":t[2]||(t[2]=e=>i.ParkingAcqQueryOptions.QueryBy=e),class:"d-flex flex-column text-start"},{default:(0,n.w5)((()=>[(0,n._)("div",om,[rm,(0,n.Wm)(r,{class:"mx-2",modelValue:i.ParkingAcqQueryOptions.StartTimeStr,"onUpdate:modelValue":t[0]||(t[0]=e=>i.ParkingAcqQueryOptions.StartTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss",disabled:"taskName"==i.ParkingAcqQueryOptions.QueryBy},null,8,["modelValue","disabled"]),lm,(0,n.Wm)(r,{class:"mx-2",modelValue:i.ParkingAcqQueryOptions.EndTimeStr,"onUpdate:modelValue":t[1]||(t[1]=e=>i.ParkingAcqQueryOptions.EndTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss",disabled:"taskName"==i.ParkingAcqQueryOptions.QueryBy},null,8,["modelValue","disabled"])])])),_:1},8,["modelValue"]),(0,n._)("div",dm,[(0,n.Wm)(d,{class:"mx-1",onClick:o.HandleQueryBtnClick,type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"]),this.ParkingAqcQuResults.length>0?((0,n.wg)(),(0,n.j4)(d,{key:0,type:"primary",onClick:e.HandleDownloadCSVBtnClick},{default:(0,n.w5)((()=>[(0,n.Uk)("Download CSV")])),_:1},8,["onClick"])):(0,n.kq)("",!0)]),(0,n._)("div",um,[(0,n.Wm)(u,{type:"bar",height:o.chartHeight,ref:"avalibility_chart",options:i.chart_datas.chartOptions,series:i.chart_datas.series},null,8,["height","options","series"])])])}var mm={data(){return{ParkingAcqQueryOptions:{StartTimeStr:"2023/09/08 10:00:00",EndTimeStr:"2023/09/08 11:00:00",Tag:7,TagSelect:7,TaskName:"",TaskNameInput:"",Page:1,NumberPerPage:10,QueryBy:"taskName"},ParkingAqcQuResults:[],chart_datas:{series:[{name:"X",data:[]}],chartOptions:{chart:{type:"bar",zoom:{enabled:!0},animations:{enabled:!1}},plotOptions:{bar:{columnWidth:"100%",distributed:!0}},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1}}}}},methods:{async HandleQueryBtnClick(){var e=await oe.kK.QueryAvalibility(this.ParkingAcqQueryOptions.StartTimeStr,this.ParkingAcqQueryOptions.EndTimeStr),t=e.statusTimeList,a=0;e=[];t.forEach((t=>{for(let s=a;s<a+t.sec;s+=10)e.push({x:s,y:1,fillColor:"#1fff74"})})),this.chart_datas.series[0].data=e}},mounted(){this.ParkingAcqQueryOptions.EndTimeStr=b()(Date.now()).format("YYYY/MM/DD HH:mm:ss")},computed:{chartHeight(){return window.innerHeight/1.7+"px"}}};const hm=(0,g.Z)(mm,[["render",cm]]);var gm=hm;const pm={class:"transfer-log-view"},_m={class:"d-flex flex-row w-100 m-2"},wm=(0,n._)("span",{style:{"font-size":"15px"}},"開始時間",-1),fm=(0,n._)("span",{style:{"font-size":"15px"}},"結束時間",-1);function ym(e,t,a,s,i,o){const r=(0,n.up)("el-date-picker"),l=(0,n.up)("b-button"),d=(0,n.up)("el-table-column"),u=(0,n.up)("el-table"),c=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",pm,[(0,n._)("div",_m,[wm,(0,n.Wm)(r,{class:"mx-2",modelValue:i.QueryOptions.StartTimeStr,"onUpdate:modelValue":t[0]||(t[0]=e=>i.QueryOptions.StartTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"]),fm,(0,n.Wm)(r,{class:"mx-2",modelValue:i.QueryOptions.EndTimeStr,"onUpdate:modelValue":t[1]||(t[1]=e=>i.QueryOptions.EndTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"]),(0,n.Wm)(l,{onClick:o.HandleRefreshClick,size:"sm",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"])]),(0,n.wy)(((0,n.wg)(),(0,n.j4)(u,{data:i.transfer_data,border:"",style:{height:"600px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"開始時間",prop:"StartTime",formatter:o.TimeFormater},null,8,["formatter"]),(0,n.Wm)(d,{label:"結束時間",prop:"EndTime",formatter:o.TimeFormater},null,8,["formatter"]),(0,n.Wm)(d,{label:"花費時間(秒)",prop:"TimeSpend"}),(0,n.Wm)(d,{label:"來源機台",prop:"FromName"}),(0,n.Wm)(d,{label:"終點機台",prop:"ToName"}),(0,n.Wm)(d,{label:"起始位置",prop:"StartLocName"}),(0,n.Wm)(d,{label:"開始電量(%)",prop:"BatLvStart"}),(0,n.Wm)(d,{label:"結束電量(%)",prop:"BatLvEnd"}),(0,n.Wm)(d,{label:"電量損耗(%)",prop:"BatLoss"}),(0,n.Wm)(d,{label:"總里程(m)",prop:"Odometry"},{default:(0,n.w5)((e=>[(0,n.Uk)((0,v.zw)((1e3*e.row.Odometry).toFixed(1)),1)])),_:1})])),_:1},8,["data"])),[[c,i.loading]])])}var bm={data(){return{transfer_data:[],loading:!1,QueryOptions:{StartTimeStr:"",EndTimeStr:""}}},methods:{SetDefaultTimeInterval(){var e=b()(Date.now()).year(),t=b()(Date.now()).month(),a=b()(Date.now()).date();this.QueryOptions.StartTimeStr=b()(new Date(e,t,a,0,0,0)).format("yyyy/MM/DD HH:mm:ss"),this.QueryOptions.EndTimeStr=b()(new Date(e,t,a,23,59,59)).format("yyyy/MM/DD HH:mm:ss")},async FetchTodayTransferData(){this.loading=!0,this.transfer_data=[],this.transfer_data=await oe.au.GetTransferLog(this.QueryOptions.StartTimeStr,this.QueryOptions.EndTimeStr),this.loading=!1},HandleRefreshClick(){this.FetchTodayTransferData()},TimeFormater(e,t,a,s){return b()(a).format("yyyy/MM/DD HH:mm:ss")}},mounted(){this.SetDefaultTimeInterval(),this.FetchTodayTransferData()}};const vm=(0,g.Z)(bm,[["render",ym]]);var Sm=vm,Cm=a(42152),Am=a.n(Cm);function km(e){const t=new(Am())(".copy-button",{text:()=>e});t.on("success",(()=>{(0,ie.bM)({title:e,message:"已複製到剪貼簿",duration:1500}),t.destroy()})),t.on("error",(()=>{t.destroy()}))}var Vm={components:{ChargeStatusQuery:qc,TranferLogView:Sm,VibrationHistoryQuery:nm,Utilization:gm},data(){return{Loading:!1,QueryOptions:{FromTimeStr:"2023/09/08 10:00:00",ToTimeStr:"2023/09/08 11:00:00",Page:1,NumberPerPage:12,SpeficStrings:[]},ParkingAcqQueryOptions:{StartTimeStr:"2023/09/08 10:00:00",EndTimeStr:"2023/09/08 11:00:00",Tag:7,TagSelect:7,TaskName:"",TaskNameInput:"",Page:1,NumberPerPage:10,QueryBy:"Location"},ParkedLocList:[],Results:{TotalCount:0,Messages:[]},ParkingAqcQuResults:[],chart_datas:{series:[{name:"Location",data:[]}],chartOptions:{chart:{height:360,type:"scatter",zoom:{enabled:!1},animations:{enabled:!1}},theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#255aee",shadeTo:"light",shadeIntensity:.65}},dataLabels:{enabled:!1,formatter:function(e,t){return e}},stroke:{curve:"straight"},title:{text:"停車精度",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{tickAmount:10,min:-90,max:90,title:{text:"X誤差(mm)"}},yaxis:{min:-90,max:90,title:{text:"Y誤差(mm)"}},tooltip:{enabled:!1}}}}},computed:{ParkingAqcQuResultsForPage(){var e=(this.ParkingAcqQueryOptions.Page-1)*this.ParkingAcqQueryOptions.NumberPerPage,t=e+this.ParkingAcqQueryOptions.NumberPerPage;return this.ParkingAqcQuResults.slice(e,t)}},methods:{async HandleQueryBtnClick(){this.SaveTimeToLocalStorage(),this.QueryOptions.Page=1;var e=await oe.au.Query(this.QueryOptions);this.Results.TotalCount=e.TotalCount,this.Results.Messages=e.LogMessageList},async HandleParkingACQQueryBtnClick(){this.Loading=!0,setTimeout((async()=>{"Location"==this.ParkingAcqQueryOptions.QueryBy?(this.ParkingAcqQueryOptions.TaskName="",this.ParkingAcqQueryOptions.Tag=this.ParkingAcqQueryOptions.TagSelect,this.chart_datas.chartOptions.title.text=`停車精度- Tag ${this.ParkingAcqQueryOptions.Tag}`):(this.ParkingAcqQueryOptions.TaskName=this.ParkingAcqQueryOptions.TaskNameInput,this.ParkingAcqQueryOptions.Tag=-1,this.chart_datas.chartOptions.title.text=`停車精度-任務 ${this.ParkingAcqQueryOptions.TaskName}`),this.ParkingAqcQuResults=await oe.au.QueryParkingAcq(this.ParkingAcqQueryOptions),this.chart_datas.series[0].data=[],this.ParkingAqcQuResults.forEach((e=>{this.chart_datas.series[0].data.push([e.X,e.Y])})),this.ParkingAcqQueryOptions.Page=1,this.Loading=!1,this.$refs["park_acq_chart"].updateOptions(this.chart_datas.chartOptions)}),500)},async HandleParkLocSelectorClcik(){var e=await oe.au.GetParkedLocs();e.sort(),this.ParkedLocList=[],e.forEach((e=>{var t=e.split(":"),a=parseInt(t[0]),s=t[1];this.ParkedLocList.push({tag:a,name:s})}))},async PageChangeHandler(e){this.QueryOptions.Page=e;var t=await oe.au.Query(this.QueryOptions);this.Results.TotalCount=t.TotalCount,this.Results.Messages=t.LogMessageList},GetTagType(e){return"Information"==e?"primary":"Warning"==e?"warning":"Critical"==e|"Error"==e?"danger":void 0},SaveTimeToLocalStorage(){localStorage.setItem("log_query",JSON.stringify({from:this.QueryOptions.FromTimeStr,to:this.QueryOptions.ToTimeStr}))},RestoreTimeFromLocalStorage(){var e=localStorage.getItem("log_query");if(e){var t=JSON.parse(e);this.QueryOptions.FromTimeStr=t.from,this.QueryOptions.ToTimeStr=t.to}},HandleParkingAcqTbPaginationChanged(e){this.ParkingAcqQueryOptions.Page=e},HandleDownloadCSVBtnClick(){this.buildData(this.ParkingAqcQuResults).then((e=>{this.downloadCSV(e)}))},buildData(e){return new Promise(((t,a)=>{let s=[],n=Object.keys(e[0]);s.push(n),Array.prototype.forEach.call(e,(e=>{let t=[];Array.prototype.forEach.call(n,(a=>{let s=e[a];t.push(s)})),s.push(t)})),t(s)}))},downloadCSV(e){let t="";Array.prototype.forEach.call(e,(e=>{let a=e.join(",")+"\n";t+=a}));let a="Parking_Accuracy"+(new Date).getTime()+".csv",s=document.createElement("a");s.setAttribute("href","data:text/csv;charset=utf-8,%EF%BB%BF"+encodeURI(t)),s.setAttribute("download",a),s.click()},TimeFormat(e){return b()(e).format("yyyy/MM/DD HH:mm:ss")},HandleCopyText(e){km(e)}},mounted(){this.ParkingAcqQueryOptions.EndTimeStr=b()(Date.now()).format("yyyy-MM-DD HH:mm:ss"),this.RestoreTimeFromLocalStorage(),this.HandleParkLocSelectorClcik()}};const Dm=(0,g.Z)(Vm,[["render",zc],["__scopeId","data-v-1a6269e9"]]);var Tm=Dm,xm={components:{status_card:Vi,alarm_warn_table:Di["default"],agv_operator:il,ForkAGV3D:ol.Z,AGVSMsgDisplay:hl,TaskDeliveryVue:Cd,CSTReader:Pd,EQHandshakeView:ru,AgvOverview:bc,LogQuery:Tm,BatteryView:Ac},props:{VMSData:{type:Object,default(){return new ui.ZP}}},data(){return{current_tab:0}},mounted(){l.Z.on("on-fork-height-click",(()=>{this.current_tab=2})),l.Z.on("on-manual-lsr-setting-show-invoke",(()=>{this.current_tab=2}))},methods:{HandleTabpageChanged(e,t){this.current_tab=e,w.g4.commit("SetCurrentTabSelected",e),e!=t&&(1==e&&l.Z.emit("/alarmtable_tab_click"),6==e&&l.Z.emit("local-task-view-shown"),ue.A.dispatch("keyboard_move_enable",2==e),2!=e&&ue.A.dispatch("force_stop"),this.$emit("OnTabChanged",this.currentTabs))}},computed:{IsGodMod(){return w.U6.getters.IsGodUser},IsDevUser(){return w.U6.getters.IsDevUser},IsEngUser(){return w.U6.getters.IsEngUser},IsEngUser(){return w.U6.getters.IsEngUser},IsVisitor(){return w.U6.getters.IsVisitor}}};const Im=(0,g.Z)(xm,[["render",hi],["__scopeId","data-v-17fd7728"]]);var Mm=Im;const Wm=e=>((0,n.dD)("data-v-4eaef5bc"),e=e(),(0,n.Cn)(),e),Um={class:"localization"},Om={class:"w-100 border-top py-2",style:{position:"relative",top:"-22px"}},Pm={class:"block"},Bm=Wm((()=>(0,n._)("div",{class:"title"},"當前位置ID",-1))),Lm={class:"control"},Gm={class:"block"},Em=Wm((()=>(0,n._)("div",{class:"title"},"X座標",-1))),Hm={class:"control"},zm={class:"block"},Nm=Wm((()=>(0,n._)("div",{class:"title"},"Y座標",-1))),Fm={class:"control"},Rm={class:"block"},Zm=Wm((()=>(0,n._)("div",{class:"title"},"角度",-1))),$m={class:"control"},qm={class:"block py-3"};function jm(e,t,a,s,i,o){const r=(0,n.up)("el-input-number"),l=(0,n.up)("b-button"),d=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",Um,[(0,n.Wm)(d,{modelValue:i.ShowDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>i.ShowDialog=e),draggable:"",title:"定位"},{default:(0,n.w5)((()=>[(0,n._)("div",Om,[(0,n._)("div",Pm,[Bm,(0,n._)("div",Lm,[(0,n.Wm)(r,{modelValue:i.localization.currentID,"onUpdate:modelValue":t[0]||(t[0]=e=>i.localization.currentID=e)},null,8,["modelValue"])])]),(0,n._)("div",Gm,[Em,(0,n._)("div",Hm,[(0,n.Wm)(r,{step:"0.01",precision:"2",modelValue:i.localization.x,"onUpdate:modelValue":t[1]||(t[1]=e=>i.localization.x=e)},null,8,["modelValue"])])]),(0,n._)("div",zm,[Nm,(0,n._)("div",Fm,[(0,n.Wm)(r,{step:"0.01",precision:"2",modelValue:i.localization.y,"onUpdate:modelValue":t[2]||(t[2]=e=>i.localization.y=e)},null,8,["modelValue"])])]),(0,n._)("div",Rm,[Zm,(0,n._)("div",$m,[(0,n.Wm)(r,{step:"0.1",precision:"1",modelValue:i.localization.theata,"onUpdate:modelValue":t[3]||(t[3]=e=>i.localization.theata=e)},null,8,["modelValue"])])]),(0,n._)("div",qm,[(0,n.Wm)(l,{class:"mx-3 w-100",variant:"primary",onClick:o.HandleLocClick},{default:(0,n.w5)((()=>[(0,n.Uk)("確認定位")])),_:1},8,["onClick"])])])])),_:1},8,["modelValue"])])}var Qm={data(){return{ShowDialog:!1,localization:new bd.Z(10,0,0,0)}},methods:{Show(){this.localization.currentID=w.q$.getters.AGVStatus.Last_Visited_Tag,this.ShowDialog=!0},async HandleLocClick(){var e=await oe.Bo.Localization(this.localization);this.$swal.fire({text:e.Success?"":e.Message,title:e.Success?"定位完成":"定位失敗",icon:e.Success?"success":"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}}};const Ym=(0,g.Z)(Qm,[["render",jm],["__scopeId","data-v-4eaef5bc"]]);var Km=Ym;const Xm=e=>((0,n.dD)("data-v-c6a6847a"),e=e(),(0,n.Cn)(),e),Jm={class:"quickly-actions d-flex"},eh={class:"d-flex flex-row"},th=Xm((()=>(0,n._)("span",null,"# 貨物ID讀取 Cargo ID Read:",-1)));function ah(e,t,a,s,i,o){const r=(0,n.up)("el-switch");return(0,n.wg)(),(0,n.iD)("div",Jm,[(0,n._)("div",eh,[th,(0,n.Wm)(r,{modelValue:i.cstIdRead,"onUpdate:modelValue":t[0]||(t[0]=e=>i.cstIdRead=e),class:"mx-2 pb-2","active-text":"ON","inactive-color":"red","inactive-text":"OFF","inline-prompt":"",onChange:t[1]||(t[1]=e=>{o.SaveReaderSettings(e)})},null,8,["modelValue"])])])}var sh={data(){return{cstIdRead:!0,settingsStored:void 0,saveSettingsTimeout:void 0}},methods:{async SaveReaderSettings(e){this.saveSettingsTimeout&&clearTimeout(this.saveSettingsTimeout),this.saveSettingsTimeout=setTimeout((async()=>{const t=()=>{this.$swal.fire({title:"系統參數異常",text:"無法設定 Reader設定 (無法取得系統參數)",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})};if(await w.FN.dispatch("downloadSettings"),!w.FN.state.IsSettingsLoaded)return this.cstIdRead=!this.cstIdRead,void t();if(this.settingsStored=w.FN.state.Settings,this.settingsStored){this.settingsStored=w.FN.state.Settings,this.settingsStored.CST_READER_TRIGGER=e;const t=await oe.Wf.SaveSettings(this.settingsStored);t.confirm?ie.bM.success(`讀取貨物ID功能已${e?"開啟":"關閉"}!`):(this.$swal.fire({title:"Reader 設定更新失敗:"+t.errorMsg,text:t.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert",allowOutsideClick:!1,allowEscapeKey:!1}),this.cstIdRead=!this.cstIdRead)}else t(),this.cstIdRead=!this.cstIdRead}),500)}},mounted(){setTimeout((()=>{w.FN.state.IsSettingsLoaded?w.FN.state.Settings&&(this.cstIdRead=w.FN.state.Settings.CST_READER_TRIGGER,this.settingsStored=w.FN.state.Settings):this.$swal.fire({title:"系統參數異常",text:"Reader 設定同步失敗 (無法取得系統參數)",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}),100),l.Z.on("ParameterChanged",(e=>{this.cstIdRead!=e.CST_READER_TRIGGER&&(this.cstIdRead=e.CST_READER_TRIGGER,ie.bM.success({title:"系統參數更新提示",message:"Reader讀取設定已更新為"+(e.CST_READER_TRIGGER?"開啟":"關閉"),type:"success"}))}))}};const nh=(0,g.Z)(sh,[["render",ah],["__scopeId","data-v-c6a6847a"]]);var ih=nh,oh={name:"HomeView",components:{AGVHeader:Bs,BatteryGroup:Tn,battery:Ns,mileage:On,emo:$n,login:si,connection_state:di,MainContent:Mm,AGVLocalization:Km,fork_height:En,SimpleKeyboard:ei.Z,QuickActions:ih},data(){return{IsUseChinese:!0,time:"2022/12/12 19:00:09",version_text_click_count:0,trigger_admin_dialog_count:7,back_end_server_err:!0,back_end_server_connecting:!0,loading:!0,dialogTableVisible:!1,isInitializing:!1,cancelInitComfirmDialogShow:!1,StartInitComfirmDialogShow:!1,wait_online_request_dialog_show:!1,remove_CstData_ComfirmDialog_Show:!1,ShowOnlineFailDialog:!1,moduleInformation:{},server_err_state_text:"連線中...",init_btn_blink_timer:null,mode_switch_data:{type:"online",state:!1},currentTabs:0,previous_tagID:-99,ws:null,previousAGVPoseIsError:!1,ShowAGVPoseErrorModel:!1,header_show:!1,showOrderInfo:!1,buildCstDataDialog:{show:!1,cargo_id:"",loading:!1}}},methods:{HandleCargoIDInputChanged(e){this.$refs["cargoIdEditKeyboard"].setInput(e)},HandleCargoIDKeyboardInput(e){this.buildCstDataDialog.cargo_id=e,setTimeout((()=>{this.$refs["cargo_id_input"].focus()}),100)},async HandleCstIDBuildConfirm(){var e=await(0,oe.Ue)(this.buildCstDataDialog.cargo_id);e.confirm?this.$swal.fire({title:"貨物帳籍修改成功",text:"",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({title:"貨物帳籍修改失敗",text:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},async HandleUseReaderButClick(e){this.buildCstDataDialog.loading=!0,setTimeout((async()=>{var t=await(0,oe.CK)(e);"Network Error"!=t&&"ERROR"!=t.toUpperCase()?(this.buildCstDataDialog.cargo_id=t,this.HandleCargoIDInputChanged(t)):this.$swal.fire({title:"CST ID　讀取失敗",text:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}),this.buildCstDataDialog.loading=!1}),100)},ShowLogin(){this.IsLogin?this.$swal.fire({title:"Logout Confirm",text:this.$t("logout-confirm"),icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&w.U6.dispatch("Logout")})):this.$refs.login.Show()},async AGVInitialize(){ui.ZP.isInitializing?this.cancelInitComfirmDialogShow=!0:this.$swal.fire({title:"AGV Initialize",text:`${this.$t(this.Is_Fork_AGV?this.VMSData.ForkHasLoading?"start_init_action_notify_fork_has_loading":"start_init_action_notify":"start_init_action_notify_submarin_agv")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){this.isInitializing=!0;e=await(0,oe.wz)();if(!e.confirm){var t=e.has_cargo_but_no_data;this.$swal.fire({title:"AGV Initialize Fail",text:e.message+(e.message_eng?`(${e.message_eng})`:""),icon:"error",showCancelButton:t,cancelButtonText:t?"OK":"",confirmButtonText:t?"建立帳籍":"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&t&&(this.buildCstDataDialog.show=!0)}))}}}))},ShowRemoveCstDialog(){this.$swal.fire({title:`${this.$t("cst-remove")}`,text:`${this.$t("cst-remove-confirm-text")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.AGVRemoveCassette()}))},async CancelInitProcessWorker(){await(0,oe.xb)(),clearInterval(this.init_btn_blink_timer),this.isInitializing=!1},async AGVResetAlarm(){await(0,oe.IC)()},async AGVBuzzerOff(){await(0,oe._e)()},async AGVRemoveCassette(){var e=await(0,oe.yx)(),t="",a="",s="";e?(t=a="移除卡匣成功",s="success"):(t=a="移除卡匣失敗",s="error"),this.$swal.fire({title:t,text:a,icon:s,showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},ShowMaxSpeedLimitNotification(e,t){-1!=t&&(0,ie.bM)({title:"限速",message:`Tag[${e}] AGV 速度限制 : ${t} `,type:"warning",duration:1e3})},AGVPoseErrorHandler(){this.VMSData.IsAGVPoseError!=this.previousAGVPoseIsError&&(this.VMSData.IsAGVPoseError&&(0,ie.bM)({title:"POSE ERROR",message:"TAG讀取角度異常:與導航角度不同",type:"warning",duration:3e3}),this.previousAGVPoseIsError=this.VMSData.IsAGVPoseError)},BusPublishDataOut(){l.Z.emit("/vms_data",this.VMSData),l.Z.emit("/agv_current_tag",this.VMSData.Tag),l.Z.emit("/battery",this.VMSData.BatteryStatus),l.Z.emit("/mileage",this.VMSData.Mileage),l.Z.emit("/zaxis_driver_state",this.VMSData.ZAxisDriverState),l.Z.emit("/drivers_state",this.VMSData.DriversStates),l.Z.emit("/z_axis_position",this.VMSData.ZAxisDriverState.position)},AutoModeSwitchHandle(){this.IsAutoMode||"IDLE"==this.VMSData.MainState?(this.mode_switch_data.type="auto",this.mode_switch_data.state=!this.IsAutoMode,this.$swal.fire({title:`${this.$t("agv-auto-mode")}`,text:`${this.mode_switch_data.state?this.$t("agv-auto-mode-alert"):this.$t("agv-manual-mode-alert")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.ModeSwitchHandler()}))):this.$swal.fire({text:"當前狀態無法切換為自動模式",title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},OnlineModeSwitchHandle(){this.IsOnlineMode||"IDLE"==this.VMSData.MainState.toUpperCase()||"CHARGING"==this.VMSData.MainState.toUpperCase()?(this.mode_switch_data.type="online",this.mode_switch_data.state=!this.IsOnlineMode,this.$swal.fire({title:`${this.$t("agv-online")}`,text:`${this.mode_switch_data.state?this.$t("agv-online-alert"):this.$t("agv-offline-alert")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.ModeSwitchHandler()}))):this.$swal.fire({text:`當前狀態無法上線(${this.VMSData.MainState})`,title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},async ModeSwitchHandler(){if("auto"==this.mode_switch_data.type){var e=await oe.DW.AutoModeSwitch(this.IsAutoMode?0:1);e.Success||this.$swal.fire({text:e.Message,title:"Auto Mode Switch Fail",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}else{this.wait_online_request_dialog_show=!0;e=await oe.DW.OnlineModeSwitch(this.IsOnlineMode?0:1);e.Success||this.$swal.fire({text:"",title:`上線請求失敗－${e.Message}`,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}),setTimeout((()=>{this.wait_online_request_dialog_show=!1,e.Success&&this.$swal.fire({text:"",title:this.IsOnlineMode?"AGV已上線":"AGV已下線",icon:"success",showCancelButton:!1,showConfirmButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert",timer:1500})}),700)}},HandleLocalizationClick(){this.$refs.localization_dialog.Show()},MapDataPublishOut(){l.Z.emit("/agv_name_list",[{AGV_Name:this.VMSData.CarName,Current_Tag:this.VMSData.Tag,State:this.VMSData.MainState,IsOnline:1==this.VMSData.OnlineMode}])},async HandleCloseLDULD_No_Entry_BtnClick(){await(0,oe.fj)(),Us.Z.Success("空取空放功能已關閉","bottom",1500)},HandleForkHeightTitleClick(){l.Z.emit("on-fork-height-click")}},computed:{Is_TSMC_MiniAGV(){return w.q$.getters.IsInspectionAGV},Is_Fork_AGV(){return w.q$.getters.IsForkAGV},is_god_mode_now(){return w.U6.getters.IsGodUser},IsLogin(){return 0!=w.U6.getters.CurrentUserRole},LoginBtnText(){return this.IsLogin?this.$t("logout"):this.$t("login")},alarmResetBtnVariant(){return this.VMSData.AlarmCodes.length>0?"danger":"light"},IsAutoMode(){return 1==this.VMSData.AutoMode},IsOnlineMode(){return 1==this.VMSData.OnlineMode},NewestAlarm(){if(void 0!=this.VMSData.NewestAlarm&&0!=this.VMSData.NewestAlarm.EAlarmCode)return this.VMSData.NewestAlarm},ModeSwitchDisplay(){return"online"==this.mode_switch_data.type?this.IsOnlineMode?"Offline":"Online":this.IsAutoMode?"Manual":"Auto"},UserName(){return w.U6.getters.CurrentUserName},Coordination(){return`(${this.VMSData.Pose.position.x.toFixed(2)},${this.VMSData.Pose.position.y.toFixed(2)})`},VMSData(){return w.q$.getters.AGVStatus},IsBuzzerMute(){return!w.FN.getters.Settings?.BuzzerOn},BuzzerState(){const e=w.q$.state.AGVStatus.BuzzerState;return e||{isPlaying:!1,player:"ros-sound-play",playingAudio:""}},IsShowOrderStatus(){return 999!=this.OrderInfo.ActionName},IsLDULD_NO_Entry_Actived(){return this.VMSData.IsLDULD_No_Entry},cargo_status_text(){var e=this.VMSData.CargoExist,t=""!=this.VMSData.CST_Data;return e&&t?"":e||t?e&&!t?"有料無帳":!e&&t?"有帳無料":void 0:""},rm_cst_btn_class_bind(){var e=this.VMSData.CargoExist,t=""!=this.VMSData.CST_Data;return e&&t?"":e||t?e&&!t?"":!e&&t?"has-id-but-cargo-not-exist":void 0:""},IOConnected(){return 0==w.g4.state.ConnectionStateData.WAGO},isBrakeSwitchRelease(){try{return w.zb.getters.IsBrakeSwitchRelease}catch{return!1}},OrderInfo(){return this.VMSData.OrderInfo},GetOrderDescription(){return this.OrderInfo.DisplayText},GetActionName(){switch(this.OrderInfo.ActionName){case 0:return"移動";case 1:return"取貨";case 2:return"放貨/停車";case 3:return"放貨/停車";case 6:return"量測";case 7:return"放貨";case 8:return"充電";case 9:return"搬運";case 10:return"退出充電站";case 12:return"停車";case 13:return"退出停車點";case 14:return"交換電池";default:return`Unknown(${this.ActionName})`}},order_info_title_class(){return"DOWN"==this.VMSData.MainState?"order-info-title-error":"order-info-title-normal"},orderInfoContinerStyle(){var e=w.q$.getters.AlarmCodes.length>0;w.g4.getters.CurrentTabSelected;return e?{position:"absolute",right:"9px",top:"73px"}:{position:"absolute",right:"9px",bottom:"0"}},IsHandshaking(){return w.q$.getters.AGVStatus.HandshakeStatus.IsHandshaking}},mounted(){setInterval((()=>{this.time=b()(Date.now()).format("yyyy/MM/DD HH:mm:ss")}),1e3),setInterval((()=>{l.Z.emit("/agv_position",{AGV_Name:this.VMSData.CarName,Current_Tag:this.VMSData.Tag,Rotation:0,Current_Tag:this.VMSData.Tag,State:this.VMSData.MainState,IsOnline:1==this.VMSData.OnlineMode,Coordination:[this.VMSData.Pose.position.x,this.VMSData.Pose.position.y]})}),200),setTimeout((()=>{this.header_show=!0;var e=()=>{this.back_end_server_err=!1,this.back_end_server_connecting=!1,this.VMSData.Tag>0&&this.VMSData.Tag!=this.previous_tagID&&Us.Z.Primary(`Tag Detected:${this.VMSData.Tag}`,"bottom",1500),this.previous_tagID=this.VMSData.Tag,this.AGVPoseErrorHandler(),this.BusPublishDataOut()};(0,n.YP)((()=>this.VMSData),((t,a)=>{t&&e()}),{immediate:!0,deep:!0}),l.Z.on("ws_disconnect",(()=>{this.back_end_server_err=!0,this.back_end_server_connecting=!0})),l.Z.on("local-task-view-shown",(()=>{e()}))}),100)},destroyed(){alert("destroy"),this.ws&&this.ws.Close()}};const rh=(0,g.Z)(oh,[["render",is]]);var lh=rh;const dh={class:"bg-dark w-100 home-view-new"},uh={class:"bg-dark text-light w-100",style:{"margin-top":"52px",height:"600px"}};function ch(e,t,a,s,i,o){const r=(0,n.up)("homview-header"),l=(0,n.up)("router-view"),d=(0,n.up)("HomeviewFooter");return(0,n.wg)(),(0,n.iD)("div",dh,[(0,n.Wm)(r,{class:"bg-dark"}),(0,n._)("div",uh,[(0,n.Wm)(l,null,{default:(0,n.w5)((({Component:e})=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:1})]),(0,n.Wm)(d)])}const mh={class:"home-view-header fixed-top text-light"},hh={class:"agv-name bg-primary d-flex justify-content-center"},gh=(0,n._)("div",{class:"w-25 border"},[(0,n._)("span",null,"GPM AGV")],-1),ph={class:"w-25 border"},_h={class:"w-25 border"},wh=["textContent"],fh=["textContent"];function yh(e,t,a,s,i,o){const r=(0,n.up)("BatteryGroupVue");return(0,n.wg)(),(0,n.iD)("div",mh,[(0,n._)("div",hh,[gh,(0,n._)("div",ph,[(0,n._)("span",null,(0,v.zw)(o.AGVName),1)]),(0,n._)("div",_h,[(0,n._)("span",{textContent:(0,v.zw)(o.UserName)},null,8,wh)]),(0,n._)("div",{class:"w-25 border bg-info",onDblclick:t[0]||(t[0]=(...e)=>o.HandleAppVersionClick&&o.HandleAppVersionClick(...e)),onContextmenu:t[1]||(t[1]=(...e)=>o.HandleVersionDivContextMenu&&o.HandleVersionDivContextMenu(...e))},[(0,n._)("span",{textContent:(0,v.zw)(o.APPVersion)},null,8,fh)],32)]),(0,n.Wm)(r)])}var bh={components:{BatteryGroupVue:Tn},data(){return{}},computed:{AGVName(){return w.q$.getters.AGVName},APPVersion(){return w.q$.getters.AGVStatus.APPVersion},UserName(){return w.U6.getters.CurrentUserName}},methods:{HandleAppVersionClick(){this.$swal.fire({title:"VERSION INFORMATION",text:"version\r\n<br></br>version"})},HandleVersionDivContextMenu(e){}},mounted(){}};const vh=(0,g.Z)(bh,[["render",yh]]);var Sh=vh;const Ch=e=>((0,n.dD)("data-v-12a965dc"),e=e(),(0,n.Cn)(),e),Ah={class:"home-view-footer border-top fixed-bottom d-flex justify-content-center"},kh=["textContent"],Vh={class:"system-controls"},Dh={class:"switchs py-2 text-start px-1 d-flex"},Th=Ch((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px","border-left":"6px solid rgb(13, 110, 253)"}},null,-1))),xh=Ch((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px"}},"ONLINE-MODE",-1))),Ih=Ch((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px","border-left":"6px solid rgb(13, 110, 253)"}},null,-1))),Mh=Ch((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px"}},"AUTO-MODE",-1))),Wh={class:"status d-flex"},Uh={class:"icons d-flex justify-content-end flex-fill"},Oh={class:"w-100"},Ph={class:"icon-containers d-flex"},Bh=Ch((()=>(0,n._)("img",{src:"/images/home.png",width:"50",alt:""},null,-1))),Lh=[Bh],Gh=Ch((()=>(0,n._)("img",{src:"/images/alarm2.png",width:"55",alt:""},null,-1))),Eh=[Gh],Hh=Ch((()=>(0,n._)("img",{src:"/images/io_table.png",width:"60",alt:""},null,-1))),zh=[Hh],Nh={class:"icon-containers d-flex"},Fh=Ch((()=>(0,n._)("img",{src:"/images/controller.png",width:"60",alt:""},null,-1))),Rh=[Fh],Zh=Ch((()=>(0,n._)("img",{src:"/images/signin.png",width:"60",alt:""},null,-1))),$h=[Zh],qh=Ch((()=>(0,n._)("span",{style:{"font-size":"30px","font-weight":"bold",color:"red"}},"TEST",-1))),jh=[qh],Qh=Ch((()=>(0,n._)("img",{src:Hn,width:"100",alt:""},null,-1))),Yh=[Qh];function Kh(e,t,a,s,i,o){const r=(0,n.up)("el-switch"),l=(0,n.up)("b-button"),d=(0,n.up)("login");return(0,n.wg)(),(0,n.iD)("div",Ah,[(0,n._)("span",{onClick:t[0]||(t[0]=e=>o.VersionTextClickHandle()),class:"sys-time-display rounded px-1 text-light",textContent:(0,v.zw)(i.SystemTime)},null,8,kh),(0,n._)("div",Vh,[(0,n._)("div",Dh,[(0,n._)("div",{class:"",onClick:t[2]||(t[2]=e=>o.HandleModeSwitchRequest("online"))},[Th,xh,(0,n.Wm)(r,{modelValue:o.CurrentIsOnlineMode,"onUpdate:modelValue":t[1]||(t[1]=e=>o.CurrentIsOnlineMode=e),"active-color":"rgb(95, 171, 80)","inactive-color":"red","active-text":"ONLINE","inactive-text":"OFFLINE","inline-prompt":"",size:"large",width:"80px",loading:i.OnlineModeSwitching},null,8,["modelValue","loading"])]),(0,n._)("div",{class:"mx-2",onClick:t[4]||(t[4]=e=>o.HandleModeSwitchRequest("auto"))},[Ih,Mh,(0,n.Wm)(r,{modelValue:o.CurrentIsAutoMode,"onUpdate:modelValue":t[3]||(t[3]=e=>o.CurrentIsAutoMode=e),"active-color":"rgb(95, 171, 80)","inactive-color":"red","active-text":"AUTO","inactive-text":"MANUAL","inline-prompt":"",size:"large",width:"85px",loading:i.AutoModeSwitching},null,8,["modelValue","loading"])])]),(0,n._)("div",Wh,[(0,n.Wm)(l,{squared:"",class:(0,v.C_)(o.initBtnClass),onClick:o.InitializeClick},{default:(0,n.w5)((()=>[(0,n.Uk)("初始化")])),_:1},8,["class","onClick"]),(0,n.Wm)(l,{squared:"",variant:o.resetAlarmBtnVariant,onClick:o.ResetAlarmlick},{default:(0,n.w5)((()=>[(0,n.Uk)("異常復歸")])),_:1},8,["variant","onClick"]),(0,n.Wm)(l,{squared:"",variant:"light",onClick:o.BuzzerOffClick},{default:(0,n.w5)((()=>[(0,n.Uk)("關閉蜂鳴器")])),_:1},8,["onClick"]),(0,n.Wm)(l,{squared:"",variant:"light",onClick:o.RemoveCstClick},{default:(0,n.w5)((()=>[(0,n.Uk)("移除卡匣")])),_:1},8,["onClick"])])]),(0,n._)("div",Uh,[(0,n._)("div",Oh,[(0,n._)("div",Ph,[(0,n._)("div",{class:"py-1",onClick:t[5]||(t[5]=(...e)=>o.HomeIconClick&&o.HomeIconClick(...e))},Lh),(0,n._)("div",{onClick:t[6]||(t[6]=(...e)=>o.AlarmIconClick&&o.AlarmIconClick(...e))},Eh),(0,n._)("div",{onClick:t[7]||(t[7]=(...e)=>o.IOTableIconClick&&o.IOTableIconClick(...e))},zh)]),(0,n._)("div",Nh,[(0,n._)("div",{onClick:t[8]||(t[8]=(...e)=>o.ControllerIconClick&&o.ControllerIconClick(...e))},Rh),(0,n._)("div",{onClick:t[9]||(t[9]=(...e)=>o.ShowLogin&&o.ShowLogin(...e))},$h),o.IsLogin?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:t[10]||(t[10]=(...e)=>o.ShowRDTEstPage&&o.ShowRDTEstPage(...e))},jh)):(0,n.kq)("",!0)])]),(0,n._)("div",{onClick:t[11]||(t[11]=(...e)=>o.EmoClick&&o.EmoClick(...e))},Yh)]),(0,n.Wm)(d,{ref:"loginShow"},null,512)])}var Xh={components:{login:si,jwSwitch:Ws},data(){return{SystemTime:"1997-04-18 12:00:00",trigger_admin_dialog_count:5,version_text_click_count:0,OnlineMode:!1,AutoMode:!1,OnlineModeSwitching:!1,AutoModeSwitching:!1}},methods:{ControllerIconClick(){this.$router.push(`/v2/controller/${w.g4.getters.PreviousControllRoute}`)},HomeIconClick(){this.$router.push("/v2")},IOTableIconClick(){this.$router.push("/v2/IOTable")},AlarmIconClick(){this.$router.push("/v2/Alarm")},ShowRDTEstPage(){this.$router.push("/v2/rd_test")},async InitializeClick(){this.$swal.fire({title:"AGV Initialize",text:`${this.$t("start_init_action_notify_submarin_agv")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){this.isInitializing=!0;e=await(0,oe.wz)();e.confirm||this.$swal.fire({title:"AGV Initialize Fail",text:e.message,icon:"error",showCancelButton:!1,customClass:"my-sweetalert"})}}))},async ResetAlarmlick(){await(0,oe.IC)()},async BuzzerOffClick(){await(0,oe._e)()},async RemoveCstClick(){},async EmoClick(){(0,oe.dE)()},ShowLogin(){this.IsLogin?this.$swal.fire({title:"Logout Confirm",text:this.$t("logout-confirm"),icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&w.U6.dispatch("Logout")})):this.$refs.loginShow.Show()},async HandleModeSwitchRequest(e){var t="online"==e?`確定要將AGV${this.CurrentIsOnlineMode?"下線":"上線"}?`:`確定要將AGV更改為${this.CurrentIsAutoMode?"手動模式":"自動模式"}?`,a="online"==e?"AGV ONLINE-MODE CHANGE":"AGV AUTO-MODE CHANGE";return this.$swal.fire({text:t,title:a,icon:"question"}).then((async t=>{if(t.isConfirmed){var a={Success:!1,Message:"未知的錯誤"};"auto"==e?(this.AutoModeSwitching=!0,a=await oe.DW.AutoModeSwitch(this.CurrentIsAutoMode?0:1)):(this.OnlineModeSwitching=!0,a=await oe.DW.OnlineModeSwitch(this.CurrentIsOnlineMode?0:1)),this.OnlineModeSwitching=this.AutoModeSwitching=!1,a.Success||this.$swal.fire({text:a.Message,title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}})),!1},VersionTextClickHandle(){this.version_text_click_count+=1,this.version_text_click_count>this.trigger_admin_dialog_count&&this.ConfirmGODTriggering()},ConfirmGODTriggering(){this.$swal.fire({title:"Warning",text:"Do you known what are you doing now?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",allowOutsideClick:!1}).then((e=>{this.AdminSwitchDialogResultHandle(e.isConfirmed)}))},AdminSwitchDialogResultHandle(e=!1){this.version_text_click_count=0,e&&w.U6.commit("setUser",{UserName:"GOD",Role:3})}},computed:{initBtnClass(){return w.q$.getters.AGVStatus.SubState.toLowerCase()},resetAlarmBtnVariant(){return w.q$.getters.AGVStatus.AlarmCodes.length>0?"danger":"light"},IsLogin(){return 0!=w.U6.getters.CurrentUserRole},CurrentIsAutoMode(){return 1==w.q$.getters.AGVStatus.AutoMode},CurrentIsOnlineMode(){return 1==w.q$.getters.AGVStatus.OnlineMode}},mounted(){setInterval((()=>{this.SystemTime=b()(Date.now()).format("yyyy-MM-DD HH:mm:ss")}),1e3)}};const Jh=(0,g.Z)(Xh,[["render",Kh],["__scopeId","data-v-12a965dc"]]);var eg=Jh,tg={components:{HomviewHeader:Sh,HomeviewFooter:eg},computed:{},methods:{ControllerIconClick(){this.$router.push("./controller")}}};const ag=(0,g.Z)(tg,[["render",ch]]);var sg=ag;const ng={class:"h-100 w-100 d-flex"};function ig(e,t,a,s,i,o){const r=(0,n.up)("SideMenu"),l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",ng,[(0,n.Wm)(r),(0,n.Wm)(l,null,{default:(0,n.w5)((({Component:e})=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:1})])}const og=e=>((0,n.dD)("data-v-58c8d7b0"),e=e(),(0,n.Cn)(),e),rg={class:"side-menu-fixed h-100 fixed-left"},lg={class:""},dg=og((()=>(0,n._)("div",{class:"logo-text"},[(0,n.Uk)(" GPM "),(0,n._)("div",{class:"log-sub-text"},"AGV")],-1))),ug=[dg],cg={class:"menu-icon"},mg=["height"],hg={class:"menu-icon"},gg=["height"],pg={class:"menu-icon"},_g=["height"],wg={class:"menu-icon"},fg=["height"];function yg(e,t,a,i,o,r){const l=(0,n.up)("el-tooltip");return(0,n.wg)(),(0,n.iD)("div",rg,[(0,n._)("div",lg,[(0,n.Wm)(l,{placement:"right",content:"Home"},{default:(0,n.w5)((()=>[(0,n._)("div",{style:(0,v.j5)(r.Selected("/admin")),class:"side-item",onClick:t[0]||(t[0]=e=>r.PageSwitch("/admin","Home"))},ug,4)])),_:1}),(0,n.Wm)(l,{placement:"right",content:"控制器"},{default:(0,n.w5)((()=>[(0,n._)("div",{style:(0,v.j5)(r.Selected("/admin/controller")),class:"side-item",onClick:t[1]||(t[1]=e=>r.PageSwitch("/admin/controller","控制器"))},[(0,n._)("div",cg,[(0,n._)("img",{src:"images/controller.png",height:o.icon_size,alt:""},null,8,mg)])],4)])),_:1}),(0,n.Wm)(l,{placement:"right",content:"圖資管理"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{style:(0,v.j5)(r.Selected("/admin/map")),class:"side-item",onClick:t[2]||(t[2]=e=>r.PageSwitch("/admin/map","圖資管理"))},[(0,n._)("div",hg,[(0,n._)("img",{src:"images/map.png",height:o.icon_size,alt:""},null,8,gg)])],4),[[s.F8,r.IsUserLogin]])])),_:1}),(0,n.Wm)(l,{placement:"right",content:"資料"},{default:(0,n.w5)((()=>[(0,n._)("div",{style:(0,v.j5)(r.Selected("/admin/data")),class:"side-item",onClick:t[3]||(t[3]=e=>r.PageSwitch("/admin/data","資料"))},[(0,n._)("div",pg,[(0,n._)("img",{src:"images/database.png",height:o.icon_size,alt:""},null,8,_g)])],4)])),_:1}),(0,n.Wm)(l,{placement:"right",content:"系統設定"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{style:(0,v.j5)(r.Selected("/admin/sys_settings")),class:"side-item",onClick:t[4]||(t[4]=e=>r.PageSwitch("/admin/sys_settings","系統設定"))},[(0,n._)("div",wg,[(0,n._)("img",{src:"images/settings.png",height:o.icon_size,alt:""},null,8,fg)])],4),[[s.F8,r.IsUserLogin]])])),_:1})])])}var bg={data(){return{icon_size:35,active_item:"/admin"}},computed:{IsUserLogin(){return!0}},methods:{CLoseEventHandle(){this.$emit("close",""),l.Z.emit("/alarm_footer_send_to_back",!1)},PageSwitch(e,t=""){var a=this.$router.currentRoute.value.path;e!=a&&setTimeout((()=>{this.$router.push(e),l.Z.emit("/router-change",{route_display_name:t,route_name:e})}),100)},Selected(e){return{backgroundColor:this.active_item==e?"rgb(13, 110, 253)":""}}},mounted(){const e=(0,ra.yj)();(0,n.YP)((()=>e.path),((e,t)=>{this.active_item=e}))}};const vg=(0,g.Z)(bg,[["render",yg],["__scopeId","data-v-58c8d7b0"]]);var Sg=vg,Cg={components:{SideMenu:Sg}};const Ag=(0,g.Z)(Cg,[["render",ig]]);var kg=Ag;const Vg=[{path:"/",name:"home",component:lh},{path:"/v2",name:"",component:sg,children:[{path:"/v2",name:"MainStatuShow",component:bc},{path:"IOTable",component:()=>a.e(580).then(a.bind(a,47580))},{path:"Alarm",component:()=>Promise.resolve().then(a.bind(a,45354))},{path:"controller",component:()=>a.e(402).then(a.bind(a,72402)),children:[{path:"move",component:()=>a.e(723).then(a.bind(a,3723))},{path:"fork",component:()=>a.e(231).then(a.bind(a,43231))}]},{path:"rd_test",component:()=>a.e(443).then(a.bind(a,86797))}]},{path:"/rd_test",name:"rd_test",component:()=>a.e(443).then(a.bind(a,86797))},{path:"/admin",name:"admin",component:kg,children:[{path:"controller",name:"controller",component:()=>a.e(402).then(a.bind(a,72402))}]},{path:"/idle",name:"idle",component:()=>a.e(790).then(a.bind(a,32790))},{path:"/playground",name:"playground",component:()=>a.e(830).then(a.bind(a,71830))}],Dg=(0,ra.p7)({history:(0,ra.PO)(),routes:Vg});var Tg=Dg,xg=a(3092),Ig=(a(54415),a(55612)),Mg=a(79150),Wg=a(53982),Ug=a.n(Wg),Og=a(54489),Pg=a.n(Og),Bg=0;setInterval((()=>{Bg+=1,Bg>=600&&(w.U6.dispatch("Logout"),location.reload(),Lg())}),1e3);function Lg(){Bg=0}document.addEventListener("touchstart",Lg),document.addEventListener("touchmove",Lg),document.addEventListener("touchend",Lg),document.addEventListener("mousemove",Lg),document.addEventListener("mousedown",Lg),document.addEventListener("keydown",Lg);const Gg=(0,Mg.o)({legacy:!1,locale:"zh-TW",fallbackLocale:"en-US",messages:{"zh-TW":a(46687),"en-US":a(19594)}}),Eg={confirmButtonColor:"rgb(13, 110, 253)",cancelButtonColor:"#ff7674"};async function Hg(){const e=(0,s.ri)(oa);e.use(w.ZP),e.use(Tg),e.use(Ig.ZP),e.use(xg.Z),e.use(Gg),e.use(Ug(),Eg),e.use(Pg()),e.config.globalProperties.$axios=re.Z,await w.FN.dispatch("downloadSettings"),await w.g4.dispatch("GetConnectionState"),e.mount("#app")}Hg()},46750:function(e,t,a){"use strict";a.d(t,{q$:function(){return y},zb:function(){return S},k0:function(){return C},tc:function(){return w},I7:function(){return f},FN:function(){return b},g4:function(){return _},U6:function(){return v},fH:function(){return A},ZP:function(){return p},dK:function(){return k}});a(57658);var s=a(33907),n=a(56565);async function i(e){var t=await n.Z.post("api/User/Login",e);return o(t.data),t.data}function o(e){e.LoginTime=Date.now(),localStorage.setItem("user",JSON.stringify(e))}var r=a(47327);class l{constructor(e,t){(0,r.Z)(this,"UserName",""),(0,r.Z)(this,"Role",0),this.UserName=e,this.Role=t}GetRoleName(){return 0==this.Role?"Operator":1==this.Role?"ENG":2==this.Role?"Developer":3==this.Role?"GOD":"Unknown"}}var d=l,u=a(82274),c=a(87943),m=a(38418),h=(a(53259),a(17023)),g=a(47755),p=(a(96486),(0,s.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}})),_=(0,s.MT)({state:{UI_Version:"01.25.0",PreviousControllRoute:"move",CurrentTabSelected:0,ConnectionStateData:{RosbridgeServer:2,WAGO:2,VMS:2}},getters:{CurrentUIVersion:e=>e.UI_Version,PreviousControllRoute:e=>e.PreviousControllRoute,CurrentTabSelected:e=>e.CurrentTabSelected,ConnectionState:e=>e.ConnectionStateData},mutations:{SetPreviousControllerRoute(e,t){e.PreviousControllRoute=t},SetCurrentTabSelected(e,t){e.CurrentTabSelected=t},StoreConnectionState(e,t){e.ConnectionStateData=t}},actions:{async GetConnectionState({commit:e}){var t=await m.Wf.GetConnectionState();e("StoreConnectionState",t)}}}),w=(0,s.MT)({state:{TestData:{move_test:{duration:0,state:0}}},getters:{testData:e=>e.TestData},mutations:{SetData(e,t){e.TestData=t}},actions:{}}),f=(0,s.MT)({state:{SysMessages:{ReportIndex:-1,Messages:[]}},getters:{SysMessages:e=>e.SysMessages.Messages,ReportIndex:e=>e.SysMessages.ReportIndex,LastReportIndex:e=>{var t=localStorage.getItem("sys_msg_report_index");return t?parseInt(t):-1}},mutations:{updateStatus(e,t){e.SysMessages.ReportIndex!=t.ReportIndex&&localStorage.setItem("sys_msg_report_index",t.ReportIndex+""),e.SysMessages=t}},actions:{Update({commit:e},t){e("updateStatus",t)}}}),y=(0,s.MT)({state:{AGVStatus:new u.ZP,SensorStatus:{LaserFront:new c.Z("前方雷射",0,155),LaserBack:new c.Z("後方雷射",0,-155,"bottom"),LaserRight:new c.Z("右方雷射",80,-125,"right-bottom"),LaserLeft:new c.Z("左方雷射",-80,-125,"left-bottom"),Bumper:new c.Z("Bumper",70,155,"right-top"),Bumper_back:new c.Z("Bumper",70,-155,"right-bottom"),RightWheel:new c.Z("右輪馬達",40,30,"right"),LeftWheel:new c.Z("左輪馬達",-35,30,"left"),VerticalWheel:new c.Z("垂直軸馬達",-35,-85,"left"),Battery:new c.Z("電池",15,-85,"right",30),ForkFrontendObstacle:new c.Z("牙叉障礙物",-40,120,"left-bottom")}},getters:{AGVStatus:e=>e.AGVStatus,OrderInfo:e=>e.AGVStatus.OrderInfo,AMCAGVSensorState:e=>e.AGVStatus.AMCAGVSensorState,IsOnline:e=>1==e.AGVStatus.OnlineMode,IsAuto:e=>1==e.AGVStatus.AutoMode,IsAGVInitializing:e=>"Initializing"==e.AGVStatus.SubState,InitializingStatusText:e=>e.AGVStatus.InitializingStatusText,AGVName:e=>e.AGVStatus.CarName,AlarmCodes:e=>e.AGVStatus.AlarmCodes.filter((e=>0!=e.Code)),AlarmGroup:e=>e.AGVStatus.AlarmsGroup,IsInspectionAGV:e=>2==e.AGVStatus.Agv_Type,IsForkAGV:e=>0==e.AGVStatus.Agv_Type,IsForkExtenable:e=>e.AGVStatus.IsForkExtenable,CurrentPose:e=>e.AGVStatus.Pose,CurrentAngle:e=>e.AGVStatus.Angle,BatteryStatus:(e,t)=>e.AGVStatus.BatteryStatus,Battery1Status:(e,t)=>{try{return t.BatteryStatus.filter((e=>1==e.BatteryID))[0]}catch(a){return}},Battery2Status:(e,t)=>{try{return t.BatteryStatus.filter((e=>2==e.BatteryID))[0]}catch(a){return}},Bat1Lockable:(e,t)=>{if(!t.Battery1Status)return!0;var a=t.Battery1Status.SensorInfo;return a.IsUnlockSensorON||!a.IsUnlockSensorON&&!a.IsLockSensorON},Bat1UnLockable:(e,t)=>{if(!t.Battery1Status)return!0;var a=t.Battery1Status.SensorInfo;return a.IsLockSensorON||!a.IsUnlockSensorON&&!a.IsLockSensorON},Bat2Lockable:(e,t)=>{if(!t.Battery2Status)return!0;var a=t.Battery2Status.SensorInfo;return a.IsUnlockSensorON||!a.IsUnlockSensorON&&!a.IsLockSensorON},Bat2UnLockable:(e,t)=>{if(!t.Battery2Status)return!0;var a=t.Battery2Status.SensorInfo;return a.IsLockSensorON||!a.IsUnlockSensorON&&!a.IsLockSensorON},ForkHeight:e=>e.AGVStatus.ZAxisDriverState.position,AGV_Sensors_States:e=>{if(void 0==S.getters.DIOStates.Inputs)return{};e.AGVStatus;e.SensorStatus.LaserFront.active=!S.getters.IsLaserFrontByass,e.SensorStatus.LaserFront.status=S.getters.IsLaserFrontAlarm?2:S.getters.IsLaserFrontWarning?1:0,e.SensorStatus.LaserBack.active=!S.getters.IsLaserBackByass,e.SensorStatus.LaserBack.status=S.getters.IsLaserBackAlarm?2:S.getters.IsLaserBackWarning?1:0,e.SensorStatus.LaserRight.active=!S.getters.IsLaserRightByass,e.SensorStatus.LaserRight.status=S.getters.IsLaserRightAlarm?2:0,e.SensorStatus.LaserLeft.active=!S.getters.IsLaserLeftByass,e.SensorStatus.LaserLeft.status=S.getters.IsLaserLeftAlarm?2:0,e.SensorStatus.Bumper.status=S.getters.IsBumperTrigger?2:0,e.SensorStatus.Bumper_back.status=S.getters.IsBumperTrigger?2:0,e.SensorStatus.RightWheel.status=S.getters.IsRightMotorAlarm?2:0,e.SensorStatus.LeftWheel.status=S.getters.IsLeftMotorAlarm?2:0,e.SensorStatus.VerticalWheel.status=S.getters.IsVerticalMotorAlarm?2:0,e.SensorStatus.ForkFrontendObstacle.status=S.getters.IsForkFronendObstacle?2:0;var t=0==e.AGVStatus.Agv_Type;e.SensorStatus.VerticalWheel.visible=t,e.SensorStatus.ForkFrontendObstacle.visible=t;var a=h.A.getters.Module_Information;if(a.Wheel_Driver){var s=a.Wheel_Driver.driversState;if(s){var n=s[0],i=s[1],o=a.Action_Driver,r=a.Battery;e.SensorStatus.VerticalWheel.module_data=`電壓:${o.voltage/100}V,電流:${o.outCurrent}mA,異常碼:${o.errorCode}`,e.SensorStatus.RightWheel.module_data=`電壓:${i.voltage/100}V,電流:${i.outCurrent}mA,異常碼:${i.errorCode}`,e.SensorStatus.LeftWheel.module_data=`電壓:${n.voltage/100}V,電流:${n.outCurrent}mA,異常碼:${n.errorCode}`,e.SensorStatus.Battery.module_data=`電量:${r.batteryLevel}%,放電電流:${r.dischargeCurrent}mA,充電電流:${r.chargeCurrent}mA,異常碼:${r.errorCode}`}}return e.SensorStatus.Battery.always_show_info=e.SensorStatus.VerticalWheel.always_show_info=e.SensorStatus.RightWheel.always_show_info=e.SensorStatus.LeftWheel.always_show_info=!0,e.SensorStatus},CurrentTag:e=>e.AGVStatus.BCR_State_MoveBase.tagID,IsHandshaking:e=>{var t=e.AGVStatus.HandShakeSignals;return!!t&&t.AGV.AGV_TR_REQ},Handshake_Signals:e=>{var t=e.AGVStatus.HandShakeSignals;return t?e.AGVStatus.HandShakeSignals:{AGV:{AGV_BUSY:!1,AGV_COMPT:!1,AGV_READY:!1,AGV_TR_REQ:!1,AGV_VALID:!1},EQ:{EQ_BUSY:!1,EQ_L_REQ:!1,EQ_READY:!1,EQ_U_REQ:!1,EQ_GO:!1}}},CurrentLaserMode:e=>e.AGVStatus.Current_LASER_MODE,HSTimers:e=>e.AGVStatus.HandShakeTimers,SysLoading:e=>e.AGVStatus.SysLoading,BatteryCount:e=>e.AGVStatus.BatteryStatus.length,MapUseState:e=>({AGV_Name:e.AGVStatus.CarName,Current_Tag:e.AGVStatus.Tag,Rotation:e.AGVStatus.Angle,State:e.AGVStatus.MainState,IsOnline:1==e.AGVStatus.OnlineMode,Coordination:[e.AGVStatus.Pose.position.x,e.AGVStatus.Pose.position.y],CargoExist:e.AGVStatus.CargoExist,CargoID:e.AGVStatus.CST_Data}),AGV_Naving_Tags:e=>e.AGVStatus.NavInfo.PathPlan,IMUMaxMinRecord:e=>e.AGVStatus.IMUMaxMinValRecord},mutations:{updateStatus(e,t){e.AGVStatus=t}},actions:{async clear_alarm_with_code({commit:e,getters:t,state:a},s){await(0,m.Hl)(s)}}}),b=(0,s.MT)({state:{Settings:new g.Z,IsSettingsLoaded:!1},getters:{Settings:e=>e.Settings,IsSettingsLoaded:e=>e.IsSettingsLoaded},mutations:{setSettings(e,t){e.Settings=t,e.IsSettingsLoaded=!0},setIsSettingsLoaded(e,t){e.IsSettingsLoaded=t}},actions:{async downloadSettings({commit:e}){e("setIsSettingsLoaded",!1);const t=await m.Wf.GetSettings();t&&(e("setSettings",t),e("setIsSettingsLoaded",!0))}}}),v=(0,s.MT)({state:{UserState:{UserName:"OPERATOR",Role:0}},getters:{CurrentUserName:e=>e.UserState.UserName?e.UserState.UserName:"OPERATOR",IsVisitor:e=>0==e.UserState.Role,IsGodUser:e=>3==e.UserState.Role,IsDevUser:e=>2==e.UserState.Role,IsEngUser:e=>1==e.UserState.Role,CurrentUserRole:e=>e.UserState.Role,Operationable:(e,t)=>!!t.IsGodUser||t.IsUserLogin&&!y.getters.IsAuto&&!y.getters.IsOnline},mutations:{setUser(e,t){e.UserState=t,localStorage.setItem("user",JSON.stringify(t))}},actions:{async Login({commit:e},t){var a=await i(t);if(void 0!=a){var s=new d(a.UserName,a.Role);e("setUser",s)}else e("setUser",{});return a},Logout({commit:e}){e("setUser",{UserName:"OPERATOR",Role:0})}}}),S=(0,s.MT)({state:{DIOStates:{Inputs:[],Outputs:[]}},getters:{DIOStates:e=>e.DIOStates,IsE84UseEmu:e=>void 0!=e.DIOStates.IsE84HsUseEmulator&&e.DIOStates.IsE84HsUseEmulator,E84_AGV:e=>{if(void 0==e.DIOStates.Outputs)return[0,0,0,0,0,0,0,0];let t=[];var a=["Y0020","Y0021","Y0022","Y0023","Y0024","Y0025","Y0026","Y0027"];for(let i=0;i<a.length;i++){var s=a[i],n=e.DIOStates.Outputs.find((e=>e.Address+""==s+""));t.push(n.State?1:0)}return t},DemoMiniAGVBatteryStatus:e=>{var t=e.DIOStates.Inputs.find((e=>e.Address+""=="X0017")).State,a=e.DIOStates.Inputs.find((e=>e.Address+""=="X0018")).State,s=e.DIOStates.Inputs.find((e=>e.Address+""=="X0010")).State,n=e.DIOStates.Inputs.find((e=>e.Address+""=="X0011")).State,i=!t&&a,o=!s&&n,r=t&&a,l=s&&n,d=t&&!a,u=s&&!n,c=(e,t,a)=>e?"installed":t?"installing":a?"removed":void 0;return{battery1:c(i,r,d),battery2:c(o,l,u)}},E84_EQ:e=>{let t=[];if(e.DIOStates.IsE84HsUseEmulator){if(void 0==e.DIOStates.Outputs)return[0,0,0,0,0,0,0,0];var a=["Y0000","Y0001","Y0002","Y0003","Y0004","Y0005","Y0006","Y0007"];for(let i=0;i<a.length;i++){var s=a[i],n=e.DIOStates.Outputs.find((e=>e.Address+""==s+""));t.push(n.State?1:0)}}else{if(void 0==e.DIOStates.Inputs)return[0,0,0,0,0,0,0,0];a=["X0020","X0021","X0022","X0023","X0024","X0025","X0026","X0027"];for(let i=0;i<a.length;i++){s=a[i],n=e.DIOStates.Inputs.find((e=>e.Address+""==s+""));t.push(n.State?1:0)}}return t},Fork_ARM_States:e=>{if(void 0==e.DIOStates.Inputs)return{IsArmAtHomePose:!1,IsArmAtEndPose:!0};var t=e.DIOStates.Inputs,a=!t.find((e=>"X0001"==e.Address)).State,s=!t.find((e=>"X0000"==e.Address)).State;return{IsArmAtHomePose:a,IsArmAtEndPose:s}},IsLaserFrontAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0032"==e.Address)).State},IsLaserFrontWarning:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs,a=!t.find((e=>"X0030"==e.Address)).State,s=!t.find((e=>"X0031"==e.Address)).State,n=!t.find((e=>"X0032"==e.Address)).State;return(a|s)&!n},IsLaserBackAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0036"==e.Address)).State},IsLaserBackWarning:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs,a=!t.find((e=>"X0034"==e.Address)).State,s=!t.find((e=>"X0035"==e.Address)).State,n=!t.find((e=>"X0036"==e.Address)).State;return(a|s)&!n},IsLaserRightAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X000F"==e.Address)).State},IsLaserLeftAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X000E"==e.Address)).State},IsLaserFrontByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Front_LsrBypass"==e.Name)).State},IsLaserBackByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Back_LsrBypass"==e.Name)).State},IsLaserLeftByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Left_LsrBypass"==e.Name)).State},IsLaserRightByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Right_LsrBypass"==e.Name)).State},IsBumperTrigger:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X000A"==e.Address)).State},IsRightMotorAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0015"==e.Address)).State},IsLeftMotorAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0017"==e.Address)).State},IsVerticalMotorAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0019"==e.Address)).State},IsVerticalBeltAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X002C"==e.Address)).State},IsForkFronendObstacle:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0011"==e.Address)).State},IsBrakeSwitchRelease:e=>{if(!e)return!1;if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs,a=!t.find((e=>"X000C"==e.Address)).State;if(!a)return!1;var s=!t.find((e=>"X0008"==e.Address)).State;return s&&a},Vertical_Hardware_limit_bypass:e=>{var t=e.DIOStates.Outputs.find((e=>"Vertical_Hardware_limit_bypass"==e.Name));return!!t&&t.State}},mutations:{updateStatus(e,t){e.DIOStates=t}},actions:{async ControlHardwareLimiSensor({commit:e,state:t},a){var s=t.DIOStates.Outputs.find((e=>"Vertical_Hardware_limit_bypass"==e.Name)),n=s.Address;m.Kl.DO_State_Change(n,a)}}}),C=(0,s.MT)({state:{HasAnyChanged:!1},getters:{IsAnyChanged:e=>e.HasAnyChanged},mutations:{setIsAnyChanged(e,t){e.HasAnyChanged=t}}}),A=(0,s.MT)({state:{Workstations:{}},getters:{Workstations:e=>e.Workstations},mutations:{setIsAnyChanged(e,t){e.HasAnyChanged=t},store(e,t){e.Workstations=t}},actions:{GetWorkStationData({commit:e}){(0,m.Xz)().then((t=>{e("store",t)}))},ModbusIOTestStart({commit:e},t){return(0,m.FX)(t).then((e=>e))}}}),k=(0,s.MT)({state:{MapData:{}},getters:{GetMapData:e=>e.MapData},mutations:{SetMapData(e,t){var a=Object.keys(t.Points);a.forEach((e=>{var a=t.Points[e];a&&(a.X>500||a.Y>500)&&(console.log(`Point[${a.Graph.Display}] remove because coordination too large .(${a.X},${a.Y})`),delete t.Points[e])})),e.MapData=t,console.log("map stored",e.MapData)}},actions:{async ReloadMapFromAGVS({commit:e},t){var a=await m.$6.ReloadMapFromAGVS(t);return console.log(a),a&&a.confirm&&e("SetMapData",a.map),a}}})},17023:function(e,t,a){"use strict";a.d(t,{A:function(){return i}});var s=a(33907),n=a(70886),i=(0,s.MT)({state:{keyboard_move_enable:!1,module_info:{IMU:{imuData:{linear_acceleration:{x:0,y:0,z:0}}},PinsState:{PinState:[{name:"",state:"",ORG_S:"",INPOSITION:"",READY:"",SERVO_S:"",ALARM:"",pose:""}]}}},getters:{linear_speed:e=>n.W5,angular_speed:e=>n.qc,BatteryInfo:e=>e.module_info.Battery,Module_Information:e=>e.module_info,ImuData_Acc:e=>{var t=e.module_info.IMU.imuData.linear_acceleration;return{x:t.x,y:t.y,z:t.z}},Pin_State:e=>e.module_info.PinsState.PinState[0]},mutations:{setKeyBoardMoveEnable(e,t){e.keyboard_move_enable=t,(0,n.sk)(t)},update_module_info(e,t){e.module_info=t}},actions:{keyboard_move_enable({commit:e},t){e("setKeyBoardMoveEnable",t)},force_stop({commit:e}){(0,n.dV)()}}})},10318:function(e,t,a){"use strict";a.d(t,{Z:function(){return W}});var s=a(66252),n=a(49963);const i=e=>((0,s.dD)("data-v-214b18ab"),e=e(),(0,s.Cn)(),e),o={class:"agv-3d-state"},r={class:"state-info"},l={class:"text-start"},d={key:0,class:"bi bi-chevron-down"},u={key:1,class:"bi bi-chevron-up"},c={class:"px-3 py-3",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},m={style:{width:"40px"}},h={style:{width:"40px"}},g=i((()=>(0,s._)("div",{class:"border",id:"my-three"},null,-1)));function p(e,t,a,i,p,_){const w=(0,s.up)("b-button"),f=(0,s.up)("el-input"),y=(0,s.up)("el-form-item"),b=(0,s.up)("el-checkbox"),v=(0,s.up)("el-form");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[(0,s._)("div",l,[(0,s.Wm)(w,{class:"bg-primary",onClick:t[0]||(t[0]=e=>p.showStatusCard=!p.showStatusCard),size:"sm",squared:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" 狀態資訊 "),p.showStatusCard?((0,s.wg)(),(0,s.iD)("i",u)):((0,s.wg)(),(0,s.iD)("i",d))])),_:1})]),(0,s.wy)((0,s._)("div",c,[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(_.DriversState,(e=>((0,s.wg)(),(0,s.j4)(y,{key:e.name,label:e.name},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{label:"State",class:"mx-2"},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Wm)(f,{size:"small",disabled:"",min:"0",modelValue:e.state,"onUpdate:modelValue":t=>e.state=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),(0,s.Wm)(y,{label:"Error Code",class:"mx-2"},{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s.Wm)(f,{size:"small",disabled:"",min:"0",modelValue:e.errorCode,"onUpdate:modelValue":t=>e.errorCode=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["label"])))),128)),(0,s.Wm)(y,{label:"卡匣在席"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{modelValue:p.isCarrierExist,"onUpdate:modelValue":t[1]||(t[1]=e=>p.isCarrierExist=e)},null,8,["modelValue"])])),_:1})])),_:1})],512),[[n.F8,p.showStatusCard]])]),g])}var _=a(99477),w=a(48476),f=a(69365),y=a(53259),b=a(77780);const v={class:"dashboard"},S=(0,s._)("div",{class:"dashboard-circle"},[(0,s._)("div",{class:"dashboard-light"}),(0,s._)("div",{class:"dashboard-turn-indicator"})],-1),C=[S];function A(e,t,a,n,i,o){return(0,s.wg)(),(0,s.iD)("div",v,C)}var k={name:"Dashboard",props:{isHeadlightOn:{type:Boolean,default:!1},isBrakeLightOn:{type:Boolean,default:!1},isLeftTurnSignalOn:{type:Boolean,default:!1},isRightTurnSignalOn:{type:Boolean,default:!1}},computed:{turnIndicatorStyle(){return this.isLeftTurnSignalOn&&!this.isRightTurnSignalOn?"left":!this.isLeftTurnSignalOn&&this.isRightTurnSignalOn?"right":""}}},V=a(83744);const D=(0,V.Z)(k,[["render",A]]);var T=D,x=a(46750),I={components:{dashboard:T},data(){return{width:730,height:600,CarrierHeight:60,ForkDepth:10,CSTBarcodeReaderInstallHeight:70,Fork:void 0,scene:null,renderer:null,camera:null,isCarrierExist:!1,showStatusCard:!1,DriverState:new b.Z}},computed:{forkMesh(){return this.scene.getObjectByName("fork")},carrierMesh(){return this.scene.getObjectByName("carrier")},ZAxisHeight(){return this.DriverState.position},DriversState(){return x.q$.getters.AGVStatus.DriversStates}},methods:{CreateZAxisMesh(){const e=210,t=new _.DvJ(20,60,e),a=new _.YBo({color:1858652,transparent:!1,opacity:.5}),s=new _.Kj0(t,a);return s.position.set(-100,0,e/2),s},CreateForkMesh(){var e=new _.DvJ(220,60,this.ForkDepth);const t=new _.YBo({color:3750201,transparent:!1,opacity:.5});var a=new _.Kj0(e,t);return a.name="fork",a.position.set(0,0,this.ZAxisHeight+2*this.ForkDepth),a},CreateCarrieMesh(){var e=new _.DvJ(60,60,60);const t=new _.YBo({color:1997053,transparent:!1,opacity:1});var a=new _.Kj0(e,t);return a.name="carrier",a.position.set(70,0,this.ZAxisHeight+this.CarrierHeight/2+this.ForkDepth),a},CreateCSTBCRMesh(){var e=new _.DvJ(10,10,10);const t=new _.YBo({color:0,transparent:!1,opacity:1});var a=new _.Kj0(e,t);return a.name="cst-bcr",a.position.set(-90,0,this.CSTBarcodeReaderInstallHeight),a},Init3DModel(){const e=new _.xsS,t=new _.DvJ(220,60,40),a=new _.YBo({color:6052956,transparent:!1,opacity:.5}),s=new _.Kj0(t,a);e.add(s),e.add(this.CreateZAxisMesh()),e.add(this.CreateForkMesh()),e.add(this.CreateCarrieMesh()),e.add(this.CreateCSTBCRMesh());var n=new _._12(1e3,1e3,32),i=new _.vBJ({color:13421772});n=new _.Kj0(n,i);n.position.set(0,0,0),e.add(n);const o=new _.Mig(16777215,.4),r=new _.cek(16777215,1);e.add(o),r.position.set(220,300,400),e.add(r);const l=new _.cPb(45,this.width/this.height,.2,2100);l.position.set(0,520,270),l.up.set(0,-1,0),l.lookAt(120,120,0);const d=new _.y8_(1200);d.setColors("blue","green","red"),e.add(d);const u=new _.CP7;u.setSize(this.width,this.height),u.render(e,l);const c=new f.z(l,u.domElement);c.addEventListener("change",(()=>{u.render(e,l)})),e.background=new _.Ilk(16777215),e.rotation.z=Math.PI/3,e.position.y=160,e.position.z=-10,l.zoom=.2,this.scene=e,this.renderer=u,this.camera=l;var m=()=>{requestAnimationFrame(m),this.carrierMesh.visible=this.isCarrierExist,u.render(e,l)};return m(),u.domElement},ForkPositionChange(){},LoadAGVStlModel(e){const t=new w.j;t.load("/submarine_agv_model.STL",(function(t){const a=new _.vBJ({color:"grey"}),s=new _.Kj0(t,a);e.add(s)}))}},mounted(){y.Z.on("/zaxis_driver_state",(e=>{this.DriverState=e}));var e=this.Init3DModel();document.getElementById("my-three")?.appendChild(e),setInterval((()=>{this.forkMesh.position.z=this.ZAxisHeight+20,this.carrierMesh.position.z=this.ZAxisHeight+20+this.CarrierHeight/2+this.ForkDepth/2}),100)}};const M=(0,V.Z)(I,[["render",p],["__scopeId","data-v-214b18ab"]]);var W=M},57544:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s=a(66252),n=a(3577);const i=(0,s._)("img",{src:"/images/agv_lift.png",width:"300",alt:""},null,-1);function o(e,t,a,o,r,l){return(0,s.wg)(),(0,s.iD)("div",{onMouseup:t[2]||(t[2]=e=>{r.isForkClickDown=!1}),class:"admin w-100 h-100"},[(0,s._)("div",{onMousemove:t[1]||(t[1]=(...e)=>l.MouseMove&&l.MouseMove(...e)),class:"agv-fork-img"},[i,(0,s._)("div",{onMousedown:t[0]||(t[0]=(...e)=>l.ForkClick&&l.ForkClick(...e)),style:(0,n.j5)(l.ForkStyle),class:"fork"},[(0,s._)("span",null,(0,n.zw)(l.ForkHeight)+" mm",1)],36)],32)],32)}var r={data(){return{isForkClickDown:!1,mouse_down_cursor_position:[0,0],current_cursor_position:[0,0],bottom:0,bottom_offset:70,forkHeight:0,scale:.05}},computed:{deltaX(){return this.current_cursor_position[1]-this.mouse_down_cursor_position[1]},ForkStyle(){return{bottom:`${this.bottom+this.bottom_offset}px`}},ForkHeight(){return this.bottom/this.scale}},methods:{ForkClick(e){this.isForkClickDown=!0,this.current_cursor_position=[e.x,e.y],console.log(e)},MouseMove(e){if(this.isForkClickDown){var t=[e.x,e.y],a=t[1]-this.current_cursor_position[1];this.bottom>=0&&this.bottom<=643?this.bottom-=a:this.bottom>500?this.bottom=643:this.bottom=0,this.current_cursor_position=t}}}},l=a(83744);const d=(0,l.Z)(r,[["render",o]]);var u=d},45354:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(66252),n=a(3577);const i={class:"alarm-warn-table px-1"},o={class:"d-flex flex-row"},r={class:"flex-fill text-start"},l={class:"text-danger"},d=(0,s._)("i",{class:"bi bi-three-dots-vertical"},null,-1),u={class:"mt-2"},c={class:"border mt-1"},m={class:"text-center"},h={class:"text-center"},g=(0,s._)("p",null,"確定要清除異常紀錄?",-1);function p(e,t,a,p,_,w){const f=(0,s.up)("el-option"),y=(0,s.up)("el-select"),b=(0,s.up)("b-button"),v=((0,s.up)("el-input"),(0,s.up)("el-pagination")),S=(0,s.up)("el-table-column"),C=(0,s.up)("el-table"),A=(0,s.up)("b-modal"),k=(0,s.up)("el-form-item"),V=(0,s.up)("el-radio"),D=(0,s.up)("el-date-picker"),T=(0,s.up)("el-radio-group"),x=(0,s.up)("el-form"),I=(0,s.up)("el-drawer");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",o,[(0,s._)("div",r,[(0,s._)("i",{class:"bi bi-sliders",onClick:t[0]||(t[0]=()=>{_.drawer_show=!_.drawer_show})}),(0,s._)("label",l,[(0,s._)("b",null,[d,(0,s.Uk)(" "+(0,n.zw)(e.$t("alarm-type")),1)])]),(0,s.Wm)(y,{class:"mx-2",title:"異常等級",modelValue:_.DisplaySelected,"onUpdate:modelValue":t[1]||(t[1]=e=>_.DisplaySelected=e),onChange:w.HandleAlarmTypeChanged},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{label:"ALL",value:"All"}),(0,s.Wm)(f,{label:"Alarm",value:"Alarm"}),(0,s.Wm)(f,{label:"Warning",value:"Warning"})])),_:1},8,["modelValue","onChange"]),(0,s.Wm)(b,{size:"sm",onClick:w.AlarmDownload},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.$t("refresh")),1)])),_:1},8,["onClick"]),w.clear_alarm_btn_visible?((0,s.wg)(),(0,s.j4)(b,{key:0,variant:"danger",onClick:t[2]||(t[2]=e=>w.ClearAlarmAlert()),size:"sm"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.$t("clear_alarm_records")),1)])),_:1})):(0,s.kq)("",!0)]),(0,s.kq)("",!0)]),(0,s._)("div",u,[(0,s.Wm)(v,{background:"",layout:"prev, pager, next",total:_.totalAlarmNum,"page-size":_.page_size,modelValue:_.page,"onUpdate:modelValue":t[3]||(t[3]=e=>_.page=e),"current-page":_.page,onCurrentChange:w.PageChangeHandler},null,8,["total","page-size","modelValue","current-page","onCurrentChange"])]),(0,s._)("div",c,[(0,s.Wm)(C,{data:_.alarms,"row-key":"Time","row-class-name":w.tb_row_class,header:"",border:"",height:"528",size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{label:"Time",prop:"Time",width:"160",formatter:w.TimeFormmter},null,8,["formatter"]),(0,s.Wm)(S,{label:"Code",prop:"Code",width:"90","header-align":"center"},{default:(0,s.w5)((({row:e})=>[(0,s._)("div",m,(0,n.zw)(e.Code),1)])),_:1}),(0,s.Wm)(S,{label:"Description",prop:"zh-TW"==_.lang?"CN":"Description"},null,8,["prop"]),(0,s.Wm)(S,{label:"Level",prop:"Level",width:"100","header-align":"center"},{default:(0,s.w5)((({row:e})=>[(0,s._)("div",h,[(0,s._)("b",null,(0,n.zw)(e.Level),1)])])),_:1})])),_:1},8,["data","row-class-name"])]),(0,s.Wm)(A,{modelValue:_.clear_alarms_dialog_show,"onUpdate:modelValue":t[4]||(t[4]=e=>_.clear_alarms_dialog_show=e),centered:"",title:"Alarm Records Clear",onOk:w.ClearAlarmRecords},{default:(0,s.w5)((()=>[g])),_:1},8,["modelValue","onOk"]),(0,s.Wm)(I,{modelValue:_.drawer_show,"onUpdate:modelValue":t[11]||(t[11]=e=>_.drawer_show=e),direction:"rtl",size:"50%",title:"異常紀錄","modal-class":"alarm-tb-option-modal"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{"label-position":"left","label-width":"150"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{label:"顯示警報類型"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"mx-2",title:"異常等級",modelValue:_.DisplaySelected,"onUpdate:modelValue":t[5]||(t[5]=e=>_.DisplaySelected=e),onChange:w.HandleAlarmTypeChanged},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{label:"ALL",value:"All"}),(0,s.Wm)(f,{label:"Alarm",value:"Alarm"}),(0,s.Wm)(f,{label:"Warning",value:"Warning"})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,s.Wm)(k,{label:"時間區間設定"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s.Wm)(T,{class:"d-flex flex-column",modelValue:_.TimeRangeOpt,"onUpdate:modelValue":t[8]||(t[8]=e=>_.TimeRangeOpt=e),onChange:t[9]||(t[9]=e=>{w.AlarmDownload()})},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{style:{"margin-right":"auto"},label:"no-limit",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)("不限時間")])),_:1}),(0,s.Wm)(V,{style:{"margin-right":"auto"},label:"limit",size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)("指定時間")])),_:1}),(0,s.Wm)(D,{style:{width:"350px"},modelValue:_.TimeRange_Picker,"onUpdate:modelValue":t[6]||(t[6]=e=>_.TimeRange_Picker=e),type:"datetimerange",shortcuts:_.shortcuts,"range-separator":"To","start-placeholder":"Start date","end-placeholder":"End date","value-format":"YYYY/MM/DD HH:mm:ss",disabled:"limit"!=_.TimeRangeOpt,onChange:t[7]||(t[7]=()=>{w.AlarmDownload()})},null,8,["modelValue","shortcuts","disabled"])])),_:1},8,["modelValue"])])])),_:1}),(0,s.Wm)(k,{label:"異常碼"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"mx-2",title:"異常等級",modelValue:_.AlarmClassSelected,"onUpdate:modelValue":t[10]||(t[10]=e=>_.AlarmClassSelected=e),onChange:w.HandleAlarmTypeChanged},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(w.alarm_options,(e=>((0,s.wg)(),(0,s.j4)(f,{key:e.Code,label:`${e.CN}_${e.Description}(${e.Code})`,value:e.Code},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}a(57658);var _=a(38418),w=a(30381),f=a.n(w),y=a(53259),b=a(93867),v=a(46750),S={data(){return{alarms:[],totalAlarmNum:0,page:1,page_size:15,lang:"zh-TW",clear_alarms_dialog_show:!1,DisplaySelected:"All",drawer_show:!1,TimeRangeOpt:"no-limit",TimeRange:["1997/1/1 00:00:00","2100/12/31 00:00:00"],TimeRange_Picker:["1997/1/1 00:00:00","2100/12/31 00:00:00"],shortcuts:[{text:"前一周",value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-6048e5),[t,e]}},{text:"前一個月",value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-2592e6),[t,e]}},{text:"前三個月",value:()=>{const e=new Date,t=new Date;return t.setTime(t.getTime()-7776e6),[t,e]}}],alarmClasifies:[],AlarmClassSelected:0}},methods:{tb_row_class(e,t){if(e.rowIndex<0)return"";var a=this.alarms[e.rowIndex].Level;try{return"Warning"==a?"warning-row":"Alarm"===a?"alarm-row":"success-row"}catch(s){return"success-row"}},TimeFormmter(e,t,a,s){return f()(a).format("yyyy/MM/DD HH:mm:ss")},async PageChangeHandler(e){this.page=e,this.AlarmDownload()},async AlarmDownload(){const e=()=>{const e=new Date;e.setDate(e.getDate()+1),e.setHours(0,0,0,0);const t=new Date(e);t.setMonth(t.getMonth()-3);const a=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString(),s=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString();return[a,s]};var t="no-limit"==this.TimeRangeOpt?e():this.TimeRange_Picker;this.totalAlarmNum=await _.d3.TotalAlarmCount(t[0],t[1],this.DisplaySelected,this.AlarmClassSelected),this.alarms=await _.d3.QueryByPage(t[0],t[1],this.page,this.page_size,this.DisplaySelected,this.AlarmClassSelected)},ClearAlarmAlert(){this.$swal.fire({title:"Alert Clear",text:`${this.$t("clear-alarm-data-confirm-text")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.ClearAlarmRecords()}))},async ClearAlarmRecords(){await _.d3.ClearAlarms(),b.Z.Success("Alarm Clear","bottom",1e3),await this.AlarmDownload()},async HandleAlarmTypeChanged(){this.page=1,this.AlarmDownload()}},computed:{clear_alarm_btn_visible(){return 0!=v.U6.getters.CurrentUserRole},alarm_options(){var e=[{Code:0,Description:"全部"}];return this.alarmClasifies.forEach((t=>{e.push(t)})),e}},async mounted(){this.AlarmDownload(),y.Z.on("/alarmtable_tab_click",(async()=>{this.AlarmDownload()})),y.Z.on("/lang_changed",(e=>{this.lang=e}))}},C=a(83744);const A=(0,C.Z)(S,[["render",p]]);var k=A},78500:function(e,t,a){"use strict";a.d(t,{Z:function(){return g}});var s=a(66252),n=a(3577);const i={class:"d-flex flex-column bg-light m-2 w-100"},o={class:"d-flex py-2"},r={class:"border"};function l(e,t,a,l,d,u){const c=(0,s.up)("b-tab"),m=(0,s.up)("b-tabs"),h=(0,s.up)("el-button"),g=(0,s.up)("el-table-column"),p=(0,s.up)("el-select-v2"),_=(0,s.up)("el-table");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(m,{onActivateTab:u.TabSelectChange},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"INPUT"}),(0,s.Wm)(c,{title:"OUTPUT"})])),_:1},8,["onActivateTab"]),(0,s._)("div",o,[(0,s.Wm)(h,{onClick:u.Save,size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)("儲存-"+(0,n.zw)(d.regionName),1)])),_:1},8,["onClick"])]),(0,s._)("div",r,[(0,s.Wm)(_,{border:"","row-key":"index","table-layout":"auto",data:d.tableData,"max-height":"450"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{prop:"index",label:"Index","min-width":"20"}),(0,s.Wm)(g,{prop:"address","min-width":"20",label:"Address"}),(0,s.Wm)(g,{prop:"name",label:"Name"},{default:(0,s.w5)((e=>[(0,s.Wm)(p,{modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t,filterable:"",options:u.GetSelectOptions,placeholder:"Please select",clearable:"",style:{width:"300px"}},null,8,["modelValue","onUpdate:modelValue","options"])])),_:1})])),_:1},8,["data"])])])}a(57658);var d=a(46750),u=a(38418),c={data(){return{regionName:"X",tableData:[],options:{Inputs:[],Outputs:[]}}},computed:{GetSelectOptions(){return"X"==this.regionName?this.options.Inputs:"Y"==this.regionName?this.options.Outputs:void 0},GetCurrentIORegistState(){var e=d.zb.getters.DIOStates;return"X"==this.regionName?e.Inputs:"Y"==this.regionName?e.Outputs:void 0},DataToStore(){var e={};for(let t=0;t<this.tableData.length;t++){const a=this.tableData[t];e[t]=a&&a.name?a.name:""}return console.log(e),e}},methods:{InitData(){setTimeout((()=>{this.tableData=[];var e=this.GetCurrentIORegistState;for(let a=0;a<64;a++){var t=e[a];this.tableData.push({index:`${a}`,address:`${this.regionName}${a.toString(16).toUpperCase()}`,name:t?t.Name:""})}}),300)},TabSelectChange(e){this.regionName=0==e?"X":"Y",this.InitData()},Save(){this.$swal.fire({title:"確定要儲存此設定?",text:"",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(!e.isConfirmed)return;var t={confirm:!1,message:""};t="X"==this.regionName?await u.Kl.UpdateInputMap(this.DataToStore):await u.Kl.UpdateOutputMap(this.DataToStore);const a=t.confirm;this.$swal.fire({title:a?"修改成功,需要重新啟動系統，是否立即重新啟動?":"修改失敗",text:t.message,icon:a?"success":"error",showCancelButton:a,confirmButtonText:a?"重新啟動":"OK",cancelButtonText:"稍後",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){var t=await u.Wf.RestartSystem();t.confirm&&this.$swal.fire({title:"車載系統正在重新啟動中...",icon:"success",customClass:"my-sweetalert"})}}))}))},DownloadInOutPutsOptions(){u.Kl.DownloadInOutPutsOptions().then((e=>{this.options=e}))}},mounted(){this.DownloadInOutPutsOptions(),this.InitData()}},m=a(83744);const h=(0,m.Z)(c,[["render",l]]);var g=h},22038:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var s=a(66252),n=a(3577);const i={class:"px-1 d-flex flex-row justify-content-center"},o={class:"mt-2"},r={class:"border mt-1 flex-fill"},l=(0,s._)("p",null,"Are you sure?",-1);function d(e,t,a,d,u,c){const m=(0,s.up)("jw-pagination"),h=(0,s.up)("el-table-column"),g=(0,s.up)("el-button"),p=(0,s.up)("el-table"),_=(0,s.up)("b-modal");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",o,[(0,s.Wm)(m,{onPage_changed:t[0]||(t[0]=e=>{u.pagecurrent=e-1}),pageSize:16,totalCount:a.table_data.length},null,8,["totalCount"])]),(0,s._)("div",r,[(0,s.Wm)(p,{size:"small",data:c.page_table_data,"row-class-name":c.tb_row_class,header:"",border:"",height:"555","row-key":"Address","highlight-current-row":!1,onRowDblclick:c.cellDoubleClickHandle,onCellMouseEnter:c.cellMouseEnterHandler,onCellMouseLeave:c.cellMouseLeaveHandler,style:{width:"99%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{label:"Address",prop:"Address",width:"70"}),(0,s.Wm)(h,{label:"Name",prop:"Name"}),(0,s.Wm)(h,{label:"Value",prop:"State",width:"60",formatter:c.StateFormatter},null,8,["formatter"]),a.isOutput?((0,s.wg)(),(0,s.j4)(h,{key:0,width:"80"},{default:(0,s.w5)((e=>[(0,s.Wm)(g,{disabled:!c.IsUserLogin,onClick:t=>c.ToggleDO(e.row),size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("Toggle")])),_:2},1032,["disabled","onClick"])])),_:1})):(0,s.kq)("",!0)])),_:1},8,["data","row-class-name","onRowDblclick","onCellMouseEnter","onCellMouseLeave"])]),(0,s.Wm)(_,{modelValue:u.DIOChangeComfirmDialogShow,"onUpdate:modelValue":t[1]||(t[1]=e=>u.DIOChangeComfirmDialogShow=e),centered:!0,title:"DIO Change Confirm",onOk:c.WriteDIOHandle},{default:(0,s.w5)((()=>[(0,s._)("p",null,[(0,s._)("b",null,"["+(0,n.zw)(u.toChangeAddress)+"]",1),(0,s.Uk)(" will changed from "),(0,s._)("b",null,(0,n.zw)(u.toChangeState?0:1),1),(0,s.Uk)(" to "),(0,s._)("b",null,(0,n.zw)(u.toChangeState?1:0),1),(0,s.Uk)(". ")]),l])),_:1},8,["modelValue","onOk"])])}var u=a(33251),c=a(38418),m=a(46750);const h={class:"d-flex flex-column",style:{width:"50px"}};function g(e,t,a,i,o,r){const l=(0,s.up)("b-button");return(0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)(l,{class:"m-1",size:"sm",onClick:r.prev},{default:(0,s.w5)((()=>[(0,s.Uk)("▲")])),_:1},8,["onClick"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.totalPages,(e=>((0,s.wg)(),(0,s.j4)(l,{class:"m-1 border",size:"sm",onClick:()=>{o.pagecurrent=e},key:e,variant:e==o.pagecurrent?"primary":"light",style:{"font-weight":"bold","text-decoration":"underline"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClick","variant"])))),128)),(0,s.Wm)(l,{class:"m-1",size:"sm",onClick:r.next},{default:(0,s.w5)((()=>[(0,s.Uk)("▼")])),_:1},8,["onClick"])])}var p={props:{default:{type:Number,default:1},totalCount:{type:Number,default:0},pageSize:{type:Number,default:16}},data(){return{pagecurrent:this.value}},computed:{totalPages(){return this.totalCount<=this.pageSize?1:this.totalCount/this.pageSize}},mounted(){this.pagecurrent=this.default,(0,s.YP)((()=>this.pagecurrent),((e,t)=>{this.$emit("page_changed",e)}))},methods:{prev(){this.pagecurrent>1&&(this.pagecurrent=this.pagecurrent-1)},next(){this.pagecurrent<this.totalPages&&(this.pagecurrent=this.pagecurrent+1)}}},_=a(83744);const w=(0,_.Z)(p,[["render",g]]);var f=w,y={components:{jwPagination:f},props:{enabled:{type:Boolean,default:!1},digital_type:{type:String,default:"input"},readonly:{type:Boolean,default:!0},table_data:{type:Array,default(){return[new u.C8("X0000","1"),new u.C8("X0001",""),new u.C8("X0002",""),new u.C8("X0003",""),new u.C8("X0004",""),new u.C8("X0005",""),new u.C8("X0006",""),new u.C8("X0007",""),new u.C8("X0008",""),new u.C8("X0009",""),new u.C8("X000A",""),new u.C8("X000B",""),new u.C8("X000C",""),new u.C8("X000D",""),new u.C8("X000E",""),new u.C8("X000F","")]}},isOutput:{type:Boolean,default:!1}},data(){return{Registers:[],pagecurrent:0,DIOChangeComfirmDialogShow:!1,toChangeAddress:"",toChangeState:!1,hover_row:{}}},computed:{page_table_data(){return this.table_data.slice(16*this.pagecurrent,16*(this.pagecurrent+1))},IsUserLogin(){return 0!=m.U6.getters.CurrentUserRole},IsGodUse(){return m.U6.getters.IsGodUser}},methods:{tb_row_class(e,t){if(e.rowIndex<0)return"";if(this.hover_row&&this.hover_row.Address==e.row.Address)return"bg-dark";var a=this.page_table_data[e.rowIndex].State;try{return a?"on-row":"off-row"}catch(s){return"off-row"}},StateFormatter(e,t,a,s){return 1==a?1:0},PageChangeHandler(e){this.pagecurrent=e-1},cellMouseEnterHandler(e,t,a,s){this.hover_row=e},cellMouseLeaveHandler(e,t,a,s){this.hover_row=void 0},async cellDoubleClickHandle(e,t,a){if(this.IsUserLogin)if(this.isOutput){if(this.toChangeAddress=e.Address,this.toChangeState=!e.State,this.IsGodUse)return void this.WriteDIOHandle();this.DIOChangeComfirmDialogShow=!0}else await c.Kl.DI_State_Change(e.Address,!e.State)},async ToggleDO(e){this.IsGodUse?await c.Kl.DO_State_Change(e.Address,!e.State):(this.toChangeAddress=e.Address,this.toChangeState=!e.State,this.DIOChangeComfirmDialogShow=!0)},async WriteDIOHandle(){await c.Kl.DO_State_Change(this.toChangeAddress,this.toChangeState)}}};const b=(0,_.Z)(y,[["render",d]]);var v=b},841:function(e,t,a){"use strict";a.d(t,{Z:function(){return H}});var s=a(66252);const n={class:"d-flex fle-row border-bottom py-1 my-1"},i={class:"text-start py-1"},o=(0,s._)("span",null,"設備選擇:",-1);function r(e,t,a,r,l,d){const u=(0,s.up)("el-button"),c=(0,s.up)("el-option"),m=(0,s.up)("el-select"),h=(0,s.up)("el-input"),g=(0,s.up)("el-table-column"),p=(0,s.up)("el-checkbox"),_=(0,s.up)("el-table"),w=(0,s.up)("TeachTool"),f=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[(0,s.Wm)(u,{type:"primary",onClick:d.SaveHandler},{default:(0,s.w5)((()=>[(0,s.Uk)("儲存")])),_:1},8,["onClick"]),(0,s.Wm)(u,{type:"info",onClick:d.AddTagTeachHandler},{default:(0,s.w5)((()=>[(0,s.Uk)("新增")])),_:1},8,["onClick"]),(0,s.Wm)(u,{type:"info",onClick:d.reload},{default:(0,s.w5)((()=>[(0,s.Uk)("重新載入")])),_:1},8,["onClick"])]),(0,s._)("div",i,[o,(0,s.Wm)(m,{modelValue:l.selected_tag,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selected_tag=e),onChange:d.HandleStationSelected,class:"mx-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{value:"all",label:"ALL"}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.StationOptions,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.value,value:e.value,label:e.text},null,8,["value","label"])))),128))])),_:1},8,["modelValue","onChange"])]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(_,{onCellClick:d.HandleCellClicked,data:d.TeachDatasShown,size:"small","row-class-name":d.GetRowClass},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{label:"Tag",prop:"Tag"},{default:(0,s.w5)((e=>[(0,s._)("div",null,[(0,s.Wm)(h,{onClick:d.TagNumberInputClicked,onChange:d.InputChanged,type:"number",modelValue:e.row.Tag,"onUpdate:modelValue":t=>e.row.Tag=t},null,8,["onClick","onChange","modelValue","onUpdate:modelValue"])])])),_:1}),(0,s.Wm)(g,{label:"設備名稱",prop:"Name"},{default:(0,s.w5)((e=>[(0,s._)("div",null,[(0,s.Wm)(h,{disabled:"",onChange:d.InputChanged,modelValue:e.row.Name,"onUpdate:modelValue":t=>e.row.Name=t},null,8,["onChange","modelValue","onUpdate:modelValue"])])])),_:1}),(0,s.Wm)(g,{label:"需交握",prop:"NeedHandshake"},{default:(0,s.w5)((e=>[(0,s._)("div",null,[(0,s.Wm)(p,{onChange:t=>d.HandleNeedHandshakeCkbChanged(e.row),modelValue:e.row.NeedHandshake,"onUpdate:modelValue":t=>e.row.NeedHandshake=t},null,8,["onChange","modelValue","onUpdate:modelValue"])])])),_:1}),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)([0,1,2],(e=>(0,s.Wm)(g,{key:e,label:"layer-"+e},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{label:"Up Pose(cm)",prop:`Up_Pose:${e}`},{default:(0,s.w5)((t=>[void 0!=t.row.Layers[e]?((0,s.wg)(),(0,s.j4)(h,{key:0,onClick:d.InputClicked,onChange:d.InputChanged,type:"number",step:"0.01",modelValue:t.row.Layers[e].Value.Up_Pose,"onUpdate:modelValue":a=>t.row.Layers[e].Value.Up_Pose=a},null,8,["onClick","onChange","modelValue","onUpdate:modelValue"])):(0,s.kq)("",!0)])),_:2},1032,["prop"]),(0,s.Wm)(g,{label:"Down Pose(cm)",prop:`Down_Pose:${e}`},{default:(0,s.w5)((t=>[void 0!=t.row.Layers[e]?((0,s.wg)(),(0,s.j4)(h,{key:0,onClick:d.InputClicked,onChange:d.InputChanged,type:"number",step:"0.01",modelValue:t.row.Layers[e].Value.Down_Pose,"onUpdate:modelValue":a=>t.row.Layers[e].Value.Down_Pose=a},null,8,["onClick","onChange","modelValue","onUpdate:modelValue"])):(0,s.kq)("",!0)])),_:2},1032,["prop"])])),_:2},1032,["label"]))),64)),(0,s.Wm)(g,{"min-width":"100"},{default:(0,s.w5)((e=>[(0,s._)("div",null,[(0,s.Wm)(u,{onClick:t=>d.RemoveTagTeachSetting(e.row),type:"danger",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("刪除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["onCellClick","data","row-class-name"])),[[f,l.loading]]),(0,s.Wm)(w,{onOnValueChanged:d.HamdleVirtualKBValuechange,ref:"teach_tool"},null,8,["onOnValueChanged"])])}var l=a(38418),d=a(46750),u=a(34951),c=a(3577),m=a(49963);const h=e=>((0,s.dD)("data-v-567d4c41"),e=e(),(0,s.Cn)(),e),g={class:"teach-tool"},p={style:{position:"relative",top:"-41px"}},_={class:"border-bottom my-2 text-start"},w={class:"d-flex"},f={class:"height-text"},y={key:0,class:"mx-3"},b=h((()=>(0,s._)("div",{class:"height-text"},"Pose",-1))),v={class:"goal-val"},S={class:""},C={key:0,class:"text-start border-top py-2"},A={class:"d-flex"},k=h((()=>(0,s._)("h6",null,"牙叉位置調整",-1))),V={class:"mx-3"},D=h((()=>(0,s._)("span",null,"當前高度:",-1))),T=h((()=>(0,s._)("span",null,"cm",-1))),x={class:"d-flex"},I={class:"button-group d-flex p-1"},M={class:"button-group d-flex p-1"},W={class:"button-group d-flex p-1"};function U(e,t,a,n,i,o){const r=(0,s.up)("el-button"),l=(0,s.up)("SimpleKeyboardVue"),d=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(d,{width:"50%",modal:!1,draggable:"",modelValue:i.show,"onUpdate:modelValue":t[12]||(t[12]=e=>i.show=e),title:o.title_},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s._)("div",_,[(0,s._)("div",w,[(0,s._)("div",null,[(0,s._)("div",f,(0,c.zw)(o.input_label_text),1),(0,s.wy)((0,s._)("input",{id:"teach-val-input","onUpdate:modelValue":t[0]||(t[0]=e=>i.input_sum=e),onChange:t[1]||(t[1]=(...e)=>o.HandleInputChanged&&o.HandleInputChanged(...e))},null,544),[[m.nr,i.input_sum]])]),o.is_modify_tagNumber?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",y,[b,(0,s._)("div",v,(0,c.zw)(i.goal.pose),1)]))]),i.isTagInput?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,onClick:o.HandleForkMoveBtnClick,type:"primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(e.$t("Move Fork There")),1)])),_:1},8,["onClick"]))]),(0,s._)("div",S,[(0,s.Wm)(l,{KeyboardVue:"",keyboard_type:"number",onOnKeyPress:o.KeyboardInputChanged},null,8,["onOnKeyPress"]),i.isTagInput?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("div",A,[k,(0,s._)("span",V,[D,(0,s.Uk)(" "+(0,c.zw)(o.current_position)+" ",1),T])]),(0,s._)("div",x,[(0,s._)("div",I,[(0,s.Wm)(r,{onClick:t[2]||(t[2]=e=>o.ForkAction("home"))},{default:(0,s.w5)((()=>[(0,s.Uk)("Home")])),_:1}),(0,s.Wm)(r,{onClick:t[3]||(t[3]=e=>o.ForkAction("stop")),type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)("STOP")])),_:1})]),(0,s._)("div",null,[(0,s._)("div",M,[(0,s.Wm)(r,{onClick:t[4]||(t[4]=e=>o.ForkPositionAdjust(.1))},{default:(0,s.w5)((()=>[(0,s.Uk)("+1mm")])),_:1}),(0,s.Wm)(r,{onClick:t[5]||(t[5]=e=>o.ForkPositionAdjust(.5))},{default:(0,s.w5)((()=>[(0,s.Uk)("+5mm")])),_:1}),(0,s.Wm)(r,{onClick:t[6]||(t[6]=e=>o.ForkPositionAdjust(-.1))},{default:(0,s.w5)((()=>[(0,s.Uk)("-1mm")])),_:1}),(0,s.Wm)(r,{onClick:t[7]||(t[7]=e=>o.ForkPositionAdjust(-.5))},{default:(0,s.w5)((()=>[(0,s.Uk)("-5mm")])),_:1})]),(0,s._)("div",W,[(0,s.Wm)(r,{onClick:t[8]||(t[8]=e=>o.ForkPositionAdjust(1))},{default:(0,s.w5)((()=>[(0,s.Uk)("+1cm")])),_:1}),(0,s.Wm)(r,{onClick:t[9]||(t[9]=e=>o.ForkPositionAdjust(5))},{default:(0,s.w5)((()=>[(0,s.Uk)("+5cm")])),_:1}),(0,s.Wm)(r,{onClick:t[10]||(t[10]=e=>o.ForkPositionAdjust(-1))},{default:(0,s.w5)((()=>[(0,s.Uk)("-1cm")])),_:1}),(0,s.Wm)(r,{onClick:t[11]||(t[11]=e=>o.ForkPositionAdjust(-5))},{default:(0,s.w5)((()=>[(0,s.Uk)("-5cm")])),_:1})])])])]))])])])),_:1},8,["modelValue","title"])])}var O={components:{SimpleKeyboardVue:u.Z},data(){return{show:!1,isTagInput:!1,number:0,input_sum:"",title_:"",goal:{tag:0,layer:0,pose:0,value:0}}},watch:{input_sum:{immediate:!0,deep:!0,handler(e,t){var a=parseFloat(e+"");isNaN(a)||(this.number=a,this.goal.value=a,this.$emit("onValueChanged",this.goal),this.is_modify_tagNumber&&(this.goal.tag=a))}}},computed:{input_label_text(){return this.is_modify_tagNumber?"Tag Number":"HEIGHT"},is_modify_tagNumber(){return void 0==this.goal.pose},title_(){return"Tag "+(this.is_modify_tagNumber?this.goal.tag:this.goal.tag+"-Layer "+this.goal.layer)},current_position(){return d.q$.getters.ForkHeight}},methods:{Show(e,t=!1){this.isTagInput=t,this.goal=e,this.input_sum=this.goal.value+"",this.number=this.goal.value,this.show=!0},HandleForkMoveBtnClick(){this.$swal.fire({text:"請確認牙叉上方/下方是否有障礙物!",title:"確定要將牙叉移動至此位置?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&setTimeout((async()=>{var e=await l.ks.Action("pose",this.number,1);e.confirm||this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}),100)}))},async ForkPositionAdjust(e){var t=await l.ks.Action("increase",e,1);t.confirm||this.$swal.fire({text:"",title:t.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},async ForkAction(e){"home"==e?this.$swal.fire({text:"",title:"確定要將牙叉移至Home點?",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async t=>{t.isConfirmed&&await l.ks.Action(e)})):await l.ks.Action(e)},HandleInputChanged(){},KeyboardInputChanged(e){if("enter"!=e)if("back"==e){var t=this.input_sum.length-1;this.input_sum=this.input_sum.substring(0,t),""==this.input_sum&&(this.input_sum="0")}else{if(this.is_modify_tagNumber&&"."==e)return;"0"==this.input_sum&&(this.input_sum=""),this.input_sum+=e}else this.show=!1}}},P=a(83744);const B=(0,P.Z)(O,[["render",U],["__scopeId","data-v-567d4c41"]]);var L=B,G={components:{SimpleKeyboardVue:u.Z,TeachTool:L},data(){return{TeachDatas:[{Tag:10,Name:"",Layers:[{Key:0,Value:{Name:"10-0",Up_Pose:12.2,Down_Pose:9}},{Key:1,Value:{Name:"10-1",Up_Pose:12.2,Down_Pose:9}}]},{Tag:20,Name:"",Layers:[{Key:0,Value:{Name:"20-0",Up_Pose:11.2,Down_Pose:1}},{Key:1,Value:{Name:"20-1",Up_Pose:33.2,Down_Pose:1}},{Key:2,Value:{Name:"20-2",Up_Pose:133.2,Down_Pose:1}}]}],OriDataJson:void 0,HasAnyChange:!1,loading:!1,selected_data:{},selected_tag:"all"}},watch:{HasAnyChange(e,t){d.k0.commit("setIsAnyChanged",e)}},computed:{StationOptions(){return this.TeachDatas.sort((e=>e.Tag)).map((e=>({value:e.Tag,text:`${e.Tag}-${e.Name}`})))},TeachDatasShown(){return"all"==this.selected_tag?this.TeachDatas:this.TeachDatas.filter((e=>e.Tag==this.selected_tag))},NewTagNumber(){var e=this.TeachDatas.length;return 0==e?1:this.TeachDatas[e-1].Tag+1},NewTagLayerDataTemplate(){return[{Key:0,Value:{Name:"1-0",Up_Pose:0,Down_Pose:0}},{Key:1,Value:{Name:"1-1",Up_Pose:0,Down_Pose:0}},{Key:2,Value:{Name:"1-2",Up_Pose:0,Down_Pose:0}}]}},methods:{GetRowClass(e){if(console.log(e.row),e.row.IsNewAdd||0==e.row.Tag)return"bg-info";var t=this.TeachDatasShown.filter((t=>t.Tag==e.row.Tag));return t.length>1?"bg-warning":"bg-light"},HandleStationSelected(e){},reload(){this.LoadTeachDataFromServer(),this.HasAnyChange=!1},async LoadTeachDataFromServer(){this.loading=!0,setTimeout((async()=>{try{this.TeachDatas=await l.ks.GetTeachData(),this.loading=!1,this.ResetOriDattaString()}catch(e){this.loading=!1}}),100)},async SaveHandler(){const e=this.TeachDatas.filter((e=>0==e.Tag));if(0!=e.length)return void this.$swal.fire({title:"請確認Tag設置不可為0",text:"",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"});const t=this.TeachDatas.map((e=>e.Tag)),a=[...new Set(t)];if(t.length!=a.length)return void this.$swal.fire({title:"Tag重覆設置!",text:"",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"});const s={};this.TeachDatas.forEach((e=>{const t=e.Tag.toString();s[t]={},e.Layers.forEach((e=>{const a=e.Key.toString();s[t][a]=e.Value}))})),this.ResetOriDattaString(),this.InputChanged();var n=await l.ks.SaveTeachData(s);n.confirm&&(this.LoadTeachDataFromServer(),this.HasAnyChange=!1,this.$swal.fire({icon:"success",title:"Fork Teach Data Save",text:"儲存成功!"}))},InputChanged(){var e=this.GetNonCommString(this.TeachDatas);this.HasAnyChange=e!=this.OriDataJson},async HandleNeedHandshakeCkbChanged(e){await l.ks.WorkstationHandshakeSetting(e.Tag,e.NeedHandshake)},InputClicked(e){setTimeout((()=>{this.$refs["teach_tool"].Show(this.selected_data)}),100)},TagNumberInputClicked(e){setTimeout((()=>{this.$refs["teach_tool"].Show(this.selected_data,!0)}),100)},AddTagTeachHandler(){var e=[{Tag:0,Layers:this.NewTagLayerDataTemplate,NeedHandshake:!0,IsNewAdd:!0}];this.TeachDatas=[...e,...this.TeachDatas],this.HasAnyChange=!0},RemoveTagTeachSetting(e){var t=this.TeachDatas.indexOf(e);this.TeachDatas.splice(t,1),this.InputChanged(),this.HasAnyChange=!0},GetNonCommString(e){return JSON.stringify(e).replaceAll('"',"")},ResetOriDattaString(){this.OriDataJson=this.GetNonCommString(this.TeachDatas),this.HasAnyChange=!1},HandleCellClicked(e,t,a,s){var n=t.property.split(":");if(1!=n.length){var i=n[0],o=parseInt(n[1]),r=e.Layers[o].Value[i];this.selected_data={tag:e.Tag,layer:o,pose:i,value:r}}else this.selected_data={tag:e.Tag,layer:void 0,pose:void 0,value:e.Tag}},HamdleVirtualKBValuechange(e){var t=this.TeachDatas.find((t=>t.Tag==e.tag));void 0==e.pose?t.Tag=e.value:t.Layers[e.layer].Value[e.pose]=e.value,this.InputChanged()}},mounted(){this.reload()}};const E=(0,P.Z)(G,[["render",r]]);var H=E},34951:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(66252),n=a(3577);function i(e,t,a,i,o,r){return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(a.keyboardClass)},null,2)}var o=a(32086),r=a.n(o),l={name:"SimpleKeyboard",props:{keyboardClass:{default:"simple-keyboard",type:String},input:{type:String},keyboard_type:{type:String,default(){return""}}},data:()=>({keyboard:null,lastinput:void 0}),mounted(){"number"==this.keyboard_type?this.keyboard=new(r())(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress,layout:{default:["+ - back","1 2 3","4 5 6","7 8 9",". 0 enter"]},theme:"hg-theme-default hg-layout-numeric numeric-theme"}):this.keyboard=new(r())(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress})},methods:{onChange(e){this.$emit("onChange",e)},onKeyPress(e){this.$emit("onKeyPress",e),"{shift}"!==e&&"{lock}"!==e||this.handleShift(),this.lastinput=e},handleShift(){let e=this.keyboard.options.layoutName,t="default"===e?"shift":"default";this.keyboard.setOptions({layoutName:t})},setInput(e){this.keyboard.setInput(e)}},watch:{input(e){this.keyboard.setInput(e)}}},d=a(83744);const u=(0,d.Z)(l,[["render",i],["__scopeId","data-v-bdf1bdb0"]]);var c=u},6771:function(){},18022:function(){},86045:function(){},98190:function(){},57333:function(){},6139:function(){},19594:function(e){"use strict";e.exports=JSON.parse('{"test":"TEST","initialize":"Initialize","initializing":"Initializing","reset_alarm":"Reset Alarm","buzzer_off":"Buzzer Off","cst-remove":"Remove CST","cst-remove-confirm-text":"Do you confirm to remove cargo?","login":"Login","logout":"Logout","connection-states":"Connect Status","battery-level":"Battery Level","mileage":"Mileage","status":"Status","abnormal-record":"Alarm History","operation":"Operation","3d_model":"3D Model","Status_info":"Status Info","current_position":"Current Location","target_position":"Target Location","action_name":"Action Name","tag_read_status":"Tag Read","abormal":"Abnormal","carrier_id":"Carrier ID","agv_control":"AGV Control","zaxis_up_down":"Z-Axis Control","agv_control_notify_text":"Please log in and switch to Offline & Manual mode before operating the vehicle manually.","zaxis_control_notify_text":"Please log in and switch to Offline & Manual mode before operating the Z-axis and bypassing the Hardware Limited setting.","up_limit_pose":"UP Limit Position","down_limit_pose":"DOWN Limit Position","up":"UP","down":"DOWN","original":"ORIGINAL","stop":"Stop","cancel_init_action_notify":"Are you sure you want to cancel the initialization process?","start_init_action_notify_fork_has_loading":"Fork has cargo noew,Do you confirm to proceed with the initialization process? Once the initialization process starts, the Fork will descend. Please ensure that there are no goods on the Fork and check for any obstacles around the AGV.","start_init_action_notify":"Do you confirm to proceed with the initialization process? Once the initialization process starts, the Fork will descend. Please ensure that there are no goods on the Fork and check for any obstacles around the AGV.","start_init_action_notify_submarin_agv":"Do you confirm to Initialize AGV?","charging_current":"Charging Current","wait_online_text":"AGV Online Process is running, Please wait...","refresh":"Refresh","clear_alarm_records":"Clear","backend_server_error":"Server Error","connecting":"Connecting...","agv-online":"AGV ON/OFFLine Switch","agv-online-alert":"AGV ONLINE?","agv-offline-alert":"AGV OFFLINE?","agv-auto-mode":"AGV Auto/Manual Switch","agv-auto-mode-alert":"AGV Auto Mode?","agv-manual-mode-alert":"AGV Manual Mode?","clear-alarm-data-confirm-text":"Clear Alarm History Data?","eq-handshake-e84":"EQ Hanshake(E84)","localization-state":"Localization State","map-matching-rate":"Map Matching Rate","coordination":"Coordination","offset":"Offset","angle":"Angle","only-gpm-user-can-modify-hs-signal":"Only GPM Developer can chnage HS Signal by manual","manual-operation":"Manual Operation","alarm-type":"Alarm Type","logout-confirm":"Do you confirm to Logout ?","VMSTask.TaskDelivery.TaskDispatchConfirm":"TASK DISPATCH CONFIRM","VMSTask.MapShow.ReLoadMapFromAGVS":"Reload Map From AGVS","ConnectionStates.AGVS":"AGVS","ConnectionStates.AGVControlSys":"VCS","ConnectionStates.IOModule":"IO"}')},46687:function(e){"use strict";e.exports=JSON.parse('{"test":"測試","initialize":"初始化","initializing":"初始化進行中","reset_alarm":"異常排除","buzzer_off":"蜂鳴器關閉","cst-remove":"移除卡匣","cst-remove-confirm-text":"確定要移除卡匣資料?","login":"登入","logout":"登出","connection-states":"連線狀態","battery-level":"電量","mileage":"里程數","status":"狀態","abnormal-record":"異常紀錄","operation":"操作","3d_model":"3D 模型","Status_info":"狀態資訊","current_position":"目前位置","target_position":"目標位置","action_name":"動作名稱","tag_read_status":"Tag讀取","abormal":"異常","carrier_id":"載物ID","agv_control":"控制","zaxis_up_down":"升降","agv_control_notify_text":"請先登入權限並Offline&Manual才可操作手動控車","zaxis_control_notify_text":"請先登入權限並Offline&Manual才可操作Z軸與by pass Hardware Limited設定","up_limit_pose":"上點位","down_limit_pose":"下點位","up":"上升","down":"下降","original":"原點","stop":"停止","cancel_init_action_notify":"確定要取消初始化動作?","start_init_action_notify_fork_has_loading":"Fork上有負載，確定要進行初始化動作? 初始化動作開始後 Fork 將會下降，請確認 AGV 周圍無障礙物","start_init_action_notify":"確定要進行初始化動作? 初始化動作開始後 Fork 將會下降,請確認 Fork上有無貨物，並確認 AGV 周圍無障礙物","start_init_action_notify_submarin_agv":"確定要進行初始化動作?","charging_current":"充電電流","wait_online_text":"AGV正在執行上下線請求，請稍後...","refresh":"重新整理","clear_alarm_records":"清除異常紀錄","backend_server_error":"車載系統異常","connecting":"連線中","agv-online":"AGV上/下線確認","agv-online-alert":"確定要將AGV ONLINE?","agv-offline-alert":"確定要將AGV OFFLINE?","agv-auto-mode":"AGV 手動/自動模式切換確認","agv-auto-mode-alert":"確定要將AGV 切換為自動模式?","agv-manual-mode-alert":"確定要將AGV 切換為手動模式?","clear-alarm-data-confirm-text":"確定要清除異常紀錄?","eq-handshake-e84":"設備交握(E84)","localization-state":"定位狀態","map-matching-rate":"地圖比對率","coordination":"座標","offset":"偏差值","angle":"角度","only-gpm-user-can-modify-hs-signal":"僅GPM權限使用者可手動變更AGV交握訊號","manual-operation":"手動操作","alarm-type":"警報類型","logout-confirm":"確定要登出?","VMSTask":{"TaskDelivery":{"DDD":"eeee"}},"VMSTask.TaskDelivery.TaskDispatchConfirm":"確定要派送此任務?","VMSTask.MapShow.ReLoadMapFromAGVS":"從派車系統重新下載圖資","ConnectionStates.AGVS":"派車系統","ConnectionStates.AGVControlSys":"車控系統","ConnectionStates.IOModule":"IO模組"}')}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,i){if(!s){var o=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],i=e[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(443===e?"about":e)+"."+{231:"fb2ef6f0",402:"4bd07cba",443:"1aec2974",580:"4ab594e9",723:"337b35d4",790:"f085410e",830:"f9f0296f"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{231:"43c35b29",402:"499beeff",580:"b64eaf63",723:"f94f3ece",790:"1b8375fb"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="agv_ui:";a.l=function(s,n,i,o){if(e[s])e[s].push(n);else{var r,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+i){r=c;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+i),r.src=s),e[s]=[n];var m=function(t,a){r.onerror=r.onload=null,clearTimeout(h);var n=e[s];if(delete e[s],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,s,n){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var o=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=r,i.parentNode&&i.parentNode.removeChild(i),n(l)}};return i.onerror=i.onload=o,i.href=t,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var n=a[s],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===e||i===t))return n}var o=document.getElementsByTagName("style");for(s=0;s<o.length;s++){n=o[s],i=n.getAttribute("data-href");if(i===e||i===t)return n}},s=function(s){return new Promise((function(n,i){var o=a.miniCssF(s),r=a.p+o;if(t(o,r))return n();e(s,r,null,n,i)}))},n={143:0};a.f.miniCss=function(e,t){var a={231:1,402:1,580:1,723:1,790:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=s(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,s){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var i=new Promise((function(a,s){n=e[t]=[a,s]}));s.push(n[2]=i);var o=a.p+a.u(t),r=new Error,l=function(s){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",r.name="ChunkLoadError",r.type=i,r.request=o,n[1](r)}};a.l(o,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,o=s[0],r=s[1],l=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var u=l(a)}for(t&&t(s);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},s=self["webpackChunkagv_ui"]=self["webpackChunkagv_ui"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(11508)}));s=a.O(s)})();
//# sourceMappingURL=app.9c759d8a.js.map