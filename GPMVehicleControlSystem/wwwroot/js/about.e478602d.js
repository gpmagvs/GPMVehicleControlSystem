"use strict";(self["webpackChunkagvs_ui"]=self["webpackChunkagvs_ui"]||[]).push([[443],{8630:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var o=a(3396),l=a(7139);const s={class:"p-1 bg-light text-dark"},n={class:"border rounded p-3 text-start w-100"},d=(0,o._)("h3",null,"FORK 測試",-1),i={class:"d-flex flex-row"},u={class:"my-1"},r={class:"my-1"},m={class:"px-3"},p={class:"text-start"};function _(e,t,a,_,c,w){const f=(0,o.up)("el-divider"),k=(0,o.up)("el-input-number"),v=(0,o.up)("el-form-item"),b=(0,o.up)("el-switch"),h=(0,o.up)("el-tag"),W=(0,o.up)("b-button"),V=(0,o.up)("el-form"),S=(0,o.up)("ForkAGV3D"),T=(0,o.up)("b-modal"),y=(0,o.up)("el-tab-pane"),U=(0,o.up)("el-button"),x=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(x,{modelValue:c.selected_tab,"onUpdate:modelValue":t[13]||(t[13]=e=>c.selected_tab=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{name:"fork_test",label:"Fork Test"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[d,(0,o.Wm)(f),(0,o._)("div",i,[(0,o.Wm)(V,{"label-width":"160px","label-position":"left"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{label:"測試LOOP"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.option.loopNum,"onUpdate:modelValue":t[0]||(t[0]=e=>c.option.loopNum=e),min:"1",max:"1000"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"上點位位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.option.up_limit_pose,"onUpdate:modelValue":t[1]||(t[1]=e=>c.option.up_limit_pose=e),min:"0",max:"176.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"下點位位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.option.down_limit_pose,"onUpdate:modelValue":t[2]||(t[2]=e=>c.option.down_limit_pose=e),min:"0",max:"170.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"速度"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.option.speed,"onUpdate:modelValue":t[3]||(t[3]=e=>c.option.speed=e),min:"0.1",max:"1.0",step:"0.1"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"測試前初始化"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:c.option.initalizeBeforeTest,"onUpdate:modelValue":t[4]||(t[4]=e=>c.option.initalizeBeforeTest=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"使用Random位置"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:c.option.useRandomPose,"onUpdate:modelValue":t[5]||(t[5]=e=>c.option.useRandomPose=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"次數達四分位數暫停"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:c.option.pauseWhenReachQuarter,"onUpdate:modelValue":t[6]||(t[6]=e=>c.option.pauseWhenReachQuarter=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"Current Position"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(c.current_pose),1)])),_:1})])),_:1}),(0,o.Wm)(v,{label:"測試狀態"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(c.forkTestState.state),1)])),_:1})])),_:1}),(0,o.Wm)(v,{label:"Fork動作"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(c.forkTestState.fork_action),1)])),_:1})])),_:1}),(0,o.Wm)(v,{label:"已完成次數"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{width:"100px"},effect:"dark",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(c.forkTestState.complete_loop_num)+"/"+(0,l.zw)(c.option.loopNum),1)])),_:1})])),_:1}),(0,o._)("div",u,[(0,o.Wm)(W,{disabled:w.start_btn_disabled,class:"w-100",variant:"primary",onClick:w.ForkTestStart},{default:(0,o.w5)((()=>[(0,o.Uk)("Start")])),_:1},8,["disabled","onClick"])]),(0,o._)("div",r,[(0,o.Wm)(W,{disabled:w.abort_btn_disabled,class:"w-100",variant:"danger",onClick:w.ForkTestAbort},{default:(0,o.w5)((()=>[(0,o.Uk)("中斷")])),_:1},8,["disabled","onClick"])])])),_:1}),(0,o.Wm)(S,{class:"mx-5"})]),(0,o.Wm)(T,{modelValue:w.show_reject_modal,"onUpdate:modelValue":t[7]||(t[7]=e=>w.show_reject_modal=e),centered:!0,"ok-only":!0},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,l.zw)(c.ack_response.Message),1)])),_:1},8,["modelValue"]),(0,o.Wm)(T,{modelValue:w.show_test_paused_model,"onUpdate:modelValue":t[8]||(t[8]=e=>w.show_test_paused_model=e),centered:!0,title:"測試已達四分位數","cancel-title":"中斷","ok-title":"繼續","no-close-on-backdrop":!0,"no-close-on-esc":!0,"cancel-variant":"danger",onOk:w.ContiunTestWhenPause,onCancel:w.ForkTestAbort},{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,l.zw)(`測試暫停中，已達${c.forkTestState.complete_loop_num}`),1)])),_:1},8,["modelValue","onOk","onCancel"])])])),_:1}),(0,o.Wm)(y,{name:"move_test",label:"Move Test"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(V,{"label-width":"110","label-position":"left"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{label:"角度"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.move_test_options.theta_move,"onUpdate:modelValue":t[9]||(t[9]=e=>c.move_test_options.theta_move=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"持續時間(秒)"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.move_test_options.duration,"onUpdate:modelValue":t[10]||(t[10]=e=>c.move_test_options.duration=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"停滯時間(秒)"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.move_test_options.delay_time,"onUpdate:modelValue":t[11]||(t[11]=e=>c.move_test_options.delay_time=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(v,{label:"旋轉速度"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:c.move_test_options.rotation_speed,"onUpdate:modelValue":t[12]||(t[12]=e=>c.move_test_options.rotation_speed=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o._)("div",p,[(0,o.Wm)(U,{onClick:w.HandleMoveTestStart,style:{width:"125px"},type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Start")])),_:1},8,["onClick"]),(0,o.Wm)(U,{onClick:w.HandleMoveTestStop,style:{width:"125px"},type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("Stop")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["modelValue"])])}var c=a(7327),w=a(6265),f=a.n(w),k=a(663),v=f().create({baseURL:k.Z.backend_host});class b{constructor(){(0,c.Z)(this,"loopNum",100),(0,c.Z)(this,"up_limit_pose",120),(0,c.Z)(this,"down_limit_pose",0),(0,c.Z)(this,"speed",1),(0,c.Z)(this,"useRandomPose",!0),(0,c.Z)(this,"initalizeBeforeTest",!1),(0,c.Z)(this,"pauseWhenReachQuarter",!0)}}class h{}let W={async Start(e){console.warn(e);var t=await v.post("/api/RDTEST/fork_test/start",e);return t.data},async Abort(){var e=await v.post("/api/RDTEST/fork_test/abort");return e.data},async Continue(){var e=await v.post("/api/RDTEST/fork_test/continue");return e.data}},V={async Start(e){console.warn(e);var t=await v.post("/api/RDTEST/MoveTest",e);return t.data},async Stop(){var e=await v.post("/api/RDTEST/MoveTest/Stop");return e.data}};var S=a(487),T=a(3259),y=a(4425),U={components:{ForkAGV3D:y.Z},data(){return{current_pose:-1,option:new b,forkTestState:new h,ack_response:{Success:!0,Message:""},selected_tab:"move_test",move_test_options:{theta_move:90,duration:60,delay_time:1,rotation_speed:.3}}},methods:{async ForkTestStart(){this.ack_response=await W.Start(this.option),localStorage.setItem("fork-test-options",JSON.stringify(this.option))},async ForkTestAbort(){this.ack_response=await W.Abort()},async ContiunTestWhenPause(){this.ack_response=await W.Continue()},async HandleMoveTestStart(){var e=await V.Start(this.move_test_options);e.result||this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},HandleMoveTestStop(){V.Stop()}},computed:{abort_btn_disabled(){return"RUNNING"!=this.forkTestState.state},start_btn_disabled(){return"RUNNING"==this.forkTestState.state},show_reject_modal(){return 0==this.ack_response.Success},show_test_paused_model(){return"PAUSE"==this.forkTestState.state}},mounted(){T.Z.on("/z_axis_position",(e=>{this.current_pose=e}));var e=new S.Z("fork_test_state");e.Connect(),e.wssocket.onmessage=e=>{var t=JSON.parse(e.data);this.forkTestState=t};var t=localStorage.getItem("fork-test-options");t&&(this.option=JSON.parse(t))}},x=a(89);const C=(0,x.Z)(U,[["render",_]]);var g=C}}]);
//# sourceMappingURL=about.e478602d.js.map