(function(){var e={6700:function(e,t,a){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=i,e.exports=n,n.id=6700},1495:function(e,t,a){"use strict";var s=a(7327);class n{constructor(e){(0,s.Z)(this,"BatteryLevel",3),(0,s.Z)(this,"IsCharging",!1),(0,s.Z)(this,"ChargeCurrent",0),(0,s.Z)(this,"IsError",!0),(0,s.Z)(this,"CircuitOpened",!1),(0,s.Z)(this,"BatteryID",0),(0,s.Z)(this,"SensorInfo",new i),this.BatteryLevel=e}}class i{constructor(){(0,s.Z)(this,"IsExistSensor1ON",!1),(0,s.Z)(this,"IsExistSensor2ON",!1),(0,s.Z)(this,"IsDockingSensor1ON",!1),(0,s.Z)(this,"IsDockingSensor2ON",!1),(0,s.Z)(this,"IsLockSensorON",!1),(0,s.Z)(this,"IsUnlockSensorON",!1)}}t["Z"]=n},1755:function(e,t){"use strict";class a{constructor(){this.X=0,this.Y=0,this.Theta=0,this.DestinPointID=1,this.Direction=0,this.LaserMode=0,this.Speed=1,this.UltrasonicDistance=30}}t["Z"]=a},2274:function(e,t,a){"use strict";var s=a(7327),n=a(7780),i=a(1495);class r{constructor(){(0,s.Z)(this,"APPVersion","1.0.0"),(0,s.Z)(this,"Agv_Type",0),(0,s.Z)(this,"AutoMode",0),(0,s.Z)(this,"AGVC_ID",-1),(0,s.Z)(this,"AngularSpeed",0),(0,s.Z)(this,"Angle",0),(0,s.Z)(this,"AlarmCodes",[]),(0,s.Z)(this,"AGV_Direct","STOP"),(0,s.Z)(this,"BCR_State_MoveBase",{state:0,tagID:0,xValue:0,yValue:0,theta:0}),(0,s.Z)(this,"BatteryStatus",new Array<i.Z>0),(0,s.Z)(this,"CarName","AGV"),(0,s.Z)(this,"CST_Data",""),(0,s.Z)(this,"Current_LASER_MODE","Bypass"),(0,s.Z)(this,"DriversStates",new Array<n.Z>0),(0,s.Z)(this,"IsAGVPoseError",!1),(0,s.Z)(this,"IsInitialized",!1),(0,s.Z)(this,"IsSystemIniting",!1),(0,s.Z)(this,"LinearSpeed",0),(0,s.Z)(this,"Laser_Mode",0),(0,s.Z)(this,"Last_Visited_Tag",1),(0,s.Z)(this,"Last_Visit_MapPoint",{Name:"UNKNOWN"}),(0,s.Z)(this,"LocStatus",10),(0,s.Z)(this,"LightsStates",{Front:!1,Back:!1,Right:!1,Left:!1,Run:!1,Down:!1,Idle:!1,Online:!1}),(0,s.Z)(this,"MapComparsionRate",-1),(0,s.Z)(this,"Mileage",0),(0,s.Z)(this,"MainState","DOWN"),(0,s.Z)(this,"NavInfo",{Destination:"",Speed_max_limit:-1,PathPlan:[],DestinationMapPoint:{Name:"UNKNOWN"}}),(0,s.Z)(this,"NewestAlarm",void 0),(0,s.Z)(this,"OnlineMode",0),(0,s.Z)(this,"Pose",{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0,w:0}}),(0,s.Z)(this,"Simulation",!1),(0,s.Z)(this,"SubState","DOWN"),(0,s.Z)(this,"Tag",-1),(0,s.Z)(this,"UltrSensorState",new o),(0,s.Z)(this,"ZAxisDriverState",new n.Z),(0,s.Z)(this,"ZAxisActionName",""),(0,s.Z)(this,"ForkHasLoading",!1),(0,s.Z)(this,"HandShakeTimers",{TA1_Wait_L_U_REQ_ON:0,TA2_Wait_EQ_READY_ON:0,TA3_Wait_EQ_BUSY_ON:0,TA4_Wait_EQ_BUSY_OFF:0,TA5_Wait_L_U_REQ_OFF:0})}}class o{constructor(){(0,s.Z)(this,"state",1),(0,s.Z)(this,"errorCode",1),(0,s.Z)(this,"errorString","通訊異常"),(0,s.Z)(this,"dirFront",0),(0,s.Z)(this,"dirRear",0),(0,s.Z)(this,"dirLeft",0),(0,s.Z)(this,"dirRight",0)}}t["ZP"]=r},3251:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var s=a(7327);class n{constructor(){(0,s.Z)(this,"Inputs",void 0),(0,s.Z)(this,"Outputs",void 0),(0,s.Z)(this,"IsE84HsUseEmulator",void 0),this.IsE84HsUseEmulator=!1,this.Inputs=[new i("X0000","name1"),new i("X0001","name2")],this.Outputs=[new i("Y0000","name1"),new i("Y0001","name2")]}}class i{constructor(e,t){(0,s.Z)(this,"Address",0),(0,s.Z)(this,"address_display",""),(0,s.Z)(this,"Name",""),(0,s.Z)(this,"State",!1),(0,s.Z)(this,"DigitalType",0),this.address_display=e,this.Name=t}}t["Z"]=n},7780:function(e,t,a){"use strict";var s=a(7327);class n{constructor(){(0,s.Z)(this,"name",""),(0,s.Z)(this,"state",0),(0,s.Z)(this,"errorCode",0),(0,s.Z)(this,"speed",0),(0,s.Z)(this,"position",0),(0,s.Z)(this,"voltage",0),(0,s.Z)(this,"outPercentage",0),(0,s.Z)(this,"outCurrent",0),(0,s.Z)(this,"overload",0)}}t["Z"]=n},7943:function(e,t){"use strict";class a{constructor(e="unknown",t=0,a=0,s="left-top"){this.name=e,this.status=0,this.active=!0,this.visible=!0,this.error_code=0,this.position={x:t,y:a},this.textPosition=s,this.info_show_style={line1:{x_length:120,rotation:0}}}}t["Z"]=a},3867:function(e,t,a){"use strict";var s=a(7014);a(3555),a(6349);let n={Success(e,t="bottom",a=3e3){(0,s.NU)({message:e,position:t,type:"success",duration:a,background:"rgba(7, 193, 96,0.7)",onclick:()=>{(0,s.rz)()}})},Primary(e,t="top",a=3e3){(0,s.NU)({message:e,position:t,type:"primary",duration:a,onclick:()=>{(0,s.rz)()}})},Danger(e,t="top",a=3e3){(0,s.NU)({message:e,position:t,type:"danger",duration:a,onclick:()=>{(0,s.rz)()}})},Warning(e,t="top",a=3e3){(0,s.NU)({message:e,position:t,type:"warning",duration:a,onclick:()=>{(0,s.rz)()}})}};t["Z"]=n},8418:function(e,t,a){"use strict";a.d(t,{DW:function(){return w},Hb:function(){return k},IC:function(){return h},Kl:function(){return A},Lv:function(){return f},S1:function(){return v},Wf:function(){return l},XZ:function(){return u},_e:function(){return g},au:function(){return M},bI:function(){return S},br:function(){return y},d3:function(){return b},dE:function(){return d},hf:function(){return V},kg:function(){return C},ks:function(){return x},lQ:function(){return I},tU:function(){return p},vI:function(){return D},wz:function(){return c},xb:function(){return m},yx:function(){return _}});var s=a(6265),n=a.n(s),i=a(663),r=a(1755),o=n().create({baseURL:i.Z.backend_host}),l={async GetSettings(){var e=await o.get("api/System/Settings");return e}};async function d(){var e=await o.post("api/VMS/EMO");return e}async function u(){var e=await o.get("api/VMS/Where_r_u");return e.data}async function c(){var e=await o.post("api/VMS/Initialize");return e.data}async function m(){var e=await o.get("api/VMS/CancelInitProcess");return e.data}async function h(){var e=await o.post("api/VMS/ResetAlarm");return e}async function g(){var e=await o.post("api/VMS/BuzzerOff");return e}async function _(){var e=await o.post("api/VMS/RemoveCassette");return e.data}const p={async AGVMove_UP(e=.08){var t=await o.get(`api/ManualOperator/Forward?speed=${e}`);return t},async AGVMove_DOWN(e=.08){var t=await o.get(`api/ManualOperator/Backward?speed=${e}`);return t},async AGVMove_LEFT(e=.1){var t=await o.get(`api/ManualOperator/Left?speed=${e}`);return t},async AGVMove_RIGHT(e=.1){var t=await o.get(`api/ManualOperator/Right?speed=${e}`);return t},async AGVMove_STOP(){var e=await o.get("api/ManualOperator/Stop");return e},async AGVMove_FordwardRight(){var e=await o.get("api/ManualOperator/FordwardRight");return e},async AGVMove_FordwardLeft(){var e=await o.get("api/ManualOperator/FordwardLeft");return e},async AGVMove_BackwardRight(){var e=await o.get("api/ManualOperator/BackwardRight");return e},async AGVMove_BackwardLeft(){var e=await o.get("api/ManualOperator/BackwardLeft");return e}},w={async AutoModeSwitch(e){var t=await o.get(`api/VMS/AutoMode?Mode=${e}`);return t.data},async OnlineModeSwitch(e){var t=await o.get(`api/VMS/OnlineMode?Mode=${e}`);return t.data}};async function v(e=0){var t=await o.get("api/VMS/Reset_Mileage");return t.data}async function f(e=0){var t=await o.get(`api/VMS/LaserMode?mode=${e}`);return t.data}const A={async DO_State_Change(e,t){var a=await o.get(`api/VMS/DIO/DO_State?address=${e}&state=${t}`);return a.data},async DI_State_Change(e,t){var a=await o.get(`api/VMS/DIO/DI_State?address=${e}&state=${t}`);return a.data},async HsSignalChange(e="AGV|EQ",t,a){var s=await o.get(`api/VMS/DIO/Set${e}HsSignalState?signal_name=${t}&state=${a}`);return s.data}},y={async Brake(){var e=await o.get("api/VMS/Brake");return e.data},async UnBrake(){var e=await o.get("api/VMS/UnBrake");return e.data}},b={async TotalAlarmCount(){var e=await o.get("api/AlarmTable/Total");return e.data},async QueryByPage(e=1,t=16){var a=await o.get(`api/AlarmTable/Query?page=${e}&page_size=${t}`);return a.data},async ClearAlarms(){await o.get("api/AlarmTable/Clear")}},S={async Action(e,t,a="",s=""){console.info(e,t,a,s);var n=await o.get(`api/LocalNav/Action?action=${e}&from=${t}&to=${a}&cst_id=${s}`);return n.data},async MoveTo(e,t,a,s){await o.get(`api/LocalNav/MoveTo?x=${e}&y=${t}&theta=${a}&point_id=${s}`)},async MoveTest(e=r.Z){try{var t=await o.post("api/LocalNav/MoveTo",e);return t.data}catch(a){return{confirm:!1,message:a.message}}}};async function k(){try{var e=await o.get("api/VMS/TriggerCSTReader");return e.data.barcode}catch(t){return"Network Error"}}async function C(){try{var e=await o.get("api/VMS/StopCSTReader");return e.data}catch(t){return!1}}async function D(){try{var e=await o.get("api/VMS/FindTagCenter");return e.data}catch(t){return{confirm:!1,message:t}}}async function I(e,t){await o.get(`api/VMS/BatteryLockCtrl?battery_no=${e}&islock=${t}`)}async function V(){var e=await o.get("api/VMS/RechargeCircuit");return e.data}const x={async GetTeachData(){var e=await o.get("api/VMS/Fork/TeachDatas");return e.data},async SaveTeachData(e){var t=await o.post("api/VMS/Fork/SaveTeachDatas",e);return t.data},async SaveUnitTeachData(e){var t=await o.post("api/VMS/Fork/SaveUnitTeachData",e);return t.data},async RemoveTagTeachData(e){var t=await o.get(`api/VMS/Fork/RemoveTagTeachData?tag=${e}`);return t.data},async RemoveUnitTeachData(e,t){var a=await o.get(`api/VMS/Fork/RemoveUnitTeachData?tag=${e}&layer=${t}`);return a.data},async ARM_Extend(){var e=await o.get("api/VMS/Fork/Arm/Extend");return e.data},async ARM_Shorten(){var e=await o.get("api/VMS/Fork/Arm/Shorten");return e.data},async ARM_Stop(){var e=await o.get("api/VMS/Fork/Arm/Stop");return e.data},async Action(e="",t=0,a=0){var s=await o.get(`api/VMS/Fork?action=${e}&pose=${t}&speed=${a}`);return s.data},async SetTagHeightLimit(e,t,a,s){return!0}},M={async Query(e){var t=await o.post("api/Log/Query",e);return t.data}}},487:function(e,t,a){"use strict";var s=a(663),n=a(3259),i=s.Z.backend_host.replace("http","ws");class r{constructor(e,t){this.wssocket=null,this.closed_actived=!1,this.previousWsState=WebSocket.CLOSED,n.Z.on("/ws_force_close",(()=>{this.Close()})),e.startsWith("/")&&(e=e.substr(1)),this.ws_path=e,this.ws_url=void 0==t?`${i}/${this.ws_path}`:`${t}/${this.ws_path}`}Connect(){console.info(`Try Connect to : ${this.ws_url}`);const e=new WebSocket(`${this.ws_url}`);e.onerror=e=>{console.info(`Try Connect to : ${this.ws_url} ON ＥＲＲＯＲ FAIL`)},this.wssocket=e}ReconnectWorker(){console.info(`[Reconnect] Try Connect to : ${this.ws_url}`),this.wssocket=new WebSocket(`${this.ws_url}`),this.wssocket.onmessage=this.onmessageHandler,this.wssocket.onclose=this.oncloseHandler,this.wssocket.onopen=this.onopenHandler}Close(){this.closed_actived=!0,clearInterval(this.alive_check_timer),this.wssocket&&this.wssocket.close()}set onclose(e){this.oncloseHandler=e,this.wssocket.onclose=e}get onclose(){return this.wssocket.onclose}set onopen(e){this.onopenHandler=e,this.wssocket.onopen=e}get onopen(){return this.wssocket.onopen}set onmessage(e){this.onmessageHandler=e,this.wssocket.onmessage=e}get onmessage(){return this.wssocket.onmessage}SendAliveCheck(){this.alive_check_timer=setInterval((()=>{this.wssocket&&(this.wssocket.readyState==WebSocket.CONNECTING||(this.wssocket.readyState==WebSocket.OPEN&&this.wssocket.send("alive"),this.wssocket.readyState!=this.previousWsState&&this.wssocket.readyState==WebSocket.CLOSED&&this.ReconnectWorker()),this.previousWsState=this.wssocket.readyState)}),1e3)}}t["Z"]=r},3259:function(e,t,a){"use strict";var s=a(1373);const n=(0,s.Z)();t["Z"]=n},663:function(e,t,a){"use strict";a.d(t,{i:function(){return n}});var s={get backend_host(){return`${window.location.protocol}//${window.location.host}`}};const n="U.23.9.12.0";t["Z"]=s},9401:function(e,t,a){"use strict";var s=a(9242),n=a(3396),i=a(7139);const r={key:0,class:"fixed-bottom text-right",id:"vcs-alarms"};function o(e,t,a,o,l,d){const u=(0,n.up)("el-alert"),c=(0,n.up)("SideMenuDrawer"),m=(0,n.up)("router-view"),h=(0,n.up)("SystemSettingsView");return(0,n.wg)(),(0,n.iD)("div",{class:"appcontainer",style:(0,i.j5)(d.AppBorderStyle)},[void 0!=d.CurrentAlarms&&d.CurrentAlarms.length>0?((0,n.wg)(),(0,n.iD)("div",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.AlarmCodesGroup,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t},[(0,n.Wm)(u,{"show-icon":"",type:0==e.Alarm.ELevel?"warning":"error",title:`${d.Timeformat(e.Alarm.Time)}-[${t}]`,description:`${e.Alarm.Description}(${""==e.Alarm.CN?e.Alarm.Description:e.Alarm.CN})`},null,8,["type","title","description"])])))),128))])):(0,n.kq)("",!0),(0,n.wy)((0,n._)("i",{onClick:t[0]||(t[0]=(...e)=>d.ToggleMenu&&d.ToggleMenu(...e)),class:"bi text-primary bi-list menu-toggle-icon"},null,512),[[s.F8,!1]]),(0,n.Wm)(c,{ref:"side_menu"},null,512),(0,n.Wm)(m,null,{default:(0,n.w5)((({Component:e})=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:1}),(0,n.Wm)(h)],4)}a(7658);var l=a(3259);const d=e=>((0,n.dD)("data-v-f77d3bda"),e=e(),(0,n.Cn)(),e),u={class:"side-menu"},c=d((()=>(0,n._)("div",{class:"menu-item-container"},"SETTINGS",-1)));function m(e,t,a,s,i,r){const o=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(o,{modelValue:i.show_draw,"onUpdate:modelValue":t[2]||(t[2]=e=>i.show_draw=e),direction:"ltr",title:"GPM VMS",size:"30%"},{default:(0,n.w5)((()=>[(0,n._)("div",{onClick:t[0]||(t[0]=e=>r.PageSwitch("/")),class:"menu-item-container"},"VMS"),(0,n._)("div",{onClick:t[1]||(t[1]=e=>r.PageSwitch("/rd_test")),class:"menu-item-container"},"TEST"),c])),_:1},8,["modelValue"])])}var h={data(){return{show_draw:!1}},methods:{Show(){this.show_draw=!0},PageSwitch(e){var t=this.$router.currentRoute.value.path;e!=t&&this.$router.push(e),this.show_draw=!1}}},g=a(89);const _=(0,g.Z)(h,[["render",m],["__scopeId","data-v-f77d3bda"]]);var p=_,w=a(6750),v=a(6797),f=a.n(v);const A=(0,n._)("h2",{class:"text-start"},"Settings",-1);function y(e,t,a,s,i,r){const o=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o,{modelValue:i.drawer_show,"onUpdate:modelValue":t[0]||(t[0]=e=>i.drawer_show=e),size:"50%",direction:"rtl"},{header:(0,n.w5)((()=>[A])),_:1},8,["modelValue"])])}var b=a(8418),S={data(){return{drawer_show:!1,settings:{LogFolder:"GPM_AGV_LOG",AgvType:1,SID:"001:001:001",VehicleName:"AGV_001",SimulationMode:!0,WagoSimulation:!0,ActiveTrafficControl:!1,EQHandshakeBypass:!1,CST_READER_TRIGGER:!1,ForkLifer_Enable:!1,LDULD_Task_No_Entry:!1,LastVisitedTag:17,ForbidToOnlineTags:[49],CutOffChargeRelayCurrentThreshodlval:5e3,LDULD_Laser_Mode:0,Spin_Laser_Mode:5,LDULD_FrontBackLaser_Bypass:!0,Connections:{RosBridge:{IP:"192.168.235.130",Port:9090},Wago:{IP:"127.0.0.1",Port:9999},AGVS:{IP:"127.0.0.1",Port:5036}},VMSParam:{LocalIP:"127.0.0.1",Protocol:1,MapUrl:"http://127.0.0.1:5216/api/Map"},MapParam:{LocalMapFileName:"/temp/Map_UMTC_AOI.json"},EQHandshakeMethod:2,LOAD_OBS_DETECTION:{Enable_Load:!1,Enable_UnLoad:!1,Duration:4},CST_EXIST_DETECTION:{Before_In:!1,After_EQ_Busy_Off:!1},SensorBypass:{BeltSensorBypass:!0}}}},mounted(){l.Z.on("show-settings",(()=>{this.drawer_show=!0})),this.DownloadSettings()},methods:{async DownloadSettings(){this.settings=await b.Wf.GetSettings()}}};const k=(0,g.Z)(S,[["render",y]]);var C=k,D={components:{SideMenuDrawer:p,SystemSettingsView:C},data(){return{showMenuToggleIcon:!1}},methods:{ToggleMenu(){this.$refs.side_menu.Show()},Timeformat(e,t="yyyy-MM-DD HH:mm:ss"){return f()(e).format(t)}},computed:{CurrentSystemMsg(){return w.I7.getters.SysMessages},CurrentAlarms(){return w.q$.getters.AlarmCodes},AlarmCodesGroup(){return w.q$.getters.AlarmGroup},VehicleName(){return w.q$.getters.AGVName},AppBorderStyle(){var e=Object.values(this.AlarmCodesGroup),t=0!=e.filter((e=>0!=e.Alarm.ELevel)).length;return{border:0==e.length?"":t?"5px solid red":"5px solid gold"}}},watch:{VehicleName(e,t){document.title="GPM-"+e}},mounted(){document.title="GPM AGV",l.Z.on("/god_mode_changed",(e=>{this.showMenuToggleIcon=e})),l.Z.on("idle",(e=>{this.$router.push("/idle")}))}};const I=(0,g.Z)(D,[["render",o]]);var V=I,x=a(2483);const M=e=>((0,n.dD)("data-v-33f53cd0"),e=e(),(0,n.Cn)(),e),T={class:"home h-100"},O={class:"main-content"},U={class:"lang-switch"},L={key:0,class:"server-error py-1 border fixed-top"},G={class:"agv-name-in-alarm px-2"},W=M((()=>(0,n._)("i",{class:"bi bi-exclamation-diamond"},null,-1))),B={class:"d-flex flex-row h-100"},N={class:"side h-100"},P={class:"opt-buttons px-1 py-1 d-flex flex-column"},Z={class:"modes bg-light border rounded m-1 p-3 py-1 px-3 text-start"},E={class:"d-flex flex-row"},z=M((()=>(0,n._)("div",{class:"mode-item-label py-2"},"Online Mode",-1))),R={class:"d-flex flex-row"},H=M((()=>(0,n._)("div",{class:"mode-item-label py-2"},"Auto Mode",-1))),F={class:"connection-status bg-light border rounded m-1 p-3 py-1"},j={class:"state-title"},$={class:"bg-light border rounded m-1 p-3 py-1"},q=M((()=>(0,n._)("div",{class:"state-title"},"當前座標",-1))),Q={style:{"font-size":"18px"}},Y={class:"mileage bg-light border rounded m-1 p-3 py-1"},X={class:"state-title"},K={class:"m-2 p-3 py-1"},J={class:"modals"},ee={class:"py-3"},te={ref:"online-fail-msg"};function ae(e,t,a,r,o,l){const d=(0,n.up)("AGVHeader"),u=(0,n.up)("jw_switch"),c=(0,n.up)("BatteryGroup"),m=(0,n.up)("b-button"),h=(0,n.up)("login"),g=(0,n.up)("el-switch"),_=(0,n.up)("connection_state"),p=(0,n.up)("mileage"),w=(0,n.up)("emo"),v=(0,n.up)("MainContent"),f=(0,n.up)("b-modal"),A=(0,n.Q2)("loading");return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",T,[(0,n.Wm)(d),(0,n._)("div",O,[(0,n._)("div",U,[(0,n.Wm)(u,{onSwitch:l.LangChangeHandle,default:o.IsUseChinese,active_text:"CH",active_color:"rgb(0, 204, 0)",inactive_text:"EN",inactive_color:"rgb(9, 76, 176)"},null,8,["onSwitch","default"])]),o.back_end_server_err?((0,n.wg)(),(0,n.iD)("div",L,[(0,n._)("div",G,(0,i.zw)(o.VMSData.CarName),1),W,(0,n.Uk)(" "+(0,i.zw)(e.$t("backend_server_error")),1)])):(0,n.kq)("",!0),(0,n.Wm)(c,{battery_states:o.VMSData.BatteryStatus},null,8,["battery_states"]),(0,n._)("div",B,[(0,n._)("div",N,[(0,n._)("div",P,[(0,n.Wm)(m,{disabled:o.back_end_server_err||o.VMSData.IsSystemIniting,onClick:t[0]||(t[0]=e=>l.AGVInitialize()),class:(0,i.C_)(["mb-1 p-2",""==o.VMSData.SubState?"down":o.VMSData.SubState.toLowerCase()]),block:""},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,i.zw)(e.$t("initialize")),1)])),_:1},8,["disabled","class"]),(0,n.Wm)(m,{disabled:o.back_end_server_err,onClick:t[1]||(t[1]=e=>l.AGVResetAlarm()),class:"mb-1 p-2 border",block:"",variant:l.alarmResetBtnVariant},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,i.zw)(e.$t("reset_alarm")),1)])),_:1},8,["disabled","variant"]),(0,n.Wm)(m,{disabled:o.back_end_server_err,onClick:t[2]||(t[2]=e=>l.AGVBuzzerOff()),variant:"light",class:"mb-1 p-2 border",block:""},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,i.zw)(e.$t("buzzer_off")),1)])),_:1},8,["disabled"]),2!=o.VMSData.Agv_Type?((0,n.wg)(),(0,n.j4)(m,{key:0,disabled:o.back_end_server_err,onClick:t[3]||(t[3]=e=>l.ShowRemoveCstDialog()),variant:"light",class:"mb-1 p-2 border",block:""},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,i.zw)(e.$t("cst-remove")),1)])),_:1},8,["disabled"])):(0,n.kq)("",!0),(0,n.Wm)(m,{disabled:o.back_end_server_err,variant:l.IsLogin?"danger":"outline-dark",class:"mb-1 p-2 border",block:"",onClick:t[4]||(t[4]=e=>l.ShowLogin())},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,i.zw)(l.LoginBtnText),1)])),_:1},8,["disabled","variant"]),(0,n.Wm)(h,{ref:"login"},null,512)]),(0,n._)("div",Z,[(0,n._)("div",E,[z,(0,n.Wm)(g,{modelValue:l.IsOnlineMode,"onUpdate:modelValue":t[5]||(t[5]=e=>l.IsOnlineMode=e),onClick:t[6]||(t[6]=(0,s.iM)((e=>l.OnlineModeSwitchHandle()),["prevent"])),disabled:o.back_end_server_err||o.VMSData.IsSystemIniting,width:"75",size:"large","inline-prompt":"","inactive-text":"Offline","active-text":"Online","active-color":"rgb(13, 110, 253)","inactive-color":"rgb(220, 53, 69)"},null,8,["modelValue","disabled"])]),(0,n._)("div",R,[H,(0,n.Wm)(g,{modelValue:l.IsAutoMode,"onUpdate:modelValue":t[7]||(t[7]=e=>l.IsAutoMode=e),onClick:t[8]||(t[8]=(0,s.iM)((e=>l.AutoModeSwitchHandle()),["stop","prevent"])),disabled:o.back_end_server_err||o.VMSData.IsSystemIniting,width:"75",size:"large","inline-prompt":"","inactive-text":"Manual","active-text":"Auto","active-color":"rgb(13, 110, 253)","inactive-color":"rgb(220, 53, 69)"},null,8,["modelValue","disabled"])])]),(0,n._)("div",F,[(0,n._)("div",j,(0,i.zw)(e.$t("connection-states")),1),(0,n.Wm)(_)]),(0,n._)("div",$,[q,(0,n._)("span",Q,"("+(0,i.zw)(o.VMSData.Pose.position.x.toFixed(2))+","+(0,i.zw)(o.VMSData.Pose.position.y.toFixed(2))+")",1)]),(0,n._)("div",Y,[(0,n._)("div",X,(0,i.zw)(e.$t("mileage")),1),(0,n.Wm)(p)]),(0,n._)("div",K,[(0,n.Wm)(w,{disabled:o.back_end_server_err},null,8,["disabled"])])]),(0,n.Wm)(v,{VMSData:o.VMSData},null,8,["VMSData"])]),(0,n._)("div",J,[(0,n.Wm)(f,{modelValue:o.wait_online_request_dialog_show,"onUpdate:modelValue":t[9]||(t[9]=e=>o.wait_online_request_dialog_show=e),title:"AGV Online Requesting",centered:!0,hideFooter:!0,noCloseOnBackdrop:!0,noCloseOnEsc:!0,hideHeaderClose:!0,"header-bg-variant":"primary","header-text-variant":"light"},{default:(0,n.w5)((()=>[(0,n._)("p",ee,(0,i.zw)(e.$t("wait_online_text")),1)])),_:1},8,["modelValue"]),(0,n.Wm)(f,{modelValue:o.ShowOnlineFailDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>o.ShowOnlineFailDialog=e),"header-bg-variant":"danger","header-text-variant":"light",centered:!0,title:"上線請求失敗","ok-only":!0},{default:(0,n.w5)((()=>[(0,n._)("p",te,null,512)])),_:1},8,["modelValue"])])])])),[[A,o.loading]])}const se=e=>((0,n.dD)("data-v-71c86fd7"),e=e(),(0,n.Cn)(),e),ne={class:"fixed-top"},ie={class:"status d-flex flex-row"},re={class:"sys-name flex-fill"},oe={class:"px-2",style:{width:"50px",position:"absolute"}},le=se((()=>(0,n._)("div",null,"GPM AGV",-1))),de={class:"account-name flex-fill"};function ue(e,t,a,s,r,o){const l=(0,n.up)("uploader"),d=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",ne,[(0,n._)("div",ie,[(0,n._)("div",re,[(0,n._)("div",oe,[o.IsGodUser?((0,n.wg)(),(0,n.iD)("i",{key:0,onClick:t[0]||(t[0]=(...e)=>o.HandleSettingIconClick&&o.HandleSettingIconClick(...e)),class:"bi bi-sliders"})):(0,n.kq)("",!0)]),le]),(0,n._)("div",{class:(0,i.C_)([""==o.SubStatus?"down":o.SubStatus.toLowerCase(),"agvc-name flex-fill"]),onDblclick:t[1]||(t[1]=e=>o.where_r_u())},(0,i.zw)(""==o.AGVName?"AGV":o.AGVName),35),(0,n._)("div",de,(0,i.zw)(o.UserName),1),(0,n._)("div",{onDblclick:t[3]||(t[3]=e=>o.VersionTextClickHandle()),class:"version-name flex-fill"},[(0,n.Uk)((0,i.zw)(o.APPVersion)+" ",1),o.IsGodUser?((0,n.wg)(),(0,n.iD)("i",{key:0,onClick:t[2]||(t[2]=()=>{r.uploadVisible=!0}),class:"bi bi-cloud-upload"})):(0,n.kq)("",!0)],32),(0,n.Wm)(d,{draggable:"",title:"File Upload",modelValue:r.uploadVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>r.uploadVisible=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(l)])),_:1},8,["modelValue"])])])}function ce(e,t,a,s,r,o){const l=(0,n.up)("el-button"),d=(0,n.up)("el-upload");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(d,{class:"upload-demo",ref:"upload",action:o.action_api,"on-preview":o.handlePreview,"on-remove":o.handleRemove,"file-list":r.fileList,"auto-upload":!1,"on-success":o.handleUploadSuccess,"on-error":o.handleUploadError,multiple:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{ref:"select_file",type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("選擇更新檔")])),_:1},512)])),_:1},8,["action","on-preview","on-remove","file-list","on-success","on-error"]),(0,n.Wm)(l,{id:"upload-button",onClick:o.submitUpload},{default:(0,n.w5)((()=>[(0,n.Uk)("上傳")])),_:1},8,["onClick"]),(0,n._)("div",null,"共 "+(0,i.zw)(r.fileList.length)+"個檔案，已完成上傳 "+(0,i.zw)(r.uploaded_cnt),1)])}var me=a(663),he={data(){return{fileList:[],uploaded_cnt:0,percent:0}},computed:{action_api(){return`${me.Z.backend_host}/api/Upload`}},methods:{submitUpload(){this.uploaded_cnt=0,this.$refs.upload.submit()},handleRemove(e,t){console.log(e,t)},handlePreview(e){console.log(e)},handleUploadSuccess(e,t,a){this.uploaded_cnt+=1,this.percent=this.uploaded_cnt/this.fileList.length&100},handleUploadError(e,t,a){this.$swal.fire({text:t.filename,title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}}};const ge=(0,g.Z)(he,[["render",ce],["__scopeId","data-v-8264a954"]]);var _e=ge,pe={components:{uploader:_e},data(){return{uploadVisible:!1}},computed:{SubStatus(){return w.q$.getters.AGVStatus.SubState},AGVName(){return w.q$.getters.AGVStatus.CarName},APPVersion(){return w.q$.getters.AGVStatus.APPVersion},UserName(){return w.U6.getters.CurrentUserName},IsGodUser(){return w.U6.getters.IsGodUser}},methods:{async where_r_u(){await(0,b.XZ)()},VersionTextClickHandle(){this.ConfirmGODTriggering()},ConfirmGODTriggering(){this.$swal.fire({title:"Warning",text:"Do you known what are you doing now?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",allowOutsideClick:!1}).then((e=>{this.AdminSwitchDialogResultHandle(e.isConfirmed)}))},AdminSwitchDialogResultHandle(e=!1){this.version_text_click_count=0,e&&w.U6.commit("setUser",{UserName:"GOD",Role:3})},HandleSettingIconClick(){l.Z.emit("show-settings")}}};const we=(0,g.Z)(pe,[["render",ue],["__scopeId","data-v-71c86fd7"]]);var ve=we;const fe={key:1,class:"charge-current px-3"};function Ae(e,t,a,s,r,o){const l=(0,n.up)("b-progress-bar"),d=(0,n.up)("b-progress");return(0,n.wg)(),(0,n.iD)("div",{class:"battery d-flex flex-row",style:(0,i.j5)("height:"+a.bHeight)},[(0,n._)("div",null,[a.battery_status.IsCharging?((0,n.wg)(),(0,n.iD)("i",{key:0,onClick:t[0]||(t[0]=(...e)=>o.RechargeCircuitControl&&o.RechargeCircuitControl(...e)),style:{color:"limegreen"},class:"bi bi-battery-charging"})):((0,n.wg)(),(0,n.iD)("i",{key:1,onClick:t[1]||(t[1]=(...e)=>o.RechargeCircuitControl&&o.RechargeCircuitControl(...e)),class:(0,i.C_)("bi bi-battery-full"),style:(0,i.j5)({color:o.IsLowBatteryLevel?"red":"black"})},null,4))]),(0,n.Wm)(d,{class:"flex-fill h-100",max:r.max,animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{animated:"",class:(0,i.C_)(o.battery_state_bg),value:o.battery_level,label:o.battery_level<=10?"":`${o.battery_level}%${a.battery_status.IsCharging?"(充電中)":""}`,style:(0,i.j5)({fontSize:"1rem"==a.bHeight?"12px":"16px"})},null,8,["class","value","label","style"])])),_:1},8,["max"]),o.battery_level<=10?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"bat_level_show_when_low",style:(0,i.j5)({fontSize:"1rem"==a.bHeight?"12px":"16px"})},(0,i.zw)(o.battery_level)+"%"+(0,i.zw)(a.battery_status.IsCharging?"(充電中)":""),5)):(0,n.kq)("",!0),a.battery_status.IsCharging?((0,n.wg)(),(0,n.iD)("div",fe,[(0,n._)("div",null,(0,i.zw)(e.$t("charging_current"))+": "+(0,i.zw)(a.battery_status.ChargeCurrent)+" mA",1)])):(0,n.kq)("",!0)],4)}var ye=a(1495),be={data(){return{max:100}},props:{Warning_Up_limit:{type:Number,default:45},Warning_DOwn_limit:{type:Number,default:20},bHeight:{type:String,default(){return"1rem"}},showIcon:{type:Boolean,default:!0},battery_status:{type:Object,default(){return new ye.Z}}},computed:{battery_level(){return this.battery_status.BatteryLevel},battery_state_bg(){return this.battery_status.IsCharging?"charging":this.battery_level>this.Warning_Up_limit?"full-state":this.battery_level<=this.Warning_Up_limit&&this.battery_level>=this.Warning_DOwn_limit?"bg-warning":"bg-danger"},IsLowBatteryLevel(){return this.battery_level<this.Warning_DOwn_limit},batHeight(){return this.bHeight},IsHasRechareCircuit(){return!w.q$.getters.IsInspectionAGV}},mounted(){},methods:{async RechargeCircuitControl(){this.IsHasRechareCircuit&&await(0,b.hf)()}}};const Se=(0,g.Z)(be,[["render",Ae],["__scopeId","data-v-21cd5dba"]]);var ke=Se;const Ce=e=>((0,n.dD)("data-v-e9d7fe32"),e=e(),(0,n.Cn)(),e),De={key:0,style:{color:"limegreen"},class:"bi bi-battery-charging"},Ie={key:1,class:(0,i.C_)("bi bi-battery-full")},Ve={key:2,class:"d-flex px-2"},xe=Ce((()=>(0,n._)("label",{for:""},"充電電流:",-1))),Me=Ce((()=>(0,n._)("span",{class:"px-1",style:{"font-size":"smaller"}},"mA",-1)));function Te(e,t,a,s,r,o){const l=(0,n.up)("b-progress-bar"),d=(0,n.up)("b-progress"),u=(0,n.up)("el-button"),c=(0,n.up)("MiniAGVBatteryViewer"),m=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",{class:"battrey-group d-flex flex-row",onClick:t[1]||(t[1]=()=>{r.show_battery_viewer=o.IsMiniAGV})},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.IsMiniAGV?[1,2]:[0],(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["bat d-flex flex-row",o.IsMiniAGV?"w-50":"w-100"]),key:e},[o.GetBatteryStatus(e).IsCharging?((0,n.wg)(),(0,n.iD)("i",De)):((0,n.wg)(),(0,n.iD)("i",Ie)),(0,n.Wm)(d,{class:"flex-fill h-100",max:100,animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{animated:"",value:o.GetBatteryStatus(e).BatteryLevel,label:o.GetLabel(o.GetBatteryStatus(e)),class:(0,i.C_)(o.GetClass(o.GetBatteryStatus(e))),style:{"font-size":"16px"}},null,8,["value","label","class"])])),_:2},1024),o.GetBatteryStatus(e).IsCharging?((0,n.wg)(),(0,n.iD)("div",Ve,[xe,(0,n.Uk)(" "+(0,i.zw)(o.GetBatteryStatus(e).ChargeCurrent)+" ",1),Me])):(0,n.kq)("",!0)],2)))),128)),(0,n.Wm)(m,{modelValue:r.show_battery_viewer,"onUpdate:modelValue":t[0]||(t[0]=e=>r.show_battery_viewer=e),direction:"btt",size:"600px","show-close":!1},{header:(0,n.w5)((({close:e})=>[(0,n.Wm)(u,{class:"border-bottom",style:{"z-index":"9999"},type:"danger",size:"large",onClick:e},null,8,["onClick"])])),default:(0,n.w5)((()=>[(0,n.Wm)(c,{style:{position:"absolute",top:"-50px","z-index":"1"}})])),_:1},8,["modelValue"])])}const Oe=e=>((0,n.dD)("data-v-8b4da26c"),e=e(),(0,n.Cn)(),e),Ue={class:"mini-agv-battery-view w-100 h-100"},Le={class:"battery-container d-flex flex-row"},Ge={class:"bat-ctl bat_tex justify-content-center d-flex flex-row",style:{position:"absolute",width:"100%",top:"75%","font-size":"30px"}},We={class:"rounded border p-2 text-start",style:{position:"relative",left:"-74px"}},Be=Oe((()=>(0,n._)("span",{class:"p-2"},"Battery-1",-1))),Ne={class:"rounded border p-2 text-start",style:{position:"relative",left:"-69px"}},Pe=Oe((()=>(0,n._)("span",{class:"p-2"},"Battery-2",-1)));function Ze(e,t,a,s,r,o){const l=(0,n.up)("b-button");return(0,n.wg)(),(0,n.iD)("div",Ue,[(0,n._)("div",Le,[(0,n._)("div",{class:"battery-img bat1",style:(0,i.j5)(o.Bat1Style)},null,4),(0,n._)("div",{class:"battery-img bat2",style:(0,i.j5)(o.Bat2Style)},null,4),(0,n._)("div",Ge,[(0,n._)("div",We,[Be,(0,n._)("div",null,[(0,n.Wm)(l,{onClick:t[0]||(t[0]=e=>o.BatteryLockHandler(1,!0)),disabled:!o.Bat1Lockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1},8,["disabled"]),(0,n.Wm)(l,{onClick:t[1]||(t[1]=e=>o.BatteryLockHandler(1,!1)),disabled:!o.Bat1UnLockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1},8,["disabled"])])]),(0,n._)("div",Ne,[Pe,(0,n._)("div",null,[(0,n.Wm)(l,{onClick:t[2]||(t[2]=e=>o.BatteryLockHandler(2,!0)),disabled:!o.Bat2Lockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1},8,["disabled"]),(0,n.Wm)(l,{onClick:t[3]||(t[3]=e=>o.BatteryLockHandler(2,!1)),disabled:!o.Bat2UnLockable,variant:"primary",class:"mx-1"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1},8,["disabled"])])])])])])}var Ee={data(){return{bat1_style:{installed:{top:"3px",right:"125px"},leveing:{top:"35px",left:"-158px"},no_exist:{visibility:"hidden"}},bat2_style:{installed:{top:"3px",right:"-122px"},leveing:{top:"35px",left:"91px"},no_exist:{visibility:"hidden"}}}},computed:{Battery1Status(){try{return w.q$.getters.BatteryStatus.filter((e=>1==e.BatteryID))[0]}catch(e){return}},Battery2Status(){try{return w.q$.getters.BatteryStatus.filter((e=>2==e.BatteryID))[0]}catch(e){return}},Bat1Style(){return this.Battery1Status?this.Battery1Status.SensorInfo.IsExistSensor1ON&&this.Battery1Status.SensorInfo.IsDockingSensor1ON?this.bat1_style.installed:this.Battery1Status.SensorInfo.IsExistSensor1ON&&!this.Battery1Status.SensorInfo.IsDockingSensor1ON?this.bat1_style.leveing:this.bat1_style.no_exist:this.bat1_style.no_exist},Bat2Style(){return this.Battery2Status?this.Battery2Status.SensorInfo.IsExistSensor1ON&&this.Battery2Status.SensorInfo.IsDockingSensor1ON?this.bat2_style.installed:this.Battery2Status.SensorInfo.IsExistSensor1ON&&!this.Battery2Status.SensorInfo.IsDockingSensor1ON?this.bat2_style.leveing:this.bat2_style.no_exist:this.bat2_style.no_exist},Bat1Lockable(){if(!this.Battery1Status)return!0;var e=this.Battery1Status.SensorInfo;return e.IsUnlockSensorON|(!e.IsUnlockSensorON&&!e.IsLockSensorON)},Bat1UnLockable(){if(!this.Battery1Status)return!0;var e=this.Battery1Status.SensorInfo;return e.IsLockSensorON|(!e.IsUnlockSensorON&&!e.IsLockSensorON)},Bat2Lockable(){if(!this.Battery2Status)return!0;var e=this.Battery2Status.SensorInfo;return e.IsUnlockSensorON|(!e.IsUnlockSensorON&&!e.IsLockSensorON)},Bat2UnLockable(){if(!this.Battery2Status)return!0;var e=this.Battery2Status.SensorInfo;return e.IsLockSensorON|(!e.IsUnlockSensorON&&!e.IsLockSensorON)}},methods:{async BatteryLockHandler(e,t){await(0,b.lQ)(e,t)}}};const ze=(0,g.Z)(Ee,[["render",Ze],["__scopeId","data-v-8b4da26c"]]);var Re=ze,He={components:{MiniAGVBatteryViewer:Re},props:{direction:{type:String,default:"horizon"}},computed:{IsMiniAGV(){return w.q$.getters.IsInspectionAGV},battery_states(){return w.q$.getters.BatteryStatus}},data(){return{show_battery_viewer:!1}},methods:{GetBatteryStatus(e){try{var t=this.battery_states.find((t=>t.BatteryID==e));return t||new ye.Z(100)}catch(a){return new ye.Z(100)}},GetLabel(e=new ye.Z){return e.IsCharging?e.BatteryLevel+"%(充電中)":e.BatteryLevel+"%"},GetClass(e=new ye.Z){var t=e.BatteryLevel;return e.IsCharging?"charging":t<20?"bg-danger":t>=20&&t<40?"bg-warning":"bg-primary"},OnClick(e){alert("wtf"+e)}}};const Fe=(0,g.Z)(He,[["render",Te],["__scopeId","data-v-e9d7fe32"]]);var je=Fe;const $e={class:"mileage"},qe=(0,n._)("span",null,"km",-1);function Qe(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",$e,[(0,n._)("div",null,[(0,n.Uk)((0,i.zw)(o.mileage)+" ",1),qe])])}var Ye={data(){return{val:1.23,time:"2022/12/12 19:00:09"}},computed:{mileage(){return this.val.toFixed(3)}},mounted(){l.Z.on("/mileage",(e=>{this.val=e})),setInterval((()=>{this.time=f()(Date.now()).format("yyyy/MM/DD HH:mm:ss")}),1e3)}};const Xe=(0,g.Z)(Ye,[["render",Qe]]);var Ke=Xe,Je=a.p+"img/emo.b3b39af7.png";const et=(0,n._)("img",{src:Je,width:"100"},null,-1),tt=[et];function at(e,t,a,s,i,r){return(0,n.wg)(),(0,n.iD)("div",{class:"emo-button",onClick:t[0]||(t[0]=e=>r.EMO())},tt)}var st={props:{disabled:{type:Boolean,default:!1}},methods:{async EMO(){this.disabled||await(0,b.dE)()}}};const nt=(0,g.Z)(st,[["render",at]]);var it=nt;const rt={class:"login-header border-bottom my-2"},ot=["id"],lt={class:"login-content py-2",style:{"z-index":"99999"}},dt={class:"login-message"},ut={class:"button-group py-1 my-1"},ct={class:"keyboard"};function mt(e,t,a,s,r,o){const l=(0,n.up)("el-input"),d=(0,n.up)("el-form-item"),u=(0,n.up)("el-form"),c=(0,n.up)("el-button"),m=(0,n.up)("KeyBoard"),h=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.j4)(h,{modelValue:r.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=e=>r.dialogVisible=e),"show-close":!1,width:"600"},{header:(0,n.w5)((({titleId:e,login_title:t})=>[(0,n._)("div",rt,[(0,n._)("h3",{id:e,class:(0,i.C_)(t)},"Login",10,ot)])])),default:(0,n.w5)((()=>[(0,n._)("div",lt,[(0,n.Wm)(u,{"label-position":"top"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"Account",required:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{name:"account",class:"input",onClick:t[0]||(t[0]=e=>o.OnInputFocus("account")),onChange:t[1]||(t[1]=e=>r.message=""),onClear:t[2]||(t[2]=e=>r.keyboard_input=""),placeholder:"Account",modelValue:r.UserName,"onUpdate:modelValue":t[3]||(t[3]=e=>r.UserName=e),autocomplete:"new-password",clearable:"",disabled:o.IsLogin},null,8,["modelValue","disabled"])])),_:1}),(0,n.Wm)(d,{label:"Password",required:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{name:"pw",class:"input",ref:"pw_input",onClick:t[4]||(t[4]=e=>o.OnInputFocus("pw")),onClear:t[5]||(t[5]=e=>r.keyboard_input=""),onChange:t[6]||(t[6]=e=>r.message=""),clearable:"","show-password":"",placeholder:"Password",modelValue:r.Password,"onUpdate:modelValue":t[7]||(t[7]=e=>r.Password=e),type:"password",autocomplete:"new-password",disabled:o.IsLogin},null,8,["modelValue","disabled"])])),_:1})])),_:1}),(0,n._)("div",dt,(0,i.zw)(r.message),1),(0,n._)("div",ut,[(0,n.Wm)(c,{loading:r.logining,type:o.IsLogin?"danger":"primary",onClick:t[8]||(t[8]=e=>o.LoginHandle())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(o.IsLogin?"Logout":"Login"),1)])),_:1},8,["loading","type"]),(0,n.Wm)(c,{type:"info",onClick:t[9]||(t[9]=e=>r.dialogVisible=!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("Cancel")])),_:1})]),(0,n._)("div",ct,[(0,n.Wm)(m,{onOnChange:o.onChange,onOnKeyPress:o.HandleKeyboardPress,input:r.keyboard_input},null,8,["onOnChange","onOnKeyPress","input"])])])])),_:1},8,["modelValue"])}var ht=a(644),gt={components:{KeyBoard:ht.Z},data(){return{dialogVisible:!1,UserName:"",Password:"",focus_input:"account",keyboard_input:"",message:"",logining:!1}},computed:{IsLogin(){return 0!=w.U6.getters.CurrentUserRole}},methods:{Show(){this.IsLogin?(this.message="",this.Password="********",this.UserName=w.U6.getters.CurrentUserName):this.message=this.UserName=this.Password="",this.dialogVisible=!0},async LoginHandle(){if(this.IsLogin)w.U6.dispatch("Logout");else if(""!=this.UserName)if(""!=this.Password){this.logining=!0;var e=await w.U6.dispatch("Login",{UserName:this.UserName,Password:this.Password});e.Success?this.dialogVisible=!1:this.message=e.Message,this.logining=!1}else this.message="請輸入 Passowrd";else this.message="請輸入 Account"},OnInputFocus(e){this.focus_input=e,"account"==this.focus_input?this.keyboard_input=this.UserName+"":this.keyboard_input=this.Password+""},onChange(e){this.message="",console.log(e),this.keyboard_input=e,"account"==this.focus_input?this.UserName=e:(this.$refs.pw_input.focus(),this.Password=e,this.$refs.pw_input.focus())},HandleKeyboardPress(e){"{enter}"==e&&("account"==this.focus_input?(this.keyboard_input="",this.focus_input="pw"):this.LoginHandle())}}};const _t=(0,g.Z)(gt,[["render",mt],["__scopeId","data-v-71dba8f6"]]);var pt=_t;const wt={class:"connection-states w-100 px-1"},vt={class:"w-100"},ft=(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,i.C_)("connected bi bi-circle-fill")}),(0,n.Uk)(" UI Server ")])],-1);function At(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",wt,[(0,n._)("table",vt,[(0,n._)("tbody",null,[(0,n._)("tr",null,[ft,(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,i.C_)([o.vms_state,"bi bi-circle-fill"])},null,2),(0,n.Uk)(" AGVS ")])])]),(0,n._)("tr",null,[(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,i.C_)([o.rosbridge_state,"bi bi-circle-fill"])},null,2),(0,n.Uk)(" ROS ")])]),(0,n._)("td",null,[(0,n._)("div",null,[(0,n._)("i",{class:(0,i.C_)([o.wago_state,"bi bi-circle-fill"])},null,2),(0,n.Uk)(" WAGO ")])])])])])])}var yt=a(487),bt={data(){return{ws:void 0,connections:{}}},computed:{rosbridge_state(){return void 0!=this.connections.RosbridgeServer?this.connections.RosbridgeServer.toLocaleLowerCase():"disconnect"},agvc_state(){return void 0!=this.connections.AGVC?this.connections.AGVC.toLocaleLowerCase():"disconnect"},vms_state(){return void 0!=this.connections.VMS?this.connections.VMS.toLocaleLowerCase():"disconnect"},wago_state(){return void 0!=this.connections.WAGO?this.connections.WAGO.toLocaleLowerCase():"disconnect"}},methods:{WebSocketConnect(){var e=new yt.Z("ws/ConnectionState");e.Connect(),e.onmessage=e=>{var t=JSON.parse(e.data);this.connections=t}}},mounted(){this.WebSocketConnect()}};const St=(0,g.Z)(bt,[["render",At]]);var kt=St,Ct=a(2274);const Dt=e=>((0,n.dD)("data-v-180af111"),e=e(),(0,n.Cn)(),e),It={class:"switch-container"},Vt=Dt((()=>(0,n._)("div",{class:"switch-inner"},null,-1))),xt=[Vt];function Mt(e,t,a,r,o,l){return(0,n.wg)(),(0,n.iD)("div",It,[(0,n.wy)((0,n._)("input",{type:"checkbox",id:"switch",class:"switch","onUpdate:modelValue":t[0]||(t[0]=e=>o.isChecked=e),onChange:t[1]||(t[1]=(...e)=>l.toggleSwitch&&l.toggleSwitch(...e))},null,544),[[s.e8,o.isChecked]]),(0,n._)("label",{for:"switch",class:"switch-label",style:(0,i.j5)([l.custom_style,l.active_style])},xt,4),(0,n.wy)((0,n._)("span",{onClick:t[2]||(t[2]=(...e)=>l.toggleSwitch&&l.toggleSwitch(...e)),class:"switch-text"},(0,i.zw)(a.inactive_text),513),[[s.F8,!o.isChecked]]),(0,n.wy)((0,n._)("span",{onClick:t[3]||(t[3]=(...e)=>l.toggleSwitch&&l.toggleSwitch(...e)),class:"switch-text switch-text-on",style:(0,i.j5)(l.active_style)},(0,i.zw)(a.active_text),5),[[s.F8,o.isChecked]])])}var Tt={props:{default:{type:Boolean,default:!1},active_text:{type:String,default:"ON"},active_color:{type:String,default:"rgb(40, 167, 69)"},inactive_text:{type:String,default:"OFF"},inactive_color:{type:String,default:"rgb(108, 117, 125)"},width:{type:String,default:"68px"}},computed:{active_style(){return{backgroundColor:this.isChecked?this.active_color:this.inactive_color}},custom_style(){return{width:this.width}}},data(){return{isChecked:this.value}},methods:{toggleSwitch(){this.isChecked=!this.isChecked,this.$emit("switch",this.isChecked)}},mounted(){this.isChecked=this.default}};const Ot=(0,g.Z)(Tt,[["render",Mt],["__scopeId","data-v-180af111"]]);var Ut=Ot,Lt=a(3867),Gt=a(6666);const Wt={class:"flex-fill border mt-1 p-1"},Bt={class:"mt-3 border p-1"},Nt={class:"table-container-div mt-3 border p-1"},Pt={class:"mt-3 border p-1"},Zt={class:"mt-3 border p-1"},Et={class:"mt-3 border p-1"},zt={class:"mt-3 border p-1"},Rt={class:"mt-3 border p-1"},Ht={class:"mt-3 border p-1"},Ft={class:"mt-3 border p-1"};function jt(e,t,a,s,i,r){const o=(0,n.up)("status_card"),l=(0,n.up)("b-tab"),d=(0,n.up)("alarm_warn_table"),u=(0,n.up)("agv_operator"),c=(0,n.up)("CSTReader"),m=(0,n.up)("EQHandshakeView"),h=(0,n.up)("LogQuery"),g=(0,n.up)("TaskDeliveryVue"),_=(0,n.up)("ForkAGV3D"),p=(0,n.up)("AgvOverview"),w=((0,n.up)("AGVSMsgDisplay"),(0,n.up)("b-tabs"));return(0,n.wg)(),(0,n.iD)("div",Wt,[(0,n.Wm)(w,{pills:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{title:e.$t("status"),active:""},{default:(0,n.w5)((()=>[(0,n._)("div",Bt,[(0,n.Wm)(o)])])),_:1},8,["title"]),(0,n.Wm)(l,{title:e.$t("abnormal-record")},{default:(0,n.w5)((()=>[(0,n._)("div",Nt,[(0,n.Wm)(d)])])),_:1},8,["title"]),(0,n.Wm)(l,{title:e.$t("operation")},{default:(0,n.w5)((()=>[(0,n._)("div",Pt,[(0,n.Wm)(u,{agv_type:a.VMSData.Agv_Type},null,8,["agv_type"])])])),_:1},8,["title"]),2!=a.VMSData.Agv_Type?((0,n.wg)(),(0,n.j4)(l,{key:0,title:"CST Reader"},{default:(0,n.w5)((()=>[(0,n._)("div",Zt,[(0,n.Wm)(c)])])),_:1})):(0,n.kq)("",!0),((0,n.wg)(),(0,n.j4)(l,{key:1,title:"設備交握(E84)"},{default:(0,n.w5)((()=>[(0,n._)("div",Et,[(0,n.Wm)(m)])])),_:1})),((0,n.wg)(),(0,n.j4)(l,{key:2,title:"Log"},{default:(0,n.w5)((()=>[(0,n._)("div",zt,[(0,n.Wm)(h)])])),_:1})),r.IsGodMod|r.IsDevUser?((0,n.wg)(),(0,n.j4)(l,{key:3,title:"Task"},{default:(0,n.w5)((()=>[(0,n._)("div",Rt,[(0,n.Wm)(g)])])),_:1})):(0,n.kq)("",!0),r.IsGodMod?((0,n.wg)(),(0,n.j4)(l,{key:4,title:e.$t("3d_model")},{default:(0,n.w5)((()=>[(0,n._)("div",Ht,[(0,n.Wm)(_)])])),_:1},8,["title"])):(0,n.kq)("",!0),r.IsGodMod?((0,n.wg)(),(0,n.j4)(l,{key:5,title:"Overview"},{default:(0,n.w5)((()=>[(0,n._)("div",Ft,[(0,n.Wm)(p)])])),_:1})):(0,n.kq)("",!0),(0,n.kq)("",!0)])),_:1})])}const $t={class:"status-card"},qt={class:"text-start"},Qt={class:"w-100 border p-3"},Yt={class:"module-error"},Xt={class:"status-tb w-100"},Kt={align:"justify"},Jt={class:"val-column"},ea=(0,n._)("td",null,"Laser Mode",-1),ta={align:"justify"},aa={class:"val-column"},sa={class:"val-column"},na={align:"justify"},ia={class:"val-column"},ra={key:0},oa={key:1,class:"val-column"},la={key:0,align:"justify"},da=(0,n._)("td",null,"定位狀態",-1),ua=(0,n._)("td",null,"地圖比對率",-1),ca={align:"justify"},ma={colspan:"4"};function ha(e,t,a,r,o,l){const d=(0,n.up)("el-alert"),u=(0,n.up)("el-divider"),c=(0,n.up)("b-button"),m=(0,n.up)("b-form-input"),h=(0,n.up)("b-form-textarea");return(0,n.wg)(),(0,n.iD)("div",$t,[(0,n._)("h4",qt,(0,i.zw)(e.$t("Status_info")),1),(0,n._)("div",Qt,[(0,n.wy)((0,n._)("div",Yt,[(0,n.Wm)(d,{class:"my-1","show-icon":"",title:"光達模組異常",type:"error",effect:"dark",closable:!1}),(0,n.Wm)(d,{class:"my-1","show-icon":"",title:"磁導引模組異常",type:"error",effect:"dark",closable:!1}),(0,n.Wm)(d,{class:"my-1","show-icon":"",title:"走行馬達異常",type:"error",effect:"dark",closable:!1}),(0,n.Wm)(d,{class:"my-1","show-icon":"",title:"電池模組異常",type:"error",effect:"dark",closable:!1}),(0,n.Wm)(d,{class:"my-1","show-icon":"",title:"IO模組異常",type:"error",effect:"dark",closable:!1}),(0,n.Wm)(d,{class:"my-1","show-icon":"",title:"Barcode Reader模組異常",type:"error",effect:"dark",closable:!1}),(0,n.Wm)(u)],512),[[s.F8,!1]]),(0,n._)("table",Xt,[(0,n._)("tbody",null,[(0,n._)("tr",Kt,[(0,n._)("td",null,(0,i.zw)(e.$t("status")),1),(0,n._)("td",Jt,[(0,n.Wm)(c,{class:(0,i.C_)(["w-100 border",""==o.vms_data.SubState?"down":o.vms_data.SubState.toLowerCase()])},{default:(0,n.w5)((()=>[(0,n._)("b",null,(0,i.zw)(""==o.vms_data.SubState?"ERROR":o.vms_data.SubState),1)])),_:1},8,["class"])]),ea,(0,n._)("td",null,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:o.vms_data.Current_LASER_MODE,"onUpdate:modelValue":t[0]||(t[0]=e=>o.vms_data.Current_LASER_MODE=e)},null,8,["modelValue"])])]),(0,n._)("tr",ta,[(0,n._)("td",null,(0,i.zw)(e.$t("current_position")),1),(0,n._)("td",aa,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:o.vms_data.Last_Visit_MapPoint.Name,"onUpdate:modelValue":t[1]||(t[1]=e=>o.vms_data.Last_Visit_MapPoint.Name=e)},null,8,["modelValue"])]),(0,n._)("td",null,(0,i.zw)(e.$t("target_position")),1),(0,n._)("td",sa,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:o.vms_data.NavInfo.DestinationMapPoint.Name,"onUpdate:modelValue":t[2]||(t[2]=e=>o.vms_data.NavInfo.DestinationMapPoint.Name=e)},null,8,["modelValue"])])]),(0,n._)("tr",na,[(0,n._)("td",null,(0,i.zw)(e.$t("action_name")),1),(0,n._)("td",ia,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:o.vms_data.ZAxisActionName,"onUpdate:modelValue":t[3]||(t[3]=e=>o.vms_data.ZAxisActionName=e)},null,8,["modelValue"])]),2!=o.vms_data.Agv_Type?((0,n.wg)(),(0,n.iD)("td",ra,(0,i.zw)(e.$t("carrier_id")),1)):(0,n.kq)("",!0),2!=o.vms_data.Agv_Type?((0,n.wg)(),(0,n.iD)("td",oa,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:o.vms_data.CST_Data,"onUpdate:modelValue":t[4]||(t[4]=e=>o.vms_data.CST_Data=e),state:"ERROR"!=o.vms_data.CST_Data},null,8,["modelValue","state"])])):(0,n.kq)("",!0)]),((0,n.wg)(),(0,n.iD)("tr",la,[da,(0,n._)("td",null,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:l.LocStatusDisplay,"onUpdate:modelValue":t[5]||(t[5]=e=>l.LocStatusDisplay=e),state:"OK"==l.LocStatusDisplay},null,8,["modelValue","state"])]),ua,(0,n._)("td",null,[(0,n.Wm)(m,{size:"sm",disabled:"",modelValue:o.vms_data.MapComparsionRate,"onUpdate:modelValue":t[6]||(t[6]=e=>o.vms_data.MapComparsionRate=e),state:0!=o.vms_data.MapComparsionRate},null,8,["modelValue","state"])])])),(0,n._)("tr",ca,[(0,n._)("td",null,(0,i.zw)(e.$t("abormal")),1),(0,n._)("td",ma,[(0,n.Wm)(h,{disabled:"",modelValue:l.NewestAlarm,"onUpdate:modelValue":t[7]||(t[7]=e=>l.NewestAlarm=e),state:""==l.NewestAlarm},null,8,["modelValue","state"])])]),(0,n.kq)("",!0)])])])])}var ga={props:{},data(){return{currentPosition:"123",vms_data:new Ct.ZP}},computed:{state_btn_variant(){var e=this.vms_data.SubState.toUpperCase();return"DOWN"==e|"ALARM"==e|"STOP"==e|"SYSTEM_INIT"==e?"danger":"INITIALIZE"==e|"CHARGING"==e?"primary":"RUN"==e|"WORKING"==e?"success":"IDLE"==e|"WARNING"==e?"warning":""},CurrentPosition(){return void 0==this.ModuleInformation.nav_state?"-1":this.ModuleInformation.nav_state.lastVisitedNode},CarrierID(){return void 0==this.ModuleInformation.CSTReader?"-1":this.ModuleInformation.CSTReader.data},NewestAlarm(){return void 0==this.vms_data.NewestAlarm?"":"zh-TW"==this.$i18n.locale?this.vms_data.NewestAlarm.CN:this.vms_data.NewestAlarm.Description},LocStatusDisplay(){var e=this.vms_data.LocStatus;return 10==e?"OK":20==e?"Warning":30==e?"Not Localized":40==e?"System Error":"Unknown"}},mounted(){l.Z.on("/vms_data",(e=>{this.vms_data=e}))}};const _a=(0,g.Z)(ga,[["render",ha]]);var pa=_a,wa=a(3159);const va={class:"agv-operator"},fa={class:"mt-1 p-1"},Aa={class:"mt-1 p-1"},ya={class:"table-container-div mt-1 p-1"},ba={class:"table-container-div mt-1 p-1"},Sa={class:"mt-1 p-1"};function ka(e,t,a,s,i,r){const o=(0,n.up)("AgvControl"),l=(0,n.up)("b-tab"),d=(0,n.up)("ZAxisControl"),u=(0,n.up)("IOTable"),c=(0,n.up)("ManualSettings"),m=(0,n.up)("b-tabs");return(0,n.wg)(),(0,n.iD)("div",va,[(0,n.Wm)(m,{pills:"",small:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{title:e.$t("agv_control"),active:""},{default:(0,n.w5)((()=>[(0,n._)("div",fa,[(0,n.Wm)(o,{enabled:r.operation_enabled_return},null,8,["enabled"])])])),_:1},8,["title"]),(0,n.Wm)(l,{disabled:1==a.agv_type,title:e.$t("zaxis_up_down")},{default:(0,n.w5)((()=>[(0,n._)("div",Aa,[(0,n.Wm)(d,{enabled:r.operation_enabled_return},null,8,["enabled"])])])),_:1},8,["disabled","title"]),(0,n.Wm)(l,{title:"Input"},{default:(0,n.w5)((()=>[(0,n._)("div",ya,[(0,n.Wm)(u,{digital_type:"input",table_data:i.DIOTableData.Inputs},null,8,["table_data"])])])),_:1}),(0,n.Wm)(l,{title:"Output"},{default:(0,n.w5)((()=>[(0,n._)("div",ba,[(0,n.Wm)(u,{readonly:!1,digital_type:"output",enabled:r.operation_enabled_return,super_user:r.isGodMode,table_data:i.DIOTableData.Outputs,useToggle:!0},null,8,["enabled","super_user","table_data"])])])),_:1}),(0,n.Wm)(l,{title:"手動操作"},{default:(0,n.w5)((()=>[(0,n._)("div",Sa,[(0,n.Wm)(c,{enabled:r.operation_enabled_return},null,8,["enabled"])])])),_:1})])),_:1})])}const Ca=e=>((0,n.dD)("data-v-e3bfc6ce"),e=e(),(0,n.Cn)(),e),Da={class:"agv-control"},Ia={class:"d-flex flex-row"},Va={class:"information",style:{width:"260px"}},xa={class:"row div-container mx-1 my-2"},Ma=Ca((()=>(0,n._)("label",{class:"text-start border-bottom"},"Tag ID",-1))),Ta={class:"row div-container mx-1 my-2"},Oa=Ca((()=>(0,n._)("label",{class:"text-start border-bottom"},"偏差值",-1))),Ua={class:"row div-container mx-1 my-2"},La=Ca((()=>(0,n._)("label",{class:"text-start border-bottom"},"角度",-1))),Ga={key:0,class:"row div-container mx-1 my-2"},Wa=Ca((()=>(0,n._)("label",{class:"text-start border-bottom"},"位置上報",-1)));function Ba(e,t,a,r,o,l){const d=(0,n.up)("b-form-input"),u=(0,n.up)("el-form-item"),c=(0,n.up)("b-button"),m=(0,n.up)("el-form"),h=(0,n.up)("agvc_control_panel");return(0,n.wg)(),(0,n.iD)("div",Da,[(0,n.wy)((0,n._)("div",{class:"disable-notify text-start my-2"},(0,i.zw)(e.$t("agv_control_notify_text")),513),[[s.F8,!a.enabled]]),(0,n._)("div",Ia,[(0,n._)("div",Va,[(0,n.Wm)(m,{"label-position":"top"},{default:(0,n.w5)((()=>[(0,n._)("div",xa,[Ma,(0,n.Wm)(u,{class:"my-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"sm",disabled:"",modelValue:o.vms_data.BCR_State_MoveBase.tagID,"onUpdate:modelValue":t[0]||(t[0]=e=>o.vms_data.BCR_State_MoveBase.tagID=e),state:o.vms_data.BCR_State_MoveBase.tagID>0},null,8,["modelValue","state"])])),_:1})]),(0,n._)("div",Ta,[Oa,(0,n.Wm)(u,{class:"col-6",label:"X"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"sm",disabled:"",modelValue:o.vms_data.BCR_State_MoveBase.xValue,"onUpdate:modelValue":t[1]||(t[1]=e=>o.vms_data.BCR_State_MoveBase.xValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,n.Wm)(u,{class:"col-6",label:"Y"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"sm",disabled:"",modelValue:o.vms_data.BCR_State_MoveBase.yValue,"onUpdate:modelValue":t[2]||(t[2]=e=>o.vms_data.BCR_State_MoveBase.yValue=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})]),(0,n._)("div",Ua,[La,(0,n.Wm)(u,{class:"my-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"sm",disabled:"",modelValue:o.vms_data.BCR_State_MoveBase.theta,"onUpdate:modelValue":t[3]||(t[3]=e=>o.vms_data.BCR_State_MoveBase.theta=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1})]),a.enabled?((0,n.wg)(),(0,n.iD)("div",Ga,[Wa,(0,n.Wm)(c,{onClick:l.HandleUpload},{default:(0,n.w5)((()=>[(0,n.Uk)("Upload")])),_:1},8,["onClick"])])):(0,n.kq)("",!0)])),_:1})]),(0,n.Wm)(h,{enabled:a.enabled},null,8,["enabled"])])])}var Na="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAdgAAAHYAfpcpnIAAAM3SURBVHhe7drLy01RGMfx45LcJTEwlFxTBiKhhFxGiqQMMCKJgcKfgAlJBpRLZiiMlLGMDNyJpEjul5Lccvv+Xnuf9tk9+9jntN+9Ts/ev/q0T97XPu9a71rrffZap1GnTp0iMxwH8Aovo9eDUYnMwD38SdkP99mEz0g3Xl7DbTTkT8FqeEzTwWWyhnyayynQbsgnncAguMkInIHV2CR1zka4yiw8gNXgpNuYBlfZgi+wGpx0GMPgJvWQh9XgpHrIw02G4CSsxiZpyG9GHL3+hA94glu4itPYi9WYgoHo6RyC1eAkFT8qghStEWqk9X2WdziPbVCH9Fz0A1o/eExlrxqtzESeSrAd/f89mIggCT0kNZL0yPwMl7ESQXMQ1m8qKT0F/vcw1Knr0JoxAKWn20Uw77NBJ25gEYIkb4OSa4Km01hMwmyswC4cxzV8g3WPdn5D7zEepSfv425ySrSL9g6WQ3O+08XzPTag9PRnKbwQx/AR1j0tKryGovR0MiX0m+4kqiR3QH8JrHum3USQGqLoKZGOFuCt0Baadd8kTYn5KD39OSXijIPeQwugde+YSu+lCJJOtsS6PReYi0ew7hv7jvUIkrxTQqt+txmNs7DuG/uBVQiSPNviRZwLaJH8Cev+otE4D8HSbkoUdS6wBu2KqbeYimDJmhL7UFSWQItf+j1idxB0g0ZTQgchOhh9DjW+6HOBxfgKqwNEpbf7rMMvWB0g+rr77ITVeNHW3AS4zzlYHSDaqnOfMXgMqwNUSS6A+6hizKoR9ODU8zvRReQorA6QtXAfPUBl7Whrj7ES0WmW1QGinSj30X5C1qbKFVQiWbWBFslghy9lRqW4HoqsTtiNSkQbp1YH6Bi/EpkDqwPE3ecYsnIfVgdsR0u8VkmXoms6epSuRJbBGgFaIIMcupYd/TXQjrHVCdPRjNcpoM83ZZXALQuh5yelu9E1ncp0wMPomk7LuaLnDtCpkpXJ0bUvnjvgaXRNRx/iaMZzB+j8wMqo6NoXzx2gkyorI6Or+2h/wKoDVB8043kE6NT4xb+XLdGHK5rx3AHKxeiazIXoWomoJD6CNxG91r/VqVNHaTT+AiXQTrI+7u96AAAAAElFTkSuQmCC",Pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHNAAABzQGe8tNOAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAMNQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2DG76QAAAEB0Uk5TAAQFDxEUFRYYHCEkJSYnKCssNDY3ODk6OzxBRE9QXV5ri5ydwcTGx8jKy83O0Nfb4+Tl5ufo7u/w8fLz9vn6/uQ5oWoAAAExSURBVFjD7dVHW8JAEIfxv6KIBVCwYAVs2EsExQbz/T+VB5Mns32yXjzsnDabeX+XHAL4ZulsMjmtIXpWH4mIHhp/6+OFoo8Vyj5O4H2MoPbVBb2vKph9NcHWVxHsvVxw9VLB3csEXy8R/H1YCPUhIdz7BbX/LI9PMkHr98vz+rNE0PoeygdIBLX/6IEDAsHsFQAbmV/Q+j3oQECw9RrgFRbvlX4XNgBNRbhZYECfv3nPewNA84XvnTBgaOtNQBWGDBiwfgduAC0mDBhQyyy9DWBCpvwzu295vw0/gNb492raVb9j55WIaMp7O4D22NwEgPYl0WgTYQBr50TXWzCnXtcuHACwvALROAHpJCABCUhAAhLwv4BZ0X9HAncFcBUJHOf9/DASwNHtjOjr4sC38wMeQSB1Q5k8jAAAAABJRU5ErkJggg==",Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAB2AAAAdgB+lymcgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM1SURBVHic7drPi5VVHMfxl+MQOloiYguXIuNkBC7CEA2kQm0lKBG4qFkVErkIyj8hZ6OIuEioGdxZoG5diysXlb8iEUGJmnI0ECkNc1ycuSRPz7nPM3fmec4zz9w3fGG4873P+Xy/93zP/Z5zLn369GkwgxjDb5ic+XsoqaKaOYzpjF3DppSi6uR3/0/ANB7iw4S6amNSfgI6Nq7lJZFXAouqJJbia8VJaH1JfCAEWZSIU1iRSGPljOCy4iT8hNcSaayc5TimOAl/4aNEGmuhXxL6JYGWlsQAhrEHhzCBC/gRt3AfDzD63HtGlSuJb/BC5RH0wDAO4DtMKQ6kYxP+q/FNQlNU9J6jNcRTinX4QjnRRZ3gqzPPXCG0x938p54XMVhRcN3YjYPYKXR6i4IlQk1fMrdPO2vjZl8CR6oMNI838X0JYbOxbO8/qoGL4FrhE3paQljWHuEiTuIz7MJmrMdq4ZuCcjWfl7DK2Y97JYRlF7MxYW0os8cvO+Vr3S4vU64x6dif+ArbZzlOI1vhYfxQQtQ07uBToZObDUMaOuW3KjflJ/Gx3haiRk55eFtoTbuJeipMxzU9jtHIKQ/v43GBqBvY0uPzBzX4SOxd/FMg7DRemsMYYwXPTzLl4Q3dp+QTYZGbK7F7gY6NS3AsvhF3u4h6hL3zNFbsXiDZKfByXImImhYWw7fmcbwvc8ZIeg9wMkdQx/7Gjnkeb6mQhF+EC9LDEt4EvSce/L8z/28tLwtHUbEEHEwnrR4mxIP/Np2setgmvqW9iVXppFXPgPgG54neO7wFwz7xqX8ioa7aiJ3hTel9Y7Ng2Cn+6S+YW5a5cF5+8Hc09HZlPlknLHKL8jsfPpcf/F0t/1FSh9i187GUoupiRHzxez2hrtr4RH7w11OKqoqBnNd2RHzPVaijMSwRP+15J6Gu2nhFfvCPtXT1z5bASMTvkvA7m9ZRNgFXqxaSimwChiN+P1ctJBXZBGyI+N2oWkgqsglYHfG7XbWQVGQT8GLE70HVQlKRTcDKiN/DqoU0hdhNb2v3/9kZcC/H51fhFriVZBNwJsfnbB1CmsIQjuOPGTuupS1wnz59wDP7Mk0gvr2CKgAAAABJRU5ErkJggg==",Ea="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAc0AAAHNAZ7y004AAAGiSURBVHhe7du5SgNhFIbhcatFcCtsBDdQrMS9CdhrK3hrdl6CN2DhgoLYCdoIrpVrIaZQ3xNnQtBhTE4I+p//vPAY2++gokxMPM/zYq4jfW1lXdhIjeEMb4iiIZzgo8Y1ZmE+GX+O2vGZB8zAbEXjM/eYgLnqGZ/Zg6kaGZ/pg4k044WJA2jH7yP4tOMfMYmg045/whyCzscjb2ARGT+PoPPxyBtYRMYvIOi045/h40OumfGLCDofj7yBRWT8EoJOO/4FPj7kmhm/jKDTjg9NGcdYQ7VYxn+3Ks8FerCLEcSWPKdINpF3nRiU2/hwhwFEWXv6Gm1ygO2vT6PsVb4FunEAk09pfkl++FcaxCnyflBY9Y4SqsVyBHk0L1/xK/iR9giXMPN7hPYIV/AjwI+AUZhIewR5G4wfAX4EVP7ispAfgbRHuIEfAeMwkR+B/AikPcItzPz53cwRhmEi7RF2YCbtEXphJs0R+mGqRo5wCJPVcwR5p+gUzFZ0BBkf/Jsl60mOcITa8f/qX2bkuUCr68Q6pnGBLcj7Bj3P87y/LUk+AUXsT2gjALNcAAAAAElFTkSuQmCC",za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAc0AAAHNAZ7y004AAAGvSURBVHhe7ds7LwRhFMbxQdQiQUgUJG4Jpbg3Ej2VSulzaX0BX0AiCCGioFC6ReNaCBH8T+zImj3zMslKds57nuQ3O8Vs8TzZbLEzm3g8Hk/Maam8NkrasIpl9OAE74giE7jER5Uj9MJ8xnGH6vKpM5geYQS30MqnTI+wDa10lskROqGVzWNuhKIDCHMj7EArGmJqhFHcQysaYmqESTxAKxriI8DUCFPwERD9CNPwEfAIrWiIjwBTI8zAR0D0I8zCR8ATtKIhPgJMjTCHuo6whEO8QnujJTUjLEK70LIfIxxAu8g6GaG9iYN87FsRY9ZkAFkj1tw0V06ijQzw/HUaZTbksIXsF0QMTiE3Y5N5yB1Y7SKrpHw3vrOAXbxAe4MlNeXLmAGcQysYYqb8BbSCIV4epc4goi6ffXzmL7w8Sp0hePmCzJS/glYwxET5YXj5grw8Sh15WPIaWsEQE+X7EW15ySa0giFmyndAKxhiprykC1rJPKbKp9mDVjbLZHnJGH57UtRs+TTykGTeCObLp9H+MrOPfy0vt8YaKfI7/Qr6cIx1vMHj8Xg89U+SfALSU4yXrLbReAAAAABJRU5ErkJggg==",Ra="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAdgAAAHYAfpcpnIAAAM6SURBVHhe7ZrLy01RGIePS3KLJAYGlIG7MhAJJeQ2IZIywIgMGCj5EzAhYUC5ZIa5mCkZGbjlkmQg92sht9ye32ntr2317s/Zxz77fOc9+6mndTrfaZ+93vOutdd611erqKjwzFA8jK+Ceq33uoYj+DtS73UNTzEOwDPsCgZh3Hn5DXvoH1qPDA9tzKfQ1qkCEFqPjAhtzMfQ1vEcgAmhjXkf2jqeAzAptDEPQ1vHcwAmhzbmQWjreA7AjNDG3A+ta7Tc1fPeWgdMRfcsRavzr7Ef9uB1CCwObcxlVCB68BqANaGNUQDcMxvj1E+cgu45hFbnb6F7NPtrorMCsBvdsxOtzv/Acega7f8foxWAS+ierWh1Xi5D14zGN2h1/hq65yhanZfr0DVzUJOc1fkb6HnDVxuJ2t9bnf+F89E159DqvDyNrsl65st3OBbdsh5/otV5qb+3BS1F9+FzfIJ7cQAWySL8glbH5XFsC9PwDsY3pCAUhfb5HzD+jsTbOARLZzPqwMG6qRdYBGvxK1rfIbUJyiqEtgyl/Cm0bijxJf4vOzDrWS8V/LlYKlkpH7sfm0WnO2fRum7id1yJpdJbyqc9gQOxGbTCUw3fum6iKr8bsDSG4Rm0biatgrMJm0EbG32HVnLWtRM1GS7B0mg05fUZfTYv2s9vQ02a1nXTvsV5WBqNprwmxLz/g6PHlia5rGJGrDY4Wed+hdPKlF+Ax1CntdY1LVXwHIylUHTKKzNUmdFToZHrplXKb8TSyJPyyhKhffconIizcDnuQi1Nr2Jvi5gsNRHqO8ZgKWgiOonWzaRVcLZgQqMBy+N1XIilcgCtm0mbTnn9+v9aCeZVNbzV+NchZllkFRYT0yk/HfOO5Sy1zL2AK7BU2l0vu4t7cDyuwovYVg6i9QuljYeASk/W5yyVYedxO5b2LM9Ds5OgXmtpqlLUI7yJV1DB0S+sMa0Od0yFVqcsn9HqfFotTNpSgCiDmXgPrY6n1bGz23P3Vi6FO4pqSEA1JKAaEoE8JbGizwX6DI1ul3VQ4pZGyuJFnQv0aXobEkWcC3QEWUPC9RCI0ZBQyUtprwNSvW72XKCioqLV1Gp/AEsEUwZ8KP9cAAAAAElFTkSuQmCC",Ha="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAc0AAAHNAZ7y004AAAJQSURBVHhe7ZlPSxVRGMYnqa0SZCi0UNASbBn+KTdCe/0C9QX6SvVBWoUgKoXizoVLy1rln0CwRfac2/vCMD0zc86ZufPvnB/8eL3jmZd5nnvRxU1aYAsewt/wTryBu3ATDpptqKGZf+BrOFiOIAue9gAOlvTHPs9b2Bj3ZDaFCWhDY881ITNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEygyUWIDNYYgEybZgWu84j+Pjfj/WwBPegfnm5D5ehD7qjTB/m4Q7UHZ/hc1iJF/AnTD+c8RKuQleye/J0xbxJ32F2j+9zjliBFzC7VL2CrsvZHqYLzyALr5oSTBYnpuA3yBamNSWsQVvYDqYtJvw5ZDvSmiwmkzXvIFvEdCmB3c+0wTa8ajL9R95/gTmZNkzCj3B99KoZnsJPcHb0yg6XTMlbyFos0nwSykpg9zGLMOFd3nn1DbTmATyGbFGR17CoBHYPMw8T3uZvU9Yv8D504gk8hWxhkaaEl5DBzjMZi9An/AmcgV7UXQI7y8zSSnilSgmvYBp2jpmm1fBKXSWwM0xlAX6F7EyRtYZXfEv4BbUE9numoVPhlSolbGSuFdnJ8EqVEth15hm5VmYj4RXfEsZlo+GVrpTQSnil7RJaDa+0VUInwitNl9Cp8EpTJXQyvDLuEjodXhlXCb0Ir9RdQq/CK3WV0MvwStUSeh1e8S1hEOEV1xIGFV6xLWGQ4ZWyEgYdXskrIYjwykP4Af4Q30On7+7qIUn+AnOWS9eIOc2QAAAAAElFTkSuQmCC",Fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAAdgAAAHYAfpcpnIAAAMsSURBVHhe7drLy01RGMfx45LcIomBAWXgrgxEQgm5TYikDDAiAwZK/gRMSBhQLplhLmZKRgZuuSQZyP1ayC237y9rabc8++2c877n7N2z968+rdP71jl7P2etddZZ6zTq1KmTzVAcxqtAj/W3yuQIfif0t8rkGdICPEVl8g1pAWQQXKZ/aGM+hTbN8NC6S12A0MZ8DG2aEaF1l7QA70ObZkJo3SUtwMPQppkUWndJC/AgtGkmh9Zd0gLcD22aGaF1n6mw1gFaH1RiSdwPr2EVYSncJR0CutHLfx/+l8WhdZW0AEpeAdaE1n2mIO3+0WxUIrdgFeAQKpHdsAqgCbISnwbj8ANWEXaiErkEqwCP4XZ/IJtlsAogW1GJXINVgDcYDfdZB6sAchTuo4XSDVgF0CQ5B+4zH79gFUH7ByPhPqdhFUDOwX3G4h2sAkgl1gbrYd28/IT+7z7HYRVAvmAR+jIDsBdP8Bz7UOhSfAhuwyqAfEBf7hvo5tPXuINpKCzaIM3bNZKvWIu+yAtYr6EDnM0oLHOhi7AuTrRG2IHe5iWs549OobAhsRLfYV1YdBa9OVXaD+t5swodEhuQd6Ic6ayh3RXjQJyA9bxZhQ6JJdDkZ11YpJXkGbT7BWoTehpykV5jGLqeeXgL66KyNKltQzv7Cerm6u7W82YVNiR0fpj3xSmlTRVNkvpYbSWa8DTxWc+ZVdiQGAxtnFoXZdFp9DEsQCsp/ZDYiGaGRJa6rmZ97UQ189FW+iExBuqueV+le6LF1FVo6b0LyzELEzEK8UBH726ph4SyENdhXVi70hvagmaGxEkUsqGrQ9fVyNtjbJfe/TjGmx0SB1BoVuAC8s4dWqWbng6lmSGhDd1/sQ5HO52LWIXx2IO7qHy0htiO89A7ZL1zFm3VtToEDqLUUa9UQTRnqIfoJq/gJh5BW3Naemviiyn9JNipaCXZzMLrM9ydZul3DHnH+Fn3MBOuUvqlcKdSd3lYN5xVd3m4ic4FSr8l1snoIMS64azCvu52I3nnApHW/a5/tJV3LuC2y6exhoDrLp9G5wLaJtPBqIaDHrvu8nXqdDWNxh9JTlMGqOKxtAAAAABJRU5ErkJggg==";const ja=e=>((0,n.dD)("data-v-82e153bc"),e=e(),(0,n.Cn)(),e),$a={"element-loading-spinner":!1,"element-loading-background":"rgba(0,0,0,0)",ref:"agvc_ctrl_pnl",class:"agvc-control-panel keys pt-4 p-3",style:{width:"400px"}},qa={key:0,class:"w-100 bg-light text-start px-2 py-3"},Qa={class:"speed-item-container d-flex flex-row"},Ya=ja((()=>(0,n._)("div",null,"Linear Speed",-1))),Xa={class:"speed-item-container d-flex flex-row"},Ka=ja((()=>(0,n._)("div",null,"Rotation Speed",-1))),Ja={class:"w-100"},es={align:"center"},ts=ja((()=>(0,n._)("img",{src:Na,alt:""},null,-1))),as=[ts],ss=ja((()=>(0,n._)("img",{src:Pa,alt:""},null,-1))),ns=[ss],is=ja((()=>(0,n._)("img",{src:Za,alt:""},null,-1))),rs=[is],os={align:"justify"},ls=ja((()=>(0,n._)("img",{src:Ea,alt:""},null,-1))),ds=[ls],us=ja((()=>(0,n._)("i",{class:"bi bi-sign-stop"},null,-1))),cs=[us],ms=ja((()=>(0,n._)("img",{src:za,alt:""},null,-1))),hs=[ms],gs={align:"justify"},_s=ja((()=>(0,n._)("img",{src:Ra,alt:""},null,-1))),ps=[_s],ws=ja((()=>(0,n._)("img",{src:Ha,alt:""},null,-1))),vs=[ws],fs=ja((()=>(0,n._)("img",{src:Fa,alt:""},null,-1))),As=[fs];function ys(e,t,a,s,r,o){const l=(0,n.up)("el-input-number"),d=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",$a,[r.speed_modifyable?((0,n.wg)(),(0,n.iD)("div",qa,[(0,n._)("div",Qa,[Ya,(0,n.Wm)(l,{size:"large",modelValue:r.linear_speed,"onUpdate:modelValue":t[0]||(t[0]=e=>r.linear_speed=e),step:.1,max:1,min:.01},null,8,["modelValue","step","min"])]),(0,n._)("div",Xa,[Ka,(0,n.Wm)(l,{size:"large",modelValue:r.rotation_speed,"onUpdate:modelValue":t[1]||(t[1]=e=>r.rotation_speed=e),step:.01,max:.3,min:.01},null,8,["modelValue","step","max","min"])])])):(0,n.kq)("",!0),(0,n._)("table",Ja,[(0,n._)("tbody",null,[(0,n._)("tr",es,[(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[2]||(t[2]=e=>o.MOVE_FL())},as,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[3]||(t[3]=e=>o.MOVE_UP())},ns,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[4]||(t[4]=e=>o.MOVE_FR())},rs,2)])]),(0,n._)("tr",os,[(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[5]||(t[5]=e=>o.MOVE_LEFT())},ds,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[6]||(t[6]=e=>o.MOVE_STOP())},cs,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[7]||(t[7]=e=>o.MOVE_RIGHT())},hs,2)])]),(0,n._)("tr",gs,[(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[8]||(t[8]=e=>o.MOVE_BL())},ps,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[9]||(t[9]=e=>o.MOVE_DOWN())},vs,2)]),(0,n._)("td",null,[(0,n._)("div",{class:(0,i.C_)(o.active_state),onClick:t[10]||(t[10]=e=>o.MOVE_BR())},As,2)])])])]),(0,n._)("div",{onClick:t[11]||(t[11]=e=>r.speed_modifyable=!r.speed_modifyable),style:{height:"20px",width:"100px"},class:"bg-light"})])),[[d,!a.enabled]])])}function bs(e,t,a,s,i,r){const o=(0,n.up)("el-input"),l=(0,n.up)("SimpleKeyboardVue"),d=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",{key:a.key},[(0,n.Wm)(o,{modelValue:i.number,"onUpdate:modelValue":t[0]||(t[0]=e=>i.number=e),step:a.step,onChange:r.InputChangedHandle,onClick:r.InputClickHandler},null,8,["modelValue","step","onChange","onClick"]),(0,n.Wm)(d,{modelValue:i.show_keyboard,"onUpdate:modelValue":t[1]||(t[1]=e=>i.show_keyboard=e),direction:"btt",size:""},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{onOnKeyPress:r.keyboardInputHandler,keyboard_type:"number"},null,8,["onOnKeyPress"])])),_:1},8,["modelValue"])])}var Ss={components:{SimpleKeyboardVue:ht.Z},props:{default:{type:Number,default:0},step:{type:Number,default:.1},key:{type:Object,default:Date.now()}},data(){return{number:this.value,show_keyboard:!1,input_str:""}},methods:{InputChangedHandle(e){this.number=e},InputClickHandler(){this.show_keyboard=!0},keyboardInputHandler(e){if(""!=e){if("enter"==e)return"."==this.input_str[this.input_str.length-1]&&(this.input_str=this.input_str.slice(0,-1)),this.InputChangedHandle(this.GetInputNumber),void(this.show_keyboard=!1);if("back"==e)return""!=this.input_str&&(this.input_str=this.input_str.slice(0,-1)),void this.InputChangedHandle(this.GetInputNumber);this.input_str+=e,this.InputChangedHandle(this.GetInputNumber)}}},computed:{GetInputNumber(){return parseFloat(""==this.input_str?0:this.input_str)}},mounted(){this.number=this.default}};const ks=(0,g.Z)(Ss,[["render",bs]]);var Cs=ks,Ds={components:{KeyboardInput:Cs},props:{enabled:{type:Boolean,default:!1}},data(){return{linear_speed:.2,rotation_speed:.2,speed_modifyable:!1}},methods:{async MOVE_UP(){await b.tU.AGVMove_UP(this.linear_speed)},async MOVE_DOWN(){await b.tU.AGVMove_DOWN(this.linear_speed)},async MOVE_LEFT(){await b.tU.AGVMove_LEFT(this.rotation_speed)},async MOVE_RIGHT(){await b.tU.AGVMove_RIGHT(this.rotation_speed)},async MOVE_STOP(){await b.tU.AGVMove_STOP()},async MOVE_FR(){await b.tU.AGVMove_FordwardRight()},async MOVE_FL(){await b.tU.AGVMove_FordwardLeft()},async MOVE_BR(){await b.tU.AGVMove_BackwardRight()},async MOVE_BL(){await b.tU.AGVMove_BackwardLeft()}},computed:{active_state(){return this.enabled?"active":"inactive"}}};const Is=(0,g.Z)(Ds,[["render",ys],["__scopeId","data-v-82e153bc"]]);var Vs=Is,xs=a(6265),Ms=a.n(xs),Ts=Ms().create({baseURL:me.Z.backend_host});const Os={GetMapFromServer(){return Ts.get("api/map/GetMapFromServer").then((e=>e.data)).catch((e=>{}))},GetMapFromLocal(){return Ts.get("api/Map").then((e=>e.data)).catch((e=>{}))},GetMapTags(){return Ts.get("api/Map/Tags").then((e=>e.data)).catch((e=>{}))},SaveMap(e){return Ts.post("api/Map/SaveMap",e).then((e=>!0)).catch((e=>!1))},ReloadMap(){return Ts.get("api/Map/ReloadMap").then((e=>e.data)).catch((e=>{}))},GetAGVList(){return Ts.get("api/Map/AGVList").then((e=>e.data)).catch((e=>{}))},PathPlanByTag(e,t){return Ts.get(`api/Map/PathPlan?fromTag=${e}&toTag=${t}`).then((e=>e.data)).catch((e=>{}))},UploadCoordination(e,t,a,s,n){try{return Ts.get(`api/Map/UploadCoordination?AGVName=${e}&tagNumber=${t}&x=${a}&y=${s}&theta=${n}`).then((e=>e.data))}catch(i){return!1}}};var Us=Os,Ls={components:{agvc_control_panel:Vs},props:{ModuleInformation:{type:Object,default(){return{}}},enabled:{type:Boolean,default:!1},super_user:{type:Boolean,default:!1}},data(){return{vms_data:new Ct.ZP}},computed:{TagID(){return void 0==this.ModuleInformation.reader?-1:this.ModuleInformation.reader.tagID}},methods:{async FindTagBtnHandler(){await(0,b.vI)()},async HandleUpload(){var e=this.vms_data.CarName,t=this.vms_data.Tag,a=this.vms_data.Pose.position.x,s=this.vms_data.Pose.position.y,n=this.vms_data.Angle,i=await Us.UploadCoordination(e,t,a,s,n);i?this.$swal.fire({text:"位置上報成功",title:"位置上報",icon:"information",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:"位置上報失敗",title:"位置上報",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}},mounted(){l.Z.on("/vms_data",(e=>{this.vms_data=e}))}};const Gs=(0,g.Z)(Ls,[["render",Ba],["__scopeId","data-v-e3bfc6ce"]]);var Ws=Gs;const Bs=e=>((0,n.dD)("data-v-49bd1bf7"),e=e(),(0,n.Cn)(),e),Ns={class:"z-axis-control border p-1"},Ps={class:"d-flex"},Zs={class:"d-flex flex-column w-50"},Es={class:"d-flex flex-row"},zs=Bs((()=>(0,n._)("div",{class:"label-item"},"Hardware Limited",-1))),Rs={class:"d-flex flex-row my-2"},Hs=Bs((()=>(0,n._)("div",{class:"label-item"},"Current Position",-1))),Fs={key:0,class:"p-2 my-2 border rounded"},js={class:"control-buttons mx-2"},$s=Bs((()=>(0,n._)("i",{class:"bi bi-chevron-bar-up"},null,-1))),qs=Bs((()=>(0,n._)("i",{class:"bi bi-chevron-up"},null,-1))),Qs=Bs((()=>(0,n._)("i",{style:{color:"rgb(0, 123, 255)"},class:"bi bi-house-fill"},null,-1))),Ys=Bs((()=>(0,n._)("i",{style:{color:"rgb(255, 61, 80)"},class:"bi bi-stop-circle-fill"},null,-1))),Xs=Bs((()=>(0,n._)("i",{class:"bi bi-chevron-down"},null,-1))),Ks=Bs((()=>(0,n._)("i",{class:"bi bi-chevron-bar-down"},null,-1)));function Js(e,t,a,r,o,l){const d=(0,n.up)("el-checkbox"),u=(0,n.up)("el-input"),c=(0,n.up)("b-button"),m=(0,n.up)("forkTeachEditor"),h=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",Ns,[(0,n.wy)((0,n._)("div",{class:"disable-notify text-start my-2"},(0,i.zw)(e.$t("zaxis_control_notify_text")),513),[[s.F8,!a.enabled]]),(0,n._)("div",Ps,[(0,n._)("div",Zs,[(0,n._)("div",Es,[zs,(0,n.Wm)(d,{modelValue:o.hardware_limit_enable,"onUpdate:modelValue":t[0]||(t[0]=e=>o.hardware_limit_enable=e),disabled:!a.enabled},null,8,["modelValue","disabled"])]),(0,n._)("div",Rs,[Hs,(0,n.Wm)(u,{size:"small",style:{width:"72px"},class:"py-1",center:"",modelValue:l.ForkHeight,"onUpdate:modelValue":t[1]||(t[1]=e=>l.ForkHeight=e),disabled:""},null,8,["modelValue"])]),a.enabled?((0,n.wg)(),(0,n.iD)("div",Fs,[(0,n.Wm)(c,{onClick:l.ShowTeachView},{default:(0,n.w5)((()=>[(0,n.Uk)("牙叉位置校點")])),_:1},8,["onClick"])])):(0,n.kq)("",!0)]),(0,n._)("div",js,[(0,n.Wm)(c,{disabled:!a.enabled|o.isZAxisMoving,size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[$s,(0,n.Uk)(" "+(0,i.zw)(e.$t("up_limit_pose")),1)])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:!a.enabled|o.isZAxisMoving,onClick:t[2]||(t[2]=e=>l.ForkAction("up")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[qs,(0,n.Uk)(" "+(0,i.zw)(e.$t("up")),1)])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:!a.enabled|o.isZAxisMoving,onClick:t[3]||(t[3]=e=>l.ForkAction("home")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[Qs,(0,n.Uk)(" "+(0,i.zw)(e.$t("original")),1)])),_:1},8,["disabled"]),(0,n.Wm)(c,{onClick:t[4]||(t[4]=e=>l.ForkAction("stop")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[Ys,(0,n.Uk)(" "+(0,i.zw)(e.$t("stop")),1)])),_:1}),(0,n.Wm)(c,{disabled:!a.enabled|o.isZAxisMoving,onClick:t[5]||(t[5]=e=>l.ForkAction("down")),size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[Xs,(0,n.Uk)(" "+(0,i.zw)(e.$t("down")),1)])),_:1},8,["disabled"]),(0,n.Wm)(c,{disabled:!a.enabled|o.isZAxisMoving,size:"lg",class:"w-100 border mb-3",variant:"light",block:""},{default:(0,n.w5)((()=>[Ks,(0,n.Uk)(" "+(0,i.zw)(e.$t("down_limit_pose")),1)])),_:1},8,["disabled"])]),(0,n.Wm)(h,{modelValue:o.show_teach_page,"onUpdate:modelValue":t[6]||(t[6]=e=>o.show_teach_page=e),direction:"btt",size:"80%",onClose:l.TeachDrawerClosingHandle,title:"FORK TEACH"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{ref:"fork_teach"},null,512)])),_:1},8,["modelValue","onClose"])])])}var en=a(5339),tn=a(9348),an={components:{AdminFork:en.Z,forkTeachEditor:tn.Z},props:{enabled:{type:Boolean,default:!1}},data(){return{isZAxisMoving:!1,show_teach_page:!1,hardware_limit_enable:!0}},computed:{ForkHeight(){return w.q$.getters.ForkHeight}},methods:{async ForkAction(e,t=0,a=0){this.isZAxisMoving=!0;var s=await b.ks.Action(e,t,a);this.isZAxisMoving=!1,s.confirm||this.$swal.fire({text:s.message,icon:"error",title:"牙叉禁止操作"})},ShowTeachView(){this.$refs["fork_teach"]&&this.$refs["fork_teach"].reload(),this.show_teach_page=!0},TeachDrawerClosingHandle(){w.k0.getters.IsAnyChanged&&this.$swal.fire({icon:"warning",text:"教點資料已修改但尚未儲存，確定要離開?",showConfirmButton:!0,showCancelButton:!0}).then((e=>{e.isConfirmed||(this.show_teach_page=!0)}))}}};const sn=(0,g.Z)(an,[["render",Js],["__scopeId","data-v-49bd1bf7"]]);var nn=sn,rn=a(8282),on=a(3251);const ln=e=>((0,n.dD)("data-v-68118e6a"),e=e(),(0,n.Cn)(),e),dn={class:"manual_settings border px-3 mx-3"},un={class:"d-flex flex-row py-3"},cn=ln((()=>(0,n._)("div",{class:"item-label"},"Laser Mode",-1))),mn={class:"updown-btns"},hn={class:"d-flex flex-row py-3"},gn=ln((()=>(0,n._)("div",{class:"item-label"},"Current Laser Mode",-1))),_n={key:0,class:"d-flex flex-row py-3"},pn=ln((()=>(0,n._)("div",{class:"item-label"},"電池鎖定",-1))),wn={class:"battery py-1"},vn={class:"d-flex flex-row mb-1"},fn=ln((()=>(0,n._)("label",null,"電池 1",-1))),An={class:"d-flex flex-row"},yn=ln((()=>(0,n._)("label",null,"電池 2",-1))),bn={key:1,class:"d-flex flex-row py-3"},Sn=ln((()=>(0,n._)("div",{class:"item-label"},"牙叉伸縮",-1))),kn={class:"battery py-1"},Cn={class:"d-flex flex-row mb-1"},Dn=ln((()=>(0,n._)("p",null,"Are you sure?",-1)));function In(e,t,a,s,r,o){const l=(0,n.up)("b-form-input"),d=(0,n.up)("b-button"),u=(0,n.up)("b-input-group-append"),c=(0,n.up)("b-input-group-prepend"),m=(0,n.up)("b-input-group"),h=(0,n.up)("SimpleKeyboard"),g=(0,n.up)("el-drawer"),_=(0,n.up)("b-modal");return(0,n.wg)(),(0,n.iD)("div",dn,[(0,n._)("div",un,[cn,(0,n._)("div",null,[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,{size:"lg",class:"centered-text",disabled:!a.enabled,modelValue:r.laser_mode,"onUpdate:modelValue":t[0]||(t[0]=e=>r.laser_mode=e),type:"number",min:"0",max:"16","text-align":"center",onClick:t[1]||(t[1]=()=>r.show_keyboard=!0)},null,8,["disabled","modelValue"]),(0,n._)("div",mn,[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{disabled:!a.enabled,squared:"",onClick:o.LaserMode_Increase},{default:(0,n.w5)((()=>[(0,n.Uk)("▲")])),_:1},8,["disabled","onClick"])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{disabled:!a.enabled,squared:"",onClick:o.LaserMode_decrease},{default:(0,n.w5)((()=>[(0,n.Uk)("▼")])),_:1},8,["disabled","onClick"])])),_:1})])])),_:1})]),(0,n.Wm)(d,{onClick:t[2]||(t[2]=e=>r.modifyLaserModeDialogShow=!0),disabled:!a.enabled,squared:"",class:"mx-1",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Modify")])),_:1},8,["disabled"])]),(0,n._)("div",hn,[gn,(0,n._)("div",null,[(0,n.Wm)(l,{size:"lg",class:"centered-text",disabled:"",modelValue:o.CurrentLaserMode,"onUpdate:modelValue":t[3]||(t[3]=e=>o.CurrentLaserMode=e),min:"0",max:"16","text-align":"center"},null,8,["modelValue"])])]),(0,n.Wm)(g,{modelValue:r.show_keyboard,"onUpdate:modelValue":t[4]||(t[4]=e=>r.show_keyboard=e),direction:"btt",size:"50%"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{keyboard_type:"number",onOnChange:o.onChange},null,8,["onOnChange"])])),_:1},8,["modelValue"]),o.IsBatteryLockControlable?((0,n.wg)(),(0,n.iD)("div",_n,[pn,(0,n._)("div",wn,[(0,n._)("div",vn,[fn,(0,n.Wm)(d,{onClick:t[5]||(t[5]=e=>o.BatteryLockHandler(1,!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1}),(0,n.Wm)(d,{onClick:t[6]||(t[6]=e=>o.BatteryLockHandler(1,!1)),squared:"",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1})]),(0,n._)("div",An,[yn,(0,n.Wm)(d,{onClick:t[7]||(t[7]=e=>o.BatteryLockHandler(2,!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Lock")])),_:1}),(0,n.Wm)(d,{onClick:t[8]||(t[8]=e=>o.BatteryLockHandler(2,!1)),squared:"",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("Unlock")])),_:1})])])])):(0,n.kq)("",!0),o.IsForkARMControlable?((0,n.wg)(),(0,n.iD)("div",bn,[Sn,(0,n._)("div",kn,[(0,n._)("div",Cn,[(0,n.Wm)(d,{disabled:o.FORK_ARM_Status.IsArmAtHomePose&&!o.FORK_ARM_Status.IsArmAtEndPose,onClick:t[9]||(t[9]=e=>o.ForkArmPoseControlHandler(!1)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("縮回")])),_:1},8,["disabled"]),(0,n.Wm)(d,{disabled:o.FORK_ARM_Status.IsArmAtEndPose&&!o.FORK_ARM_Status.IsArmAtHomePose,onClick:t[10]||(t[10]=e=>o.ForkArmPoseControlHandler(!0)),squared:"",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("伸出")])),_:1},8,["disabled"]),(0,n.Wm)(d,{onClick:t[11]||(t[11]=e=>o.ForkArmStopHandler()),squared:"",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("停止")])),_:1})])])])):(0,n.kq)("",!0),(0,n.kq)("",!0),(0,n.kq)("",!0),(0,n.Wm)(_,{modelValue:r.modifyLaserModeDialogShow,"onUpdate:modelValue":t[15]||(t[15]=e=>r.modifyLaserModeDialogShow=e),centered:!0,title:"Laser Mode Change",onOk:o.ModifyLaserMode},{default:(0,n.w5)((()=>[(0,n._)("p",null,"Change Laser Mode to : "+(0,i.zw)(r.laser_mode),1),Dn])),_:1},8,["modelValue","onOk"])])}var Vn={components:{SimpleKeyboard:ht.Z},props:{enabled:{type:Boolean,default:!1}},data(){return{laser_mode:0,modifyLaserModeDialogShow:!1,show_keyboard:!1}},computed:{IsBatteryLockControlable(){return w.q$.getters.IsInspectionAGV},IsForkARMControlable(){return w.q$.getters.IsForkAGV},FORK_ARM_Status(){return w.zb.getters.Fork_ARM_States},CurrentLaserMode(){return w.q$.getters.CurrentLaserMode}},methods:{LaserMode_Increase(){this.laser_mode++},LaserMode_decrease(){0!=this.laser_mode&&this.laser_mode--},async ModifyLaserMode(){await(0,b.Lv)(this.laser_mode),Lt.Z.Success(`Lasr mode changed:${this.laser_mode}`)},async Brake(){await b.br.Brake()},async UnBrake(){await b.br.UnBrake()},async ResetMile(){await(0,b.S1)()},async BatteryLockHandler(e,t){await(0,b.lQ)(e,t)},async ForkArmPoseControlHandler(e){e?await b.ks.ARM_Extend():await b.ks.ARM_Shorten()},async ForkArmStopHandler(){await b.ks.ARM_Stop()},onChange(e){e+""==""?this.laser_mode=0:(e>16&&(e=16),this.laser_mode=e)}}};const xn=(0,g.Z)(Vn,[["render",In],["__scopeId","data-v-68118e6a"]]);var Mn=xn,Tn={components:{AgvControl:Ws,ZAxisControl:nn,IOTable:rn.Z,ManualSettings:Mn},data(){return{type:"",DIOTableData:new on.Z,trigger_admin_dialog_count:5,version_text_click_count:0,modal_key:""}},mounted(){console.log("agv operator mounted"),this.DIOTableWSInit()},methods:{DIOTableWSInit(){var e=new yt.Z("ws/DIOTableData");e.Connect(),e.onmessage=e=>{this.DIOTableData=JSON.parse(e.data),w.zb.commit("updateStatus",this.DIOTableData)}},VersionTextClickHandle(){this.version_text_click_count+=1,this.version_text_click_count>this.trigger_admin_dialog_count&&this.ConfirmGODTriggering()},ConfirmGODTriggering(){this.$swal.fire({title:"Warning",text:"Do you known what are you doing now?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",allowOutsideClick:!1}).then((e=>{this.AdminSwitchDialogResultHandle(e.isConfirmed)}))},AdminSwitchDialogResultHandle(e=!1){this.version_text_click_count=0,e&&w.U6.commit("setUser",{UserName:"GOD",Role:3})}},props:{ModuleInformation:{type:Object,default(){return{}}},operation_enabled:{type:Boolean,default:!1},agv_type:{type:Number,default(){return 0}}},computed:{isGodMode(){return w.U6.getters.IsGodUser},UIVersion(){return me.i?me.i:"0.0.0.0"},operation_enabled_return(){return!!this.isGodMode||this.operation_enabled}}};const On=(0,g.Z)(Tn,[["render",ka],["__scopeId","data-v-9c063bb2"]]);var Un=On,Ln=a(5308);const Gn={class:"d-flex flex-row my-1"},Wn=(0,n._)("span",{class:"mx-1 py-1"},"Only Task Message",-1),Bn=(0,n._)("span",{class:"flex-fill"},null,-1);function Nn(e,t,a,s,r,o){const l=(0,n.up)("el-switch"),d=(0,n.up)("b-button"),u=(0,n.up)("el-table-column"),c=(0,n.up)("el-tag"),m=(0,n.up)("el-table");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Gn,[Wn,(0,n.Wm)(l,{modelValue:r.only_task_msg,"onUpdate:modelValue":t[0]||(t[0]=e=>r.only_task_msg=e)},null,8,["modelValue"]),Bn,(0,n.Wm)(d,{class:"",size:"sm",variant:"danger",onClick:o.ClearHandler},{default:(0,n.w5)((()=>[(0,n.Uk)("Clear")])),_:1},8,["onClick"])]),(0,n.Wm)(m,{height:"580",data:r.MsgDataList,border:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{label:"時間",prop:"TimeFormated"}),(0,n.Wm)(u,{label:"方向",prop:"Direction_str"},{default:(0,n.w5)((e=>[(0,n.Wm)(c,{effect:"dark",type:o.GetTagType(e.row.Direction_str),"disable-transitions":""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.row.Direction_str),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(u,{label:"Message",prop:"Msg_Display"})])),_:1},8,["data"])],64)}var Pn={data(){return{MsgDataList:[],only_task_msg:!0}},methods:{ClearHandler(){this.MsgDataList=[]},AddNewMsgData(e){if(this.only_task_msg){if(!e.Message.includes("0301")&&!e.Message.includes("0305"))return;JSON.parse(e.Message.replaceAll("*\r",""))}this.MsgDataList.length>=20&&this.MsgDataList.pop(),e.TimeFormated=f()(e.Time).format("yyyy-MM-DD HH:mm:ss"),e.Direction_str=0==e.Direction?"AGVS->AGV":"AGV->AGVS",e.Msg_Display=e.Message,this.MsgDataList.unshift(e)},GetTagType(e){return"AGVS->AGV"==e?"danger":"primary"}}};const Zn=(0,g.Z)(Pn,[["render",Nn]]);var En=Zn;const zn=e=>((0,n.dD)("data-v-4f118c90"),e=e(),(0,n.Cn)(),e),Rn={class:"task-delivery"},Hn={class:"my-1 d-flex"},Fn={class:"item"},jn=zn((()=>(0,n._)("div",{class:"title"},"動作",-1))),$n={class:"text-start mx-1"},qn={key:0},Qn={class:"item"},Yn=zn((()=>(0,n._)("div",{class:"title"},"目的地",-1))),Xn={key:1},Kn={class:"d-flex"},Jn={class:"item"},ei=zn((()=>(0,n._)("div",{class:"title"},"起點",-1))),ti={class:"item"},ai=zn((()=>(0,n._)("div",{class:"title mx-1"},"終點",-1))),si={class:"item"},ni=zn((()=>(0,n._)("div",{class:"title"},"載物ID",-1))),ii={class:"bg-light item d-flex justify-content-end"},ri={class:"text-start"},oi={class:"px-1 d-flex flex-row justify-content-around"},li=zn((()=>(0,n._)("i",{class:"bi bi-arrows-move"},null,-1))),di=zn((()=>(0,n._)("i",{class:"bi bi-box-arrow-up-right"},null,-1))),ui=zn((()=>(0,n._)("i",{class:"bi bi-box-arrow-in-down-left"},null,-1))),ci=zn((()=>(0,n._)("i",{class:"bi bi-battery-charging"},null,-1))),mi=zn((()=>(0,n._)("p",null,"確定要派送此任務?",-1)));function hi(e,t,a,s,r,o){const l=(0,n.up)("el-option"),d=(0,n.up)("el-select"),u=(0,n.up)("b-button"),c=(0,n.up)("el-input"),m=(0,n.up)("MapShowVue"),h=(0,n.up)("el-drawer"),g=(0,n.up)("MoveTestDrawer"),_=(0,n.up)("b-modal");return(0,n.wg)(),(0,n.iD)("div",Rn,[(0,n._)("div",Hn,[(0,n._)("div",null,[(0,n._)("div",Fn,[jn,(0,n.Wm)(d,{modelValue:r.selectedAction,"onUpdate:modelValue":t[0]||(t[0]=e=>r.selectedAction=e),placeholder:"請選擇Action"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{label:"移動",value:"None"}),(0,n.Wm)(l,{label:"停車",value:"Park"}),(0,n.Wm)(l,{label:"搬運",value:"Carry"}),(0,n.Wm)(l,{label:"Load",value:"Load"}),(0,n.Wm)(l,{label:"Unload",value:"Unload"}),(0,n.Wm)(l,{label:"充電",value:"Charge"})])),_:1},8,["modelValue"]),(0,n._)("div",$n,[(0,n.Wm)(u,{onClick:o.TaskDeliveryBtnClickHandle,variant:"primary",block:""},{default:(0,n.w5)((()=>[(0,n.Uk)("派送任務")])),_:1},8,["onClick"])])]),"None"===r.selectedAction|"Unload"===r.selectedAction|"Load"===r.selectedAction|"Charge"===r.selectedAction|"Park"===r.selectedAction?((0,n.wg)(),(0,n.iD)("div",qn,[(0,n._)("div",Qn,[Yn,(0,n.Wm)(d,{onClick:t[1]||(t[1]=e=>o.GetNormalStationTagsFromMap()),modelValue:r.selectedToTag,"onUpdate:modelValue":t[2]||(t[2]=e=>r.selectedToTag=e),placeholder:"請選擇目的地"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.tags,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])])):((0,n.wg)(),(0,n.iD)("div",Xn,[(0,n._)("div",Kn,[(0,n._)("div",Jn,[ei,(0,n.Wm)(d,{modelValue:r.selectedTag,"onUpdate:modelValue":t[3]||(t[3]=e=>r.selectedTag=e),placeholder:"請選擇起點"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.tags,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,n._)("div",ti,[ai,(0,n.Wm)(d,{modelValue:r.selectedToTag,"onUpdate:modelValue":t[4]||(t[4]=e=>r.selectedToTag=e),placeholder:"請選擇終點"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.tags,(e=>((0,n.wg)(),(0,n.j4)(l,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),(0,n._)("div",si,[ni,(0,n.Wm)(c,{modelValue:r.selectedCst,"onUpdate:modelValue":t[5]||(t[5]=e=>r.selectedCst=e),placeholder:"請輸入載物ID"},null,8,["modelValue"])])]))]),(0,n._)("div",ii,[o.IsGodUse?((0,n.wg)(),(0,n.j4)(u,{key:0,onClick:t[6]||(t[6]=()=>{o.MoveTestPanel.Show()}),variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("移動測試")])),_:1})):(0,n.kq)("",!0)])]),(0,n.Wm)(m,{task_allocatable:!0,onOnFeatureClicked:o.MapFeatureClickedHandle,class:"flex-fill",style:{height:"600px"},ref:"map"},null,8,["onOnFeatureClicked"]),(0,n.Wm)(h,{modelValue:r.ShowTaskAllocateDrawer,"onUpdate:modelValue":t[11]||(t[11]=e=>r.ShowTaskAllocateDrawer=e),direction:"btt"},{header:(0,n.w5)((()=>[(0,n._)("h2",ri,"Tag-"+(0,i.zw)(void 0==r.SelectedFeature?"":r.SelectedFeature.getId()),1)])),default:(0,n.w5)((()=>[(0,n._)("div",oi,[(0,n.Wm)(u,{class:"my-1 action-button",variant:"primary",onClick:t[7]||(t[7]=e=>o.handleTaskAllocatModeMenuClick("None")),disabled:!o.SelectedFeatureMovable},{default:(0,n.w5)((()=>[li,(0,n.Uk)("移動 ")])),_:1},8,["disabled"]),(0,n.Wm)(u,{class:"my-1 action-button",variant:"primary",onClick:t[8]||(t[8]=e=>o.handleTaskAllocatModeMenuClick("Load")),disabled:!o.SelectedFeatureLDULDable},{default:(0,n.w5)((()=>[di,(0,n.Uk)("放貨 ")])),_:1},8,["disabled"]),(0,n.Wm)(u,{class:"my-1 action-button",variant:"primary",onClick:t[9]||(t[9]=e=>o.handleTaskAllocatModeMenuClick("Unload")),disabled:!o.SelectedFeatureLDULDable},{default:(0,n.w5)((()=>[ui,(0,n.Uk)("取貨 ")])),_:1},8,["disabled"]),(0,n.Wm)(u,{class:"my-1 action-button",variant:"success",onClick:t[10]||(t[10]=e=>o.handleTaskAllocatModeMenuClick("Charge")),disabled:!o.SelectedFeatureChargable},{default:(0,n.w5)((()=>[ci,(0,n.Uk)("充電 ")])),_:1},8,["disabled"])])])),_:1},8,["modelValue"]),(0,n.Wm)(g,{ref:"move_test"},null,512),(0,n.Wm)(_,{onOk:o.TaskDeliveryHandle,modelValue:r.confirm_dialog_show,"onUpdate:modelValue":t[12]||(t[12]=e=>r.confirm_dialog_show=e),centered:!0,title:"Task Delivery","header-bg-variant":"primary","header-text-variant":"light"},{default:(0,n.w5)((()=>[(0,n._)("p",null,[(0,n._)("span",null,"Action:"+(0,i.zw)(r.selectedAction),1)]),mi])),_:1},8,["onOk","modelValue"]),(0,n.Wm)(_,{modelValue:r.notify_dialog_show,"onUpdate:modelValue":t[13]||(t[13]=e=>r.notify_dialog_show=e),centered:!0,title:"Warning","ok-only":!0,"header-bg-variant":"warning","header-text-variant":"light"},{default:(0,n.w5)((()=>[(0,n._)("p",null,[(0,n._)("span",null,(0,i.zw)(r.notify_text),1)])])),_:1},8,["modelValue"])])}const gi={class:"map-show border py-2 px-2 d-flex flex-row bg-light"},_i={class:"w-100"},pi={class:"w-100 d-flex flex-row justify-content-end"},wi=(0,n._)("span",{class:"p-1"},"MAP",-1),vi={class:"p-2 text-start"},fi={class:"px-1",style:{position:"absolute",left:"6px"}},Ai={class:"px-1",style:{position:"absolute",left:"6px"}},yi={class:"p-2 text-start"},bi={class:"px-1",style:{position:"absolute",left:"6px"}},Si={class:"p-2 text-start border-bottom"},ki=(0,n._)("span",null,"AGV :",-1),Ci={class:"px-1",style:{position:"absolute",left:"6px"}};function Di(e,t,a,r,o,l){const d=(0,n.up)("b-form-input"),u=(0,n.up)("b-button"),c=(0,n.up)("el-color-picker"),m=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",gi,[(0,n._)("div",_i,[(0,n._)("div",pi,[wi,(0,n._)("div",null,[(0,n.Wm)(d,{modelValue:o.map_name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.map_name=e),disabled:"",size:"sm",state:void 0!=o.map_data.Name},null,8,["modelValue","state"])])]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{ref:"map",key:o.reload_key,class:"map border",onContextmenu:t[8]||(t[8]=(0,s.iM)(((...e)=>l.showContextMenu&&l.showContextMenu(...e)),["prevent"])),onClick:t[9]||(t[9]=(...e)=>l.HideAllMenus&&l.HideAllMenus(...e))},[o.showStationMenu?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,i.j5)(o.map_contextmenu_style)},[(0,n._)("div",vi,[(0,n.Uk)(" Tag: "),(0,n._)("b",null,(0,i.zw)(l.current_select_featureID),1)]),(0,n._)("div",fi,[(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"danger",onClick:t[1]||(t[1]=e=>l.handleEditModeMenuClick("remove"))},{default:(0,n.w5)((()=>[(0,n.Uk)("移除")])),_:1}),(0,n.Wm)(u,{variant:"primary",class:"w-100 my-1",size:"sm",onClick:t[2]||(t[2]=e=>l.handleEditModeMenuClick("point_setting"))},{default:(0,n.w5)((()=>[(0,n.Uk)("點位設定")])),_:1})])],4)):(0,n.kq)("",!0),o.showNoPointSelectedMenu?((0,n.wg)(),(0,n.iD)("div",{key:1,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,i.j5)(o.map_contextmenu_style)},[(0,n._)("div",Ai,[(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"danger",onClick:t[3]||(t[3]=e=>l.handleNoPointSelectedMenuClick("add_point"))},{default:(0,n.w5)((()=>[(0,n.Uk)("新增站點")])),_:1})])],4)):(0,n.kq)("",!0),o.showTaskAllocationMenu?((0,n.wg)(),(0,n.iD)("div",{key:2,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,i.j5)(o.map_contextmenu_style)},[(0,n._)("div",yi,[(0,n.wy)((0,n._)("span",null,"Tag:",512),[[s.F8,!l.is_agv_feature_selected]]),(0,n.wy)((0,n._)("span",null,"AGV:",512),[[s.F8,l.is_agv_feature_selected]]),(0,n._)("b",null,(0,i.zw)(l.is_agv_feature_selected?l.current_select_agv_name:l.current_select_featureID),1)]),(0,n._)("div",bi,[(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"primary",onClick:t[4]||(t[4]=e=>l.handleTaskAllocatModeMenuClick("move"))},{default:(0,n.w5)((()=>[(0,n.Uk)("移動")])),_:1}),(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"primary",onClick:t[5]||(t[5]=e=>l.handleTaskAllocatModeMenuClick("load"))},{default:(0,n.w5)((()=>[(0,n.Uk)("放貨")])),_:1}),(0,n.Wm)(u,{class:"w-100 my-1",size:"sm",variant:"primary",onClick:t[6]||(t[6]=e=>l.handleTaskAllocatModeMenuClick("unload"))},{default:(0,n.w5)((()=>[(0,n.Uk)("取貨")])),_:1})])],4)):(0,n.kq)("",!0),o.showAGVMenu?((0,n.wg)(),(0,n.iD)("div",{key:3,class:"edit-mode-menu bg-light border rounded",ref:"contextMenu",style:(0,i.j5)(o.map_contextmenu_style)},[(0,n._)("div",Si,[ki,(0,n._)("b",null,(0,i.zw)(l.current_select_agv_name),1)]),(0,n._)("div",Ci,[(0,n.Wm)(c,{modelValue:e.color,"onUpdate:modelValue":t[7]||(t[7]=t=>e.color=t),"show-alpha":""},null,8,["modelValue"])])],4)):(0,n.kq)("",!0)],32)),[[m,o.loading]])])])}a(1827),a(2635);var Ii=a(3219),Vi=a(1508),xi=a(563),Mi=a(6053),Ti=a(3379),Oi=a(2949),Ui=a(2205),Li=a(9966),Gi=a(8346),Wi=a(7983),Bi=a(7712),Ni=a(7339),Pi=a(6241),Zi=a(321),Ei=a(8289),zi={name:"MapComponent",components:{},props:{edit_mode:{type:Boolean,default:!1},task_allocatable:{type:Boolean,default:!1},show_agv:{type:Boolean,default:!0}},data(){return{reload_key:1,loading:!1,selected_feature:void 0,mouse_click_coordinate:void 0,map_name:"Unknown",display_selected:"Name",agv_display_mode_selected:"show",map:new Ii.Z,showStationMenu:!1,showTaskAllocationMenu:!1,showNoPointSelectedMenu:!1,showAGVMenu:!1,path_plan_tags:[],contextMenu:{},agv_color_set:["lime","rgb(51, 194, 255)","yellow","rgb(64, 158, 255)","pink","gold","red","grey"],map_contextmenu_style:{position:"absolute",top:"112px",left:"400px",visibility:"visible",zIndex:200,width:"170px",height:"157px"},layer_index:{station:1,station_line:2,eq_station:3,agv:4,move_path:5,path_plan:6,mesh:7},map_data:{},stations:[],agvList:[],doubleArrowStyle:new Ui.ZP({stroke:new Li.Z({color:"grey",width:3,lineDash:null})}),NavPathLineStyle:new Ui.ZP({stroke:new Li.Z({color:"red",width:8,lineDash:null})}),PathPlanLineStyle:new Ui.ZP({stroke:new Li.Z({color:"blue",width:8,lineDash:null})})}},async mounted(){this.loading=!0,setTimeout((()=>{this.FetchMap(),l.Z.on("/agv_name_list",(e=>{this.UpdateAGVLayer(e)})),l.Z.on("/nav_path_update",(e=>{this.UpdateNavPathRender(e.name,e.tags)}))}),1e3)},computed:{current_select_featureID(){return this.selected_feature?this.selected_feature.getId():""},current_select_agv_name(){return(this.current_select_featureID+"").replace("AGV_","")},station_features(){let e=[];return this.stations.forEach((t=>{void 0!=t.feature&&e.push(t.feature)})),e},is_agv_feature_selected(){if(!this.selected_feature)return!1;var e=this.selected_feature.getId();return console.info(e),(e+"").includes("AGV")},Station_Layer(){return this.map.getLayers().item(this.layer_index.station)},Line_Layer(){return this.map.getLayers().item(this.layer_index.station_line)},AGV_Layer(){return console.info("AGV_Layer"),this.map.getLayers().item(this.layer_index.agv)},Nav_Path_Layer(){return this.map.getLayers().item(this.layer_index.move_path)},PathPlan_Layer(){return this.map.getLayers().item(this.layer_index.path_plan)},Mesh_Layer(){return this.map.getLayers().item(this.layer_index.mesh)}},methods:{Reload(){},FetchMap(){Us.GetMapFromServer().then((e=>{this.loading=!1,void 0==e?Lt.Z.Danger("圖資取得失敗(後端伺服器異常)","bottom",3e3):void 0==e.Points?Lt.Z.Danger("圖資取得失敗(AGVS伺服器異常)","bottom",3e3):(Lt.Z.Success("Success Fetch Map Data From Server.","bottom",2e3),this.map_data=e,this.map_name=e.Name,this.stations=[],Object.keys(e.Points).forEach((t=>{var a=e.Points[t].Graph,s=e.Points[t].TagNumber,n=(e.Points[t].X,e.Points[t].Y,e.Points[t].Name),i=(e.Points[t].StationType,e.Points[t].IsEquipment),r=e.Points[t].IsCharge,o=new Vi.Z({geometry:new Oi.Z([1e3*a.X,-1e3*a.Y]),name:t});o.setId(s),o.set("name",n),o.set("station_type",i?"eq":r?"charge":"normal"),this.stations.push({index:parseInt(t),tag:s,feature:o})})),this.MapInitializeRender())}))},get_agv_position(e){var t=this.agvList.find((t=>t.name==e)),a=this.stations.find((e=>e.tag==t.current_tag));return void 0==a?[0,0]:a.feature.getGeometry().getCoordinates()},GetNormalStations(){if(!this.map_data)return[];var e=Object.values(this.map_data.Points);return e.filter((e=>0==e.StationType))},GetSTKStations(){if(!this.map_data)return[];var e=Object.values(this.map_data.Points);return e.filter((e=>e.IsEquipment))},GetChargeStations(){if(!this.map_data)return[];const e=[3,5,6];var t=Object.values(this.map_data.Points);return t.filter((t=>e.includes(t.StationType)))},MapInitializeRender(){const e=this.CreateLineFeaturesOfEachStaion();this.map=new Ii.Z({target:this.$refs.map,layers:[new Mi.Z({source:new Ti.Z,name:"1"}),new Mi.Z({source:new Ti.Z({features:this.station_features}),zIndex:2}),new Mi.Z({source:new Ti.Z({features:e}),style:this.doubleArrowStyle,zIndex:1}),new Mi.Z({source:new Ti.Z}),new Mi.Z({source:new Ti.Z({features:[]}),zIndex:11111}),new Mi.Z({source:new Ti.Z({features:[]}),zIndex:122}),new Mi.Z({source:new Ti.Z({features:[]}),style:this.PathPlanLineStyle})],view:new xi.ZP({center:[57e3,52e3],zoom:9})}),this.CreateMapEvent(),this.CreateMeshLayer(),this.StationStyleRender();var t=localStorage.getItem("map_view");if(t){var a=JSON.parse(t);this.map.getView().setCenter(a.center),this.map.getView().setZoom(a.zoom)}},CreateMapEvent(){this.map.on("click",(e=>{this.showTaskAllocationMenu=this.showStationMenu=this.showNoPointSelectedMenu=!1})),this.map.on("moveend",(e=>{var t=this.map.getView().getZoom(),a=this.map.getView().getCenter();localStorage.setItem("map_view",JSON.stringify({zoom:t,center:a}))})),this.map.on("pointerdown",(e=>{2===e.originalEvent.button|0===e.originalEvent.button&&(this.selected_feature=this.map.forEachFeatureAtPixel(e.pixel,(e=>(setTimeout((()=>{this.$emit("OnFeatureClicked",e)}),100),e))))}));var e=this,t=new Zi.Z({handleDownEvent:function(t){var a=t.map,s=a.forEachFeatureAtPixel(t.pixel,(function(e){return e}));if(e.mouse_click_coordinate=t.coordinate,e.selected_feature=s,!e.edit_mode)return!1;if(!s)return!1;var n=s.getId();return!!n&&(this.feature_=s,this.coordinate_=t.coordinate,!0)},handleDragEvent:function(t){var a=t.coordinate[0]-this.coordinate_[0],s=t.coordinate[1]-this.coordinate_[1],n=this.feature_.getGeometry();n.translate(a,s),this.coordinate_=t.coordinate;var i=e.CreateLineFeaturesOfEachStaion(),r=e.Line_Layer.getSource();r.clear(),r.addFeatures(i);var o=e.selected_feature.getId(),l=e.selected_feature.getGeometry().getCoordinates();for(let d in e.map_data.Points)if(e.map_data.Points[d].TagNumber===o){e.map_data.Points[d].Graph.X=Math.round(l[0]/1e3,0),e.map_data.Points[d].Graph.Y=Math.round(l[1]/-1e3,0);break}e.UpdatePathPlanRender(e.path_plan_tags)},handleUpEvent:function(){return this.feature_=null,this.coordinate_=null,!1},handleMoveEvent:function(e){var t=e.map,a=t.forEachFeatureAtPixel(e.pixel,(function(e,t){return e}));t.getTargetElement().style.cursor=a?"pointer":""}});this.map.addInteraction(t)},CreateMeshLayer(){for(var e=new Ti.Z,t=new Mi.Z({source:e,zIndex:-1}),a=new Ui.ZP({stroke:new Li.Z({color:"rgba(0, 0, 0, 0.1)",width:1})}),s=this.map.getView().getProjection().getExtent(),n=8e4,i=s[0];i<s[2];i+=n){var r=new Ei.Z([[i,s[1]],[i,s[3]]]),o=new Vi.Z({geometry:r});o.setStyle(a),e.addFeature(o)}for(var l=s[1];l<s[3];l+=n){r=new Ei.Z([[s[0],l],[s[2],l]]),o=new Vi.Z({geometry:r});o.setStyle(a),e.addFeature(o)}this.map.addLayer(t)},UpdateAGVLayer(e){try{var t=this.CreateAGVFeatures(e),a=this.AGV_Layer.getSource();a.clear(),a.addFeatures(t.agv_features),a.changed();var s=this.Nav_Path_Layer.getSource();s.clear(),s.addFeatures(t.agv_nav_path_features),s.changed()}catch{}},GetAgvProp(e){return this.agvList.find((t=>t.name==e))},HightlightAGV(e){this.agvList.forEach((e=>{e.heighlight=!1,e.isOnline=!1})),this.GetAgvProp(e).heighlight=!0},CreateAGVFeatures(e=[]){var t=[],a=[],s=0;return e.forEach((e=>{var n=e.AGV_Name,i=e.Current_Tag,r=e.State,o=(e.IsOnline,e.Rotation),l=this.GetAgvProp(n);l?(l.current_tag=i,l.theta=e.Rotation,l.state=r):(l={name:n,current_tag:i,previous_tag:-1,color:this.agv_color_set[s],theta:o,state:r,heighlight:!1},console.info(l),this.agvList.push(l));var d=this.get_agv_position(n),u=new Vi.Z({geometry:new Oi.Z(d),name:n});u.setId("AGV_"+n),t.push(u);var c=new Gi.Z({src:"/station.png",scale:.5,anchor:[.5,.5],size:[70,70],opacity:1});u.setStyle(new Ui.ZP({image:c,text:new Wi.Z({text:n+`\r\n(${r})`,offsetX:10,offsetY:38,font:"bold 18px Arial",fill:new Bi.Z({color:"DOWN"==r?"red":"RUN"==r?"Lime":"Orange"}),stroke:new Li.Z({color:l.heighlight?"red":"black",width:3})})})),u.getStyle().getImage().setRotation(-l.theta);var m=new Vi.Z({geometry:new Oi.Z(d),name:n});a.push(m),s+=1})),{agv_features:t,agv_nav_path_features:a}},handleEditModeMenuClick(e){if(console.log(e),this.showStationMenu=!1,"point_setting"===e){var t=this.GetPointDataByFeature(this.selected_feature);t&&this.$refs["point-setting-drawer"].Show(t)}},handleNoPointSelectedMenuClick(e){if(console.log(e),this.showNoPointSelectedMenu=!1,"add_point"===e){var t=this.GetNewPointIndex(),a=this.Station_Layer.getSource(),s=new Vi.Z({geometry:new Oi.Z(this.mouse_click_coordinate),name:t});s.setId(t),this.stations.push({index:t,tag:t,feature:s}),a.addFeature(s);var n=this.CloneAPointData();n.Graph.Display=n.Name=t+"",n.TagNumber=t,this.map_data.Points[t]=n,this.StationStyleRender()}},handleAGVMenuItemClick(e){console.log(e),this.showAGVMenu=!1},handleTaskAllocatModeMenuClick(e){console.log(e),this.showTaskAllocationMenu=!1},GetNewPointIndex(){const e=Object.keys(this.map_data.Points).map(Number).sort(((e,t)=>e-t)),t=e[e.length-1];return t+1},CloneAPointData(){var e=Object.values(this.map_data.Points);return e[e.length-1]},HideAllMenus(){this.showAGVMenu=this.showNoPointSelectedMenu=this.showStationMenu=this.showTaskAllocationMenu=!1},showContextMenu(e){e.preventDefault(),this.showStationMenu=!1,this.map_contextmenu_style.top=e.clientY+"px",this.map_contextmenu_style.left=e.clientX+"px",this.selected_feature?(this.map_contextmenu_style.height="157px",this.edit_mode&&(this.is_agv_feature_selected?this.showAGVMenu=!0:this.showStationMenu=!0),this.task_allocatable&&(this.showTaskAllocationMenu=!0)):this.edit_mode&&(this.map_contextmenu_style.height="100px",this.showNoPointSelectedMenu=!0)},GetPointDataByFeature(e){var t=e.getId();if(t){var a=Object.values(this.map_data.Points).find((e=>e.TagNumber==t)),s=Object.keys(this.map_data.Points).find((e=>this.map_data.Points[e]==a));return{index:s,point:a}}},StationStyleRender(){this.map.getLayers().item(this.layer_index.station).getSource().getFeatures().forEach((e=>{var t=this.stations.find((t=>t.feature==e)),a="Tag"==this.display_selected,s="Name"==this.display_selected,n=t.feature.get("name"),i=t.feature.get("station_type");const r=(a?t.tag:s?n:t.index)+"";parseInt(r);var o="charge"==i,l="eq"==i||o,d=new Ni.Z({radius:11,fill:new Bi.Z({color:o?"pink":"lime"}),stroke:new Li.Z({color:"black",width:3}),angle:0,points:3}),u=new Pi.Z({radius:9,fill:new Bi.Z({color:"gold"}),stroke:new Li.Z({color:"black",width:3})});e.setStyle(new Ui.ZP({image:l?d:u,text:new Wi.Z({text:r,offsetX:-18,offsetY:-18,font:"bold 21px sans-serif",fill:new Bi.Z({color:l?o?"pink":"lime":"gold"}),stroke:new Li.Z({color:"black",width:3})})}))})),this.Station_Layer.getSource().changed()},NameDisplayChangeHandle(){this.StationStyleRender()},AGVDisplayChangeHandle(){this.AGVDisplayControl("show"==this.agv_display_mode_selected)},UpdateNavPathRender(e,t){if(0==t.length)return;var a=`agv_path_layer_${e}`,s=this.map.getLayers().getArray().find((e=>e.get("id")==a));s&&this.map.removeLayer(s);var n=new Ti.Z,i=new Mi.Z({source:n,zIndex:666,id:a});this.map.addLayer(i);let r=i.getSource();var o=this.agvList.find((t=>t.name==e));if(o){var l=o.color;if(l)var d=this.CreateLineFeaturesOfPath(t,l);o.PathPlan=t,r.addFeatures(d),r.changed()}},UpdatePathPlanRender(e=[]){this.path_plan_tags=e;let t=this.PathPlan_Layer.getSource();if(t.clear(),0!=e.length){var a=this.CreateLineFeaturesOfPath(e);t.addFeatures(a),t.changed()}},CreateLineFeaturesOfEachStaion(){var e=[];return Object.keys(this.map_data.Points).forEach((t=>{var a=parseInt(t),s=this.stations.find((e=>e.index==a)),n=this.map_data.Points[t].Target;Object.keys(n).forEach((t=>{var a=parseInt(t),n=this.stations.find((e=>e.index==a));if(void 0!=n){let t=new Vi.Z({geometry:new Ei.Z([s.feature.getGeometry().getCoordinates(),n.feature.getGeometry().getCoordinates()])});e.push(t)}}))})),e},CreateLineFeaturesOfPath(e=[],t){var a=[];for(let i=0;i<e.length;i++){const r=e[i],o=e[i+1];if(void 0!=o){var s=this.stations.find((e=>e.tag==r)),n=this.stations.find((e=>e.tag==o));let e=new Vi.Z({geometry:new Ei.Z([s.feature.getGeometry().getCoordinates(),n.feature.getGeometry().getCoordinates()])});e.setStyle(new Ui.ZP({stroke:new Li.Z({color:t,width:6})})),a.push(e)}}return a},AGVDisplayControl(e){this.AGV_Layer.setVisible(e)}}};const Ri=(0,g.Z)(zi,[["render",Di]]);var Hi=Ri;const Fi=e=>((0,n.dD)("data-v-01901778"),e=e(),(0,n.Cn)(),e),ji={class:"drawer-content"},$i={class:"text-start my-2"},qi={class:"move w-100 bg-light item d-flex"},Qi=Fi((()=>(0,n._)("h5",{class:"border-bottom"},"Direction",-1))),Yi=Fi((()=>(0,n._)("ol",null,[(0,n._)("li",null,"0: 可旋轉(方向依照當下角度)"),(0,n._)("li",null,"1: 不可旋轉"),(0,n._)("li",null,"2: 向左旋轉"),(0,n._)("li",null,"3: 向右旋轉")],-1))),Xi=Fi((()=>(0,n._)("h5",{class:"border-bottom"},[(0,n.Uk)(" Laser Mode "),(0,n._)("span",{style:{"font-size":"smaller"}},"(巡檢AGV USE)")],-1))),Ki=Fi((()=>(0,n._)("ol",null,[(0,n._)("li",null,"0: 主走道不避障"),(0,n._)("li",null,"1: 主走道避障"),(0,n._)("li",null,"2: 進Bay不避障"),(0,n._)("li",null,"3: 進窄門不避障"),(0,n._)("li",null,"4: 一般橫移不避障")],-1)));function Ji(e,t,a,s,i,r){const o=(0,n.up)("b-button"),l=(0,n.up)("el-input-number"),d=(0,n.up)("el-form-item"),u=(0,n.up)("el-form"),c=(0,n.up)("b-card"),m=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.j4)(m,{onClosed:t[7]||(t[7]=()=>{i.move_test_drawer=!1}),modelValue:i.move_test_drawer,"onUpdate:modelValue":t[8]||(t[8]=e=>i.move_test_drawer=e),direction:"btt",size:"60%",title:"移動測試"},{default:(0,n.w5)((()=>[(0,n._)("div",ji,[(0,n._)("div",$i,[(0,n.Wm)(o,{loading:i.waiting_sever_response,disabled:i.waiting_sever_response,onClick:r.MoveToBtnHandler,style:{width:"103px"},variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("移動")])),_:1},8,["loading","disabled","onClick"])]),(0,n._)("div",qi,[(0,n.Wm)(c,{"body-class":"w-100"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{model:i.moveTestDto,"label-width":"100px","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"Point ID",prop:"DestinPointID"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.DestinPointID,"onUpdate:modelValue":t[0]||(t[0]=e=>i.moveTestDto.DestinPointID=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"X",prop:"X"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{step:"0.01",precision:"2",modelValue:i.moveTestDto.X,"onUpdate:modelValue":t[1]||(t[1]=e=>i.moveTestDto.X=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Y",prop:"Y"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{step:"0.01",precision:"2",modelValue:i.moveTestDto.Y,"onUpdate:modelValue":t[2]||(t[2]=e=>i.moveTestDto.Y=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Theta",prop:"Theta"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{step:"0.01",precision:"2",modelValue:i.moveTestDto.Theta,"onUpdate:modelValue":t[3]||(t[3]=e=>i.moveTestDto.Theta=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(o,{class:"w-100",variant:"info",onClick:r.SetCurrentPose},{default:(0,n.w5)((()=>[(0,n.Uk)("使用當前位置")])),_:1},8,["onClick"])])),_:1},8,["model"])])),_:1}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{model:i.moveTestDto,"label-width":"100px","label-position":"left"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"Direction"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.Direction,"onUpdate:modelValue":t[4]||(t[4]=e=>i.moveTestDto.Direction=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Laser Mode"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.LaserMode,"onUpdate:modelValue":t[5]||(t[5]=e=>i.moveTestDto.LaserMode=e)},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"Speed Limit"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{modelValue:i.moveTestDto.Speed,"onUpdate:modelValue":t[6]||(t[6]=e=>i.moveTestDto.Speed=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,n.Wm)(c,{class:"text-start"},{default:(0,n.w5)((()=>[Qi,Yi,Xi,Ki])),_:1})])])])),_:1},8,["modelValue"])}var er=a(1755),tr={data(){return{move_test_drawer:!1,waiting_sever_response:!1,moveTestDto:new er.Z}},methods:{Show(){this.move_test_drawer=!0},MoveToBtnHandler(){this.$swal.fire({title:"AGV Move",text:`確定要將AGV移動至(${this.moveTestDto.X},${this.moveTestDto.Y}),Theta:${this.moveTestDto.Theta} ?`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){this.waiting_sever_response=!0;var t=await b.bI.MoveTest(this.moveTestDto);this.waiting_sever_response=!1,this.$swal.fire({title:"移動測試",text:t.confirm?"移動測試請求發送成功":t.message,icon:t.confirm?"success":"error",showCancelButton:!1})}}))},SetCurrentPose(){var e=w.q$.getters.CurrentPose,t=w.q$.getters.CurrentAngle;this.moveTestDto.X=e.position.x,this.moveTestDto.Y=e.position.y,this.moveTestDto.Theta=t}}};const ar=(0,g.Z)(tr,[["render",Ji],["__scopeId","data-v-01901778"]]);var sr=ar,nr={components:{MapShowVue:Hi,MoveTestDrawer:sr},data(){return{confirm_dialog_show:!1,notify_dialog_show:!1,ShowTaskAllocateDrawer:!1,SelectedFeature:void 0,notify_text:"",selectedAction:"None",selectedTag:"",selectedCst:"",selectedToTag:"",moveable_tags:[{id:1,name:"標籤1"},{id:2,name:"標籤2"},{id:3,name:"標籤3"},{id:4,name:"標籤4"},{id:5,name:"標籤5"}],parkable_tags:[{id:1,name:"標籤1"},{id:2,name:"標籤2"},{id:3,name:"標籤3"},{id:4,name:"標籤4"},{id:5,name:"標籤5"}],chargable_tags:[{id:50,name:"充電站(TAG-50)"},{id:70,name:"充電站(TAG-70)"}],lduldable_tags:[{id:50,name:"充電站(TAG-50)"},{id:70,name:"充電站(TAG-70)"}],csts:[{id:1,name:"客戶1"},{id:2,name:"客戶2"},{id:3,name:"客戶3"},{id:4,name:"客戶4"},{id:5,name:"客戶5"}]}},computed:{IsGodUse(){return w.U6.getters.IsGodUser},From_Lable_display(){return"None"===this.selectedAction|"Park"===this.selectedAction?"目的地":"From"},tags(){return"None"==this.selectedAction?this.moveable_tags:"Charge"==this.selectedAction?this.chargable_tags:this.parkable_tags},SelectedFeatureMovable(){if(!this.SelectedFeature)return!1;this.GetNormalStationTagsFromMap();var e=this.moveable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},SelectedFeatureLDULDable(){if(!this.SelectedFeature)return!1;this.GetLDULDStationTagsFromMap();var e=this.lduldable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},SelectedFeatureChargable(){if(!this.SelectedFeature)return!1;this.GetChargeStationTagsFromMap();var e=this.chargable_tags.filter((e=>e.id==this.SelectedFeature.getId()));return 1==e.length},ActionText(){return"None"==this.selectedAction?"移動":"Charge"==this.selectedAction?"充電":"Load"==this.selectedAction?"放貨":"Unload"==this.selectedAction?"取貨":void 0},MoveTestPanel(){return this.$refs["move_test"]}},methods:{TaskDeliveryBtnClickHandle(){return"Carry"==this.selectedAction&&""==this.selectedToTag|void 0==this.selectedToTag?(this.notify_text="尚未選擇目的地",void(this.notify_dialog_show=!0)):"Carry"==this.selectedAction|"Load"==this.selectedAction|"Unload"==this.selectedAction&&""==this.selectedCst|void 0==this.selectedCst?(this.notify_text="尚未選擇CST ID",void(this.notify_dialog_show=!0)):void(this.confirm_dialog_show=!0)},async TaskDeliveryHandle(){var e=await b.bI.Action(this.selectedAction,this.selectedTag,this.selectedToTag,this.selectedCst);if(console.info(e),e.accpet){Lt.Z.Success("任務已派送");var t=e.path.map((e=>e.Point_ID));console.info(t),this.$refs.map.UpdateNavPathRender(e.agv_name,t)}else this.$swal.fire({title:"任務派送失敗",text:`${e.error_message}`,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},GetNormalStationTagsFromMap(){var e=this.$refs["map"].GetNormalStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}console.info(e),e.sort(t),this.moveable_tags=[],e.forEach((e=>{this.moveable_tags.push({id:e.TagNumber,name:"(Normal)"+e.TagNumber})}))},GetChargeStationTagsFromMap(){var e=this.$refs["map"].GetChargeStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}console.info(e),e.sort(t),this.chargable_tags=[],e.forEach((e=>{this.chargable_tags.push({id:e.TagNumber,name:"(Charge)"+e.TagNumber})}))},GetLDULDStationTagsFromMap(){var e=this.$refs["map"].GetSTKStations();function t(e,t){return e.TagNumber<t.TagNumber?-1:e.TagNumber>t.TagNumber?1:0}e.sort(t),this.lduldable_tags=[],e.forEach((e=>{this.lduldable_tags.push({id:e.TagNumber,name:"(LDULD)"+e.TagNumber})}))},handleTaskAllocatModeMenuClick(e){this.selectedAction=e,this.selectedToTag=this.SelectedFeature.getId(),this.ShowTaskAllocateDrawer=!1,this.$swal.fire({title:"任務派送確認",text:`確定要執行${this.ActionText} 任務?(Tag ${this.selectedToTag})`,icon:"question",showCancelButton:!0,confirmButtonText:"確認",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.TaskDeliveryHandle()}))},MapFeatureClickedHandle(e){e.get("station_type")&&(this.SelectedFeature=e,this.SelectedFeature&&(this.ShowTaskAllocateDrawer=!0))}},mounted(){this.moveable_tags=[],this.parkable_tags=[];for(let e=43;e<=71;e+=2)this.moveable_tags.push({id:e,name:e});for(let e=42;e<=80;e+=2)this.parkable_tags.push({id:e,name:e})}};const ir=(0,g.Z)(nr,[["render",hi],["__scopeId","data-v-4f118c90"]]);var rr=ir;const or={class:"cst-reader-view"},lr={class:"opt"},dr=(0,n._)("i",{class:"bi bi-camera-fill mx-1"},null,-1),ur=(0,n._)("span",null,"拍照",-1),cr={class:"p-5"},mr={ref:"image",src:"/tray.jpg",height:"400",alt:"QR Code"},hr={class:"image-show"},gr=["src"];function _r(e,t,a,r,o,l){const d=(0,n.up)("b-button"),u=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",or,[(0,n._)("div",lr,[(0,n.Wm)(d,{disabled:o.triggering,class:"mx-1",variant:"primary",onClick:l.TriggerHandle},{default:(0,n.w5)((()=>[dr,ur])),_:1},8,["disabled","onClick"]),(0,n.Wm)(d,{disabled:!o.triggering,variant:"danger",onClick:l.StopHandle},{default:(0,n.w5)((()=>[(0,n.Uk)("STOP")])),_:1},8,["disabled","onClick"])]),(0,n._)("div",cr,[(0,n._)("img",mr,null,512),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)([o.qrCodeValue,"barcode-tooltip"])},[(0,n.Uk)((0,i.zw)(o.qrCodeValue),1)],2)),[[s.F8,""!=o.qrCodeValue],[u,o.triggering]])]),(0,n._)("div",hr,[(0,n._)("img",{src:o.imageSrc},null,8,gr)])])}var pr={data(){return{imageSrc:"",triggering:!1,qrCodeValue:""}},mounted(){},methods:{async fetchImage(){try{var e=await fetch("http://192.168.0.103:1180/liveimage.jpg",{cache:"no-store"});if(!e.ok)throw new Error("network error");const t=await e.blob();this.imageSrc=URL.createObjectURL(t)}catch(t){}},async TriggerHandle(){this.qrCodeValue="Triggering",this.triggering=!0;var e=await(0,b.Hb)();this.triggering&&(this.qrCodeValue=e,this.triggering=!1)},async StopHandle(){this.qrCodeValue="",await(0,b.kg)(),this.triggering=!1}}};const wr=(0,g.Z)(pr,[["render",_r]]);var vr=wr;const fr={class:"w-100"},Ar={key:0,class:"p-1 text-danger"},yr={key:1,class:"p-1 text-danger"},br={key:2,class:"d-flex flex-column px-1",style:{float:"left"}},Sr={class:"d-flex justify-content-center"},kr={class:"w-100 d-flex"};function Cr(e,t,a,s,i,r){const o=(0,n.up)("b-button"),l=(0,n.up)("DJM_PIO"),d=(0,n.up)("b-card"),u=(0,n.up)("el-drawer");return(0,n.wg)(),(0,n.iD)("div",fr,[r.IsE84UseEmu?((0,n.wg)(),(0,n.iD)("div",Ar,"模擬模式!")):(0,n.kq)("",!0),r.IsUserLogin?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",yr,"登入後可手動變更AGV 交握訊號")),r.IsGodUse?((0,n.wg)(),(0,n.iD)("div",br,[(0,n.Wm)(o,{onClick:t[0]||(t[0]=e=>i.show_hs_test_drawer=!0),class:"my-1",variant:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("交握測試")])),_:1})])):(0,n.kq)("",!0),(0,n._)("div",Sr,[(0,n.Wm)(l)]),(0,n.Wm)(u,{direction:"btt",modelValue:i.show_hs_test_drawer,"onUpdate:modelValue":t[1]||(t[1]=e=>i.show_hs_test_drawer=e)},{default:(0,n.w5)((()=>[(0,n._)("div",kr,[(0,n.Wm)(d,{title:"設備異常模擬"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"my-1",variant:"danger",onClick:r.EQAbnormalWhenEQBusy},{default:(0,n.w5)((()=>[(0,n.Uk)("EQ異常模擬(EQ動作中)")])),_:1},8,["onClick"]),(0,n.Wm)(o,{class:"my-1",variant:"success",onClick:r.EQInitialzeHandler},{default:(0,n.w5)((()=>[(0,n.Uk)("EQ復歸")])),_:1},8,["onClick"])])),_:1}),(0,n.Wm)(o,{class:"my-1",variant:"danger"},{default:(0,n.w5)((()=>[(0,n.Uk)("正常流程測試")])),_:1})])])),_:1},8,["modelValue"])])}const Dr=e=>((0,n.dD)("data-v-00aec05f"),e=e(),(0,n.Cn)(),e),Ir={class:"djm-pio border rounded mx-1 py-3 px-5"},Vr={class:"d-flex"},xr={class:"signal-name"},Mr=["onClick"],Tr={class:"mx-5"},Or={class:"signal-name"},Ur=["onClick"],Lr={class:"timer"},Gr={class:"d-flex"},Wr=Dr((()=>(0,n._)("span",null,"TP1",-1))),Br={class:"d-flex"},Nr=Dr((()=>(0,n._)("span",null,"TP2",-1))),Pr={class:"d-flex"},Zr=Dr((()=>(0,n._)("span",null,"TP3",-1))),Er={class:"d-flex"},zr=Dr((()=>(0,n._)("span",null,"TP4",-1))),Rr={class:"d-flex"},Hr=Dr((()=>(0,n._)("span",null,"TP5",-1)));function Fr(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)("div",Ir,[(0,n._)("div",Vr,[(0,n._)("div",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.HandshakeSignals.AGV,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"d-flex"},[(0,n._)("div",xr,(0,i.zw)(t),1),(0,n._)("div",{onClick:e=>o.SignalWriteChangeHandler("AGV",t),class:"border signal-div rounded",style:(0,i.j5)({backgroundColor:e?"rgb(0, 204, 0)":"grey"})},(0,i.zw)(e?"ON":"OFF"),13,Mr)])))),128))]),(0,n._)("div",Tr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.HandshakeSignals.EQ,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"d-flex"},[(0,n._)("div",Or,(0,i.zw)(t),1),(0,n._)("div",{onClick:e=>o.SignalWriteChangeHandler("EQ",t),class:"border signal-div rounded",style:(0,i.j5)({backgroundColor:e?"rgb(0, 204, 0)":"grey"})},(0,i.zw)(e?"ON":"OFF"),13,Ur)])))),128))]),(0,n._)("div",Lr,[(0,n._)("div",Gr,[Wr,(0,n._)("div",null,(0,i.zw)(o.HSTimers.TA1_Wait_L_U_REQ_ON),1)]),(0,n._)("div",Br,[Nr,(0,n._)("div",null,(0,i.zw)(o.HSTimers.TA2_Wait_EQ_READY_ON),1)]),(0,n._)("div",Pr,[Zr,(0,n._)("div",null,(0,i.zw)(o.HSTimers.TA3_Wait_EQ_BUSY_ON),1)]),(0,n._)("div",Er,[zr,(0,n._)("div",null,(0,i.zw)(o.HSTimers.TA4_Wait_EQ_BUSY_OFF),1)]),(0,n._)("div",Rr,[Hr,(0,n._)("div",null,(0,i.zw)(o.HSTimers.TA5_Wait_L_U_REQ_OFF),1)])])])])}var jr={props:{Owner:{type:String,default:"AGV"}},data(){return{}},computed:{Editable(){return 0!=w.U6.getters.CurrentUserRole},IsGodUse(){return w.U6.getters.IsGodUser},HandshakeSignals(){return w.q$.getters.Handshake_Signals},HSTimers(){return w.q$.getters.HSTimers}},methods:{async SignalWriteChangeHandler(e,t){if(this.IsGodUse){var a=!this.HandshakeSignals[e][t];await b.Kl.HsSignalChange(e,t,a)}}}};const $r=(0,g.Z)(jr,[["render",Fr],["__scopeId","data-v-00aec05f"]]);var qr=$r,Qr=Ms().create({baseURL:me.Z.backend_host});async function Yr(){var e=await Qr.get("api/EQHandshakeEmu/EQAlarmWhenEQBusySimulation");return e.data}async function Xr(){var e=await Qr.get("api/EQHandshakeEmu/EQInitialze");return e.data}var Kr={components:{DJM_PIO:qr},data(){return{show_hs_test_drawer:!1}},computed:{IsGodUse(){return w.U6.getters.IsGodUser},IsUserLogin(){return 0!=w.U6.getters.CurrentUserRole},IsE84UseEmu(){return w.zb.getters.IsE84UseEmu}},methods:{async EQAbnormalWhenEQBusy(){await Yr()},async EQInitialzeHandler(){await Xr()}}};const Jr=(0,g.Z)(Kr,[["render",Cr]]);var eo=Jr;const to=e=>((0,n.dD)("data-v-3d1b1ca6"),e=e(),(0,n.Cn)(),e),ao={class:"status-overview h-100 bg-dark text-light d-flex p-3"},so={class:"text-start py-3 px-1"},no={class:"status-card sub_status"},io=to((()=>(0,n._)("div",{class:"my-divider"},null,-1))),ro={class:"status-card-info"},oo={class:""},lo=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 目前位置 "),(0,n._)("span",null,"System Error")],-1))),uo={class:"item-val"},co={class:"status-card-info"},mo={class:""},ho=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 定位狀態 "),(0,n._)("span",null,"Localization")],-1))),go={class:"status-card-info"},_o={class:""},po=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 載物ID "),(0,n._)("span",null,"Cargo ID")],-1))),wo={class:"item-val"},vo={class:"status-card-info"},fo={class:""},Ao=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 電量 "),(0,n._)("span",null,"Battery")],-1))),yo={class:"d-flex"},bo=to((()=>(0,n._)("span",{class:"mx-1"},null,-1))),So={class:"status-card-info"},ko={class:""},Co=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 里程數 "),(0,n._)("span",null,"Mileage")],-1))),Do={class:"item-val"},Io=to((()=>(0,n._)("span",null,"km",-1))),Vo={class:"text-start",style:{"padding-top":"62px"}},xo={class:"status-card-info my-5"},Mo={class:""},To=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 速度資訊 "),(0,n._)("span",null,"Velocity")],-1))),Oo={class:"velocitys d-flex my-2"},Uo={class:"item-val d-flex flex-column"},Lo=to((()=>(0,n._)("span",{class:"linear-text"},"Linear",-1))),Go=to((()=>(0,n._)("span",{class:"unit"},"m/s",-1))),Wo={class:"item-val d-flex flex-column mx-4"},Bo=to((()=>(0,n._)("span",{class:"linear-text"},"Angular",-1))),No=to((()=>(0,n._)("span",{class:"unit"},"rad/s",-1))),Po={class:"status-card-info"},Zo={class:""},Eo=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 座標資訊 "),(0,n._)("span",null,"Location")],-1))),zo={class:"item-val"},Ro={class:"status-card-info"},Ho={class:""},Fo=to((()=>(0,n._)("div",{class:"item-text"},[(0,n.Uk)(" 雷射模式 "),(0,n._)("span",null,"Laser Mode")],-1))),jo={class:"item-val"};function $o(e,t,a,s,r,o){const l=(0,n.up)("AGVStatusView");return(0,n.wg)(),(0,n.iD)("div",ao,[(0,n._)("div",so,[(0,n._)("div",no,[(0,n._)("div",{class:(0,i.C_)(["vertical_bar","bar-"+o.AGVStatesData.SubState.toLowerCase()])},null,2),(0,n._)("div",{class:(0,i.C_)(["status-text",o.AGVStatesData.SubState.toLowerCase()])},(0,i.zw)(o.AGVStatesData.SubState),3)]),io,(0,n._)("div",ro,[(0,n._)("div",oo,[lo,(0,n._)("div",uo,(0,i.zw)(o.AGVStatesData.Last_Visit_MapPoint.Name+"("+o.AGVStatesData.Last_Visited_Tag+")"),1)])]),(0,n._)("div",co,[(0,n._)("div",mo,[ho,(0,n._)("div",{class:"item-val",style:(0,i.j5)({color:"System-Error"==o.LocStatusDisplay()?"red":"white"})},(0,i.zw)(o.LocStatusDisplay()),5)])]),(0,n._)("div",go,[(0,n._)("div",_o,[po,(0,n._)("div",wo,(0,i.zw)(o.AGVStatesData.CST_Data),1)])]),(0,n._)("div",vo,[(0,n._)("div",fo,[Ao,(0,n._)("div",yo,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.AGVStatesData.BatteryStatus,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"item-val d-flex battery",key:e.BatteryID},[(0,n._)("span",null,"NO."+(0,i.zw)(e.BatteryID),1),(0,n.Uk)(" "+(0,i.zw)(e.BatteryLevel)+"% ",1),bo])))),128))])])]),(0,n._)("div",So,[(0,n._)("div",ko,[Co,(0,n._)("div",Do,[(0,n.Uk)((0,i.zw)(o.AGVStatesData.Mileage.toFixed(2))+" ",1),Io])])])]),(0,n.Wm)(l,{class:"flex-fill",status:"safe",sensor_data:o.SensorStatus},null,8,["sensor_data"]),(0,n._)("div",Vo,[(0,n._)("div",xo,[(0,n._)("div",Mo,[To,(0,n._)("div",Oo,[(0,n._)("div",Uo,[Lo,(0,n._)("div",null,[(0,n.Uk)((0,i.zw)(o.AGVStatesData.LinearSpeed)+" ",1),Go])]),(0,n._)("div",Wo,[Bo,(0,n._)("div",null,[(0,n.Uk)((0,i.zw)(o.AGVStatesData.AngularSpeed)+" ",1),No])])])])]),(0,n._)("div",Po,[(0,n._)("div",Zo,[Eo,(0,n._)("div",zo,"( "+(0,i.zw)(o.AGVStatesData.Pose.position.x.toFixed(2))+", "+(0,i.zw)(o.AGVStatesData.Pose.position.y.toFixed(2))+")",1)])]),(0,n._)("div",Ro,[(0,n._)("div",Ho,[Fo,(0,n._)("div",jo,(0,i.zw)(o.AGVStatesData.Current_LASER_MODE),1)])])])])}var qo=a.p+"img/fork_sketch_topview.3b988835.png";const Qo={class:"d-flex justify-content-center"},Yo=["width","height","viewBox"],Xo=["r"],Ko=["y","fill","transform"],Jo=["points","fill"],el=["y1","y2","transform"],tl=["x","y","width","height"],al=["x","y","onClick","onMouseover"],sl=["fill","stroke"],nl=["stroke"];function il(e,t,a,r,o,l){const d=(0,n.up)("SensorStatusTooltipVue");return(0,n.wg)(),(0,n.iD)("div",Qo,[((0,n.wg)(),(0,n.iD)("svg",{width:a.diameter,height:a.diameter,viewBox:`${-o.center} ${-o.center} ${a.diameter} ${a.diameter}`},[(0,n._)("circle",{cx:"0",cy:"0",r:o.radius,fill:"transparent",stroke:"grey","stroke-width":"1"},null,8,Xo),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.degrees,(e=>((0,n.wg)(),(0,n.iD)("text",{key:e,x:0,y:a.diameter/2,"text-anchor":"middle",fill:l.primary_color,"font-size":"14",transform:`rotate(${e-l.agv_angle} 0 0)`},(0,i.zw)(e-180),9,Ko)))),128)),(0,n._)("polygon",{points:`0,${-o.radius} -15,${15-o.radius} 15,${15-o.radius}`,fill:l.primary_color,stroke:"black","stroke-width":"0"},null,8,Jo),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.degrees,(e=>((0,n.wg)(),(0,n.iD)("line",{key:e,class:"line2",x1:0,y1:o.agv_radius,x2:0,y2:o.agv_radius-5,stroke:"grey","stroke-width":"1",transform:`rotate(${e-l.agv_angle} 0 0)`},null,8,el)))),128)),(0,n.kq)("",!0),(0,n._)("image",{"xlink:href":qo,x:1.2*-a.agv_car_size.width/2,y:1.2*-a.agv_car_size.length/2,width:1.2*a.agv_car_size.width,height:1.2*a.agv_car_size.length},null,8,tl),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.sensor_data,((e,a)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",{key:a,width:380,height:100,viewBox:"-190 -50 380 100",x:e.position.x-190,y:-e.position.y-50,onClick:e=>l.SensorDotClickHandler(a),onMousemove:t[0]||(t[0]=(...e)=>l.SensorDotMouseHover&&l.SensorDotMouseHover(...e)),onMouseover:t=>l.SensorDotMouseHoverDataTransfer(e),onMouseleave:t[1]||(t[1]=()=>{o.sensorTooltipStyle.visibility="hidden"})},[(0,n._)("circle",{cx:0,cy:0,r:"5",fill:l.GetSensorColorByStatus(e.status),stroke:l.GetSensorColorByStatus(e.status)},null,8,sl),(0,n._)("circle",{cx:0,cy:0,r:"9",fill:"transparent",stroke:l.GetSensorColorByStatus(e.status)},null,8,nl),!o.only_show_abnormal_sensors|0!=e.status?((0,n.wg)(),(0,n.j4)(d,{key:0,sensorName:e.name,sensorData:e,position:e.textPosition,xOffset:-e.position.x},null,8,["sensorName","sensorData","position","xOffset"])):(0,n.kq)("",!0)],40,al)),[[s.F8,e.visible]]))),128))],8,Yo)),(0,n._)("div",{style:(0,i.j5)(o.sensorTooltipStyle),class:"sensor-tooltip"},(0,i.zw)(o.sensorTooltipStyle.name),5)])}const rl=["x2","stroke"],ol=["x1","x2","y2","stroke"],ll=["x1","y1","x2","y2","stroke"],dl=["x1","y1","x2","y2","stroke"],ul=["x","y"],cl=["x","y","fill"],ml=["x","y"];function hl(e,t,a,s,r,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("line",{x1:"0",y1:"0",x2:o._line1_length,y2:"0","stroke-dasharray":"5 5",stroke:o.statusColor},null,8,rl),o.show_step?((0,n.wg)(),(0,n.iD)("line",{key:0,x1:o._line1_length,y1:"0",x2:o._line1_length,y2:-o.step_height,stroke:o.statusColor,"stroke-dasharray":"5 5"},null,8,ol)):(0,n.kq)("",!0),(0,n._)("line",{x1:o._line1_length,y1:-o.step_height,x2:o._line1_length+(o.isShowRight?20:-20),y2:-o.step_height,stroke:o.statusColor,"stroke-dasharray":"5 5"},null,8,ll),(0,n._)("line",{x1:o._line1_length+(o.isShowRight?20:-20),y1:o.show_step?this.show_bottom?10:-30:-15,x2:o._line1_length+(o.isShowRight?20:-20),y2:o.show_step?this.show_bottom?50:10:25,stroke:o.statusColor,"stroke-width":"2"},null,8,dl),(0,n._)("text",{x:o._line1_length+(o.isShowRight?66:-60),y:o.show_step?this.show_bottom?20:-20:-5,"text-anchor":"middle",fill:"white","font-size":"14"},(0,i.zw)(a.sensorData.name),9,ul),(0,n._)("rect",{x:o._line1_length+(o.isShowRight?25:-90),y:o.show_step?this.show_bottom?25:-15:3,width:60,height:20,fill:o.statusColor,text:"123"},null,8,cl),(0,n._)("text",{x:o._line1_length+(o.isShowRight?50:-65),y:o.show_step?this.show_bottom?38:0:18,"text-anchor":"middle",fill:"white","font-size":"14"},(0,i.zw)(o.SensorStatusText),9,ml)],64)}var gl=a(7943),_l={props:{line1_length:{type:Number,default:60},position:{type:String,default:"right-top"},xOffset:{type:Number,default:0},sensorData:{type:Object,default(){return new gl.Z("sensor")}}},computed:{isShowRight(){return this.position.includes("right")},_line1_length(){return this.line1_length*(this.isShowRight?1:-1)},show_step(){return this.position.includes("-")},show_bottom(){return this.position.includes("bottom")},step_height(){return(this.show_bottom?-1:1)*(this.show_step?20:0)},SensorStatusText(){return 0==this.sensorData.status?"Normal":1==this.sensorData.status?"Warning":2==this.sensorData.status?"Alarm":void 0},statusColor(){return 0==this.sensorData.status?"limegreen":1==this.sensorData.status?"orange":2==this.sensorData.status?"red":void 0}},data(){return{}}};const pl=(0,g.Z)(_l,[["render",hl]]);var wl=pl,vl={name:"AngleMarks",props:{diameter:{type:Number,default:550},agv_car_size:{type:Object,default(){return{length:300,width:150}}},agv_laser_options:{type:Object,default(){return{}}},status:{type:String,default:"safe"},sensor_data:{type:Object,default(){return{}}}},components:{SensorStatusTooltipVue:wl},data(){return{only_show_abnormal_sensors:!0,center:this.diameter/2,radius:this.diameter/2-10,agv_radius:Math.sqrt(Math.pow(this.agv_car_size.length/2,2)+Math.pow(this.agv_car_size.width/2,2)),degrees:[],sensorTooltipStyle:{top:"0",left:"0",name:""}}},computed:{primary_color(){return"safe"==this.status?"limegreen":"warning"==this.status?"yellow":"red"},agv_angle(){return w.q$.getters.CurrentAngle}},methods:{SensorDotClickHandler(e){alert(e+" clcickedddddd!!!")},CalulateVerticalLineX(e){return e.line1.x_length*Math.cos(e.line1.rotation)},GetSensorColorByStatus(e){return 2==e?"red":1==e?"orange":"limegreen"},GetTextPosition(e){return"top"==e||"top-start"==e||"top-end"==e?{x:"110",y:"-20"}:"bottom"==e?{x:"0",y:"18"}:"bottom-start"==e?{x:"-15",y:"18"}:"bottom-end"==e?{x:"15",y:"18"}:{x:"0",y:"-18"}},SensorDotMouseHover(e){console.info(e),this.sensorTooltipStyle.top=e.pageY-20+"px",this.sensorTooltipStyle.left=`${e.pageX+20}px`,this.sensorTooltipStyle.visibility="visible"},SensorDotMouseHoverDataTransfer(e){console.info(e),this.sensorTooltipStyle.name=e.name}},mounted(){this.degrees=Array.from({length:37},((e,t)=>10*t))}};const fl=(0,g.Z)(vl,[["render",il],["__scopeId","data-v-be9387cc"]]);var Al=fl,yl={components:{AGVStatusView:Al},computed:{SensorStatus(){return w.q$.getters.AGV_Sensors_States},AGVStatesData(){return w.q$.getters.AGVStatus}},methods:{LocStatusDisplay(){var e=this.AGVStatesData.LocStatus;return 10==e?"OK":20==e?"Warning":30==e?"Not-Localized":40==e?"System-Error":"Unknown"}}};const bl=(0,g.Z)(yl,[["render",$o],["__scopeId","data-v-3d1b1ca6"]]);var Sl=bl;const kl=e=>((0,n.dD)("data-v-8f76fcf8"),e=e(),(0,n.Cn)(),e),Cl={class:"log-query-container"},Dl={class:"time-selector d-flex border-bottom"},Il=kl((()=>(0,n._)("span",{class:""},"開始時間",-1))),Vl=kl((()=>(0,n._)("span",{class:""},"結束時間",-1))),xl={class:"table"};function Ml(e,t,a,s,r,o){const l=(0,n.up)("el-date-picker"),d=(0,n.up)("el-button"),u=(0,n.up)("el-table-column"),c=(0,n.up)("el-tag"),m=(0,n.up)("el-table"),h=(0,n.up)("el-pagination");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Cl,[(0,n._)("div",Dl,[Il,(0,n.Wm)(l,{modelValue:r.QueryOptions.FromTimeStr,"onUpdate:modelValue":t[0]||(t[0]=e=>r.QueryOptions.FromTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"]),Vl,(0,n.Wm)(l,{modelValue:r.QueryOptions.ToTimeStr,"onUpdate:modelValue":t[1]||(t[1]=e=>r.QueryOptions.ToTimeStr=e),type:"datetime",placeholder:"Select date and time","value-format":"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"]),(0,n.Wm)(d,{onClick:o.HandleQueryBtnClick,type:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("查詢")])),_:1},8,["onClick"])]),(0,n._)("div",xl,[(0,n.Wm)(m,{size:"small",data:r.Results.Messages,style:{width:"800px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{class:"",prop:"Time",label:"Time",width:"190"}),(0,n.Wm)(u,{class:"",prop:"Level",label:"Level",width:"120"},{default:(0,n.w5)((e=>[(0,n.Wm)(c,{effect:"dark",type:o.GetTagType(e.row.Level),style:{width:"90px"}},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.row.Level),1)])),_:2},1032,["type"])])),_:1}),(0,n.Wm)(u,{class:"",prop:"Message",label:"訊息","min-width":"520"})])),_:1},8,["data"])])]),(0,n._)("div",null,[(0,n.Wm)(h,{background:"",layout:"prev, pager, next","page-size":r.QueryOptions.NumberPerPage,total:r.Results.TotalCount,onCurrentChange:o.PageChangeHandler},null,8,["page-size","total","onCurrentChange"])])],64)}var Tl={data(){return{QueryOptions:{FromTimeStr:"2023/09/08 10:00:00",ToTimeStr:"2023/09/08 11:00:00",Page:1,NumberPerPage:12,SpeficStrings:[]},Results:{TotalCount:0,Messages:[]}}},methods:{async HandleQueryBtnClick(){this.SaveTimeToLocalStorage(),this.QueryOptions.Page=1;var e=await b.au.Query(this.QueryOptions);this.Results.TotalCount=e.TotalCount,this.Results.Messages=e.LogMessageList},async PageChangeHandler(e){this.QueryOptions.Page=e;var t=await b.au.Query(this.QueryOptions);this.Results.TotalCount=t.TotalCount,this.Results.Messages=t.LogMessageList},GetTagType(e){return"Information"==e?"primary":"Warning"==e?"warning":"Critical"==e|"Error"==e?"danger":void 0},SaveTimeToLocalStorage(){localStorage.setItem("log_query",JSON.stringify({from:this.QueryOptions.FromTimeStr,to:this.QueryOptions.ToTimeStr}))},RestoreTimeFromLocalStorage(){var e=localStorage.getItem("log_query");if(e){var t=JSON.parse(e);this.QueryOptions.FromTimeStr=t.from,this.QueryOptions.ToTimeStr=t.to}}},mounted(){this.RestoreTimeFromLocalStorage()}};const Ol=(0,g.Z)(Tl,[["render",Ml],["__scopeId","data-v-8f76fcf8"]]);var Ul=Ol,Ll={components:{status_card:pa,alarm_warn_table:wa["default"],agv_operator:Un,ForkAGV3D:Ln.Z,AGVSMsgDisplay:En,TaskDeliveryVue:rr,CSTReader:vr,EQHandshakeView:eo,AgvOverview:Sl,LogQuery:Ul},props:{VMSData:{type:Object,default(){return new Ct.ZP}}},data(){return{}},methods:{TabChangedHandler(e,t){this.currentTabs=e,e!=t&&(1==e&&l.Z.emit("/alarmtable_tab_click"),this.$emit("OnTabChanged",this.currentTabs))}},computed:{IsGodMod(){return w.U6.getters.IsGodUser},IsDevUser(){return w.U6.getters.IsDevUser}}};const Gl=(0,g.Z)(Ll,[["render",jt]]);var Wl=Gl,Bl={name:"HomeView",components:{AGVHeader:ve,jw_switch:Ut,BatteryGroup:je,battery:ke,mileage:Ke,emo:it,login:pt,connection_state:kt,MainContent:Wl},data(){return{IsUseChinese:!0,time:"2022/12/12 19:00:09",version_text_click_count:0,trigger_admin_dialog_count:7,back_end_server_err:!1,back_end_server_connecting:!0,loading:!1,dialogTableVisible:!1,isInitializing:!1,cancelInitComfirmDialogShow:!1,StartInitComfirmDialogShow:!1,wait_online_request_dialog_show:!1,remove_CstData_ComfirmDialog_Show:!1,ShowOnlineFailDialog:!1,moduleInformation:{},VMSData:new Ct.ZP,server_err_state_text:"連線中...",init_btn_blink_timer:null,mode_switch_data:{type:"online",state:!1},currentTabs:0,previous_tagID:-99,ws:null,previousAGVPoseIsError:!1,ShowAGVPoseErrorModel:!1}},methods:{LangChangeHandle(e){this.IsUseChinese=e,this.$i18n.locale=this.IsUseChinese?"zh-TW":"en-US",l.Z.emit("/lang_changed",this.$i18n.locale),this.IsUseChinese?Lt.Z.Success("語言變更:中文","bottom",800):Lt.Z.Primary("Language:English","bottom",800)},ShowLogin(){this.IsLogin?this.$swal.fire({title:"Logout Confirm",text:"Logout ?",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&w.U6.dispatch("Logout")})):this.$refs.login.Show()},async AGVInitialize(){Ct.ZP.isInitializing?this.cancelInitComfirmDialogShow=!0:this.$swal.fire({title:"AGV Initialize",text:`${this.$t(this.Is_Fork_AGV?this.VMSData.ForkHasLoading?"start_init_action_notify_fork_has_loading":"start_init_action_notify":"start_init_action_notify_submarin_agv")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){this.isInitializing=!0;e=await(0,b.wz)();e.confirm||this.$swal.fire({title:"AGV Initialize Fail",text:e.message,icon:"error",showCancelButton:!1,customClass:"my-sweetalert"})}}))},ShowRemoveCstDialog(){this.$swal.fire({title:`${this.$t("cst-remove")}`,text:`${this.$t("cst-remove-confirm-text")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.AGVRemoveCassette()}))},async CancelInitProcessWorker(){await(0,b.xb)(),clearInterval(this.init_btn_blink_timer),this.isInitializing=!1},async AGVResetAlarm(){await(0,b.IC)()},async AGVBuzzerOff(){await(0,b._e)()},async AGVRemoveCassette(){var e=await(0,b.yx)(),t="",a="",s="";e?(t=a="移除卡匣成功",s="success"):(t=a="移除卡匣失敗",s="error"),this.$swal.fire({title:t,text:a,icon:s,showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},VMSDataWebsocketInit(){this.ws=new yt.Z("ws/AGVCState"),this.ws.Connect(),this.ws.onmessage=e=>{this.back_end_server_err=!1,this.back_end_server_connecting=!1,this.VMSData=JSON.parse(e.data),w.q$.commit("updateStatus",this.VMSData),this.VMSData.Tag>0&&(l.Z.emit("/agv_name_list",[{AGV_Name:this.VMSData.CarName,Current_Tag:this.VMSData.Tag,State:this.VMSData.MainState,IsOnline:1==this.VMSData.OnlineMode,Rotation:0}]),this.VMSData.Tag!=this.previous_tagID&&Lt.Z.Primary(`Tag Detected:${this.VMSData.Tag}`,"bottom",1500),l.Z.emit("/nav_path_update",{name:this.VMSData.CarName,tags:this.VMSData.NavInfo.PathPlan})),this.previous_tagID=this.VMSData.Tag,this.AGVPoseErrorHandler(),this.BusPublishDataOut()},this.ws.onclose=e=>{this.back_end_server_connecting=!1,this.server_err_state_text="後端伺服器異常",this.back_end_server_err=!0,this.ws.onclose=null;var t=setInterval((()=>{if(console.info(this.ws.wssocket.readyState),this.ws.wssocket.readyState==WebSocket.OPEN)return this.ws.onmessage=null,this.back_end_server_err=this.back_end_server_connecting=!0,clearInterval(t),void setTimeout((()=>{location.reload()}),500);this.ws.wssocket.readyState==WebSocket.CLOSED&&this.ws.ReconnectWorker()}),1e3)}},ShowMaxSpeedLimitNotification(e,t){-1!=t&&(0,Gt.bM)({title:"限速",message:`Tag[${e}] AGV 速度限制 : ${t} `,type:"warning",duration:1e3})},AGVPoseErrorHandler(){this.VMSData.IsAGVPoseError!=this.previousAGVPoseIsError&&(this.VMSData.IsAGVPoseError&&(0,Gt.bM)({title:"POSE ERROR",message:"TAG讀取角度異常:與導航角度不同",type:"warning",duration:3e3}),this.previousAGVPoseIsError=this.VMSData.IsAGVPoseError)},BusPublishDataOut(){l.Z.emit("/vms_data",this.VMSData),l.Z.emit("/agv_current_tag",this.VMSData.Tag),l.Z.emit("/battery",this.VMSData.BatteryStatus),l.Z.emit("/mileage",this.VMSData.Mileage),l.Z.emit("/zaxis_driver_state",this.VMSData.ZAxisDriverState),l.Z.emit("/drivers_state",this.VMSData.DriversStates),l.Z.emit("/z_axis_position",this.VMSData.ZAxisDriverState.position)},AutoModeSwitchHandle(){this.mode_switch_data.type="auto",this.mode_switch_data.state=!this.IsAutoMode,this.$swal.fire({title:`${this.$t("agv-auto-mode")}`,text:`${this.mode_switch_data.state?this.$t("agv-auto-mode-alert"):this.$t("agv-manual-mode-alert")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.ModeSwitchHandler()}))},OnlineModeSwitchHandle(){this.IsOnlineMode||"IDLE"==this.VMSData.MainState.toUpperCase()||"CHARGING"==this.VMSData.MainState.toUpperCase()?(this.mode_switch_data.type="online",this.mode_switch_data.state=!this.IsOnlineMode,this.$swal.fire({title:`${this.$t("agv-online")}`,text:`${this.mode_switch_data.state?this.$t("agv-online-alert"):this.$t("agv-offline-alert")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.ModeSwitchHandler()}))):Lt.Z.Danger(`當前狀態無法上線(${this.VMSData.MainState})`,"top",5e3)},async ModeSwitchHandler(){if("auto"==this.mode_switch_data.type)var e=await b.DW.AutoModeSwitch(this.IsAutoMode?0:1);else{this.wait_online_request_dialog_show=!0;e=await b.DW.OnlineModeSwitch(this.IsOnlineMode?0:1);e.Success||(this.$refs["online-fail-msg"].innerText=e.Message,this.ShowOnlineFailDialog=!0),setTimeout((()=>{this.wait_online_request_dialog_show=!1}),1e3)}}},computed:{Is_TSMC_MiniAGV(){return w.q$.getters.IsInspectionAGV},Is_Fork_AGV(){return w.q$.getters.IsForkAGV},is_god_mode_now(){return w.U6.getters.IsGodUser},IsLogin(){return 0!=w.U6.getters.CurrentUserRole},LoginBtnText(){return this.IsLogin?"登出":"登入"},alarmResetBtnVariant(){return this.VMSData.AlarmCodes.length>0?"danger":"light"},IsAutoMode(){return 1==this.VMSData.AutoMode},IsOnlineMode(){return 1==this.VMSData.OnlineMode},App_version(){return me.i},NewestAlarm(){if(void 0!=this.VMSData.NewestAlarm&&0!=this.VMSData.NewestAlarm.EAlarmCode)return this.VMSData.NewestAlarm},ModeSwitchDisplay(){return"online"==this.mode_switch_data.type?this.IsOnlineMode?"Offline":"Online":this.IsAutoMode?"Manual":"Auto"},UserName(){return w.U6.getters.CurrentUserName}},mounted(){this.VMSDataWebsocketInit(),setInterval((()=>{this.time=f()(Date.now()).format("yyyy/MM/DD HH:mm:ss")}),1e3),setTimeout((()=>{this.loading=!1}),3e3)},destroyed(){alert("destroy"),this.ws&&this.ws.Close()}};const Nl=(0,g.Z)(Bl,[["render",ae],["__scopeId","data-v-33f53cd0"]]);var Pl=Nl;const Zl={class:"bg-dark w-100 home-view-new"},El={class:"bg-dark text-light w-100",style:{"margin-top":"52px",height:"600px"}};function zl(e,t,a,s,i,r){const o=(0,n.up)("homview-header"),l=(0,n.up)("router-view"),d=(0,n.up)("HomeviewFooter");return(0,n.wg)(),(0,n.iD)("div",Zl,[(0,n.Wm)(o,{class:"bg-dark"}),(0,n._)("div",El,[(0,n.Wm)(l,null,{default:(0,n.w5)((({Component:e})=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:1})]),(0,n.Wm)(d)])}const Rl={class:"home-view-header fixed-top text-light"},Hl={class:"agv-name bg-primary d-flex justify-content-center"},Fl=(0,n._)("div",{class:"w-25 border"},[(0,n._)("span",null,"GPM AGV")],-1),jl={class:"w-25 border"},$l={class:"w-25 border"},ql=["textContent"],Ql=["textContent"];function Yl(e,t,a,s,r,o){const l=(0,n.up)("BatteryGroupVue");return(0,n.wg)(),(0,n.iD)("div",Rl,[(0,n._)("div",Hl,[Fl,(0,n._)("div",jl,[(0,n._)("span",null,(0,i.zw)(o.AGVName),1)]),(0,n._)("div",$l,[(0,n._)("span",{textContent:(0,i.zw)(o.UserName)},null,8,ql)]),(0,n._)("div",{class:"w-25 border bg-info",onDblclick:t[0]||(t[0]=(...e)=>o.HandleAppVersionClick&&o.HandleAppVersionClick(...e)),onContextmenu:t[1]||(t[1]=(...e)=>o.HandleVersionDivContextMenu&&o.HandleVersionDivContextMenu(...e))},[(0,n._)("span",{textContent:(0,i.zw)(o.APPVersion)},null,8,Ql)],32)]),(0,n.Wm)(l)])}var Xl={components:{BatteryGroupVue:je},data(){return{}},computed:{AGVName(){return w.q$.getters.AGVName},APPVersion(){return w.q$.getters.AGVStatus.APPVersion},UserName(){return w.U6.getters.CurrentUserName}},methods:{HandleAppVersionClick(){this.$swal.fire({title:"VERSION INFORMATION",text:"version\r\n<br></br>version"})},HandleVersionDivContextMenu(e){}},mounted(){}};const Kl=(0,g.Z)(Xl,[["render",Yl]]);var Jl=Kl;const ed=e=>((0,n.dD)("data-v-672018d5"),e=e(),(0,n.Cn)(),e),td={class:"home-view-footer border-top fixed-bottom d-flex justify-content-center"},ad=["textContent"],sd={class:"system-controls"},nd={class:"switchs py-2 text-start px-1 d-flex"},id=ed((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px","border-left":"6px solid rgb(13, 110, 253)"}},null,-1))),rd=ed((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px"}},"ONLINE-MODE",-1))),od=ed((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px","border-left":"6px solid rgb(13, 110, 253)"}},null,-1))),ld=ed((()=>(0,n._)("span",{class:"mx-1",style:{"font-size":"15px"}},"AUTO-MODE",-1))),dd={class:"status d-flex"},ud={class:"icons d-flex justify-content-end flex-fill"},cd={class:"w-100"},md={class:"icon-containers d-flex"},hd=ed((()=>(0,n._)("img",{src:"/images/home.png",width:"50",alt:""},null,-1))),gd=[hd],_d=ed((()=>(0,n._)("img",{src:"/images/alarm2.png",width:"55",alt:""},null,-1))),pd=[_d],wd=ed((()=>(0,n._)("img",{src:"/images/io_table.png",width:"60",alt:""},null,-1))),vd=[wd],fd={class:"icon-containers d-flex"},Ad=ed((()=>(0,n._)("img",{src:"/images/controller.png",width:"60",alt:""},null,-1))),yd=[Ad],bd=ed((()=>(0,n._)("img",{src:"/images/signin.png",width:"60",alt:""},null,-1))),Sd=[bd],kd=ed((()=>(0,n._)("span",{style:{"font-size":"30px","font-weight":"bold",color:"red"}},"TEST",-1))),Cd=[kd],Dd=ed((()=>(0,n._)("img",{src:Je,width:"100",alt:""},null,-1))),Id=[Dd];function Vd(e,t,a,s,r,o){const l=(0,n.up)("el-switch"),d=(0,n.up)("b-button"),u=(0,n.up)("login");return(0,n.wg)(),(0,n.iD)("div",td,[(0,n._)("span",{onClick:t[0]||(t[0]=e=>o.VersionTextClickHandle()),class:"sys-time-display rounded px-1 text-light",textContent:(0,i.zw)(r.SystemTime)},null,8,ad),(0,n._)("div",sd,[(0,n._)("div",nd,[(0,n._)("div",{class:"",onClick:t[2]||(t[2]=e=>o.HandleModeSwitchRequest("online"))},[id,rd,(0,n.Wm)(l,{modelValue:o.CurrentIsOnlineMode,"onUpdate:modelValue":t[1]||(t[1]=e=>o.CurrentIsOnlineMode=e),"active-color":"rgb(95, 171, 80)","inactive-color":"red","active-text":"ONLINE","inactive-text":"OFFLINE","inline-prompt":"",size:"large",width:"80px",loading:r.OnlineModeSwitching},null,8,["modelValue","loading"])]),(0,n._)("div",{class:"mx-2",onClick:t[4]||(t[4]=e=>o.HandleModeSwitchRequest("auto"))},[od,ld,(0,n.Wm)(l,{modelValue:o.CurrentIsAutoMode,"onUpdate:modelValue":t[3]||(t[3]=e=>o.CurrentIsAutoMode=e),"active-color":"rgb(95, 171, 80)","inactive-color":"red","active-text":"AUTO","inactive-text":"MANUAL","inline-prompt":"",size:"large",width:"85px",loading:r.AutoModeSwitching},null,8,["modelValue","loading"])])]),(0,n._)("div",dd,[(0,n.Wm)(d,{squared:"",class:(0,i.C_)(o.initBtnClass),onClick:o.InitializeClick},{default:(0,n.w5)((()=>[(0,n.Uk)("初始化")])),_:1},8,["class","onClick"]),(0,n.Wm)(d,{squared:"",variant:o.resetAlarmBtnVariant,onClick:o.ResetAlarmlick},{default:(0,n.w5)((()=>[(0,n.Uk)("異常復歸")])),_:1},8,["variant","onClick"]),(0,n.Wm)(d,{squared:"",variant:"light",onClick:o.BuzzerOffClick},{default:(0,n.w5)((()=>[(0,n.Uk)("關閉蜂鳴器")])),_:1},8,["onClick"]),(0,n.Wm)(d,{squared:"",variant:"light",onClick:o.RemoveCstClick},{default:(0,n.w5)((()=>[(0,n.Uk)("移除卡匣")])),_:1},8,["onClick"])])]),(0,n._)("div",ud,[(0,n._)("div",cd,[(0,n._)("div",md,[(0,n._)("div",{class:"py-1",onClick:t[5]||(t[5]=(...e)=>o.HomeIconClick&&o.HomeIconClick(...e))},gd),(0,n._)("div",{onClick:t[6]||(t[6]=(...e)=>o.AlarmIconClick&&o.AlarmIconClick(...e))},pd),(0,n._)("div",{onClick:t[7]||(t[7]=(...e)=>o.IOTableIconClick&&o.IOTableIconClick(...e))},vd)]),(0,n._)("div",fd,[(0,n._)("div",{onClick:t[8]||(t[8]=(...e)=>o.ControllerIconClick&&o.ControllerIconClick(...e))},yd),(0,n._)("div",{onClick:t[9]||(t[9]=(...e)=>o.ShowLogin&&o.ShowLogin(...e))},Sd),o.IsLogin?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:t[10]||(t[10]=(...e)=>o.ShowRDTEstPage&&o.ShowRDTEstPage(...e))},Cd)):(0,n.kq)("",!0)])]),(0,n._)("div",{onClick:t[11]||(t[11]=(...e)=>o.EmoClick&&o.EmoClick(...e))},Id)]),(0,n.Wm)(u,{ref:"loginShow"},null,512)])}var xd={components:{login:pt,jwSwitch:Ut},data(){return{SystemTime:"1997-04-18 12:00:00",trigger_admin_dialog_count:5,version_text_click_count:0,OnlineMode:!1,AutoMode:!1,OnlineModeSwitching:!1,AutoModeSwitching:!1}},methods:{ControllerIconClick(){this.$router.push(`/v2/controller/${w.g4.getters.PreviousControllRoute}`)},HomeIconClick(){this.$router.push("/v2")},IOTableIconClick(){this.$router.push("/v2/IOTable")},AlarmIconClick(){this.$router.push("/v2/Alarm")},ShowRDTEstPage(){this.$router.push("/v2/rd_test")},async InitializeClick(){this.$swal.fire({title:"AGV Initialize",text:`${this.$t("start_init_action_notify_submarin_agv")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async e=>{if(e.isConfirmed){this.isInitializing=!0;e=await(0,b.wz)();e.confirm||this.$swal.fire({title:"AGV Initialize Fail",text:e.message,icon:"error",showCancelButton:!1,customClass:"my-sweetalert"})}}))},async ResetAlarmlick(){await(0,b.IC)()},async BuzzerOffClick(){await(0,b._e)()},async RemoveCstClick(){},async EmoClick(){(0,b.dE)()},ShowLogin(){this.IsLogin?this.$swal.fire({title:"Logout Confirm",text:"Logout ?",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&w.U6.dispatch("Logout")})):this.$refs.loginShow.Show()},async HandleModeSwitchRequest(e){var t="online"==e?`確定要將AGV${this.CurrentIsOnlineMode?"下線":"上線"}?`:`確定要將AGV更改為${this.CurrentIsAutoMode?"手動模式":"自動模式"}?`,a="online"==e?"AGV ONLINE-MODE CHANGE":"AGV AUTO-MODE CHANGE";return this.$swal.fire({text:t,title:a,icon:"question"}).then((async t=>{if(t.isConfirmed){var a={Success:!1,Message:"未知的錯誤"};"auto"==e?(this.AutoModeSwitching=!0,a=await b.DW.AutoModeSwitch(this.CurrentIsAutoMode?0:1)):(this.OnlineModeSwitching=!0,a=await b.DW.OnlineModeSwitch(this.CurrentIsOnlineMode?0:1)),this.OnlineModeSwitching=this.AutoModeSwitching=!1,a.Success||this.$swal.fire({text:a.Message,title:"",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}})),!1},VersionTextClickHandle(){this.version_text_click_count+=1,this.version_text_click_count>this.trigger_admin_dialog_count&&this.ConfirmGODTriggering()},ConfirmGODTriggering(){this.$swal.fire({title:"Warning",text:"Do you known what are you doing now?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",allowOutsideClick:!1}).then((e=>{this.AdminSwitchDialogResultHandle(e.isConfirmed)}))},AdminSwitchDialogResultHandle(e=!1){this.version_text_click_count=0,e&&w.U6.commit("setUser",{UserName:"GOD",Role:3})}},computed:{initBtnClass(){return w.q$.getters.AGVStatus.SubState.toLowerCase()},resetAlarmBtnVariant(){return w.q$.getters.AGVStatus.AlarmCodes.length>0?"danger":"light"},IsLogin(){return 0!=w.U6.getters.CurrentUserRole},CurrentIsAutoMode(){return 1==w.q$.getters.AGVStatus.AutoMode},CurrentIsOnlineMode(){return 1==w.q$.getters.AGVStatus.OnlineMode}},mounted(){setInterval((()=>{this.SystemTime=f()(Date.now()).format("yyyy-MM-DD HH:mm:ss")}),1e3)}};const Md=(0,g.Z)(xd,[["render",Vd],["__scopeId","data-v-672018d5"]]);var Td=Md,Od={components:{HomviewHeader:Jl,HomeviewFooter:Td},computed:{},methods:{ControllerIconClick(){this.$router.push("./controller")}}};const Ud=(0,g.Z)(Od,[["render",zl]]);var Ld=Ud;const Gd={class:"h-100 w-100 d-flex"};function Wd(e,t,a,s,i,r){const o=(0,n.up)("SideMenu"),l=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",Gd,[(0,n.Wm)(o),(0,n.Wm)(l,null,{default:(0,n.w5)((({Component:e})=>[((0,n.wg)(),(0,n.j4)(n.Ob,null,[((0,n.wg)(),(0,n.j4)((0,n.LL)(e)))],1024))])),_:1})])}const Bd=e=>((0,n.dD)("data-v-58c8d7b0"),e=e(),(0,n.Cn)(),e),Nd={class:"side-menu-fixed h-100 fixed-left"},Pd={class:""},Zd=Bd((()=>(0,n._)("div",{class:"logo-text"},[(0,n.Uk)(" GPM "),(0,n._)("div",{class:"log-sub-text"},"AGV")],-1))),Ed=[Zd],zd={class:"menu-icon"},Rd=["height"],Hd={class:"menu-icon"},Fd=["height"],jd={class:"menu-icon"},$d=["height"],qd={class:"menu-icon"},Qd=["height"];function Yd(e,t,a,r,o,l){const d=(0,n.up)("el-tooltip");return(0,n.wg)(),(0,n.iD)("div",Nd,[(0,n._)("div",Pd,[(0,n.Wm)(d,{placement:"right",content:"Home"},{default:(0,n.w5)((()=>[(0,n._)("div",{style:(0,i.j5)(l.Selected("/admin")),class:"side-item",onClick:t[0]||(t[0]=e=>l.PageSwitch("/admin","Home"))},Ed,4)])),_:1}),(0,n.Wm)(d,{placement:"right",content:"控制器"},{default:(0,n.w5)((()=>[(0,n._)("div",{style:(0,i.j5)(l.Selected("/admin/controller")),class:"side-item",onClick:t[1]||(t[1]=e=>l.PageSwitch("/admin/controller","控制器"))},[(0,n._)("div",zd,[(0,n._)("img",{src:"images/controller.png",height:o.icon_size,alt:""},null,8,Rd)])],4)])),_:1}),(0,n.Wm)(d,{placement:"right",content:"圖資管理"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{style:(0,i.j5)(l.Selected("/admin/map")),class:"side-item",onClick:t[2]||(t[2]=e=>l.PageSwitch("/admin/map","圖資管理"))},[(0,n._)("div",Hd,[(0,n._)("img",{src:"images/map.png",height:o.icon_size,alt:""},null,8,Fd)])],4),[[s.F8,l.IsUserLogin]])])),_:1}),(0,n.Wm)(d,{placement:"right",content:"資料"},{default:(0,n.w5)((()=>[(0,n._)("div",{style:(0,i.j5)(l.Selected("/admin/data")),class:"side-item",onClick:t[3]||(t[3]=e=>l.PageSwitch("/admin/data","資料"))},[(0,n._)("div",jd,[(0,n._)("img",{src:"images/database.png",height:o.icon_size,alt:""},null,8,$d)])],4)])),_:1}),(0,n.Wm)(d,{placement:"right",content:"系統設定"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",{style:(0,i.j5)(l.Selected("/admin/sys_settings")),class:"side-item",onClick:t[4]||(t[4]=e=>l.PageSwitch("/admin/sys_settings","系統設定"))},[(0,n._)("div",qd,[(0,n._)("img",{src:"images/settings.png",height:o.icon_size,alt:""},null,8,Qd)])],4),[[s.F8,l.IsUserLogin]])])),_:1})])])}var Xd={data(){return{icon_size:35,active_item:"/admin"}},computed:{IsUserLogin(){return!0}},methods:{CLoseEventHandle(){this.$emit("close",""),l.Z.emit("/alarm_footer_send_to_back",!1)},PageSwitch(e,t=""){var a=this.$router.currentRoute.value.path;e!=a&&setTimeout((()=>{this.$router.push(e),l.Z.emit("/router-change",{route_display_name:t,route_name:e})}),100)},Selected(e){return{backgroundColor:this.active_item==e?"rgb(13, 110, 253)":""}}},mounted(){const e=(0,x.yj)();(0,n.YP)((()=>e.path),((e,t)=>{this.active_item=e}))}};const Kd=(0,g.Z)(Xd,[["render",Yd],["__scopeId","data-v-58c8d7b0"]]);var Jd=Kd,eu={components:{SideMenu:Jd}};const tu=(0,g.Z)(eu,[["render",Wd]]);var au=tu;const su=[{path:"/",name:"home",component:Pl},{path:"/v2",name:"",component:Ld,children:[{path:"/v2",name:"MainStatuShow",component:Sl},{path:"IOTable",component:()=>a.e(461).then(a.bind(a,6461))},{path:"Alarm",component:()=>Promise.resolve().then(a.bind(a,3159))},{path:"controller",component:()=>a.e(371).then(a.bind(a,8371)),children:[{path:"move",component:()=>a.e(911).then(a.bind(a,1911))},{path:"fork",component:()=>a.e(12).then(a.bind(a,12))}]},{path:"rd_test",component:()=>a.e(443).then(a.bind(a,2082))}]},{path:"/rd_test",name:"rd_test",component:()=>a.e(443).then(a.bind(a,2082))},{path:"/admin",name:"admin",component:au,children:[{path:"controller",name:"controller",component:()=>a.e(371).then(a.bind(a,8371))}]},{path:"/idle",name:"idle",component:()=>a.e(726).then(a.bind(a,8726))}],nu=(0,x.p7)({history:(0,x.PO)(),routes:su});var iu=nu,ru=a(1877),ou=(a(4415),a(227)),lu=a(5658),du=a(6553),uu=a.n(du),cu=new yt.Z("ws/Sys_Messages");cu.Connect(),cu.onmessage=e=>{var t=JSON.parse(e.data);t.forEach((e=>{l.Z.emit("system_msg_updated",e)}))};var mu=new yt.Z("/ws/AGVCState"),hu=new yt.Z("ws/DIOTableData"),gu=new yt.Z("ws/RDTestData");mu.Connect(),mu.onmessage=e=>{var t=JSON.parse(e.data);w.q$.commit("updateStatus",t)},hu.Connect(),hu.onmessage=e=>{var t=JSON.parse(e.data);w.zb.commit("updateStatus",t)},gu.Connect(),gu.onmessage=e=>{var t=JSON.parse(e.data);w.tc.commit("SetData",t)};const _u=(0,lu.o)({legacy:!1,locale:"zh-TW",fallbackLocale:"en-US",messages:{"zh-TW":a(6687),"en-US":a(9594)}}),pu={confirmButtonColor:"rgb(13, 110, 253)",cancelButtonColor:"#ff7674"},wu=(0,s.ri)(V);wu.use(w.ZP),wu.use(iu),wu.use(ou.ZP),wu.use(ru.Z),wu.use(_u),wu.use(uu(),pu),wu.mount("#app")},6750:function(e,t,a){"use strict";a.d(t,{q$:function(){return f},zb:function(){return y},k0:function(){return b},tc:function(){return w},I7:function(){return v},g4:function(){return p},U6:function(){return A},ZP:function(){return _}});a(7658);var s=a(65),n=a(6265),i=a.n(n),r=a(663),o=i().create({baseURL:r.Z.backend_host});async function l(e){var t=await o.post("api/User/Login",e);return d(t.data),t.data}function d(e){e.LoginTime=Date.now(),localStorage.setItem("user",JSON.stringify(e))}var u=a(7327);class c{constructor(e,t){(0,u.Z)(this,"UserName",""),(0,u.Z)(this,"Role",0),this.UserName=e,this.Role=t}GetRoleName(){return 0==this.Role?"Operator":1==this.Role?"ENG":2==this.Role?"Developer":3==this.Role?"GOD":"Unknown"}}var m=c,h=a(2274),g=a(7943),_=(a(3259),(0,s.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}})),p=(0,s.MT)({state:{UI_Version:2,PreviousControllRoute:"move"},getters:{CurrentUIVersion:e=>e.UI_Version,PreviousControllRoute:e=>e.PreviousControllRoute},mutations:{SetPreviousControllerRoute(e,t){e.PreviousControllRoute=t}},actions:{}}),w=(0,s.MT)({state:{TestData:{move_test:{duration:0,state:0}}},getters:{testData:e=>e.TestData},mutations:{SetData(e,t){e.TestData=t}},actions:{}}),v=(0,s.MT)({state:{SysMessages:{ReportIndex:-1,Messages:[]}},getters:{SysMessages:e=>e.SysMessages.Messages,ReportIndex:e=>e.SysMessages.ReportIndex,LastReportIndex:e=>{var t=localStorage.getItem("sys_msg_report_index");return t?parseInt(t):-1}},mutations:{updateStatus(e,t){e.SysMessages.ReportIndex!=t.ReportIndex&&localStorage.setItem("sys_msg_report_index",t.ReportIndex+""),e.SysMessages=t}},actions:{Update({commit:e},t){e("updateStatus",t)}}}),f=(0,s.MT)({state:{AGVStatus:new h.ZP,SensorStatus:{LaserFront:new g.Z("前方雷射",0,155),LaserBack:new g.Z("後方雷射",0,-155,"left-bottom"),LaserRight:new g.Z("右方雷射",80,-125,"right-top"),LaserLeft:new g.Z("左方雷射",-80,-125),Bumper:new g.Z("Bumper",70,155,"right-top"),Bumper_back:new g.Z("Bumper",70,-155,"right-bottom"),RightWheel:new g.Z("右輪馬達",35,0,"right"),LeftWheel:new g.Z("左輪馬達",-35,0,"left"),VerticalWheel:new g.Z("垂直軸馬達",0,-85),VerticalBelt:new g.Z("垂直軸馬達皮帶",30,-85,"right-top"),ForkFrontendObstacle:new g.Z("牙叉障礙物",-40,120,"left-bottom"),ForkArmPosition:new g.Z("牙叉伸縮位置",40,120,"right-bottom")}},getters:{AGVStatus:e=>e.AGVStatus,AGVName:e=>e.AGVStatus.CarName,AlarmCodes:e=>e.AGVStatus.AlarmCodes.filter((e=>0!=e.Code)),AlarmGroup:e=>e.AGVStatus.AlarmsGroup,IsInspectionAGV:e=>2==e.AGVStatus.Agv_Type,IsForkAGV:e=>0==e.AGVStatus.Agv_Type,CurrentPose:e=>e.AGVStatus.Pose,CurrentAngle:e=>e.AGVStatus.Angle,BatteryStatus:e=>e.AGVStatus.BatteryStatus,ForkHeight:e=>e.AGVStatus.ZAxisDriverState.position,AGV_Sensors_States:e=>{if(void 0==y.getters.DIOStates.Inputs)return{};e.AGVStatus;e.SensorStatus.LaserFront.active=!y.getters.IsLaserFrontByass,e.SensorStatus.LaserFront.status=y.getters.IsLaserFrontAlarm?2:y.getters.IsLaserFrontWarning?1:0,e.SensorStatus.LaserBack.active=!y.getters.IsLaserBackByass,e.SensorStatus.LaserBack.status=y.getters.IsLaserBackAlarm?2:y.getters.IsLaserBackWarning?1:0,e.SensorStatus.LaserRight.active=!y.getters.IsLaserRightByass,e.SensorStatus.LaserRight.status=y.getters.IsLaserRightAlarm?2:0,e.SensorStatus.LaserLeft.active=!y.getters.IsLaserLeftByass,e.SensorStatus.LaserLeft.status=y.getters.IsLaserLeftAlarm?2:0,e.SensorStatus.Bumper.status=y.getters.IsBumperTrigger?2:0,e.SensorStatus.Bumper_back.status=y.getters.IsBumperTrigger?2:0,e.SensorStatus.RightWheel.status=y.getters.IsRightMotorAlarm?2:0,e.SensorStatus.LeftWheel.status=y.getters.IsLeftMotorAlarm?2:0,e.SensorStatus.VerticalWheel.status=y.getters.IsVerticalMotorAlarm?2:0,e.SensorStatus.VerticalBelt.status=y.getters.IsVerticalBeltAlarm?2:0,e.SensorStatus.ForkFrontendObstacle.status=y.getters.IsForkFronendObstacle?2:0,e.SensorStatus.ForkArmPosition.status=y.getters.Fork_ARM_States.IsArmAtHomePose?0:1;var t=0==e.AGVStatus.Agv_Type;return e.SensorStatus.VerticalWheel.visible=t,e.SensorStatus.VerticalBelt.visible=t,e.SensorStatus.ForkFrontendObstacle.visible=t,e.SensorStatus.ForkArmPosition.visible=t,e.SensorStatus},CurrentTag:e=>e.AGVStatus.BCR_State_MoveBase.tagID,IsHandshaking:e=>{var t=e.AGVStatus.HandShakeSignals;return!!t&&t.AGV.AGV_TR_REQ},Handshake_Signals:e=>{var t=e.AGVStatus.HandShakeSignals;return t?e.AGVStatus.HandShakeSignals:{AGV:{AGV_BUSY:!1,AGV_COMPT:!1,AGV_READY:!1,AGV_TR_REQ:!1,AGV_VALID:!1},EQ:{EQ_BUSY:!1,EQ_L_REQ:!1,EQ_READY:!1,EQ_U_REQ:!1,EQ_GO:!1}}},CurrentLaserMode:e=>e.AGVStatus.Current_LASER_MODE,HSTimers:e=>e.AGVStatus.HandShakeTimers},mutations:{updateStatus(e,t){e.AGVStatus=t}}}),A=(0,s.MT)({state:{UserState:{UserName:"OPERATOR",Role:0}},getters:{CurrentUserName:e=>e.UserState.UserName?e.UserState.UserName:"OPERATOR",IsGodUser:e=>3==e.UserState.Role,IsDevUser:e=>2==e.UserState.Role,CurrentUserRole:e=>e.UserState.Role},mutations:{setUser(e,t){e.UserState=t,localStorage.setItem("user",JSON.stringify(t))}},actions:{async Login({commit:e},t){var a=await l(t);if(void 0!=a){var s=new m(a.UserName,a.Role);e("setUser",s)}else e("setUser",{});return a},Logout({commit:e}){e("setUser",{UserName:"OPERATOR",Role:0})}}}),y=(0,s.MT)({state:{DIOStates:{}},getters:{DIOStates:e=>e.DIOStates,IsE84UseEmu:e=>void 0!=e.DIOStates.IsE84HsUseEmulator&&e.DIOStates.IsE84HsUseEmulator,E84_AGV:e=>{if(void 0==e.DIOStates.Outputs)return[0,0,0,0,0,0,0,0];let t=[];var a=["Y0020","Y0021","Y0022","Y0023","Y0024","Y0025","Y0026","Y0027"];for(let i=0;i<a.length;i++){var s=a[i],n=e.DIOStates.Outputs.find((e=>e.Address+""==s+""));t.push(n.State?1:0)}return t},E84_EQ:e=>{let t=[];if(e.DIOStates.IsE84HsUseEmulator){if(void 0==e.DIOStates.Outputs)return[0,0,0,0,0,0,0,0];var a=["Y0000","Y0001","Y0002","Y0003","Y0004","Y0005","Y0006","Y0007"];for(let i=0;i<a.length;i++){var s=a[i],n=e.DIOStates.Outputs.find((e=>e.Address+""==s+""));t.push(n.State?1:0)}}else{if(void 0==e.DIOStates.Inputs)return[0,0,0,0,0,0,0,0];a=["X0020","X0021","X0022","X0023","X0024","X0025","X0026","X0027"];for(let i=0;i<a.length;i++){s=a[i],n=e.DIOStates.Inputs.find((e=>e.Address+""==s+""));t.push(n.State?1:0)}}return t},Fork_ARM_States:e=>{if(void 0==e.DIOStates.Inputs)return{IsArmAtHomePose:!1,IsArmAtEndPose:!0};var t=e.DIOStates.Inputs,a=!t.find((e=>"X0001"==e.Address)).State,s=!t.find((e=>"X0000"==e.Address)).State;return{IsArmAtHomePose:a,IsArmAtEndPose:s}},IsLaserFrontAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0032"==e.Address)).State},IsLaserFrontWarning:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs,a=!t.find((e=>"X0030"==e.Address)).State,s=!t.find((e=>"X0031"==e.Address)).State,n=!t.find((e=>"X0032"==e.Address)).State;return(a|s)&!n},IsLaserBackAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0036"==e.Address)).State},IsLaserBackWarning:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs,a=!t.find((e=>"X0034"==e.Address)).State,s=!t.find((e=>"X0035"==e.Address)).State,n=!t.find((e=>"X0036"==e.Address)).State;return(a|s)&!n},IsLaserRightAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X000F"==e.Address)).State},IsLaserLeftAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X000E"==e.Address)).State},IsLaserFrontByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Front_LsrBypass"==e.Name)).State},IsLaserBackByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Back_LsrBypass"==e.Name)).State},IsLaserLeftByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Left_LsrBypass"==e.Name)).State},IsLaserRightByass:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Outputs;return t.find((e=>"Right_LsrBypass"==e.Name)).State},IsBumperTrigger:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X000A"==e.Address)).State},IsRightMotorAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0015"==e.Address)).State},IsLeftMotorAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0017"==e.Address)).State},IsVerticalMotorAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0019"==e.Address)).State},IsVerticalBeltAlarm:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X002C"==e.Address)).State},IsForkFronendObstacle:e=>{if(void 0==e.DIOStates.Inputs)return!1;var t=e.DIOStates.Inputs;return!t.find((e=>"X0011"==e.Address)).State}},mutations:{updateStatus(e,t){e.DIOStates=t}}}),b=(0,s.MT)({state:{HasAnyChanged:!1},getters:{IsAnyChanged:e=>e.HasAnyChanged},mutations:{setIsAnyChanged(e,t){e.HasAnyChanged=t}}})},5308:function(e,t,a){"use strict";a.d(t,{Z:function(){return T}});var s=a(3396),n=a(9242);const i=e=>((0,s.dD)("data-v-7e239820"),e=e(),(0,s.Cn)(),e),r={class:"agv-3d-state"},o={class:"state-info"},l={class:"text-start"},d={key:0,class:"bi bi-chevron-down"},u={key:1,class:"bi bi-chevron-up"},c={class:"px-3 py-3",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},m={style:{width:"40px"}},h={style:{width:"40px"}},g=i((()=>(0,s._)("div",{class:"border",id:"my-three"},null,-1)));function _(e,t,a,i,_,p){const w=(0,s.up)("b-button"),v=(0,s.up)("el-input"),f=(0,s.up)("el-form-item"),A=(0,s.up)("el-checkbox"),y=(0,s.up)("el-form");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s._)("div",l,[(0,s.Wm)(w,{class:"bg-primary",onClick:t[0]||(t[0]=e=>_.showStatusCard=!_.showStatusCard),size:"sm",squared:""},{default:(0,s.w5)((()=>[(0,s.Uk)(" 狀態資訊 "),_.showStatusCard?((0,s.wg)(),(0,s.iD)("i",u)):((0,s.wg)(),(0,s.iD)("i",d))])),_:1})]),(0,s.wy)((0,s._)("div",c,[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(p.DriversState,(e=>((0,s.wg)(),(0,s.j4)(f,{key:e.name,label:e.name},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{label:"State",class:"mx-2"},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.Wm)(v,{size:"small",disabled:"",min:"0",modelValue:e.state,"onUpdate:modelValue":t=>e.state=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024),(0,s.Wm)(f,{label:"Error Code",class:"mx-2"},{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s.Wm)(v,{size:"small",disabled:"",min:"0",modelValue:e.errorCode,"onUpdate:modelValue":t=>e.errorCode=t,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["label"])))),128)),(0,s.Wm)(f,{label:"卡匣在席"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{modelValue:_.isCarrierExist,"onUpdate:modelValue":t[1]||(t[1]=e=>_.isCarrierExist=e)},null,8,["modelValue"])])),_:1})])),_:1})],512),[[n.F8,_.showStatusCard]])]),g])}var p=a(1114),w=a(4543),v=a(3259),f=a(7780);const A={class:"dashboard"},y=(0,s._)("div",{class:"dashboard-circle"},[(0,s._)("div",{class:"dashboard-light"}),(0,s._)("div",{class:"dashboard-turn-indicator"})],-1),b=[y];function S(e,t,a,n,i,r){return(0,s.wg)(),(0,s.iD)("div",A,b)}var k={name:"Dashboard",props:{isHeadlightOn:{type:Boolean,default:!1},isBrakeLightOn:{type:Boolean,default:!1},isLeftTurnSignalOn:{type:Boolean,default:!1},isRightTurnSignalOn:{type:Boolean,default:!1}},computed:{turnIndicatorStyle(){return this.isLeftTurnSignalOn&&!this.isRightTurnSignalOn?"left":!this.isLeftTurnSignalOn&&this.isRightTurnSignalOn?"right":""}}},C=a(89);const D=(0,C.Z)(k,[["render",S]]);var I=D,V=a(6750),x={components:{dashboard:I},data(){return{width:730,height:600,CarrierHeight:60,ForkDepth:10,CSTBarcodeReaderInstallHeight:70,Fork:void 0,scene:null,renderer:null,camera:null,isCarrierExist:!1,showStatusCard:!1,DriverState:new f.Z}},computed:{forkMesh(){return this.scene.getObjectByName("fork")},carrierMesh(){return this.scene.getObjectByName("carrier")},ZAxisHeight(){return this.DriverState.position},DriversState(){return V.q$.getters.AGVStatus.DriversStates}},methods:{CreateZAxisMesh(){const e=210,t=new p.DvJ(20,60,e),a=new p.YBo({color:1858652,transparent:!1,opacity:.5}),s=new p.Kj0(t,a);return s.position.set(-100,0,e/2),s},CreateForkMesh(){var e=new p.DvJ(220,60,this.ForkDepth);const t=new p.YBo({color:3750201,transparent:!1,opacity:.5});var a=new p.Kj0(e,t);return a.name="fork",a.position.set(0,0,this.ZAxisHeight+2*this.ForkDepth),a},CreateCarrieMesh(){var e=new p.DvJ(60,60,60);const t=new p.YBo({color:1997053,transparent:!1,opacity:1});var a=new p.Kj0(e,t);return a.name="carrier",a.position.set(70,0,this.ZAxisHeight+this.CarrierHeight/2+this.ForkDepth),a},CreateCSTBCRMesh(){var e=new p.DvJ(10,10,10);const t=new p.YBo({color:0,transparent:!1,opacity:1});var a=new p.Kj0(e,t);return a.name="cst-bcr",a.position.set(-90,0,this.CSTBarcodeReaderInstallHeight),a},Init3DModel(){const e=new p.xsS,t=new p.DvJ(220,60,40),a=new p.YBo({color:6052956,transparent:!1,opacity:.5}),s=new p.Kj0(t,a);e.add(s),e.add(this.CreateZAxisMesh()),e.add(this.CreateForkMesh()),e.add(this.CreateCarrieMesh()),e.add(this.CreateCSTBCRMesh());var n=new p._12(1e3,1e3,32),i=new p.vBJ({color:13421772});n=new p.Kj0(n,i);n.position.set(0,0,0),e.add(n);const r=new p.Mig(16777215,.4),o=new p.cek(16777215,1);e.add(r),o.position.set(220,300,400),e.add(o);const l=new p.cPb(45,this.width/this.height,.2,2100);l.position.set(0,520,270),l.up.set(0,-1,0),l.lookAt(120,120,0);const d=new p.y8_(1200);d.setColors("blue","green","red"),e.add(d);const u=new p.CP7;u.setSize(this.width,this.height),u.render(e,l);const c=new w.z(l,u.domElement);c.addEventListener("change",(()=>{u.render(e,l)})),e.background=new p.Ilk(16777215),e.rotation.z=Math.PI/3,e.position.y=160,e.position.z=-10,l.zoom=.2,this.scene=e,this.renderer=u,this.camera=l;var m=()=>{requestAnimationFrame(m),this.carrierMesh.visible=this.isCarrierExist,u.render(e,l)};return m(),u.domElement},ForkPositionChange(){}},mounted(){v.Z.on("/zaxis_driver_state",(e=>{this.DriverState=e}));var e=this.Init3DModel();document.getElementById("my-three")?.appendChild(e),setInterval((()=>{this.forkMesh.position.z=this.ZAxisHeight+20,this.carrierMesh.position.z=this.ZAxisHeight+20+this.CarrierHeight/2+this.ForkDepth/2}),100)}};const M=(0,C.Z)(x,[["render",_],["__scopeId","data-v-7e239820"]]);var T=M},5339:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s=a(3396),n=a(7139);const i=(0,s._)("img",{src:"/images/agv_lift.png",width:"300",alt:""},null,-1);function r(e,t,a,r,o,l){return(0,s.wg)(),(0,s.iD)("div",{onMouseup:t[2]||(t[2]=e=>{o.isForkClickDown=!1}),class:"admin w-100 h-100"},[(0,s._)("div",{onMousemove:t[1]||(t[1]=(...e)=>l.MouseMove&&l.MouseMove(...e)),class:"agv-fork-img"},[i,(0,s._)("div",{onMousedown:t[0]||(t[0]=(...e)=>l.ForkClick&&l.ForkClick(...e)),style:(0,n.j5)(l.ForkStyle),class:"fork"},[(0,s._)("span",null,(0,n.zw)(l.ForkHeight)+" mm",1)],36)],32)],32)}var o={data(){return{isForkClickDown:!1,mouse_down_cursor_position:[0,0],current_cursor_position:[0,0],bottom:0,bottom_offset:70,forkHeight:0,scale:.05}},computed:{deltaX(){return this.current_cursor_position[1]-this.mouse_down_cursor_position[1]},ForkStyle(){return{bottom:`${this.bottom+this.bottom_offset}px`}},ForkHeight(){return this.bottom/this.scale}},methods:{ForkClick(e){this.isForkClickDown=!0,this.current_cursor_position=[e.x,e.y],console.log(e)},MouseMove(e){if(this.isForkClickDown){var t=[e.x,e.y],a=t[1]-this.current_cursor_position[1];this.bottom>=0&&this.bottom<=643?this.bottom-=a:this.bottom>500?this.bottom=643:this.bottom=0,this.current_cursor_position=t}}}},l=a(89);const d=(0,l.Z)(o,[["render",r]]);var u=d},3159:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return k}});var s=a(3396),n=a(7139);const i={class:"alarm-warn-table px-1"},r={class:"d-flex flex-row"},o={class:"flex-fill text-start"},l=(0,s._)("span",{class:"m-2"},"Search :",-1),d={class:"mt-2"},u={class:"border mt-1"},c={class:"text-center"},m={class:"text-center"},h=(0,s._)("p",null,"確定要清除異常紀錄?",-1);function g(e,t,a,g,_,p){const w=(0,s.up)("b-button"),v=(0,s.up)("el-input"),f=(0,s.up)("el-pagination"),A=(0,s.up)("el-table-column"),y=(0,s.up)("el-table"),b=(0,s.up)("b-modal");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",r,[(0,s._)("div",o,[(0,s.Wm)(w,{size:"sm",onClick:p.AlarmDownload},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.$t("refresh")),1)])),_:1},8,["onClick"]),p.clear_alarm_btn_visible?((0,s.wg)(),(0,s.j4)(w,{key:0,variant:"danger",onClick:t[0]||(t[0]=e=>p.ClearAlarmAlert()),size:"sm"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.$t("clear_alarm_records")),1)])),_:1})):(0,s.kq)("",!0)]),(0,s._)("div",null,[l,(0,s.Wm)(v,{size:"small",style:{width:"168px"}})])]),(0,s._)("div",d,[(0,s.Wm)(f,{background:"",layout:"prev, pager, next",total:_.totalAlarmNum,"page-size":_.page_size,modelValue:_.page,"onUpdate:modelValue":t[1]||(t[1]=e=>_.page=e),onCurrentChange:p.PageChangeHandler},null,8,["total","page-size","modelValue","onCurrentChange"])]),(0,s._)("div",u,[(0,s.Wm)(y,{data:_.alarms,"row-key":"Time","row-class-name":p.tb_row_class,header:"",border:"",height:"550",size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{label:"Time",prop:"Time",width:"160",formatter:p.TimeFormmter},null,8,["formatter"]),(0,s.Wm)(A,{label:"Code",prop:"Code",width:"90","header-align":"center"},{default:(0,s.w5)((({row:e})=>[(0,s._)("div",c,(0,n.zw)(e.Code),1)])),_:1}),(0,s.Wm)(A,{label:"Description",prop:"zh-TW"==_.lang?"CN":"Description"},null,8,["prop"]),(0,s.Wm)(A,{label:"Level",prop:"Level",width:"100","header-align":"center"},{default:(0,s.w5)((({row:e})=>[(0,s._)("div",m,[(0,s._)("b",null,(0,n.zw)(e.Level),1)])])),_:1})])),_:1},8,["data","row-class-name"])]),(0,s.Wm)(b,{modelValue:_.clear_alarms_dialog_show,"onUpdate:modelValue":t[2]||(t[2]=e=>_.clear_alarms_dialog_show=e),centered:"",title:"Alarm Records Clear",onOk:p.ClearAlarmRecords},{default:(0,s.w5)((()=>[h])),_:1},8,["modelValue","onOk"])])}var _=a(8418),p=a(6797),w=a.n(p),v=a(3259),f=a(3867),A=a(6750),y={data(){return{alarms:[],totalAlarmNum:0,page:1,page_size:15,lang:"zh-TW",clear_alarms_dialog_show:!1}},methods:{tb_row_class(e,t){if(e.rowIndex<0)return"";var a=this.alarms[e.rowIndex].Level;try{return"Warning"==a?"warning-row":"Alarm"===a?"alarm-row":"success-row"}catch(s){return"success-row"}},TimeFormmter(e,t,a,s){return w()(a).format("yyyy/MM/DD HH:mm:ss")},async PageChangeHandler(e){this.page=e,this.AlarmDownload()},async AlarmDownload(){this.totalAlarmNum=await _.d3.TotalAlarmCount(),this.alarms=await _.d3.QueryByPage(this.page,this.page_size)},ClearAlarmAlert(){this.$swal.fire({title:"Alert Clear",text:`${this.$t("clear-alarm-data-confirm-text")}`,icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&this.ClearAlarmRecords()}))},async ClearAlarmRecords(){await _.d3.ClearAlarms(),f.Z.Success("Alarm Clear","bottom",1e3),await this.AlarmDownload()}},computed:{clear_alarm_btn_visible(){return 0!=A.U6.getters.CurrentUserRole}},async mounted(){this.AlarmDownload(),v.Z.on("/alarmtable_tab_click",(async()=>{this.AlarmDownload()})),v.Z.on("/lang_changed",(e=>{this.lang=e}))}},b=a(89);const S=(0,b.Z)(y,[["render",g]]);var k=S},8282:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var s=a(3396),n=a(7139);const i={class:"px-1 d-flex flex-row border justify-content-center"},r={class:"mt-2"},o={class:"border mt-1 flex-fill"},l=(0,s._)("p",null,"Are you sure?",-1);function d(e,t,a,d,u,c){const m=(0,s.up)("jw-pagination"),h=(0,s.up)("el-table-column"),g=(0,s.up)("el-button"),_=(0,s.up)("el-table"),p=(0,s.up)("b-modal");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",r,[(0,s.Wm)(m,{onPage_changed:t[0]||(t[0]=e=>{u.pagecurrent=e-1}),pageSize:16,totalCount:a.table_data.length},null,8,["totalCount"])]),(0,s._)("div",o,[(0,s.Wm)(_,{size:"small",data:c.page_table_data,"row-class-name":c.tb_row_class,header:"",border:"",height:"570","row-key":"Address","highlight-current-row":!1,onRowDblclick:c.cellDoubleClickHandle,onCellMouseEnter:c.cellMouseEnterHandler,onCellMouseLeave:c.cellMouseLeaveHandler,style:{width:"99%"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{label:"Address",prop:"Address",width:"70"}),(0,s.Wm)(h,{label:"Name",prop:"Name"}),(0,s.Wm)(h,{label:"Value",prop:"State",width:"60",formatter:c.StateFormatter},null,8,["formatter"]),a.useToggle&&c.IsUserLogin?((0,s.wg)(),(0,s.j4)(h,{key:0,width:"80"},{default:(0,s.w5)((e=>[(0,s.Wm)(g,{onClick:t=>c.cellDoubleClickHandle(e.row),size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("Toggle")])),_:2},1032,["onClick"])])),_:1})):(0,s.kq)("",!0)])),_:1},8,["data","row-class-name","onRowDblclick","onCellMouseEnter","onCellMouseLeave"])]),(0,s.Wm)(p,{modelValue:u.DIOChangeComfirmDialogShow,"onUpdate:modelValue":t[1]||(t[1]=e=>u.DIOChangeComfirmDialogShow=e),centered:!0,title:"DIO Change Confirm",onOk:c.WriteDIOHandle},{default:(0,s.w5)((()=>[(0,s._)("p",null,[(0,s._)("b",null,"["+(0,n.zw)(u.toChangeAddress)+"]",1),(0,s.Uk)(" will changed from "),(0,s._)("b",null,(0,n.zw)(u.toChangeState?0:1),1),(0,s.Uk)(" to "),(0,s._)("b",null,(0,n.zw)(u.toChangeState?1:0),1),(0,s.Uk)(". ")]),l])),_:1},8,["modelValue","onOk"])])}var u=a(3251),c=a(8418),m=a(6750);const h={class:"d-flex flex-column",style:{width:"50px"}};function g(e,t,a,i,r,o){const l=(0,s.up)("b-button");return(0,s.wg)(),(0,s.iD)("div",h,[(0,s.Wm)(l,{class:"m-1",size:"sm",onClick:o.prev},{default:(0,s.w5)((()=>[(0,s.Uk)("▲")])),_:1},8,["onClick"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.totalPages,(e=>((0,s.wg)(),(0,s.j4)(l,{class:"m-1 border",size:"sm",onClick:()=>{r.pagecurrent=e},key:e,variant:e==r.pagecurrent?"primary":"dark"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClick","variant"])))),128)),(0,s.Wm)(l,{class:"m-1",size:"sm",onClick:o.next},{default:(0,s.w5)((()=>[(0,s.Uk)("▼")])),_:1},8,["onClick"])])}var _={props:{default:{type:Number,default:1},totalCount:{type:Number,default:0},pageSize:{type:Number,default:16}},data(){return{pagecurrent:this.value}},computed:{totalPages(){return this.totalCount<=this.pageSize?1:this.totalCount/this.pageSize}},mounted(){this.pagecurrent=this.default,(0,s.YP)((()=>this.pagecurrent),((e,t)=>{this.$emit("page_changed",e)}))},methods:{prev(){this.pagecurrent>1&&(this.pagecurrent=this.pagecurrent-1)},next(){this.pagecurrent<this.totalPages&&(this.pagecurrent=this.pagecurrent+1)}}},p=a(89);const w=(0,p.Z)(_,[["render",g]]);var v=w,f={components:{jwPagination:v},props:{enabled:{type:Boolean,default:!1},digital_type:{type:String,default:"input"},readonly:{type:Boolean,default:!0},table_data:{type:Array,default(){return[new u.C("X0000","1"),new u.C("X0001",""),new u.C("X0002",""),new u.C("X0003",""),new u.C("X0004",""),new u.C("X0005",""),new u.C("X0006",""),new u.C("X0007",""),new u.C("X0008",""),new u.C("X0009",""),new u.C("X000A",""),new u.C("X000B",""),new u.C("X000C",""),new u.C("X000D",""),new u.C("X000E",""),new u.C("X000F","")]}},useToggle:{type:Boolean,default:!1}},data(){return{Registers:[],pagecurrent:0,DIOChangeComfirmDialogShow:!1,toChangeAddress:"",toChangeState:!1,hover_row:{}}},computed:{page_table_data(){return this.table_data.slice(16*this.pagecurrent,16*(this.pagecurrent+1))},IsUserLogin(){return 0!=m.U6.getters.CurrentUserRole},IsGodUse(){return m.U6.getters.IsGodUser}},methods:{tb_row_class(e,t){if(e.rowIndex<0)return"";if(this.hover_row&&this.hover_row.Address==e.row.Address)return"bg-dark";var a=this.page_table_data[e.rowIndex].State;try{return a?"on-row":"off-row"}catch(s){return"off-row"}},StateFormatter(e,t,a,s){return 1==a?1:0},PageChangeHandler(e){this.pagecurrent=e-1},cellMouseEnterHandler(e,t,a,s){this.hover_row=e},cellMouseLeaveHandler(e,t,a,s){this.hover_row=void 0},async cellDoubleClickHandle(e,t,a){if(this.IsUserLogin)if("input"==this.digital_type)await c.Kl.DI_State_Change(e.Address,!e.State);else{if(this.toChangeAddress=e.Address,this.toChangeState=!e.State,this.IsGodUse)return void this.WriteDIOHandle();this.DIOChangeComfirmDialogShow=!0}},async WriteDIOHandle(){await c.Kl.DO_State_Change(this.toChangeAddress,this.toChangeState)}}};const A=(0,p.Z)(f,[["render",d]]);var y=A},9348:function(e,t,a){"use strict";a.d(t,{Z:function(){return B}});var s=a(3396);const n={class:"d-flex fle-row border-bottom py-1 my-1"};function i(e,t,a,i,r,o){const l=(0,s.up)("el-button"),d=(0,s.up)("el-input"),u=(0,s.up)("el-table-column"),c=(0,s.up)("el-table"),m=(0,s.up)("TeachTool"),h=(0,s.Q2)("loading");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",n,[(0,s.Wm)(l,{disabled:!r.HasAnyChange,type:"primary",onClick:o.SaveHandler},{default:(0,s.w5)((()=>[(0,s.Uk)("儲存")])),_:1},8,["disabled","onClick"]),(0,s.Wm)(l,{type:"info",onClick:o.AddTagTeachHandler},{default:(0,s.w5)((()=>[(0,s.Uk)("新增")])),_:1},8,["onClick"]),(0,s.Wm)(l,{type:"info",onClick:o.reload},{default:(0,s.w5)((()=>[(0,s.Uk)("重新載入")])),_:1},8,["onClick"])]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(c,{onCellClick:o.HandleCellClicked,data:r.TeachDatas,height:"600",size:"small"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:"Tag",prop:"Tag"},{default:(0,s.w5)((e=>[(0,s._)("div",null,[(0,s.Wm)(d,{onClick:o.InputClicked,onChange:o.InputChanged,type:"number",modelValue:e.row.Tag,"onUpdate:modelValue":t=>e.row.Tag=t},null,8,["onClick","onChange","modelValue","onUpdate:modelValue"])])])),_:1}),((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)([0,1,2],(e=>(0,s.Wm)(u,{key:e,label:"layer-"+e},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{label:"Up Pose(cm)",prop:`Up_Pose:${e}`},{default:(0,s.w5)((t=>[void 0!=t.row.Layers[e]?((0,s.wg)(),(0,s.j4)(d,{key:0,onClick:o.InputClicked,onChange:o.InputChanged,type:"number",step:"0.01",min:"0",modelValue:t.row.Layers[e].Value.Up_Pose,"onUpdate:modelValue":a=>t.row.Layers[e].Value.Up_Pose=a},null,8,["onClick","onChange","modelValue","onUpdate:modelValue"])):(0,s.kq)("",!0)])),_:2},1032,["prop"]),(0,s.Wm)(u,{label:"Down Pose(cm)",prop:`Down_Pose:${e}`},{default:(0,s.w5)((t=>[void 0!=t.row.Layers[e]?((0,s.wg)(),(0,s.j4)(d,{key:0,onClick:o.InputClicked,onChange:o.InputChanged,type:"number",step:"0.01",min:"0",modelValue:t.row.Layers[e].Value.Down_Pose,"onUpdate:modelValue":a=>t.row.Layers[e].Value.Down_Pose=a},null,8,["onClick","onChange","modelValue","onUpdate:modelValue"])):(0,s.kq)("",!0)])),_:2},1032,["prop"])])),_:2},1032,["label"]))),64)),(0,s.Wm)(u,{"min-width":"100"},{default:(0,s.w5)((e=>[(0,s._)("div",null,[(0,s.Wm)(l,{onClick:t=>o.RemoveTagTeachSetting(e.row),type:"danger",size:"small"},{default:(0,s.w5)((()=>[(0,s.Uk)("刪除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["onCellClick","data"])),[[h,r.loading]]),(0,s.Wm)(m,{onOnValueChanged:o.HamdleVirtualKBValuechange,ref:"teach_tool"},null,8,["onOnValueChanged"])])}a(7658);var r=a(8418),o=a(6750),l=a(644),d=a(7139),u=a(9242);const c=e=>((0,s.dD)("data-v-58b4fe9b"),e=e(),(0,s.Cn)(),e),m={class:"teach-tool"},h={class:"border-bottom my-2 text-start"},g={class:"d-flex"},_={class:"height-text"},p={key:0,class:"mx-3"},w=c((()=>(0,s._)("div",{class:"height-text"},"Pose",-1))),v={class:"goal-val"},f={class:""},A={class:"text-start border-top py-2"},y={class:"d-flex"},b=c((()=>(0,s._)("h6",null,"牙叉位置調整",-1))),S={class:"mx-3"},k=c((()=>(0,s._)("span",null,"當前高度:",-1))),C=c((()=>(0,s._)("span",null,"cm",-1))),D={class:"d-flex"},I={class:"button-group d-flex p-1"},V={class:"button-group d-flex p-1"},x={class:"button-group d-flex p-1"};function M(e,t,a,n,i,r){const o=(0,s.up)("el-button"),l=(0,s.up)("SimpleKeyboardVue"),c=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)("div",m,[(0,s.Wm)(c,{width:"50%",modal:!1,draggable:"",modelValue:i.show,"onUpdate:modelValue":t[12]||(t[12]=e=>i.show=e),title:r.title_},{default:(0,s.w5)((()=>[(0,s._)("div",h,[(0,s._)("div",g,[(0,s._)("div",null,[(0,s._)("div",_,(0,d.zw)(r.input_label_text),1),(0,s.wy)((0,s._)("input",{id:"teach-val-input","onUpdate:modelValue":t[0]||(t[0]=e=>i.input_sum=e),onChange:t[1]||(t[1]=(...e)=>r.HandleInputChanged&&r.HandleInputChanged(...e))},null,544),[[u.nr,i.input_sum]])]),r.is_modify_tagNumber?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",p,[w,(0,s._)("div",v,(0,d.zw)(i.goal.pose),1)]))]),(0,s.Wm)(o,{onClick:r.HandleForkMoveBtnClick,type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)("移動牙叉至此位置")])),_:1},8,["onClick"])]),(0,s._)("div",f,[(0,s.Wm)(l,{KeyboardVue:"",keyboard_type:"number",onOnKeyPress:r.KeyboardInputChanged},null,8,["onOnKeyPress"]),(0,s._)("div",A,[(0,s._)("div",y,[b,(0,s._)("span",S,[k,(0,s.Uk)(" "+(0,d.zw)(r.current_position)+" ",1),C])]),(0,s._)("div",D,[(0,s._)("div",I,[(0,s.Wm)(o,{onClick:t[2]||(t[2]=e=>r.ForkAction("home"))},{default:(0,s.w5)((()=>[(0,s.Uk)("Home")])),_:1}),(0,s.Wm)(o,{onClick:t[3]||(t[3]=e=>r.ForkAction("stop")),type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)("STOP")])),_:1})]),(0,s._)("div",null,[(0,s._)("div",V,[(0,s.Wm)(o,{onClick:t[4]||(t[4]=e=>r.ForkPositionAdjust(.1))},{default:(0,s.w5)((()=>[(0,s.Uk)("+1mm")])),_:1}),(0,s.Wm)(o,{onClick:t[5]||(t[5]=e=>r.ForkPositionAdjust(.5))},{default:(0,s.w5)((()=>[(0,s.Uk)("+5mm")])),_:1}),(0,s.Wm)(o,{onClick:t[6]||(t[6]=e=>r.ForkPositionAdjust(-.1))},{default:(0,s.w5)((()=>[(0,s.Uk)("-1mm")])),_:1}),(0,s.Wm)(o,{onClick:t[7]||(t[7]=e=>r.ForkPositionAdjust(-.5))},{default:(0,s.w5)((()=>[(0,s.Uk)("-5mm")])),_:1})]),(0,s._)("div",x,[(0,s.Wm)(o,{onClick:t[8]||(t[8]=e=>r.ForkPositionAdjust(1))},{default:(0,s.w5)((()=>[(0,s.Uk)("+1cm")])),_:1}),(0,s.Wm)(o,{onClick:t[9]||(t[9]=e=>r.ForkPositionAdjust(5))},{default:(0,s.w5)((()=>[(0,s.Uk)("+5cm")])),_:1}),(0,s.Wm)(o,{onClick:t[10]||(t[10]=e=>r.ForkPositionAdjust(-1))},{default:(0,s.w5)((()=>[(0,s.Uk)("-1cm")])),_:1}),(0,s.Wm)(o,{onClick:t[11]||(t[11]=e=>r.ForkPositionAdjust(-5))},{default:(0,s.w5)((()=>[(0,s.Uk)("-5cm")])),_:1})])])])])])])),_:1},8,["modelValue","title"])])}var T={components:{SimpleKeyboardVue:l.Z},data(){return{show:!1,number:0,input_sum:"",title_:"",goal:{tag:0,layer:0,pose:0,value:0}}},watch:{input_sum:{immediate:!0,deep:!0,handler(e,t){var a=parseFloat(e+"");isNaN(a)||(this.number=a,this.goal.value=a,this.$emit("onValueChanged",this.goal),this.is_modify_tagNumber&&(this.goal.tag=a))}}},computed:{input_label_text(){return this.is_modify_tagNumber?"Tag Number":"HEIGHT"},is_modify_tagNumber(){return void 0==this.goal.pose},title_(){return"Tag "+(this.is_modify_tagNumber?this.goal.tag:this.goal.tag+"-Layer "+this.goal.layer)},current_position(){return o.q$.getters.ForkHeight}},methods:{Show(e){this.goal=e,this.input_sum=this.goal.value+"",this.number=this.goal.value,this.show=!0},HandleForkMoveBtnClick(){this.$swal.fire({text:"請確認牙叉上方/下方是否有障礙物!",title:"確定要將牙叉移動至此位置?",icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&setTimeout((async()=>{var e=await r.ks.Action("pose",this.number,1);e.confirm||this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})}),100)}))},async ForkPositionAdjust(e){var t=await r.ks.Action("increase",e,1);t.confirm||this.$swal.fire({text:"",title:t.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},async ForkAction(e){await r.ks.Action(e)},HandleInputChanged(){},KeyboardInputChanged(e){if("back"==e){var t=this.input_sum.length-1;this.input_sum=this.input_sum.substring(0,t),""==this.input_sum&&(this.input_sum="0")}else{if(this.is_modify_tagNumber&&"."==e)return;"0"==this.input_sum&&(this.input_sum=""),this.input_sum+=e}}}},O=a(89);const U=(0,O.Z)(T,[["render",M],["__scopeId","data-v-58b4fe9b"]]);var L=U,G={components:{SimpleKeyboardVue:l.Z,TeachTool:L},data(){return{TeachDatas:[{Tag:10,Layers:[{Key:0,Value:{Name:"10-0",Up_Pose:12.2,Down_Pose:9}},{Key:1,Value:{Name:"10-1",Up_Pose:12.2,Down_Pose:9}}]},{Tag:20,Layers:[{Key:0,Value:{Name:"20-0",Up_Pose:11.2,Down_Pose:1}},{Key:1,Value:{Name:"20-1",Up_Pose:33.2,Down_Pose:1}},{Key:2,Value:{Name:"20-2",Up_Pose:133.2,Down_Pose:1}}]}],OriDataJson:void 0,HasAnyChange:!1,loading:!1,selected_data:{}}},watch:{HasAnyChange(e,t){o.k0.commit("setIsAnyChanged",e)}},computed:{NewTagNumber(){var e=this.TeachDatas.length;return 0==e?1:this.TeachDatas[e-1].Tag+1},NewTagLayerDataTemplate(){var e=this.TeachDatas.length;return 0==e?[{Key:0,Value:{Name:"1-0",Up_Pose:12.2,Down_Pose:9}},{Key:1,Value:{Name:"1-1",Up_Pose:12.2,Down_Pose:9}},{Key:2,Value:{Name:"1-2",Up_Pose:12.2,Down_Pose:9}}]:JSON.parse(JSON.stringify(this.TeachDatas[e-1].Layers))}},methods:{reload(){this.LoadTeachDataFromServer(),this.HasAnyChange=!1},async LoadTeachDataFromServer(){this.loading=!0,setTimeout((async()=>{try{this.TeachDatas=await r.ks.GetTeachData(),this.loading=!1,this.ResetOriDattaString()}catch(e){this.loading=!1}}),100)},async SaveHandler(){const e={};this.TeachDatas.forEach((t=>{const a=t.Tag.toString();e[a]={},t.Layers.forEach((t=>{const s=t.Key.toString();e[a][s]=t.Value}))})),this.ResetOriDattaString(),this.InputChanged();var t=await r.ks.SaveTeachData(e);t.confirm&&(this.LoadTeachDataFromServer(),this.HasAnyChange=!1,this.$swal.fire({icon:"success",title:"Fork Teach Data Save",text:"儲存成功!"}))},InputChanged(){var e=this.GetNonCommString(this.TeachDatas);this.HasAnyChange=e!=this.OriDataJson},InputClicked(e){setTimeout((()=>{this.$refs["teach_tool"].Show(this.selected_data)}),100)},AddTagTeachHandler(){this.TeachDatas.push({Tag:this.NewTagNumber,Layers:this.NewTagLayerDataTemplate}),this.HasAnyChange=!0},RemoveTagTeachSetting(e){var t=this.TeachDatas.indexOf(e);this.TeachDatas.splice(t,1),this.InputChanged(),this.HasAnyChange=!0},GetNonCommString(e){return JSON.stringify(e).replaceAll('"',"")},ResetOriDattaString(){this.OriDataJson=this.GetNonCommString(this.TeachDatas),this.HasAnyChange=!1},HandleCellClicked(e,t,a,s){var n=t.property.split(":");if(1!=n.length){var i=n[0],r=parseInt(n[1]),o=e.Layers[r].Value[i];this.selected_data={tag:e.Tag,layer:r,pose:i,value:o}}else this.selected_data={tag:e.Tag,layer:void 0,pose:void 0,value:e.Tag}},HamdleVirtualKBValuechange(e){var t=this.TeachDatas.find((t=>t.Tag==e.tag));void 0==e.pose?t.Tag=e.value:t.Layers[e.layer].Value[e.pose]=e.value,this.InputChanged()}},mounted(){this.reload()}};const W=(0,O.Z)(G,[["render",i]]);var B=W},644:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var s=a(3396),n=a(7139);function i(e,t,a,i,r,o){return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(a.keyboardClass)},null,2)}var r=a(5179),o=a.n(r),l={name:"SimpleKeyboard",props:{keyboardClass:{default:"simple-keyboard",type:String},input:{type:String},keyboard_type:{type:String,default(){return""}}},data:()=>({keyboard:null,lastinput:void 0}),mounted(){"number"==this.keyboard_type?this.keyboard=new(o())(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress,layout:{default:["  back","1 2 3","4 5 6","7 8 9",". 0 enter"]},theme:"hg-theme-default hg-layout-numeric numeric-theme"}):this.keyboard=new(o())(this.keyboardClass,{onChange:this.onChange,onKeyPress:this.onKeyPress})},methods:{onChange(e){this.$emit("onChange",e)},onKeyPress(e){this.$emit("onKeyPress",e),"{shift}"!==e&&"{lock}"!==e||this.handleShift(),this.lastinput=e},handleShift(){let e=this.keyboard.options.layoutName,t="default"===e?"shift":"default";this.keyboard.setOptions({layoutName:t})}},watch:{input(e){this.keyboard.setInput(e)}}},d=a(89);const u=(0,d.Z)(l,[["render",i],["__scopeId","data-v-4c83e214"]]);var c=u},9594:function(e){"use strict";e.exports=JSON.parse('{"test":"TEST","initialize":"Initialize","reset_alarm":"Reset Alarm","buzzer_off":"Buzzer Off","cst-remove":"Remove CST","connection-states":"Connect Status","battery-level":"Battery Level","mileage":"Mileage","status":"Status","abnormal-record":"Abnormal Record","operation":"Operation","3d_model":"3D Model","Status_info":"Status Info","current_position":"Current Position","target_position":"Target Position","action_name":"Action Name","abormal":"Abnormal","carrier_id":"Carrier ID","agv_control":"AGV Control","zaxis_up_down":"Z-Axis Control","agv_control_notify_text":"Please log in and switch to Offline & Manual mode before operating the vehicle manually.","zaxis_control_notify_text":"Please log in and switch to Offline & Manual mode before operating the Z-axis and bypassing the Hardware Limited setting.","up_limit_pose":"UP Limit Position","down_limit_pose":"DOWN Limit Position","up":"UP","down":"DOWN","original":"ORIGINAL","stop":"Stop","cancel_init_action_notify":"Are you sure you want to cancel the initialization process?","start_init_action_notify_fork_has_loading":"Fork has cargo noew,Do you confirm to proceed with the initialization process? Once the initialization process starts, the Fork will descend. Please ensure that there are no goods on the Fork and check for any obstacles around the AGV.","start_init_action_notify":"Do you confirm to proceed with the initialization process? Once the initialization process starts, the Fork will descend. Please ensure that there are no goods on the Fork and check for any obstacles around the AGV.","charging_current":"Charging Current","wait_online_text":"AGV Online Process is running, Please wait...","refresh":"Refresh","clear_alarm_records":"Clear","backend_server_error":"Server Error","connecting":"Connecting...","agv-online":"AGV ON/OFFLine Switch","agv-online-alert":"AGV ONLINE?","agv-offline-alert":"AGV OFFLINE?","agv-auto-mode":"AGV Auto/Manual Switch","agv-auto-mode-alert":"AGV Auto Mode?","agv-manual-mode-alert":"AGV Manual Mode?","clear-alarm-data-confirm-text":"Clear Alarm History Data?"}')},6687:function(e){"use strict";e.exports=JSON.parse('{"test":"測試","initialize":"初始化","reset_alarm":"異常排除","buzzer_off":"蜂鳴器關閉","cst-remove":"移除卡匣","cst-remove-confirm-text":"確定要移除卡匣資料?","login":"登入","connection-states":"連線狀態","battery-level":"電量","mileage":"里程數","status":"狀態","abnormal-record":"異常紀錄","operation":"操作","3d_model":"3D 模型","Status_info":"狀態資訊","current_position":"目前位置","target_position":"目標位置","action_name":"動作名稱","abormal":"異常","carrier_id":"載物ID","agv_control":"車控","zaxis_up_down":"升降","agv_control_notify_text":"請先登入權限並Offline&Manual才可操作手動控車","zaxis_control_notify_text":"請先登入權限並Offline&Manual才可操作Z軸與by pass Hardware Limited設定","up_limit_pose":"上點位","down_limit_pose":"下點位","up":"上升","down":"下降","original":"原點","stop":"停止","cancel_init_action_notify":"確定要取消初始化動作?","start_init_action_notify_fork_has_loading":"Fork上有負載，確定要進行初始化動作? 初始化動作開始後 Fork 將會下降，請確認 AGV 周圍無障礙物","start_init_action_notify":"確定要進行初始化動作? 初始化動作開始後 Fork 將會下降,請確認 Fork上有無貨物，並確認 AGV 周圍無障礙物","start_init_action_notify_submarin_agv":"確定要進行初始化動作?","charging_current":"充電電流","wait_online_text":"AGV正在執行上下線請求，請稍後...","refresh":"重新整理","clear_alarm_records":"清除異常紀錄","backend_server_error":"後端服務器連線異常","connecting":"連線中","agv-online":"AGV上/下線確認","agv-online-alert":"確定要將AGV ONLINE?","agv-offline-alert":"確定要將AGV OFFLINE?","agv-auto-mode":"AGV 手動/自動模式切換確認","agv-auto-mode-alert":"確定要將AGV 切換為自動模式?","agv-manual-mode-alert":"確定要將AGV 切換為手動模式?","clear-alarm-data-confirm-text":"確定要清除異常紀錄?"}')}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,i){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],i=e[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(o=!1,i<r&&(r=i));if(o){e.splice(u--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,s){return a.f[s](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+(443===e?"about":e)+"."+{12:"c85318f2",371:"202acd3d",443:"f6e98ce8",461:"29d563d2",726:"44965753",911:"dfd244b8"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+"."+{12:"8cd19e79",371:"499beeff",461:"1fb75c21",726:"1b8375fb",911:"f94f3ece"}[e]+".css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="agvs_ui:";a.l=function(s,n,i,r){if(e[s])e[s].push(n);else{var o,l;if(void 0!==i)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+i){o=c;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+i),o.src=s),e[s]=[n];var m=function(t,a){o.onerror=o.onload=null,clearTimeout(h);var n=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(e){return e(a)})),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,s,n){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(a){if(i.onerror=i.onload=null,"load"===a.type)s();else{var r=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=r,l.request=o,i.parentNode&&i.parentNode.removeChild(i),n(l)}};return i.onerror=i.onload=r,i.href=t,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var n=a[s],i=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(i===e||i===t))return n}var r=document.getElementsByTagName("style");for(s=0;s<r.length;s++){n=r[s],i=n.getAttribute("data-href");if(i===e||i===t)return n}},s=function(s){return new Promise((function(n,i){var r=a.miniCssF(s),o=a.p+r;if(t(r,o))return n();e(s,o,null,n,i)}))},n={143:0};a.f.miniCss=function(e,t){var a={12:1,371:1,461:1,726:1,911:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=s(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,s){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var i=new Promise((function(a,s){n=e[t]=[a,s]}));s.push(n[2]=i);var r=a.p+a.u(t),o=new Error,l=function(s){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var i=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,n[1](o)}};a.l(r,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,r=s[0],o=s[1],l=s[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var u=l(a)}for(t&&t(s);d<r.length;d++)i=r[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},s=self["webpackChunkagvs_ui"]=self["webpackChunkagvs_ui"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(9401)}));s=a.O(s)})();
//# sourceMappingURL=app.0afa4784.js.map